{"docstore/data": {"9245bb40-0800-49bd-a1f5-4215a359c6c4": {"__data__": {"id_": "9245bb40-0800-49bd-a1f5-4215a359c6c4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6499aacfe5a2466f9e8e723d1fb48d8271b4dd58eafc2288e462ead1699f4996", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf078808-784c-4859-b8d3-8376c578590a", "node_type": "1", "metadata": {}, "hash": "2ae5ecba18c9f149e10ba6623309e2129c34664bf87dd9f56bed88433782aa49", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_dependency.h\"\n\n#include \"policy/policy_dependency.hpp\"\n#include \"xen_utils/scope_exit_guard.hpp\"\n\n#include \"pg/src/backend/catalog/permission.hpp\"\n#include \"pg/src/include/access/heapam.h\"\n#include \"pg/src/include/access/xact.h\"\n#include \"pg/src/include/catalog/catname.h\"\n#include \"pg/src/include/catalog/dependency.h\"\n#include \"pg/src/include/catalog/pg_class.h\"\n#include \"pg/src/include/postgres_ext.h\"\n#include \"pg/src/include/storage/lmgr.h\"\n#include \"pg/src/include/utils/rel.h\"\n\n#include <optional>\n\nbool IsDDMLookupObject(const ObjectAddress* object_reference) {\n  Relation pg_depend = heap_openr(DependRelationName, AccessShareLock);\n\n  policy::ObjectAddressSet visited;\n\n  bool is_lookup_obj = policy::IsReferencedByClassId(\n      pg_depend, object_reference, RelOid_pg_policy_mask, true /* recurse */,\n      std::nullopt /* deptype */, visited, true /* skip_stale_permissions */);\n  heap_close(pg_depend, AccessShareLock);\n  return is_lookup_obj;\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1054, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf078808-784c-4859-b8d3-8376c578590a": {"__data__": {"id_": "cf078808-784c-4859-b8d3-8376c578590a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6499aacfe5a2466f9e8e723d1fb48d8271b4dd58eafc2288e462ead1699f4996", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9245bb40-0800-49bd-a1f5-4215a359c6c4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e2b44288153e5cc9f53041beb64533217356fa877f06546f64950e41d054f3ed", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d9690d15-167a-4172-89a2-037689e769ff", "node_type": "1", "metadata": {}, "hash": "0b225e76c4c17055a31c5ac897d1fb3510be829935cc5b80344d8b9dc370dd1a", "class_name": "RelatedNodeInfo"}}, "text": "bool IsDDMTargetObject(const ObjectAddress* object_reference) {\n  Relation pg_depend = heap_openr(DependRelationName, AccessShareLock);\n\n  // Target dependencies are defined as direct dependencies of pg_permission.\n  // Note that every target dependency is an indirect dependency of pg_policy.\n  policy::ObjectAddressSet visited;\n\n  bool is_target_obj = policy::IsReferencedByClassId(\n      pg_depend, object_reference, RelOid_pg_permission, false /* recurse */,\n      DEPENDENCY_DDM, visited, true /* skip_stale_permissions */);\n  heap_close(pg_depend, AccessShareLock);\n  return is_target_obj;\n}\n\nbool IsDDMLookupRel(Oid relid) {\n  ObjectAddress obj = {RelOid_pg_class, relid, 0 /* objectSubId */};\n  return IsDDMLookupObject(&obj);\n}", "mimetype": "text/plain", "start_char_idx": 1056, "end_char_idx": 1792, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d9690d15-167a-4172-89a2-037689e769ff": {"__data__": {"id_": "d9690d15-167a-4172-89a2-037689e769ff", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6499aacfe5a2466f9e8e723d1fb48d8271b4dd58eafc2288e462ead1699f4996", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf078808-784c-4859-b8d3-8376c578590a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4ac55c703b3dd11c494c74ddd621e1690b4f6024fe3ff9228538b28e4e11789f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "52f49ca0-7cb7-4444-a1f4-1823b84ebcdb", "node_type": "1", "metadata": {}, "hash": "195c8ad4ff99308124d3bb0bbe8fffc589d70c19e18a9c1e9e65c2e4824432b8", "class_name": "RelatedNodeInfo"}}, "text": "bool IsDDMTargetRel(Oid relid) {\n  ObjectAddress obj = {RelOid_pg_class, relid, 0 /* objectSubId */};\n  Relation pg_depend = heap_openr(DependRelationName, AccessShareLock);\n\n  // Target dependencies are defined as direct dependencies of pg_permission.\n  // Note that every target dependency is an indirect dependency of pg_policy.\n  policy::ObjectAddressSet visited;\n\n  // In case of target relation dependency checks, we don't want a stale\n  // permission dependency. It will help in blocking the usage of stale target\n  // relations in CREATE POLICY statements.\n  bool is_target_obj = policy::IsReferencedByClassId(\n      pg_depend, &obj, RelOid_pg_permission, false /* recurse */,\n      DEPENDENCY_DDM, visited, false /* skip_stale_permissions */);\n  heap_close(pg_depend, AccessShareLock);\n  return is_target_obj;\n}", "mimetype": "text/plain", "start_char_idx": 1794, "end_char_idx": 2614, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52f49ca0-7cb7-4444-a1f4-1823b84ebcdb": {"__data__": {"id_": "52f49ca0-7cb7-4444-a1f4-1823b84ebcdb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6499aacfe5a2466f9e8e723d1fb48d8271b4dd58eafc2288e462ead1699f4996", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d9690d15-167a-4172-89a2-037689e769ff", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6736d3448d5dc34458c9f2c91cd18ec3ce56a93411c7cb3bae193a20e20d9e72", "class_name": "RelatedNodeInfo"}}, "text": "void UndoDDMGrant(const Oid permission_id) {\n  Relation pg_permission_users =\n      heap_openr(PermissionUsersRelationName, RowExclusiveLock);\n  SCOPE_EXIT_GUARD(relation_close(pg_permission_users, RowExclusiveLock));\n\n  Relation pg_user_permission =\n      heap_openr(UserPermissionRelationName, RowExclusiveLock);\n  SCOPE_EXIT_GUARD(relation_close(pg_user_permission, RowExclusiveLock));\n\n  Relation pg_permission_roles =\n      heap_openr(PermissionRolesRelationName, RowExclusiveLock);\n  SCOPE_EXIT_GUARD(relation_close(pg_permission_roles, RowExclusiveLock));\n\n  Relation pg_role_permission =\n      heap_openr(RolePermissionRelationName, RowExclusiveLock);\n  SCOPE_EXIT_GUARD(relation_close(pg_role_permission, RowExclusiveLock));\n\n  // Revoke each permission from all the assigned users and roles.\n  RevokePermRoles(permission_id, pg_permission_roles, pg_role_permission);\n  RevokePermUsers(permission_id, pg_permission_users, pg_user_permission);\n\n  // Apply the changes to those catalog tables.\n  CommandCounterIncrement();\n}", "mimetype": "text/plain", "start_char_idx": 2616, "end_char_idx": 3647, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c927a18-2ffb-47e0-a4b6-db0edc2bc979": {"__data__": {"id_": "5c927a18-2ffb-47e0-a4b6-db0edc2bc979", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "68a46f5a-4b58-4621-b10f-653010848c31", "node_type": "1", "metadata": {}, "hash": "dc99fc6626cce7524976fef4dd418656f8ed548136363cc48fcf3c2ea542acc1", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_lf_alp.hpp\"\n\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"external_catalog/table_registry.hpp\"\n#include \"federation/FederatedSnapshotManager.hpp\"\n#include \"nested_fe/nested_query_api.h\"\n#include \"nodes/makefuncs.h\"\n#include \"parser/parse_relation.h\"\n#include \"parser/parsetree.h\"\n#include \"policy/policy_utils.hpp\"\n#include \"tcop/tcopprot.h\"\n#include \"utils/lsyscache.h\"\n#include \"xen_utils/xen_except.h\"\n\n#include <boost/algorithm/string.hpp>\n\n#include <algorithm>\n#include <iomanip>\n#include <memory>\n#include <unordered_set>\n#include <utility>\n#include <vector>\n\nextern bool gconf_enable_lf_alp;\nextern bool gconf_enable_lf_alp_var_optimization;\nextern bool gconf_spectrum_enable_lf_data_filters;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 818, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68a46f5a-4b58-4621-b10f-653010848c31": {"__data__": {"id_": "68a46f5a-4b58-4621-b10f-653010848c31", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c927a18-2ffb-47e0-a4b6-db0edc2bc979", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1f9615e6df23ecb0133279855801a701b5b58b347b2262504d5d0c0fac0693a0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "42233464-548a-4e90-b88e-f988dbb6b852", "node_type": "1", "metadata": {}, "hash": "f7e854e07d34beecb38a97f1c6f8b5e0ff12b6be3136952993286c662f29d9e4", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm", "mimetype": "text/plain", "start_char_idx": 820, "end_char_idx": 833, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42233464-548a-4e90-b88e-f988dbb6b852": {"__data__": {"id_": "42233464-548a-4e90-b88e-f988dbb6b852", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68a46f5a-4b58-4621-b10f-653010848c31", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "476920cef60cfa8fb7ef3a73ec3193eab1b445a5e035927e539f08a97af53f61", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c9fec90-f031-4b0c-8fc8-0339bcc0c7c9", "node_type": "1", "metadata": {}, "hash": "d12112c757ce462d96482979e98dc7085ffded27f3e2af7534e290f9123adc17", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n// Flags used for the VarLevelALPWalker. We specifically do not let the walker\n// walk into non-RLS subqueries since we need to adjust the context for it.\nconst unsigned int kVarLevelALPWalkerFlag =\n    QTW_WALK_RELATIONS | QTW_WALK_RLS_SUBQUERIES;\n\nbool HasLakeFormationALPForRTE(const RangeTblEntry* rte) {\n  if (!gconf_enable_lf_alp) return false;\n\n  char* db_name = nullptr;\n  char* ns_name = nullptr;\n  char* rel_name = nullptr;\n\n  if (!IsLfManagedRelation(rte, &db_name, &ns_name, &rel_name)) {\n    // Not a datasharing relation accessed via LF.\n    return false;\n  }\n\n  XCHECK(db_name != nullptr, LF_ALP_CALLER);\n  XCHECK(ns_name != nullptr, LF_ALP_CALLER);\n  XCHECK(rel_name != nullptr, LF_ALP_CALLER);\n\n  return fsmutils::GetAuthorizedNestedPaths(db_name, ns_name, rel_name,\n                                            true /* found_only */)\n      .first;\n}", "mimetype": "text/plain", "start_char_idx": 834, "end_char_idx": 1703, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c9fec90-f031-4b0c-8fc8-0339bcc0c7c9": {"__data__": {"id_": "3c9fec90-f031-4b0c-8fc8-0339bcc0c7c9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "42233464-548a-4e90-b88e-f988dbb6b852", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d500e51a098972c18750b4b2cd12cea0d1b899710d58284721906301dce5ee95", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e3df1c42-4f08-4cfc-addb-e806ceb8f7aa", "node_type": "1", "metadata": {}, "hash": "4938dc9685fffd7c45ba81f516c0996c3d004820fe72c4f70b5f23b26d031fe8", "class_name": "RelatedNodeInfo"}}, "text": "std::optional<LFALPPolicy> GetLakeFormationALPForRTE(const RangeTblEntry* rte) {\n  if (!gconf_enable_lf_alp) return std::nullopt;\n\n  char* db_name = nullptr;\n  char* ns_name = nullptr;\n  char* rel_name = nullptr;\n\n  if (!IsLfManagedRelation(rte, &db_name, &ns_name, &rel_name)) {\n    // Not a datasharing relation accessed via LF.\n    return std::nullopt;\n  }\n\n  XCHECK(db_name != nullptr, LF_ALP_CALLER);\n  XCHECK(ns_name != nullptr, LF_ALP_CALLER);\n  XCHECK(rel_name != nullptr, LF_ALP_CALLER);\n\n  auto [found, lf_alp_policy] =\n      fsmutils::GetAuthorizedNestedPaths(db_name, ns_name, rel_name);\n\n  return found ? lf_alp_policy\n               : static_cast<std::optional<LFALPPolicy>>(std::nullopt);\n}", "mimetype": "text/plain", "start_char_idx": 1705, "end_char_idx": 2410, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e3df1c42-4f08-4cfc-addb-e806ceb8f7aa": {"__data__": {"id_": "e3df1c42-4f08-4cfc-addb-e806ceb8f7aa", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c9fec90-f031-4b0c-8fc8-0339bcc0c7c9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "96f6ada999bd68ac22a2d6d2580e1b9e6df8699e7ba709cabf8976635e129d24", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f61a2cff-604d-49d5-ad21-e959f78d27ae", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "void AddLakeFormationALPToDDMMap(\n    MaskMap* masks, LFALPPolicy policy,\n    const std::unordered_set<std::string_view>& alp_obj_transform_columns)", "mimetype": "text/plain", "start_char_idx": 2412, "end_char_idx": 2560, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f61a2cff-604d-49d5-ad21-e959f78d27ae": {"__data__": {"id_": "f61a2cff-604d-49d5-ad21-e959f78d27ae", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e3df1c42-4f08-4cfc-addb-e806ceb8f7aa", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ea5c87fa488baa314046a0bbeeeac557a58b8d0673c077c2e6e79239d4ebc85f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a09e8da6-d20c-4b21-bf74-0091b505402f", "node_type": "1", "metadata": {}, "hash": "81530c0fdbe1d861bf097c9c12de3e526ffd29239751b832b2d5e60467850c81", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 834, "end_char_idx": 835, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a09e8da6-d20c-4b21-bf74-0091b505402f": {"__data__": {"id_": "a09e8da6-d20c-4b21-bf74-0091b505402f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f61a2cff-604d-49d5-ad21-e959f78d27ae", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3fb7a9e28ad6a440edaee3db6eed1a6add0951d7953233db4c3898bf82758f24", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "475b7cad-0a4a-43c1-ab54-e134f78451b4", "node_type": "1", "metadata": {}, "hash": "755d4aa953494a7f03d390149fb1dee4ad09e77029f7d975d075a4e73ca888cf", "class_name": "RelatedNodeInfo"}}, "text": "for (auto&& [column, path_set] : policy)", "mimetype": "text/plain", "start_char_idx": 2565, "end_char_idx": 2605, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "475b7cad-0a4a-43c1-ab54-e134f78451b4": {"__data__": {"id_": "475b7cad-0a4a-43c1-ab54-e134f78451b4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a09e8da6-d20c-4b21-bf74-0091b505402f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "23ed51be599f317fa39f488a1a113f7b712957c2d60abc5bfa2c0acd8675e74d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "270edb30-914b-4449-bd65-98bacfc6d402", "node_type": "1", "metadata": {}, "hash": "3fc8f6839478be010f8d089a4cb864df15f841e5f744a28e638b814455bd8756", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // XCHECK column format (surrounding quotes).\n    XCHECK(column[0] == '\\\"' && column[column.size() - 1] == '\\\"',\n           LF_ALP_CALLER);\n    // Extract the values dropping quotes.\n    std::string column_unquoted = column.substr(1, column.size() - 2);\n\n    if (gconf_enable_lf_alp_var_optimization) {\n      // As an optimization we have visited all SUPER variables that have LF-ALP\n      // on them before DDM rewrite. We have collected the variables here whose\n      // references (navigation paths) could not be evaluated into ALLOW or DENY\n      // (i.e., complex projections). It's only for them that we need to apply\n      // OBJECT_TRANSFORM.\n      if (alp_obj_transform_columns.find(column_unquoted) ==\n          alp_obj_transform_columns.end())\n        continue;\n    }\n\n    std::vector<std::string> paths;\n    std::vector<std::string_view> stack;\n    PathSetView(path_set).Export(&paths, &stack);\n\n    // Keeping rewrites deterministic.\n    std::sort(paths.begin(), paths.end());\n\n    // Don't forget to escape. We trust the LF... to an extent.\n    std::stringstream ss;\n    ss << \"SELECT \"\n       << \"OBJECT_TRANSFORM(\\\"\" << MASK_PSEUDO_TBL << \"\\\".\"\n       << std::quoted(column_unquoted, '\\\"', '\\\"') << \" KEEP \";\n    for (size_t i = 0; i < paths.size(); i++) {\n      ss << std::quoted(paths[i], '\\'', '\\\\');\n      if (i != paths.size() - 1) ss << \", \";\n    }\n    ss << \")\";\n\n    List* parsetree_list = ParseQuery(ss.str().c_str(), LOG_TAG_LF_ALP);", "mimetype": "text/plain", "start_char_idx": 2606, "end_char_idx": 4071, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "270edb30-914b-4449-bd65-98bacfc6d402": {"__data__": {"id_": "270edb30-914b-4449-bd65-98bacfc6d402", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "475b7cad-0a4a-43c1-ab54-e134f78451b4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9a0069fcdd67c5beb8368b0bd7b30f93171cb772753c637309edb26b34f537d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ae047793-00fa-4b93-9b3d-0b7421b13c8b", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "XCHECK(list_length(parsetree_list) == 1, LF_ALP_CALLER);\n    SelectStmt* q = reinterpret_cast<SelectStmt*>(linitial(parsetree_list));\n\n    XCHECK(q->targetList != nullptr, DDM_CALLER);\n    XCHECK(list_length(q->targetList) == 1, DDM_CALLER);\n    ResTarget* rtgt =\n        copyObject(reinterpret_cast<ResTarget*>(linitial(q->targetList)));\n    std::shared_ptr<ResTarget> rtgt_ptr(rtgt, PAlloc_deleter());\n    safe_pfree(q);\n\n    // Safe to insert since LF-ALP and DDM are mutually exclusive per RTE.\n    masks->insert({column_unquoted,\n                   {MergeEntry{rtgt_ptr, MAX_INT4 /* priority */,\n                               nullptr /* attachment */, column_unquoted,\n                               std::nullopt /* nested_path */}}});\n  }", "mimetype": "text/plain", "start_char_idx": 4076, "end_char_idx": 4821, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ae047793-00fa-4b93-9b3d-0b7421b13c8b": {"__data__": {"id_": "ae047793-00fa-4b93-9b3d-0b7421b13c8b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "270edb30-914b-4449-bd65-98bacfc6d402", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "27d999d0247649bfdecb027ceeffd6e1ebb2bb13cdaf3ff23d2212b3b39e7f52", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3528d51-2ad4-4015-8b6f-5b33adfdb788", "node_type": "1", "metadata": {}, "hash": "ff83baa88bfa843cafab39f96e2b16434a04ca3f7433ddd1f4ddf61917c265fe", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 1409, "end_char_idx": 1410, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3528d51-2ad4-4015-8b6f-5b33adfdb788": {"__data__": {"id_": "b3528d51-2ad4-4015-8b6f-5b33adfdb788", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ae047793-00fa-4b93-9b3d-0b7421b13c8b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d6d83bec222a749f3704610d69a03efafa5c25c7059f3979941027c06f18b877", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "67cb593d-2584-4af7-94e9-abf744423f71", "node_type": "1", "metadata": {}, "hash": "702c30000a794dc745b6d47cfa30bfd9cbb4b78288653effc30a5d2f975ed502", "class_name": "RelatedNodeInfo"}}, "text": "const external_catalog::Column& OriginalNestedColumnForExternalNestedRTEVar(\n    const RangeTblEntry* rte, const Var* var) {\n  XCHECK(var->vartype == PARTIQLOID);\n  XCHECK(var->varoattno > 0);\n  XCHECK(rte->nested_subquery != NULL);\n  const external_catalog::Table& table =\n      external_catalog::TableRegistry::GetTable(rte->external_table_id);\n  const external_catalog::Column& column =\n      table.getColumnForIntPathElement(var->varoattno - 1);\n  // PartiQL OIDs over external tables can only reference complex types\n  // (struct/array/map).\n  XCHECK(column.original_type().IsComplexType());\n  return column;\n}", "mimetype": "text/plain", "start_char_idx": 4825, "end_char_idx": 5440, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "67cb593d-2584-4af7-94e9-abf744423f71": {"__data__": {"id_": "67cb593d-2584-4af7-94e9-abf744423f71", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3528d51-2ad4-4015-8b6f-5b33adfdb788", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "410fa6162c23f148478ef3ff29be73eb86dfd7fa1e1e2c9bf4588d58cb2c92d6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c28d7e86-efe3-4f21-bc24-430f855dba55", "node_type": "1", "metadata": {}, "hash": "69a70c5c513127660f3dc0c354e9b59fcf1e02a4d3edfeb3c0a6ffce24bbb986", "class_name": "RelatedNodeInfo"}}, "text": "bool WalkNestedVar(Var* var, VarLevelALPWalkerCtx* context)", "mimetype": "text/plain", "start_char_idx": 5442, "end_char_idx": 5501, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c28d7e86-efe3-4f21-bc24-430f855dba55": {"__data__": {"id_": "c28d7e86-efe3-4f21-bc24-430f855dba55", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67cb593d-2584-4af7-94e9-abf744423f71", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0c788d3e653245b521cbcfc440b06b0b9eb6bff0c12ab66217366133d7d01c57", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e652b2f3-43a7-410e-a620-edcefef834ca", "node_type": "1", "metadata": {}, "hash": "dba3c977bb1ef3fb7a6538048efd78de4b5554e350711763a67e9e1538593dca", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // Note here there may or may not be a navigation path. Even if there is not\n  // (complex projection), we may need to apply ALP.\n  if (var->vartype != PARTIQLOID) return false;\n\n  // Ensure RTable is stored in the stack for the variable.\n  XCHECK(var->varlevelsup < context->rtables.size(), LF_ALP_CALLER);\n  RangeTblEntry* rte = rt_fetch(\n      var->varno,\n      context->rtables[context->rtables.size() - var->varlevelsup - 1]);\n\n  const Oid relid = GetRelationRelid(rte);\n  // This can happen for non-view subqueries, JOIN subqueries, etc. In such case\n  // we know such variable is not a column of a protected relation.\n  if (!OidIsValid(relid)) return false;\n\n  // Use cache in context to lookup LF-ALP possible for the RTE (by its OID).\n  auto obj_transform_alp_columns_rel_map_it =\n      context->obj_transform_alp_columns_rel_map.find(relid);\n  if (obj_transform_alp_columns_rel_map_it ==\n      context->obj_transform_alp_columns_rel_map.end()) {\n    context->obj_transform_alp_columns_rel_map[relid] = {\n        GetLakeFormationALPForRTE(rte), /* obj_transform_alp_columns */ {}};\n  }\n  // Note that the object is not allocated, but merely referenced.\n  ObjTransformAlpColumnsCtx* obj_transform_alp_columns_ctx =\n      &context->obj_transform_alp_columns_rel_map[relid];\n\n  // No policy, no problem.\n  if (!obj_transform_alp_columns_ctx->lf_alp_policy) return false;\n\n  // We need a real name of the column to look it up in the policy.", "mimetype": "text/plain", "start_char_idx": 5502, "end_char_idx": 6951, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e652b2f3-43a7-410e-a620-edcefef834ca": {"__data__": {"id_": "e652b2f3-43a7-410e-a620-edcefef834ca", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c28d7e86-efe3-4f21-bc24-430f855dba55", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ace237a38491e3a2df1dfd2010cc674d54ed394b2464310a226d89d6dc752774", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dfb3623f-7293-4f31-95a9-9fce2466e46c", "node_type": "1", "metadata": {}, "hash": "baee5b4bc946cca63d8e5d61a81e7924aa8cd356882dbb13d844f492df1dbb95", "class_name": "RelatedNodeInfo"}}, "text": "std::string_view varname = policy::ColumnNameForRTEVar(rte, var);\n  // A name can be empty in case of dropped column.\n  if (varname.size() == 0) return false;\n\n  const bool is_nested_spectrum_isolated_relation =\n      external_catalog::TableRegistry::HasTable(rte->external_table_id) &&\n      (rte->nested_subquery != NULL);\n  std::stringstream localized_ss_name;\n  localized_ss_name << std::quoted(std::string(varname), '\\\"', '\\\"');\n  // If this refers to an external isolated nested table. In this case, we\n  // lookup the original column names from the external table registry, as the\n  // relation's attribute attname refers to a temporary localized one.", "mimetype": "text/plain", "start_char_idx": 6954, "end_char_idx": 7612, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dfb3623f-7293-4f31-95a9-9fce2466e46c": {"__data__": {"id_": "dfb3623f-7293-4f31-95a9-9fce2466e46c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e652b2f3-43a7-410e-a620-edcefef834ca", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3adfe9459c7a6b8f551d5a7e6da63017e73ec6398a679ddd98da34927b245a57", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73edc49a-a90a-4b6f-80fb-ee14b4b1d42e", "node_type": "1", "metadata": {}, "hash": "41711f48c1a037a86cc5f26afcee178440cd507445767d3c8ec4c8a94193bac9", "class_name": "RelatedNodeInfo"}}, "text": "if (is_nested_spectrum_isolated_relation) {\n    const external_catalog::Column& original_ext_col =\n        OriginalNestedColumnForExternalNestedRTEVar(rte, var);\n    if (original_ext_col.original_type().IsCollectionType()) {\n      // LF-ALP is only supported over complex STRUCT types. In case of\n      // collection types (array/map), we short circuit here. Authorized paths\n      // within collection types are guaranteed to fail when parsing the\n      // authorized paths.\n      return false;\n    }\n    // Lake Formation is guaranteed to escape special characters. This string\n    // is not used or injected in the rewrite logic. It is only used to map the\n    // appropriate localized column name (in the isolated localized nested\n    // table), to the corresponding LF ALP policy.\n    std::string original_name = \"\\\"\" + original_ext_col.name() + \"\\\"\";\n    // In this case, we need to reconstruct the `lf_alp_policy_opt` with the\n    // modified keys referring to the original column name.\n    LFALPPolicy& lf_alp_policy = *obj_transform_alp_columns_ctx->lf_alp_policy;\n    if (lf_alp_policy.find(original_name) == lf_alp_policy.end()) {\n      return false;\n    }\n    PathSet& pathset = lf_alp_policy[original_name];\n    lf_alp_policy.insert({localized_ss_name.str(), std::move(pathset)});\n  }\n  // Exit if this column is not ALPed in this RTE.\n  auto pathsets_it = obj_transform_alp_columns_ctx->lf_alp_policy->find(\n      localized_ss_name.str());", "mimetype": "text/plain", "start_char_idx": 7615, "end_char_idx": 9068, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73edc49a-a90a-4b6f-80fb-ee14b4b1d42e": {"__data__": {"id_": "73edc49a-a90a-4b6f-80fb-ee14b4b1d42e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dfb3623f-7293-4f31-95a9-9fce2466e46c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5c5ee9945bd5105f777865f97e3b36f0ba17dd927ed08e9a745f71ec964ab226", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a3de67d6-528b-4ed2-8170-0aac0c1c7e53", "node_type": "1", "metadata": {}, "hash": "69e89c1ad386adece3b0774dbb5bd8a724cc7430e8fe3e9c01b32c18907703d0", "class_name": "RelatedNodeInfo"}}, "text": "if (pathsets_it == obj_transform_alp_columns_ctx->lf_alp_policy->end()) {\n    return false;\n  }", "mimetype": "text/plain", "start_char_idx": 9071, "end_char_idx": 9166, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a3de67d6-528b-4ed2-8170-0aac0c1c7e53": {"__data__": {"id_": "a3de67d6-528b-4ed2-8170-0aac0c1c7e53", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73edc49a-a90a-4b6f-80fb-ee14b4b1d42e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "cb0dc12a2629a64deef7a4f1d0d6e19fcc33bf5a9528be32d3e5fbdbd4a49df0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "332d62c6-3118-45a1-b8a7-b34cbe7b160c", "node_type": "1", "metadata": {}, "hash": "994af036c9b23a3a235e952a07d045a27004bc6f0a9ca64a2b86550dda47c9f2", "class_name": "RelatedNodeInfo"}}, "text": "if (gconf_enable_lf_alp_var_optimization)", "mimetype": "text/plain", "start_char_idx": 2871, "end_char_idx": 2912, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "332d62c6-3118-45a1-b8a7-b34cbe7b160c": {"__data__": {"id_": "332d62c6-3118-45a1-b8a7-b34cbe7b160c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a3de67d6-528b-4ed2-8170-0aac0c1c7e53", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "95cc5cfd28cc1e00584e86b7c5258f81922093b7428c01823d43b75bba07dab6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "821689d6-9a72-4ee6-a289-a699df207061", "node_type": "1", "metadata": {}, "hash": "67ebd2b60b8e8b38f12388dced7b1feb657325cfbe88c34d00e8a18f76f2557f", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // Collect navigation path component by component.\n    std::vector<std::string_view> components;\n    ListCell* lc = nullptr;\n    foreach(lc, var->partiql_path) {\n      PartiQLPathElement* path_el =\n          reinterpret_cast<PartiQLPathElement*>(lfirst(lc));\n      if (path_el->path_step_type == PARTIQL_PATH_STEP_OBJECT) {\n        XCHECK(IsA(path_el->element, String));\n        components.push_back(strVal(path_el->element));\n      } else {\n        // Treat PARTIQL_PATH_STEP_ARRAY as complex projection.\n        break;\n      }\n    }\n\n    // Decide what to do for the navigation path.\n    PathSet::PathMembership membership =\n        pathsets_it->second.CheckPathMembership(components);", "mimetype": "text/plain", "start_char_idx": 9212, "end_char_idx": 9905, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "821689d6-9a72-4ee6-a289-a699df207061": {"__data__": {"id_": "821689d6-9a72-4ee6-a289-a699df207061", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "332d62c6-3118-45a1-b8a7-b34cbe7b160c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9e8519a644be96cf9b3eba6723413ca17d6211008328007cbbacd7466cb0459a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41917d8a-aab7-4a09-a0ae-3bc5bc865e78", "node_type": "1", "metadata": {}, "hash": "1b93337b186d3597bc45ca906049919063d1c5f96f8f55216a9c8d4f59b7fe22", "class_name": "RelatedNodeInfo"}}, "text": "switch (membership) {\n      case PathSet::PathMembership::kContainedFully:\n        // Navigation path is authorized.\n        break;\n      case PathSet::PathMembership::kNotContained: {\n        // Navigation path is unauthorized. Despite knowing the failed\n        // navigation path we report a more generic message to exactly match the\n        // NRW. For now the only RTE that can be here is a localized Spectrum\n        // table, but for future proofness, if it's not, we derive it's name\n        // normally.\n        char* relation_name = nullptr;\n        if (rte->nested_subquery) {\n          relation_name =\n              const_cast<char*>(getNestedTableName(rte->external_table_id));\n        } else {\n          relation_name = rte->external_tablename != nullptr\n                              ? rte->external_tablename\n                              : get_rel_name(relid);\n        }\n        aclcheck_error(ACLCHECK_NO_PRIV, ACL_KIND_CLASS, relation_name);\n      } break;\n      case PathSet::PathMembership::kContainedPartially: {\n        // Navigation path results in a complex project where there are\n        // authorized (and therefore possibly unauthorized paths). Mark for\n        // OBJECT_TRANSFORM.\n        obj_transform_alp_columns_ctx->obj_transform_alp_columns.insert(\n            varname);\n      } break;\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 9910, "end_char_idx": 11241, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "41917d8a-aab7-4a09-a0ae-3bc5bc865e78": {"__data__": {"id_": "41917d8a-aab7-4a09-a0ae-3bc5bc865e78", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "821689d6-9a72-4ee6-a289-a699df207061", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a289f250430510e64bc7f5178b6b2d30f731e018e8474fe360bf0723a4ebf4e3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "269e7645-0ed9-4648-9840-f6fb08990d19", "node_type": "1", "metadata": {}, "hash": "6fc4bee6a771b8910e7c2897ae892a49047c9850fc9bb7493df83cc514a75441", "class_name": "RelatedNodeInfo"}}, "text": "return false;\n}", "mimetype": "text/plain", "start_char_idx": 11244, "end_char_idx": 11259, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "269e7645-0ed9-4648-9840-f6fb08990d19": {"__data__": {"id_": "269e7645-0ed9-4648-9840-f6fb08990d19", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41917d8a-aab7-4a09-a0ae-3bc5bc865e78", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d82dbc3f33aa6a4ae9d30cdc8b963e4eaaf6a572605c84991ba0406dc376d29e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dc64592d-fee2-484e-a6fd-9f59e8662fc9", "node_type": "1", "metadata": {}, "hash": "07a8f2612f655fa076f7e83adf8498a400cb8f81f0e09fa36fb70a40c239a3ea", "class_name": "RelatedNodeInfo"}}, "text": "bool VarLevelALPWalker(Node* node, void* context) {\n  if (node == nullptr) return false;\n\n  VarLevelALPWalkerCtx* ctx = reinterpret_cast<VarLevelALPWalkerCtx*>(context);\n\n  // Don't use query_tree_walker for walking into subqueries because we need to\n  // set and restore context upon descend into subquery.\n  if (IsA(node, RangeTblEntry)) {\n    RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(node);\n    // Don't care what RTE type it is. As long as it has subquery, we descend\n    // into it.\n    if (rte->subquery != nullptr) {\n      ctx->rtables.push_back(rte->subquery->rtable);\n      query_tree_walker(reinterpret_cast<Query*>(rte->subquery),\n                        VarLevelALPWalker, context, kVarLevelALPWalkerFlag);\n      ctx->rtables.pop_back();\n    }\n    return false;\n  }\n\n  // Query node is specifically not handled by the expression_tree_walker.\n  if (IsA(node, Query)) {\n    ctx->rtables.push_back(reinterpret_cast<Query*>(node)->rtable);\n    query_tree_walker(reinterpret_cast<Query*>(node), VarLevelALPWalker,\n                      context, kVarLevelALPWalkerFlag);\n    ctx->rtables.pop_back();\n    return false;\n  }\n\n  if (IsA(node, Var)) {\n    return WalkNestedVar(reinterpret_cast<Var*>(node), ctx);\n  }\n  return expression_tree_walker(node, VarLevelALPWalker, ctx);\n}", "mimetype": "text/plain", "start_char_idx": 11261, "end_char_idx": 12556, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc64592d-fee2-484e-a6fd-9f59e8662fc9": {"__data__": {"id_": "dc64592d-fee2-484e-a6fd-9f59e8662fc9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "269e7645-0ed9-4648-9840-f6fb08990d19", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d918bb0fd477a4e8f47621806722f4029d779a705daa5807c5d940cbe9e2db2a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c8d7b23-252f-4342-a740-46c77be2531f", "node_type": "1", "metadata": {}, "hash": "46fdaf0ab8548fdb74cf5b8d27a2a683f308fa90256eabb79cede87f803c109f", "class_name": "RelatedNodeInfo"}}, "text": "ObjTransformAlpColumnsRelationMap WalkVarLevelALP(Query* query) {\n  // We only walk through the ALP Var walker, if LF-ALP over Spectrum or LF-ALP\n  // optimizations are enabled. If LF-ALP is disabled, or none of the above are\n  // enabled, then return an empty map for the object transformation context.\n  const bool alp_walker_eligibility =\n      gconf_enable_lf_alp && (gconf_spectrum_enable_lf_data_filters ||\n                              gconf_enable_lf_alp_var_optimization);\n  if (!alp_walker_eligibility) return ObjTransformAlpColumnsRelationMap();\n\n  VarLevelALPWalkerCtx context;\n  context.query = query;\n  context.rtables.push_back(query->rtable);\n  query_tree_walker(query, VarLevelALPWalker, &context, kVarLevelALPWalkerFlag);\n  return context.obj_transform_alp_columns_rel_map;\n}\n\n}", "mimetype": "text/plain", "start_char_idx": 12558, "end_char_idx": 13354, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c8d7b23-252f-4342-a740-46c77be2531f": {"__data__": {"id_": "0c8d7b23-252f-4342-a740-46c77be2531f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4333a828-4e33-4f01-b126-6ae6c52c135c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5492b50adc5a9f9d5e6f1140946dec414387f3843e15d51a4b366eec2ddfc080", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dc64592d-fee2-484e-a6fd-9f59e8662fc9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a81dfb310468f15fa6edfa908939f544ce4c30e7ce5dd2d02a36973a59ccf771", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm", "mimetype": "text/plain", "start_char_idx": 13356, "end_char_idx": 13372, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a5a35155-e0b0-457c-ad59-0ff23020bd07": {"__data__": {"id_": "a5a35155-e0b0-457c-ad59-0ff23020bd07", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac695dc9-118e-469a-9ca6-52c473b773a0", "node_type": "1", "metadata": {}, "hash": "dc99fc6626cce7524976fef4dd418656f8ed548136363cc48fcf3c2ea542acc1", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_over_nested.hpp\"\n\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"fmgroids.h\"  // NOLINT(build/include_subdir)\n#include \"nodes/makefuncs.h\"\n#include \"omnisql/omnisql_view.h\"\n#include \"parser/analyze.h\"\n#include \"parser/parse_type.h\"\n#include \"parser/parsetree.h\"\n#include \"partiql/partiql.h\"\n#include \"policy/policy_utils.hpp\"\n#include \"tcop/tcopprot.h\"\n#include \"utils/builtins.h\"\n\n#include <algorithm>\n#include <set>\n\nextern bool gconf_ddm_enable_over_super_paths;\nextern bool gconf_ddm_enable_perm_check;\nextern bool g_pgtest_ddm;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 649, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ac695dc9-118e-469a-9ca6-52c473b773a0": {"__data__": {"id_": "ac695dc9-118e-469a-9ca6-52c473b773a0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a5a35155-e0b0-457c-ad59-0ff23020bd07", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "75a7874725d1ab76e09c85ecfa7b4b8a121c5578ad2d33575d6510f44839bc2b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b58d641c-e492-456f-8da5-2811ddba2e21", "node_type": "1", "metadata": {}, "hash": "cd6b3049263baa4da2895deb7dc922666589d56067b4f0a985395837189f80ce", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm", "mimetype": "text/plain", "start_char_idx": 651, "end_char_idx": 664, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b58d641c-e492-456f-8da5-2811ddba2e21": {"__data__": {"id_": "b58d641c-e492-456f-8da5-2811ddba2e21", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ac695dc9-118e-469a-9ca6-52c473b773a0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9386b6b8c2d58e340a79a42307f59fb6ae18ab0330b8c0c802cb4a0259858348", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5d727f2-dbcd-4625-926e-3fc9a484ad87", "node_type": "1", "metadata": {}, "hash": "386367b287bac7e64b5fbfbe48f09fb1cee31438d7d77ef0aec7a65ecfc63e0b", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n/// @brief Does a cache lookup (including loading to cache if not found) for the\n/// mask map for RTE (by it's rel ID).\nMaskMap GetMasksFromCache(MaskMapsCache* mask_maps_cache, Oid rte_relid);\n\n/// @brief A helper mutator for the Var that looks for Var that are policy\n/// arguments and sets their varno and varlevelsup (i.e., their RTable pointers)\n/// to the proper RTable pointed to by `var` argument (the original Var).\nbool VarAdjustMutator(Node* node, void* context);\n\n/// @brief A helper to build an expression from ResTarget mask for the given RTE\n/// and the nested variable. The reason we can't plug the mask node \"as is\" is\n/// because ResTarget is a parse node, while we need query node expresion. This\n/// function is trimmed down version of BuildSubQueryForRel. Resulting\n/// expression is plugable instead of the Var to be masked.\nExpr* BuildExpressionForNestedPolicy(RangeTblEntry* rte, std::string varname,\n                                     Var* var, ResTarget* mask);", "mimetype": "text/plain", "start_char_idx": 665, "end_char_idx": 1657, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5d727f2-dbcd-4625-926e-3fc9a484ad87": {"__data__": {"id_": "d5d727f2-dbcd-4625-926e-3fc9a484ad87", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b58d641c-e492-456f-8da5-2811ddba2e21", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fe4fa5215c2a6fbeca0c0fedd02afb3dbb030d746ad77278060fd4c19789271c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "202658c2-1fa9-43ce-9c07-897999932c28", "node_type": "1", "metadata": {}, "hash": "c7858271efbf41eff660fb94252988ee74b4c746682612be8245436b4d721bab", "class_name": "RelatedNodeInfo"}}, "text": "MinMaxExpr* MakeObjectTransform(std::vector<MergeEntry> entries,\n                                std::string input) {\n  if (g_pgtest_ddm) {\n    // Enforce unambiguous ordering for determinism and testing.\n    std::sort(entries.begin(), entries.end(), [](MergeEntry a, MergeEntry b) {\n      return *a.nested_path < *b.nested_path;\n    });\n  }\n\n  ColumnRef* input_node = makeNode(ColumnRef);\n  input_node->oraclePlus = false;\n  input_node->fields = list_make1(makeString(pstrdup(input.c_str())));\n\n  List* set_args = NIL;\n  for (const MergeEntry& entry : entries) {\n    Type const_type = typeidType(VARCHAROID);\n    XCHECK(entry.nested_path->size() <\n           std::numeric_limits<int32>::max() - VARHDRSZ);\n    int32 typmod = entry.nested_path->size() + VARHDRSZ;\n    Datum path_datum = DirectFunctionCall3(varcharin,\n                          CStringGetDatum(pstrdup(entry.nested_path->c_str())),\n                          ObjectIdGetDatum(InvalidOid),\n                          typmod);\n    Const* path = makeConst(VARCHAROID, typeLen(const_type), path_datum,\n                            false /* constisnull */, typeByVal(const_type));\n    set_args = lappend(set_args, path);\n    set_args = lappend(set_args, copyObject(entry.rtgt->val));\n  }\n\n  MinMaxExpr* ot_node = makeNode(MinMaxExpr);\n  ot_node->op = IS_OBJECT_TRANSFORM;\n  ot_node->args = list_make3(input_node, NIL /* KEEP args */, set_args);\n\n  return ot_node;\n}", "mimetype": "text/plain", "start_char_idx": 1659, "end_char_idx": 3082, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "202658c2-1fa9-43ce-9c07-897999932c28": {"__data__": {"id_": "202658c2-1fa9-43ce-9c07-897999932c28", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5d727f2-dbcd-4625-926e-3fc9a484ad87", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c144cb0dbd9a4d4571e20c99b5de5ca9cadc66b460881598b7e9d30eda1632b2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb275589-2fa9-41a1-9ab3-5cfc6e5bcf26", "node_type": "1", "metadata": {}, "hash": "7401f917285e370ef8369eb704599105ce8a254f93553635579be27509fa1226", "class_name": "RelatedNodeInfo"}}, "text": "Node* MakePartiQLNavigationPath(const Var* var, Node* node)", "mimetype": "text/plain", "start_char_idx": 3084, "end_char_idx": 3143, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eb275589-2fa9-41a1-9ab3-5cfc6e5bcf26": {"__data__": {"id_": "eb275589-2fa9-41a1-9ab3-5cfc6e5bcf26", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "202658c2-1fa9-43ce-9c07-897999932c28", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a4170211aee1fb6bae25970863f8bcb7fc068f220fab14b2d8a13b327e0707a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "55c8ed58-499f-4091-bf39-0a901f356611", "node_type": "1", "metadata": {}, "hash": "a361809b0fa62fd09d12b95e6744ffa5b83831d804af3ae1137efb9ccb9634e9", "class_name": "RelatedNodeInfo"}}, "text": "{\n  if (var->vartype != PARTIQLOID || var->partiql_path == NIL) return node;\n\n  // Here we wrap resulting expressions into calls to get_object_path and\n  // get_array_path, because we don't support partiql_path over non-Var.\n  ListCell* lc = nullptr;\n  foreach(lc, var->partiql_path)", "mimetype": "text/plain", "start_char_idx": 3144, "end_char_idx": 3427, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "55c8ed58-499f-4091-bf39-0a901f356611": {"__data__": {"id_": "55c8ed58-499f-4091-bf39-0a901f356611", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eb275589-2fa9-41a1-9ab3-5cfc6e5bcf26", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "07347243f372638deff4aae35c30972810b38478e7312cbf320a6e5f618bc81b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "476eb489-3916-46eb-ae47-d4e9fbede8ff", "node_type": "1", "metadata": {}, "hash": "8961cfd0aa49d1f26debf56dc2e10bf17269e92b38c5e5f176f8c4683b5f4960", "class_name": "RelatedNodeInfo"}}, "text": "{\n    PartiQLPathElement* path_el =\n        reinterpret_cast<PartiQLPathElement*>(lfirst(lc));\n    switch (path_el->path_step_type) {\n      case PARTIQL_PATH_STEP_OBJECT: {\n        XCHECK(IsA(path_el->element, String));\n        const char* component = resolveStrValForSuperAttribute(\n            reinterpret_cast<Value*>(path_el->element),\n            true /* ispartiqlcolumn */);\n        Type const_type = typeidType(VARCHAROID);\n        Datum path_datum =\n            DirectFunctionCall1(varcharin, CStringGetDatum(pstrdup(component)));\n        Const* path = makeConst(VARCHAROID, typeLen(const_type), path_datum,\n                                false /* constisnull */, typeByVal(const_type));\n        node = reinterpret_cast<Node*>(\n            makeFuncExpr(F_GET_OBJECT_PATH, PARTIQLOID, list_make2(node, path),\n                         COERCE_EXPLICIT_CALL));\n        break;\n      }\n      case PARTIQL_PATH_STEP_ARRAY: {\n        // In array notation, index can be any node. If it's already in the\n        // partiql navigation list, we know it's safe to inject it in the\n        // function call.\n        node = reinterpret_cast<Node*>(\n            makeFuncExpr(F_GET_ARRAY_PATH, PARTIQLOID,\n                         list_make2(node, copyObject(path_el->element)),\n                         COERCE_EXPLICIT_CALL));\n        break;\n      }\n      default:\n        XCHECK_UNREACHABLE();\n        break;\n    }\n  }\n  return node;\n}", "mimetype": "text/plain", "start_char_idx": 3428, "end_char_idx": 4857, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "476eb489-3916-46eb-ae47-d4e9fbede8ff": {"__data__": {"id_": "476eb489-3916-46eb-ae47-d4e9fbede8ff", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "55c8ed58-499f-4091-bf39-0a901f356611", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "814eb172f10301bec5aa2b26f5908b8a6873c661fbcbfa7290c1914d500fc967", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c5ab945d-41fd-488f-b8a1-0846add98aa0", "node_type": "1", "metadata": {}, "hash": "bc037bc62a7817942a7835724683f80c6d646d9d345e670b187c7ef7ac5411a7", "class_name": "RelatedNodeInfo"}}, "text": "MaskMap GetMasksFromCache(MaskMapsCache* mask_maps_cache, Oid rte_relid) {\n  auto masks_it = mask_maps_cache->find(rte_relid);\n  if (masks_it != mask_maps_cache->end()) return masks_it->second;\n\n  std::set<Attachment> attachments =\n      FetchAttachmentsForRel(rte_relid, GetUserId(), std::nullopt /* roleid */);\n\n  std::set<ParsedPolicyAttachment> parsed_attachments;\n  std::transform(attachments.begin(), attachments.end(),\n                 std::inserter(parsed_attachments, parsed_attachments.begin()),\n                 [](Attachment attachment) -> ParsedPolicyAttachment {\n                   return ParseAttachment(attachment);\n                 });\n\n  MaskMap mask_map =\n      BuildMaskMap(parsed_attachments, {} /* obj_transform_alp_ctx */);\n\n  mask_maps_cache->insert({rte_relid, mask_map});\n  return mask_map;\n}", "mimetype": "text/plain", "start_char_idx": 4859, "end_char_idx": 5677, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5ab945d-41fd-488f-b8a1-0846add98aa0": {"__data__": {"id_": "c5ab945d-41fd-488f-b8a1-0846add98aa0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "476eb489-3916-46eb-ae47-d4e9fbede8ff", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9bbd3ce0d69c92bf223a61a2b5ee039be4b7b848cb4d561c11ebd649b2dadc5d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "884497b2-26ef-41ba-bb23-b2f1275d6ea1", "node_type": "1", "metadata": {}, "hash": "0a696fc1e83c0f256620be5a2b987c764ddfb3cf2f787d1e3fcb0b16fb7a66bf", "class_name": "RelatedNodeInfo"}}, "text": "void WalkInPlaceNestedVar(Var* var, InPlaceNestedVarsWalkerCtx* context)", "mimetype": "text/plain", "start_char_idx": 5679, "end_char_idx": 5751, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "884497b2-26ef-41ba-bb23-b2f1275d6ea1": {"__data__": {"id_": "884497b2-26ef-41ba-bb23-b2f1275d6ea1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c5ab945d-41fd-488f-b8a1-0846add98aa0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c9d97f749614287fa51c5f3b87c54bd8d2ef27003855f84b146e13c9e857c9bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "77f2ce6b-a0d4-4dcf-84a7-694cd55f53a1", "node_type": "1", "metadata": {}, "hash": "75105a577230f45566c93d7aa2aceada95b2cd79900c84e7bbbea52341fc921e", "class_name": "RelatedNodeInfo"}}, "text": "{\n  XCHECK(IsA(var, Var), DDM_CALLER);\n  XCHECK(context != nullptr, DDM_CALLER);\n  XCHECK(var != nullptr, DDM_CALLER);\n\n  // The variables that are not SUPER are taken care of in MutateRTE /\n  // MutateVar.\n  if (var->vartype != PARTIQLOID) return;\n\n  // Ensure RTable is stored in the stack for the variable.\n  XCHECK(var->varlevelsup < context->rtables.size(), DDM_CALLER);\n  RangeTblEntry* rte = rt_fetch(\n      var->varno,\n      context->rtables[context->rtables.size() - var->varlevelsup - 1]);\n  Oid rte_relid = GetRelationRelid(rte);\n  // This can happen for non-view subqueries, JOIN subqueries, etc. In such case\n  // we know such variable is not a column of DDM-protected relation.\n  if (!OidIsValid(rte_relid)) return;\n\n  // We need a real name of the column to look it up in the map.\n  std::string_view varname = policy::ColumnNameForRTEVar(rte, var);\n  // A name can be empty in case of dropped column.\n  if (varname.size() == 0) return;\n\n  MaskMap mask_map = GetMasksFromCache(&context->mask_maps_cache, rte_relid);\n  // If no attachments for variable, return.\n  auto mask_map_it = mask_map.find(std::string(varname));\n  if (mask_map_it == mask_map.end()) return;\n\n  std::vector<MergeEntry> entries = mask_map_it->second;\n  // If attachment is not nested, return.\n  if (entries.size() == 1 && !entries[0].nested_path) return;\n\n  // Now the fun part: determine if given var requires OBJECT_TRANSFORM given\n  // current DDM attachments. As of now, we let the variable avoid the", "mimetype": "text/plain", "start_char_idx": 5752, "end_char_idx": 7241, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "77f2ce6b-a0d4-4dcf-84a7-694cd55f53a1": {"__data__": {"id_": "77f2ce6b-a0d4-4dcf-84a7-694cd55f53a1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "884497b2-26ef-41ba-bb23-b2f1275d6ea1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bc56bcb29fe6cef9c3d98cd04957127e21afce3d2653bc533497768b304a68a8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2cc97256-518d-4efa-8662-79cee4ff03ee", "node_type": "1", "metadata": {}, "hash": "50526861a00b2693978a1745494c913844f1b842aafdd2278248380d70519e91", "class_name": "RelatedNodeInfo"}}, "text": "// OBJECT_TRANSFORM iff this the navigation path exactly matches the\n  // attachment. For @example:\n  //\n  // 1. attach a.b AND nav ref a.b   MEANS NO  obj transform\n  // 2. attach a.b AND nav ref a.b.c MEANS YES obj transform\n  // 3. attach a.b AND nav ref a     MEANS YES obj transform\n\n  // Collect navigation path component by component.\n  std::vector<std::string_view> components;\n  ListCell* lc = nullptr;\n  foreach(lc, var->partiql_path) {\n    PartiQLPathElement* path_el =\n        reinterpret_cast<PartiQLPathElement*>(lfirst(lc));\n    if (path_el->path_step_type == PARTIQL_PATH_STEP_OBJECT) {\n      XCHECK(IsA(path_el->element, String));\n      components.push_back(strVal(path_el->element));\n    } else {\n      // Short circuit: any array reference in navigation path requires\n      // OBJECT_TRANSFORM.\n      context->obj_transform_vars[rte_relid].insert(std::string(varname));\n      return;\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 7244, "end_char_idx": 8156, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2cc97256-518d-4efa-8662-79cee4ff03ee": {"__data__": {"id_": "2cc97256-518d-4efa-8662-79cee4ff03ee", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "77f2ce6b-a0d4-4dcf-84a7-694cd55f53a1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0571324518c282589bbcade48a26bb31d906ac514c920b6c07cb16ea8b4678c6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "175e13d4-bf93-428f-85e6-e43d5c78ba6c", "node_type": "1", "metadata": {}, "hash": "954607e9f496801c3c09da13ca37b6d52be803f25b7b652b320588c736f431c9", "class_name": "RelatedNodeInfo"}}, "text": "for (auto&& entry : entries) {\n    XCHECK(entry.nested_path);\n    RawPath entry_path(entry.nested_path->data(), entry.nested_path->size());\n\n    RawPath::Iterator entry_path_it = entry_path.begin();\n    std::vector<std::string_view>::iterator components_it = components.begin();\n\n    while (entry_path_it != entry_path.end() &&\n           components_it != components.end()) {\n      // If at any step the path components are different, paths diverge.\n      if (*entry_path_it++ != *components_it++) break;\n    }\n    if (entry_path_it != entry_path.end() ||\n        components_it != components.end()) {\n      // That's the case we are looking for: either attachment path is a perfect\n      // prefix of this var path, or the other way around.\n      context->obj_transform_vars[rte_relid].insert(std::string(varname));\n      break;\n    }\n  }\n\n  return;\n}", "mimetype": "text/plain", "start_char_idx": 8160, "end_char_idx": 9011, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "175e13d4-bf93-428f-85e6-e43d5c78ba6c": {"__data__": {"id_": "175e13d4-bf93-428f-85e6-e43d5c78ba6c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2cc97256-518d-4efa-8662-79cee4ff03ee", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7d780a9b495ddb2acc7b6ea52d6ba89bf300f63b478d21413175e5bab20c20d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "15cdd690-17f2-4598-a8f4-6d8adee1fa67", "node_type": "1", "metadata": {}, "hash": "d5b3a0eb2729b9ab9a8610a7ab6e8a82cbbec6554fa6fe13a9fe066b49107ec8", "class_name": "RelatedNodeInfo"}}, "text": "bool InPlaceNestedVarsWalker(Node* node, void* context) {\n  if (node == nullptr) return false;\n\n  InPlaceNestedVarsWalkerCtx* ctx =\n      reinterpret_cast<InPlaceNestedVarsWalkerCtx*>(context);\n\n  // Don't use query_tree_walker for walking into subqueries because we need\n  // to set and restore context upon descend into subquery.\n  if (IsA(node, RangeTblEntry)) {\n    RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(node);\n    // Don't care what RTE type it is. As long as it has subquery, we descend\n    // into it.\n    if (rte->subquery != nullptr) {\n      ctx->rtables.push_back(rte->subquery->rtable);\n      query_tree_walker(reinterpret_cast<Query*>(rte->subquery),\n                        InPlaceNestedVarsWalker, context,\n                        InPlaceNestedVarsWalkerCtx::kFlag);\n      ctx->rtables.pop_back();\n    }\n    return false;\n  }\n\n  // Query node is specifically not handled by the expression_tree_walker.\n  if (IsA(node, Query)) {\n    ctx->rtables.push_back(reinterpret_cast<Query*>(node)->rtable);\n    query_tree_walker(reinterpret_cast<Query*>(node), InPlaceNestedVarsWalker,\n                      context, InPlaceNestedVarsWalkerCtx::kFlag);\n    ctx->rtables.pop_back();\n    return false;\n  }\n\n  if (IsA(node, Var)) {\n    WalkInPlaceNestedVar(reinterpret_cast<Var*>(node), ctx);\n    return false;\n  }\n  expression_tree_walker(node, InPlaceNestedVarsWalker, ctx);\n  return false;\n}", "mimetype": "text/plain", "start_char_idx": 9013, "end_char_idx": 10423, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "15cdd690-17f2-4598-a8f4-6d8adee1fa67": {"__data__": {"id_": "15cdd690-17f2-4598-a8f4-6d8adee1fa67", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "175e13d4-bf93-428f-85e6-e43d5c78ba6c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "122d5032b447a0ace297e25b7b4f00bc52651df730562bedc86523f50e64994b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "914cf16d-a45c-46f9-be6b-7fed0cb9091b", "node_type": "1", "metadata": {}, "hash": "d66517bbbbc4852db928f032fe99e1c4916943c8935f89e0e6b3f2448fb1e9cc", "class_name": "RelatedNodeInfo"}}, "text": "NestedVarMap WalkInPlaceNestedVars(Query* query) {\n  InPlaceNestedVarsWalkerCtx context;\n\n  bool supported_cmd =\n      query->commandType != CMD_UPDATE && query->commandType != CMD_DELETE;\n\n  if (gconf_ddm_enable_over_super_paths && supported_cmd) {\n    context.rtables.push_back(query->rtable);\n    query_tree_walker(query, InPlaceNestedVarsWalker, &context,\n                      InPlaceNestedVarsWalkerCtx::kFlag);\n  }\n  return context.obj_transform_vars;\n}\n\n/// Context for VarAdjustMutator mutator. Keeps track of depth to be able to\n/// find the Var that is policy arg. Also keeps the RTable pointers to set.\nstruct VarAdjustMutatorContext {\n  static const int kFlags = QTW_WALK_RTE_SUBQUERY;\n\n  const Index correct_varno;\n  const Index correct_varlevelsup;\n  size_t depth = 0;\n};", "mimetype": "text/plain", "start_char_idx": 10425, "end_char_idx": 11211, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "914cf16d-a45c-46f9-be6b-7fed0cb9091b": {"__data__": {"id_": "914cf16d-a45c-46f9-be6b-7fed0cb9091b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15cdd690-17f2-4598-a8f4-6d8adee1fa67", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "35ae1e42a342de22bf89eb3925c859ce83477d8162a0a67fa8bb42edc91a63fe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0ae1176f-cbdc-42df-a78f-4baf2616881a", "node_type": "1", "metadata": {}, "hash": "de215fa7cad64718b6b1c6ad8671d7a960a39dfa7a3cf20629783a6bd19b1eb6", "class_name": "RelatedNodeInfo"}}, "text": "bool VarAdjustMutator(Node* node, void* context) {\n  auto ctx = reinterpret_cast<VarAdjustMutatorContext*>(context);\n\n  if (node == nullptr) return false;\n\n  if (IsA(node, Query)) {\n    ctx->depth++;\n    query_tree_walker(reinterpret_cast<Query*>(node), VarAdjustMutator, context,\n                      VarAdjustMutatorContext::kFlags);\n    ctx->depth--;\n    return false;\n  }\n\n  if (IsA(node, RangeTblEntry)) {\n    RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(node);\n\n    if (rte->subquery != nullptr) {\n      ctx->depth++;\n      query_tree_walker(reinterpret_cast<Query*>(rte->subquery),\n                        VarAdjustMutator, context,\n                        VarAdjustMutatorContext::kFlags);\n      ctx->depth--;\n    }\n    return false;\n  }\n\n  if (IsA(node, Var)) {\n    auto var = reinterpret_cast<Var*>(node);\n    /// Only update the variables that are arguments of the masking expressions.\n    /// check that the Var belongs to \"masked\" RTE using varno and varlevelsup.\n    if (var->varno == 1 && var->varlevelsup == ctx->depth) {\n      var->varno = ctx->correct_varno;\n      var->varlevelsup = ctx->correct_varlevelsup;\n    }\n    return false;\n  }\n\n  return expression_tree_walker(node, VarAdjustMutator, context);\n}", "mimetype": "text/plain", "start_char_idx": 11213, "end_char_idx": 12447, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0ae1176f-cbdc-42df-a78f-4baf2616881a": {"__data__": {"id_": "0ae1176f-cbdc-42df-a78f-4baf2616881a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "914cf16d-a45c-46f9-be6b-7fed0cb9091b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "93e91fdc02dcbf2e6685a61d80adf078f8a3a7bbfc7f6e7b8a828ba5802d6673", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e211eb53-c789-445b-9714-e35baab33ba5", "node_type": "1", "metadata": {}, "hash": "0ce7916713adbe593b1ebdbf7dfe05ae733937617a611f31c1042294dd8e48cc", "class_name": "RelatedNodeInfo"}}, "text": "Expr* BuildExpressionForNestedPolicy(RangeTblEntry* rte, std::string varname,\n                                     Var* var, ResTarget* mask)", "mimetype": "text/plain", "start_char_idx": 1515, "end_char_idx": 1656, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e211eb53-c789-445b-9714-e35baab33ba5": {"__data__": {"id_": "e211eb53-c789-445b-9714-e35baab33ba5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0ae1176f-cbdc-42df-a78f-4baf2616881a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "03c8e9bcd1c17dccaff87295410e223369d32a642f6330ba960a1fca5e23f3ae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4a0bf643-958c-4b34-81a6-ded2860f3df2", "node_type": "1", "metadata": {}, "hash": "db080676af450f84a11587b849739007d82adab3463780d8e1fba1963522b625", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // Compose an SQL SELECT query.\n  std::string select_sql =\n      \"SELECT \" + varname + \" FROM \" + GetRTEQueryTargetName(rte);\n\n  SelectStmt* select_q = reinterpret_cast<SelectStmt*>(\n      linitial(ParseQuery(select_sql.c_str(), LOG_TAG_DDM)));\n\n  // Replace target with masked target.\n  ResTarget* masked = copyObject(mask);\n  masked->name = pstrdup(varname.c_str());\n\n  // Note, from the user perspective, she queries a SUPER navigation path which\n  // is always SUPER (even if she later wraps it in CAST). Therefore, if were to\n  // change type of the \"variable\" to scalar policy expression return type, this\n  // immediately gives away the application of DDM and may break user\n  // expectation.\n  TypeCast* cast = makeNode(TypeCast);\n  cast->arg = reinterpret_cast<Node*>(masked->val);\n  cast->typname = makeTypeNameFromOid(PARTIQLOID, max_partiql_size());\n  masked->val = reinterpret_cast<Node*>(cast);\n\n  XCHECK_EQ(1, list_length(select_q->targetList));\n  void* old_val = replace_pointer(list_head(select_q->targetList), masked);\n  safe_pfree(old_val);\n\n  // Parse-analyze the masked query (ie, from parse tree to query tree).", "mimetype": "text/plain", "start_char_idx": 12591, "end_char_idx": 13728, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4a0bf643-958c-4b34-81a6-ded2860f3df2": {"__data__": {"id_": "4a0bf643-958c-4b34-81a6-ded2860f3df2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e211eb53-c789-445b-9714-e35baab33ba5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bc69b813c5a424e008d18baa4ae71ecbf3a12f071ba2b925c03482d44b06ffce", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23c1764f-f356-497d-bea6-7ad1da0c455f", "node_type": "1", "metadata": {}, "hash": "ac2106e0aebf86baf84090c6ef78ab5079f8cc56bea89b97ad7a050251134923", "class_name": "RelatedNodeInfo"}}, "text": "List* parsed = parse_analyze_int_rw(\n      reinterpret_cast<Node*>(select_q), nullptr /* paramTypes */,\n      0 /* numParams */, ParseTypeDDM, true /* post_ds_perm_checks */,\n      NIL /* external_rtables */, false /* is_prepared_statement */,\n      false /* allow_localized_temps */, NIL /* active_lbvs */,\n      false /* only_metadata */, InvalidAclId /* lbv_owner */,\n      InvalidOid /* skip_rls_relid */, NIL /* rls_reparse_lbvs */,\n      nullptr /* bastion_external_schema */);\n\n  if (gconf_ddm_enable_perm_check) {\n    // Permissions are already verified in ddm::VerifyObjectPermissions.\n    DisableRTEPermCheck(parsed);\n  }\n\n  // Extract target entry from the query tree.\n  XCHECK_EQ(1, list_length(parsed), DDM_CALLER);\n  Query* q = reinterpret_cast<Query*>(linitial(parsed));\n  DisableDdmOnFgacTarget(q, rte);\n  XCHECK(q->jointree != nullptr, DDM_CALLER);\n  XCHECK(q->jointree->fromlist != nullptr, DDM_CALLER);\n  XCHECK_EQ(1, list_length(q->rtable), DDM_CALLER);\n  auto rewritten_rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  rewritten_rte->has_ddm_rewrite = false;\n\n  XCHECK_EQ(1, list_length(q->targetList), DDM_CALLER);\n  TargetEntry* mask_tgt =\n      copyObject(reinterpret_cast<TargetEntry*>(linitial(q->targetList)));\n\n  // Arguments of masking expressions (the Vars) assume that their RTable is 1,\n  // which may not hold when the expression is substituted. So we set varno of\n  // masking arguments to the varno of the variable which we substitute,", "mimetype": "text/plain", "start_char_idx": 13731, "end_char_idx": 15215, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "23c1764f-f356-497d-bea6-7ad1da0c455f": {"__data__": {"id_": "23c1764f-f356-497d-bea6-7ad1da0c455f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a0bf643-958c-4b34-81a6-ded2860f3df2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "96496cf353b4c34732fac1c47b15f42b41d362a95e08ca4ced70e1fd0ececf14", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b7fb880-a1df-4ab5-81cf-b90eb535d8d0", "node_type": "1", "metadata": {}, "hash": "87e092c4800565750575133550caf9a59f4f42ea798b12a121d1b722d0eaa522", "class_name": "RelatedNodeInfo"}}, "text": "XCHECK(var != nullptr, DDM_CALLER);\n  VarAdjustMutatorContext varShiftCtx{var->varno, var->varlevelsup};\n  expression_tree_walker(reinterpret_cast<Node*>(mask_tgt), VarAdjustMutator,\n                         &varShiftCtx);\n\n  return mask_tgt->expr;\n}", "mimetype": "text/plain", "start_char_idx": 15218, "end_char_idx": 15468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b7fb880-a1df-4ab5-81cf-b90eb535d8d0": {"__data__": {"id_": "3b7fb880-a1df-4ab5-81cf-b90eb535d8d0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "23c1764f-f356-497d-bea6-7ad1da0c455f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9dbfad42ca56210804493ee47d79f3e9ef9dbf8abdf525d439ae081edb5aaaf0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "06154d55-e5de-4fb7-8dd8-d76b60c8ef26", "node_type": "1", "metadata": {}, "hash": "69026442da829c8c454947313521e775b97e62fd14391dd6a8d230689b288c69", "class_name": "RelatedNodeInfo"}}, "text": "Node* MutateNestedVar(Var* var, RewriteMutatorCtx* context)", "mimetype": "text/plain", "start_char_idx": 15470, "end_char_idx": 15529, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "06154d55-e5de-4fb7-8dd8-d76b60c8ef26": {"__data__": {"id_": "06154d55-e5de-4fb7-8dd8-d76b60c8ef26", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b7fb880-a1df-4ab5-81cf-b90eb535d8d0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "69a54a2b1ecace05e921cb41b7d08e90649fd4a7d5be02fe7b82b4cf86acaeb6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "092921ec-61f1-40bc-a476-9d4977896123", "node_type": "1", "metadata": {}, "hash": "16acad67015eccfa12eaa3f563da5491c5b8a4791592cd5ecdf562ad3527c0c4", "class_name": "RelatedNodeInfo"}}, "text": "{\n  XCHECK(var != nullptr, DDM_CALLER);\n  XCHECK(context != nullptr, DDM_CALLER);\n\n  Node* unchanged = reinterpret_cast<Node*>(var);\n\n  if (!gconf_ddm_enable_over_super_paths) return unchanged;\n\n  // Here, we proceed only for SUPER with nested path, since only such variable\n  // can possibly be subject to in-place policy application.\n  if (var->vartype != PARTIQLOID || var->partiql_path == NIL) return unchanged;\n\n  // Ensure RTable is stored in the stack for the variable.\n  XCHECK(var->varlevelsup < context->rtables.size(), DDM_CALLER);\n  RangeTblEntry* rte = rt_fetch(\n      var->varno,\n      context->rtables[context->rtables.size() - var->varlevelsup - 1]);\n  Oid rte_relid = GetRelationRelid(rte);\n  // This can happen for non-view subqueries, JOIN subqueries, etc. In such case\n  // we know such variable is not a column of DDM-protected relation.\n  if (!OidIsValid(rte_relid)) return unchanged;\n\n  // We need a real name of the column to look it up in the map.\n  std::string varname = std::string(policy::ColumnNameForRTEVar(rte, var));\n  // A name can be empty in case of dropped column.\n  if (varname.size() == 0) return unchanged;\n\n  MaskMap mask_map = GetMasksFromCache(&context->mask_maps_cache, rte_relid);\n  // If no attachments for variable, return.\n  auto mask_map_it = mask_map.find(varname);\n  if (mask_map_it == mask_map.end()) return unchanged;\n\n  std::vector<MergeEntry> entries = mask_map_it->second;\n  // If attachment is not nested, return.", "mimetype": "text/plain", "start_char_idx": 15530, "end_char_idx": 16999, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "092921ec-61f1-40bc-a476-9d4977896123": {"__data__": {"id_": "092921ec-61f1-40bc-a476-9d4977896123", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "06154d55-e5de-4fb7-8dd8-d76b60c8ef26", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "845cea9eb0551b18071723c5e03027073641d733fa81da2696e2da6413918d5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4ee50a76-fc23-4cb0-8db8-29dba372854c", "node_type": "1", "metadata": {}, "hash": "6fc30b4872d0ba1967894c395e2ebf5828725d8d85858295b42b2b4ae0debb1b", "class_name": "RelatedNodeInfo"}}, "text": "if (entries.size() == 1 && !entries[0].nested_path) return unchanged;\n\n  // If we have marked this variable for OBJECT_TRANSFORM, then it has been\n  // applied in MutateRTE, and we return.\n  auto obj_transform_vars_it = context->obj_transform_vars.find(rte_relid);\n  if (obj_transform_vars_it != context->obj_transform_vars.end()) {\n    if (obj_transform_vars_it->second.find(varname) !=\n        obj_transform_vars_it->second.end()) {\n      // Found in a list for OBJECT_TRANSFORM. Therefore, will NOT mutate\n      // in-place.\n      return unchanged;\n    }\n  }\n\n  // Construct this Var's path components.\n  std::vector<std::string_view> components;\n  ListCell* lc = nullptr;\n  foreach(lc, var->partiql_path) {\n    PartiQLPathElement* path_el =\n        reinterpret_cast<PartiQLPathElement*>(lfirst(lc));\n    XCHECK(path_el->path_step_type == PARTIQL_PATH_STEP_OBJECT,\n           \"DDM: SUPER with array path was not added to obj transform\");\n    XCHECK(IsA(path_el->element, String));\n    components.push_back(strVal(path_el->element));\n  }\n\n  // Find the correct merge entry (if exists).\n  MergeEntry* entry = nullptr;\n  for (auto&& possible_entry : entries) {\n    XCHECK(possible_entry.nested_path);\n    RawPath entry_path(possible_entry.nested_path->data(),\n                       possible_entry.nested_path->size());\n\n    if (std::equal(entry_path.begin(), entry_path.end(), components.begin())) {\n      entry = &possible_entry;\n      break;\n    }\n  }\n\n  if (entry == nullptr) return unchanged;", "mimetype": "text/plain", "start_char_idx": 17002, "end_char_idx": 18499, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4ee50a76-fc23-4cb0-8db8-29dba372854c": {"__data__": {"id_": "4ee50a76-fc23-4cb0-8db8-29dba372854c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "092921ec-61f1-40bc-a476-9d4977896123", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "667d185b89f9a922943a3ef0f885cc14e43fb375e70d8e158898d9b82f04642b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "21d586a4-cf75-4a9a-9a0e-77fe7b9096f7", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "// Finally, if we are at his point we know that: (1) variable is a SUPER with\n  // nested path, (2) there is a nested attachment for this exact path of this\n  // variable, and (3) the masking policy can be applied in-place.\n  Expr* mutated =\n      BuildExpressionForNestedPolicy(rte, varname, var, entry->rtgt.get());\n\n  // Note, no need to wrap in nav path since we have checked that the masked\n  // path and input paths are the same.\n  return reinterpret_cast<Node*>(mutated);\n}", "mimetype": "text/plain", "start_char_idx": 18503, "end_char_idx": 18983, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "21d586a4-cf75-4a9a-9a0e-77fe7b9096f7": {"__data__": {"id_": "21d586a4-cf75-4a9a-9a0e-77fe7b9096f7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ee50a76-fc23-4cb0-8db8-29dba372854c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4d5b14ff6c190b688de1cbd3538ea4122d05d2c90bd68cd2c5e688b4c65ec6d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a6d903dc-d190-4610-a122-e997a6fdb0c9", "node_type": "1", "metadata": {}, "hash": "46fdaf0ab8548fdb74cf5b8d27a2a683f308fa90256eabb79cede87f803c109f", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 1993, "end_char_idx": 1994, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a6d903dc-d190-4610-a122-e997a6fdb0c9": {"__data__": {"id_": "a6d903dc-d190-4610-a122-e997a6fdb0c9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "00a8c872-0f52-402b-9472-cc3122a11f16", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cb7e3f49ac4899157b609df3e68a7ab6197b741a8bea40c1a4d9961938a4740", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "21d586a4-cf75-4a9a-9a0e-77fe7b9096f7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f833b5109c091d2e292e079253c19f75e18fab79ffd3db7b77796bd5e4b398f6", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm", "mimetype": "text/plain", "start_char_idx": 18988, "end_char_idx": 19004, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "16f9e732-6277-4ad8-b345-3068d200afb7": {"__data__": {"id_": "16f9e732-6277-4ad8-b345-3068d200afb7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3d9e8e82-0eb2-4d4d-9997-67bcff4cfecb", "node_type": "1", "metadata": {}, "hash": "f95e6776d304ec3114e0d6ad576b4b9fc87103b748501ac780eae814622f9993", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_permission.hpp\"\n\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_permission.h\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/ddm_serialization.hpp\"\n#include \"ddm/unsupported.h\"\n#include \"fmgroids.h\"  // NOLINT(build/include_subdir)\n#include \"policy/policy_utils.h\"\n#include \"policy/policy_utils.hpp\"\n#include \"redcat/redcat_role.h\"\n#include \"sys/pg_defs.hpp\"\n#include \"sys/pg_utils.hpp\"\n#include \"sys/stats_indicator.hpp\"\n#include \"xen_utils/scope_exit_guard.hpp\"\n#include \"xen_utils/xen_except.h\"\n\n#include \"pg/src/backend/catalog/permission.hpp\"\n#include \"pg/src/backend/catalog/pg_class_extended.hpp\"\n#include \"pg/src/include/access/genam.h\"\n#include \"pg/src/include/access/heapam.h\"\n#include \"pg/src/include/access/htup.h\"\n#include \"pg/src/include/access/skey.h\"\n#include \"pg/src/include/access/xact.h\"\n#include \"pg/src/include/c.h\"\n#include \"pg/src/include/catalog/catname.h\"\n#include \"pg/src/include/catalog/indexing.h\"\n#include \"pg/src/include/catalog/pg_class.h\"\n#include \"pg/src/include/catalog/pg_class_extended.h\"\n#include \"pg/src/include/catalog/pg_datashare_objects.h\"\n#include \"pg/src/include/catalog/pg_permission.h\"\n#include \"pg/src/include/catalog/pg_permission_mask.h\"\n#include \"pg/src/include/catalog/pg_policy_mask.h\"\n#include \"pg/src/include/commands/user.h\"\n#include \"pg/src/include/fmgr.h\"\n#include \"pg/src/include/miscadmin.h\"\n#include \"pg/src/include/nodes/parsenodes.h\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1487, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3d9e8e82-0eb2-4d4d-9997-67bcff4cfecb": {"__data__": {"id_": "3d9e8e82-0eb2-4d4d-9997-67bcff4cfecb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "16f9e732-6277-4ad8-b345-3068d200afb7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ba2ff28ed11919d7dcd42d0f56b82034ed759faac16eec0216ccdc101cfb1e53", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1a1bb7e0-0c35-444a-be28-8a8be05f7a0f", "node_type": "1", "metadata": {}, "hash": "dc99fc6626cce7524976fef4dd418656f8ed548136363cc48fcf3c2ea542acc1", "class_name": "RelatedNodeInfo"}}, "text": "#include \"pg/src/include/nodes/pg_list.h\"\n#include \"pg/src/include/postgres.h\"\n#include \"pg/src/include/postgres_ext.h\"\n#include \"pg/src/include/storage/lmgr.h\"\n#include \"pg/src/include/utils/acl.h\"\n#include \"pg/src/include/utils/builtins.h\"\n#include \"pg/src/include/utils/catcache.h\"\n#include \"pg/src/include/utils/elog.h\"\n#include \"pg/src/include/utils/elog_sqlstate.h\"\n#include \"pg/src/include/utils/lsyscache.h\"\n#include \"pg/src/include/utils/rel.h\"\n#include \"pg/src/include/utils/syscache.h\"\n#include \"pg/src/include/utils/tqual.h\"\n\n#include <boost/functional/hash.hpp>\n\n#include <algorithm>\n#include <cstddef>\n#include <iterator>\n#include <memory>\n#include <set>\n#include <string>\n#include <tuple>\n#include <unordered_map>\n#include <unordered_set>\n#include <vector>\n\nextern bool gconf_ddm_enable_identical_attachments;\nextern bool gconf_ddm_enable_for_datashares;", "mimetype": "text/plain", "start_char_idx": 1488, "end_char_idx": 2357, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1a1bb7e0-0c35-444a-be28-8a8be05f7a0f": {"__data__": {"id_": "1a1bb7e0-0c35-444a-be28-8a8be05f7a0f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3d9e8e82-0eb2-4d4d-9997-67bcff4cfecb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "961942fc5c638e7857de032e6b41f30e4a92b4d8c26609b84f95519ffda773fb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c2118e2-b9d8-4b8b-9462-d5f6ef0f166f", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm", "mimetype": "text/plain", "start_char_idx": 2359, "end_char_idx": 2372, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c2118e2-b9d8-4b8b-9462-d5f6ef0f166f": {"__data__": {"id_": "0c2118e2-b9d8-4b8b-9462-d5f6ef0f166f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a1bb7e0-0c35-444a-be28-8a8be05f7a0f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "38f9dd8ef44a33eae7f5932dd52e5668702f6355b8d6b60effac74599db239d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "74bd82a6-44b4-4d20-af08-f536081ad8be", "node_type": "1", "metadata": {}, "hash": "63e8fe2f2b8efe8877074b29e6f4bb5f2cf9d61c6f7c78d0a0b73b424bff2136", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 2373, "end_char_idx": 2374, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "74bd82a6-44b4-4d20-af08-f536081ad8be": {"__data__": {"id_": "74bd82a6-44b4-4d20-af08-f536081ad8be", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c2118e2-b9d8-4b8b-9462-d5f6ef0f166f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "560eee50b24a35e0e5ec6a8134fa80cca9db6333f6039657c3614bbd191f164d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7e76b154-5b2c-4970-a140-508651ca9389", "node_type": "1", "metadata": {}, "hash": "c6407822f6b425bb0b2c94292b7022bccb2b6cc289b2eb1fda40a8be2f89f805", "class_name": "RelatedNodeInfo"}}, "text": "namespace", "mimetype": "text/plain", "start_char_idx": 2359, "end_char_idx": 2368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7e76b154-5b2c-4970-a140-508651ca9389": {"__data__": {"id_": "7e76b154-5b2c-4970-a140-508651ca9389", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "74bd82a6-44b4-4d20-af08-f536081ad8be", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "891a92e3b2cc75766fc4d4ed0c4ca2bbe1d96d1dbf255dc98fe92435e2e468bd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bfae1073-1d00-483f-9661-a642bec61159", "node_type": "1", "metadata": {}, "hash": "0cdbeb2acaa994575d151bf113d8e03de8546f03af1a74b4fea3442c56bb5fa4", "class_name": "RelatedNodeInfo"}}, "text": "{\n/// Create a DDM permission for the relation based on PermissionEntry.\n/// @see GetOrCreatePermission.\n/// @param perm_entry PermissionEntry of the policy.\n/// @return A newly created permission id if successful else InvalidOid.\nOid CreateDDMPolicyPermission(PermissionEntry const& perm_entry) {\n  PrivPermMap map;\n  int hashed_val = perm_hash_value(perm_entry.key);\n  std::pair<Oid, bool> perm_pair = GetOrCreatePermission(\n      true /* create */, MyDatabaseId, RelOid_pg_class, perm_entry.relId,\n      hashed_val /* objsubid */, DDM_POLICY_PRIV_TYPE, perm_entry.polId, &map);\n  XCHECK(OidIsValid(perm_pair.first));\n  return perm_pair.first;\n}\n\n/// Undo DoGrant specifically for DDM.\n/// To cleanup a corresponding permission entry for a grantee, we drop the\n/// tuple from both pg_user_permission and pg_permission_users catalog when the\n/// grantee is a user or PUBLIC and from pg_role_permission and\n/// pg_permission_roles if the grantee is a Role.\n/// @param permid Unique permission ID to delete.\n/// @param grantee PolicyGrantee for deleting the corresponding tuples.", "mimetype": "text/plain", "start_char_idx": 2385, "end_char_idx": 3463, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bfae1073-1d00-483f-9661-a642bec61159": {"__data__": {"id_": "bfae1073-1d00-483f-9661-a642bec61159", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7e76b154-5b2c-4970-a140-508651ca9389", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b83fbe1c36a2a5ae030759dc311ab924071c518f5b7be0208c6c3ecbf505b40e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4e7e759-3cb9-488d-bf75-2222b36130a0", "node_type": "1", "metadata": {}, "hash": "f55f00153aa850b3223fade6d981bc4fdcd8ee17bc3640f0daa032e673235f5d", "class_name": "RelatedNodeInfo"}}, "text": "void RevokeDDMPermissions(const Oid& permid, PolicyGrantee const& grantee)", "mimetype": "text/plain", "start_char_idx": 3464, "end_char_idx": 3538, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a4e7e759-3cb9-488d-bf75-2222b36130a0": {"__data__": {"id_": "a4e7e759-3cb9-488d-bf75-2222b36130a0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfae1073-1d00-483f-9661-a642bec61159", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06414c3c44823ecb398f37e9000bd30a124fbac0beea2e5e14a0b059113631fd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e2fb8fbc-8e78-40d5-953a-caadd75862dd", "node_type": "1", "metadata": {}, "hash": "e6f335818e503fc64d4a1ed9ae8e5519b84cbcace682d0018c1fe28bf204d7ca", "class_name": "RelatedNodeInfo"}}, "text": "{\n  if (!OidIsValid(permid)) {\n    return;\n  }", "mimetype": "text/plain", "start_char_idx": 3539, "end_char_idx": 3585, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2fb8fbc-8e78-40d5-953a-caadd75862dd": {"__data__": {"id_": "e2fb8fbc-8e78-40d5-953a-caadd75862dd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4e7e759-3cb9-488d-bf75-2222b36130a0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "02fb24950c8e19a89ffc786d815fc56734b7031fae13994705749ff8c3132d8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1edbdabe-eb97-4ce7-bd39-cb5c5a0fb8b5", "node_type": "1", "metadata": {}, "hash": "0433c526fe13aed91ed7fa9ccbc836fd0db551a82875678e82c67b81a6871303", "class_name": "RelatedNodeInfo"}}, "text": "switch (grantee.type)", "mimetype": "text/plain", "start_char_idx": 3589, "end_char_idx": 3610, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1edbdabe-eb97-4ce7-bd39-cb5c5a0fb8b5": {"__data__": {"id_": "1edbdabe-eb97-4ce7-bd39-cb5c5a0fb8b5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2fb8fbc-8e78-40d5-953a-caadd75862dd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2d7c94ddb1991b82c716172f619cfd708462b79d71a486d9df86e1b7f9522800", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9778ef46-3a65-47e4-a5be-3f3c4c8dc77e", "node_type": "1", "metadata": {}, "hash": "1f865784a228f822c744ffd21fb428fad872ef05ca7ba39e00444ab520328677", "class_name": "RelatedNodeInfo"}}, "text": "{\n    case kGranteeRole: {\n      List* role_ids = nullptr;\n\n      Relation pg_permission_roles =\n          heap_openr(PermissionRolesRelationName, RowExclusiveLock);\n      SCOPE_EXIT_GUARD(relation_close(pg_permission_roles, RowExclusiveLock));\n\n      Relation pg_role_permission =\n          heap_openr(RolePermissionRelationName, RowExclusiveLock);\n      SCOPE_EXIT_GUARD(relation_close(pg_role_permission, RowExclusiveLock));\n\n      role_ids = lappend_int(role_ids, grantee.id);\n      // Delete records from pg_role_permission and pg_permission_roles.\n      // Missing role id case is gracefully handled by RBAC API.\n      UpsertPermRoles(pg_permission_roles, pg_role_permission, ACL_MODECHG_DEL,\n                      permid, FLAG_NO_RIGHTS, GetUserId(), role_ids);\n      break;\n    }\n    case kGranteeUser:", "mimetype": "text/plain", "start_char_idx": 3611, "end_char_idx": 4421, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9778ef46-3a65-47e4-a5be-3f3c4c8dc77e": {"__data__": {"id_": "9778ef46-3a65-47e4-a5be-3f3c4c8dc77e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1edbdabe-eb97-4ce7-bd39-cb5c5a0fb8b5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "69b2710080f81f2132d60f328620da902d9fa59cecbc9b2334f3102fa4476c21", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "68cc52ce-1c57-4f01-8ec6-2af7c301361a", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "case kGranteePublic: {\n      List* user_ids = nullptr;\n\n      Relation pg_permission_users =\n          heap_openr(PermissionUsersRelationName, RowExclusiveLock);\n      SCOPE_EXIT_GUARD(relation_close(pg_permission_users, RowExclusiveLock));\n\n      Relation pg_user_permission =\n          heap_openr(UserPermissionRelationName, RowExclusiveLock);\n      SCOPE_EXIT_GUARD(relation_close(pg_user_permission, RowExclusiveLock));\n\n      user_ids = lappend_int(user_ids, grantee.id);\n      // Delete records from pg_user_permission and pg_permission_users.\n      // Missing user id case is gracefully handled by RBAC API.\n      UpsertPermUsers(pg_permission_users, pg_user_permission, ACL_MODECHG_DEL,\n                      permid, FLAG_NO_RIGHTS, GetUserId(), GetUserId(),\n                      user_ids);\n      break;\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 4426, "end_char_idx": 5248, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "68cc52ce-1c57-4f01-8ec6-2af7c301361a": {"__data__": {"id_": "68cc52ce-1c57-4f01-8ec6-2af7c301361a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9778ef46-3a65-47e4-a5be-3f3c4c8dc77e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ff82dbc455bcbd285509900d83221e20847ea8a7108c91a01603be4ad204fc82", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b15b35e8-ae13-4e86-bf09-df585fee304d", "node_type": "1", "metadata": {}, "hash": "e165f8e820dd1e6bb21c7b2065c203baec5f99161f3a735f18a71a5751d17cf9", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3031, "end_char_idx": 3032, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b15b35e8-ae13-4e86-bf09-df585fee304d": {"__data__": {"id_": "b15b35e8-ae13-4e86-bf09-df585fee304d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "68cc52ce-1c57-4f01-8ec6-2af7c301361a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "aa20d5fbf0ed452d1e6114a0da28b3297637b7a75ac7d500505facbe73137d23", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c257bb0-ccf4-4a4c-8fbc-f51d7e3e802b", "node_type": "1", "metadata": {}, "hash": "49b007d02ca8ce9775e822c4704b67944745f9541a5b646e1fe9c582a2e042b6", "class_name": "RelatedNodeInfo"}}, "text": "/// Check that DDM policy can be attached or detached on relation to given\n/// PolicyGrantee.\n/// Details on validation requirements are mentioned in DDM Design doc:\n/// https://quip-amazon.com/ECuoAEd3bVzo/\n/// Redshift-Dynamic-Data-Masking-DDM-Design#temp:C:bLa6e96a02231fb44a09865791e0\n/// @param perm_entry PermissionEntry of the policy.\n/// @param pol_name Name of the DDM policy.\n/// @param in_attribute_info attribute_info_t for the input columns of the\n/// policy.\n/// @param out_attribute_info attribute_info_t for the output columns of the\n/// policy.\n/// @param rel_name Name of the relation.\n/// @param grantee PolicyGrantee for attaching DDM policy.\n/// @param is_detach Flag to denote if it's ATTACH/DETACH statement.\n/// @return optional(perm_id) if duplicate policy(same policyname, inattnums,\n/// outattnums, priority) already attached. Otherwise nullopt.", "mimetype": "text/plain", "start_char_idx": 5252, "end_char_idx": 6124, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c257bb0-ccf4-4a4c-8fbc-f51d7e3e802b": {"__data__": {"id_": "3c257bb0-ccf4-4a4c-8fbc-f51d7e3e802b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b15b35e8-ae13-4e86-bf09-df585fee304d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5c5bbc34dbc2336b3cf3ac0e0e953552585ed3e2cbff18c63a943319ab32e432", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8a938b1c-945a-4c65-8e85-dcb6dab5bdc4", "node_type": "1", "metadata": {}, "hash": "572ab2ed62c60669028949e6b457f86410d677e336c2e8bc9e047d600d65fb80", "class_name": "RelatedNodeInfo"}}, "text": "std::optional<AclId> CheckDDMPolicyOnRel(\n    PermissionEntry const& perm_entry, const std::string& pol_name,\n    attribute_info_t const& in_attribute_info,\n    attribute_info_t const& out_attribute_info, const std::string& rel_name,\n    PolicyGrantee const& grantee, bool is_detach)", "mimetype": "text/plain", "start_char_idx": 6125, "end_char_idx": 6408, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8a938b1c-945a-4c65-8e85-dcb6dab5bdc4": {"__data__": {"id_": "8a938b1c-945a-4c65-8e85-dcb6dab5bdc4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c257bb0-ccf4-4a4c-8fbc-f51d7e3e802b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5d6b75ab7ce56b23503be81dd1af5e75ae29149f4b6d09a5540972bf55a2f31a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d5e0812-0e70-413b-98ae-b18c8204cf08", "node_type": "1", "metadata": {}, "hash": "5871dd201ac903ad9ca6bd95bb567ddc7c2b8bb708f3c7f1383ea4660e36b5d3", "class_name": "RelatedNodeInfo"}}, "text": "{\n  Oid relid = perm_entry.relId;\n  int4 priority = perm_entry.key.priority;\n  switch (grantee.type) {\n    case kGranteeRole: {\n      // Check for role.\n      AclId role_id = grantee.id;\n      // Check that role exists.\n      if (!RoleExists(role_id)) {\n        ereport(ERROR, (errcode(ERRCODE_UNDEFINED_OBJECT),\n                        errmsg(\"role \\\"%d\\\" does not exist\", role_id)));\n      }\n      break;\n    }\n    case kGranteeUser: {\n      // Checks for user.\n      AclId user_id = grantee.id;\n      if (AclIdIsValid(user_id)) {\n        // Check that user exists.\n        if (!DoesUserExist(user_id)) {\n          ereport(ERROR, (errcode(ERRCODE_UNDEFINED_OBJECT),\n                          errmsg(\"user \\\"%d\\\" does not exist\", user_id)));\n        }\n      }\n      break;\n    }\n    case kGranteePublic: {\n      // No need to verify the user id for public as it's set to Invalid id.\n      break;\n    }\n  }\n\n  std::string err_policy_name;\n  Oid err_polid, permid;\n  std::optional<ddm::AttachedAttribute> err_attribute;\n  bool is_identical_attachment = false;\n  // There can be several policies attached to a relation with different\n  // priority on each column. We iterate over pg_permission_mask with the\n  // help of PermissionMaskRelPriorityIndex based on relation and priority\n  // to fetch attached policies. We check over individual columns to see if\n  // there is an identical attached policy(same relation, input attinfo,", "mimetype": "text/plain", "start_char_idx": 6409, "end_char_idx": 7838, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d5e0812-0e70-413b-98ae-b18c8204cf08": {"__data__": {"id_": "1d5e0812-0e70-413b-98ae-b18c8204cf08", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8a938b1c-945a-4c65-8e85-dcb6dab5bdc4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f621e7d2029ce09e5901a450436b137abd7bad2e3dd5ffe5286f5a252e072c22", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ffe79e30-422b-4b87-a35a-03d08267c8d6", "node_type": "1", "metadata": {}, "hash": "46996d282960209dd20815fa7c24a92349502a87b93f152575dc8367d37eb71b", "class_name": "RelatedNodeInfo"}}, "text": "// output attinfo, priority) and, in case of no identical attached policy,\n  // is there an attached policy with equal priority and at least one common\n  // output attinfo. If an identical policy attachment is found and grantee is\n  // not attached to that identical attachment, we allow attachment.\n  // If no identical attached policy is found, with the help of\n  // PermissionPrivIndex, we also check if a conflicting attached policy with\n  // same output attrs is found(same relation, output attinfo and priority).\n\n  // Get Oid of the attached DDM policy, the output column for specified\n  // priority and if an identical attachment is found.\n  Oid polid = GetDDMPolicyId(pol_name.c_str());\n  std::tie(err_polid, permid, err_attribute, is_identical_attachment) =\n      GetAttachedPolicyInfo(polid, relid, in_attribute_info, out_attribute_info,\n                            priority);", "mimetype": "text/plain", "start_char_idx": 7841, "end_char_idx": 8728, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ffe79e30-422b-4b87-a35a-03d08267c8d6": {"__data__": {"id_": "ffe79e30-422b-4b87-a35a-03d08267c8d6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d5e0812-0e70-413b-98ae-b18c8204cf08", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5c8d705efccea4a6e425ec08b59065643293701f6fdb002dc5687432d0d2a233", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "81720a34-d609-44ea-8efe-4a3c43b89ef4", "node_type": "1", "metadata": {}, "hash": "a3ce19eb762a2dd50cc9747918ed01a188bf4244fa9959890606d1ce42704bb5", "class_name": "RelatedNodeInfo"}}, "text": "if (gconf_ddm_enable_identical_attachments && is_identical_attachment) {\n    if (!is_detach) {\n      // If grantee is already attached to the identical attachment, attachment\n      // is not allowed and outputs error.\n      if (IsPermissionAttached(permid, grantee)) {\n        err_policy_name = GetDDMPolicyName(err_polid);\n        ReportIdenticalPolicyAttachedToGranteeError(err_policy_name, rel_name,\n                                                    grantee);\n      }\n      // If identical attachment is found and, current request is for attachment\n      // and, grantee is not attached to that identical attachment, then\n      // attachment is allowed. Returns true.\n      return permid;\n    }\n  } else {\n    // If no identical attachment is found, we check if a conflicting policy\n    // attachment with the same output attrs is present.\n    Oid confilicting_polid = GetPolicyAttachedToRel(perm_entry);\n    if (confilicting_polid != InvalidOid) {\n      err_polid = confilicting_polid;\n      err_attribute = std::nullopt;\n    }\n  }\n\n  // Store the policy name for error reporting based on ATTACH or DETACH\n  // statement.\n  if (err_polid != InvalidOid) {\n    err_policy_name = GetDDMPolicyName(err_polid);\n  }\n\n  bool is_already_attached = (err_polid != InvalidOid);\n\n  // If it's ATTACH statement and any DDM policy is already attached to the\n  // grantee with given priority, and no identical policy is there, throw an\n  // error.", "mimetype": "text/plain", "start_char_idx": 8732, "end_char_idx": 10170, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "81720a34-d609-44ea-8efe-4a3c43b89ef4": {"__data__": {"id_": "81720a34-d609-44ea-8efe-4a3c43b89ef4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ffe79e30-422b-4b87-a35a-03d08267c8d6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "40ac2300acb3f943a3c055211a6b03269a8e9cfdf8a169125289efeccecb58a2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f5a8e7e7-d57c-459e-8374-88977e31a036", "node_type": "1", "metadata": {}, "hash": "ed88e6682831bb2cd10530d1d0e540dd9ad2f3d529ade6cf2b3d49b9d8069ecc", "class_name": "RelatedNodeInfo"}}, "text": "if (!is_detach && is_already_attached) {\n    if (err_attribute.has_value()) {\n      // `err_attribute` is searched and set with the help of\n      // GetAttachedPolicyInfo(). An existing value for `err_attribute`\n      // indicates that a conflicting policy with same priority is attached on\n      // that err_attribute.\n      ereport(ERROR,\n              (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n               errmsg(\"DDM policy \\\"%s\\\" is already attached on relation \"\n                      \"\\\"%s\\\" column \\\"%s\\\" with same priority\",\n                      err_policy_name.c_str(), rel_name.c_str(),\n                      GetAttributeName(err_attribute.value(), relid).c_str())));\n    }\n    // `err_attribute` without having values means a conflicting policy with\n    // same priority and same output attrs is already attached.\n    ereport(ERROR, (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n                    errmsg(\"DDM policy \\\"%s\\\" is already attached on relation \"\n                           \"\\\"%s\\\" for given column with same priority\",\n                           err_policy_name.c_str(), rel_name.c_str())));\n  }\n\n  // If it's DETACH and policy is not attached to the grantee, throw an\n  // error.\n  if (is_detach && !is_already_attached) {\n    ereport(ERROR, (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n                    errmsg(\"DDM policy \\\"%s\\\" is not attached on relation \"\n                           \"\\\"%s\\\"\",\n                           pol_name.c_str(), rel_name.c_str())));\n  }", "mimetype": "text/plain", "start_char_idx": 10173, "end_char_idx": 11668, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f5a8e7e7-d57c-459e-8374-88977e31a036": {"__data__": {"id_": "f5a8e7e7-d57c-459e-8374-88977e31a036", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "81720a34-d609-44ea-8efe-4a3c43b89ef4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b963f5c76de2b44fe5df442109f068091944047d334492955110fb7188a22676", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4583ad66-eb65-4025-8073-126a432f1b43", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "if (!is_identical_attachment) {\n    return std::nullopt;\n  }\n  return permid;\n}", "mimetype": "text/plain", "start_char_idx": 11671, "end_char_idx": 11750, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4583ad66-eb65-4025-8073-126a432f1b43": {"__data__": {"id_": "4583ad66-eb65-4025-8073-126a432f1b43", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f5a8e7e7-d57c-459e-8374-88977e31a036", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d22eef73cf05a45976701fc774625104c0a062eaf77b48a14d1284a433d12445", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d07af689-29a5-444d-aae5-f18379e39480", "node_type": "1", "metadata": {}, "hash": "1e6bddafe200e95d7f35239dd0c240cc221df129ffd75e25aec698e79e5d7efc", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3031, "end_char_idx": 3032, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d07af689-29a5-444d-aae5-f18379e39480": {"__data__": {"id_": "d07af689-29a5-444d-aae5-f18379e39480", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4583ad66-eb65-4025-8073-126a432f1b43", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "aa20d5fbf0ed452d1e6114a0da28b3297637b7a75ac7d500505facbe73137d23", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "59ebc952-9c88-484e-b535-6c42158d0b08", "node_type": "1", "metadata": {}, "hash": "0f4f15a6f58cbadc856d361615b248945dbc75b92282d7e7c6b82a3c644f4ee8", "class_name": "RelatedNodeInfo"}}, "text": "// namespace", "mimetype": "text/plain", "start_char_idx": 11754, "end_char_idx": 11766, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "59ebc952-9c88-484e-b535-6c42158d0b08": {"__data__": {"id_": "59ebc952-9c88-484e-b535-6c42158d0b08", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d07af689-29a5-444d-aae5-f18379e39480", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9311c0980654c6029ffadab053d20fc408f91289ef79d263050aa83c7f34aedf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f843c3e2-4291-4e57-847d-c72d15b89076", "node_type": "1", "metadata": {}, "hash": "9538a294248a8f78d74b7515327da08a1e6a127e84021e13a6dcf4c0f5dcf03e", "class_name": "RelatedNodeInfo"}}, "text": "std::unordered_set<std::string> GetDDMPolicyNamesForColumn(\n    Oid relation_id, std::optional<AclId> user_id, std::optional<AclId> role_id,\n    const std::string column_name)", "mimetype": "text/plain", "start_char_idx": 11768, "end_char_idx": 11943, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f843c3e2-4291-4e57-847d-c72d15b89076": {"__data__": {"id_": "f843c3e2-4291-4e57-847d-c72d15b89076", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "59ebc952-9c88-484e-b535-6c42158d0b08", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0c467080c013dddb341987fc2aa36ff03788e1a0622aaa5a3ef86b9106a8bd8f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3089e355-b561-4ab8-a9a5-6027645d7c14", "node_type": "1", "metadata": {}, "hash": "86fc1dd45601cae12683caf7472ac2105f54b6d29c6e925ca72e10dbecb59bf7", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // This function requires a filter over one of user or role. Note that PUBLIC\n  // is viewed as a user with ID InvalidAclId.\n  PGCHECK((user_id.has_value()) ^ (role_id.has_value()),\n          \"%s, user_id set: %d, role_id set: %d\",\n          policy::tag_for_policy_type(kPolicyDDM).c_str(), user_id.has_value(),\n          role_id.has_value());\n\n  // Fetch the attachments for the given filter.\n  std::set<Attachment> attachments =\n      FetchAttachmentsForRel(relation_id, user_id, role_id);\n\n  if (attachments.empty()) return {};\n\n  std::set<ParsedPolicyAttachment> parsed_attachments;\n\n  // Parse the attachments in the functional style.\n  std::transform(attachments.begin(), attachments.end(),\n                 std::inserter(parsed_attachments, parsed_attachments.begin()),\n                 [](Attachment attachment) -> ParsedPolicyAttachment {\n                   return ParseAttachment(attachment);\n                 });\n\n  // Build a map of column names to a relevant (highest priority) attachment\n  // (and some metadata), and take the entry for the requested column name.\n  MaskMap column_map =\n      BuildMaskMap(parsed_attachments, {} /* obj_transform_alp_ctx */);\n\n  auto map_it = column_map.find(column_name);\n  if (map_it == column_map.end()) return {};\n\n  // Extract the policy name from the map entry.\n  std::unordered_set<std::string> policy_names;", "mimetype": "text/plain", "start_char_idx": 11944, "end_char_idx": 13310, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3089e355-b561-4ab8-a9a5-6027645d7c14": {"__data__": {"id_": "3089e355-b561-4ab8-a9a5-6027645d7c14", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f843c3e2-4291-4e57-847d-c72d15b89076", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "273f4f3ef66275cee4037bb44e956705dcf152d809034da9cf6af0cb1d483c4d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a0560093-c007-4d8a-b9f8-969797afb101", "node_type": "1", "metadata": {}, "hash": "d9da33483d1f7d72a6d4321036b6f00db15b9ebb0bd9436968f5935e6a040683", "class_name": "RelatedNodeInfo"}}, "text": "std::transform(\n      map_it->second.begin(), map_it->second.end(),\n      std::inserter(policy_names, policy_names.begin()),\n      [](MergeEntry entry) -> std::string {\n        XCHECK(entry.attachment != nullptr);\n        return std::string(NameStr(entry.attachment->pol.pol.polname));\n      });\n\n  return policy_names;\n}", "mimetype": "text/plain", "start_char_idx": 13313, "end_char_idx": 13634, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a0560093-c007-4d8a-b9f8-969797afb101": {"__data__": {"id_": "a0560093-c007-4d8a-b9f8-969797afb101", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3089e355-b561-4ab8-a9a5-6027645d7c14", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2e76ca7a6336dbd4c8f478a161c730b0a927a0eee2cfdb8d824fced780cef0ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dbc4447-4d87-4b28-828d-58462ad34a3d", "node_type": "1", "metadata": {}, "hash": "719ba83a888367011e526e51c913e705b11af0a198b343ffa76c0d242542faa3", "class_name": "RelatedNodeInfo"}}, "text": "int perm_hash_value(const PermissionKey& key) {\n  std::size_t hash = 0;\n  boost::hash_combine(hash, boost::hash_value(key.priority));\n  boost::hash_combine(hash, boost::hash_value(key.attrsOut));\n  return static_cast<int>(hash);\n}\n\nbool IsPermissionAttached(Oid permId, PolicyGrantee const& grantee) {\n  if (!OidIsValid(permId)) {\n    return false;\n  }\n  switch (grantee.type) {\n    case kGranteeRole: {\n      RoleList* roles = get_perm_rolelist(permId);\n      RoleItem* rip = search_rolelist(roles, grantee.id);\n      return rip != nullptr;\n    }\n    case kGranteeUser:\n    case kGranteePublic: {\n      UserList* users = get_perm_userlist(permId);\n      UserItem* uip = search_userlist(users, grantee.id);\n      return uip != nullptr;\n    }\n  }\n\n  return false;\n}\n\nbool IsPermissionAttached(Oid permId) {\n  if (!OidIsValid(permId)) {\n    return false;\n  }\n  RoleList* roles = get_perm_rolelist(permId);\n  if (roles && USERLIST_NUM(roles) > 0) {\n    return true;\n  }\n  UserList* users = get_perm_userlist(permId);\n  if (users && USERLIST_NUM(users) > 0) {\n    return true;\n  }\n  return false;\n}", "mimetype": "text/plain", "start_char_idx": 13636, "end_char_idx": 14730, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8dbc4447-4d87-4b28-828d-58462ad34a3d": {"__data__": {"id_": "8dbc4447-4d87-4b28-828d-58462ad34a3d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a0560093-c007-4d8a-b9f8-969797afb101", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "39238f8bef768eef80f4e3062f2bb13d5ec9cb4a25e108db1bb32cba7b4dcd2d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "79210568-ff53-437c-a917-f18a83c9a7e6", "node_type": "1", "metadata": {}, "hash": "80c4be2a39450efee15ca8f9df9f42a26676ee1cd9c5d41621ad1116790cc3a8", "class_name": "RelatedNodeInfo"}}, "text": "Oid GetPolicyAttachedToRel(PermissionEntry const& perm_entry) {\n  int hashed_val = perm_hash_value(perm_entry.key);\n  // Get all policies applicable on the relation.\n  CatCList* cat_list = SearchSysCacheExtendedList(\n      PERMPRIV, 5, MyDatabaseId, RelOid_pg_class, perm_entry.relId, hashed_val,\n      DDM_POLICY_PRIV_TYPE, 0);\n  SCOPE_EXIT_GUARD(ReleaseSysCacheList(cat_list));\n  XCHECK(cat_list != nullptr, \"DDM\");\n  // Filter out policies applicable on the given user.\n  for (int i = 0; i < cat_list->n_members; ++i) {\n    HeapTuple tup = &cat_list->members[i]->tuple;\n    if (!HeapTupleIsValid(tup)) {\n      elog(ERROR, \"could not find tuple for relation %u\", perm_entry.relId);\n    }\n    Immutable_pg_permission form =\n        reinterpret_cast<Immutable_pg_permission>(GETSTRUCT(tup));\n    return form->privid;\n  }\n  return InvalidOid;\n}", "mimetype": "text/plain", "start_char_idx": 14732, "end_char_idx": 15575, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "79210568-ff53-437c-a917-f18a83c9a7e6": {"__data__": {"id_": "79210568-ff53-437c-a917-f18a83c9a7e6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dbc4447-4d87-4b28-828d-58462ad34a3d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f2c265dc7b22a923e8b9af4d5379ee0908bec722a2a431b8af4b45c58760a9d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5b1c3568-6ad8-4133-a6d9-cc7bf2c9ac05", "node_type": "1", "metadata": {}, "hash": "5c82898da8edf3a9b0f5ee23df554252bcf8a7e0c7b8b4842cd99390b91dc349", "class_name": "RelatedNodeInfo"}}, "text": "attached_policy_info_t GetAttachedPolicyInfo(Oid polid_to_attach, Oid relid,\n                                             attribute_info_t const& in_attrs,\n                                             attribute_info_t const& out_attrs,\n                                             int4 priority)", "mimetype": "text/plain", "start_char_idx": 15577, "end_char_idx": 15872, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5b1c3568-6ad8-4133-a6d9-cc7bf2c9ac05": {"__data__": {"id_": "5b1c3568-6ad8-4133-a6d9-cc7bf2c9ac05", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "79210568-ff53-437c-a917-f18a83c9a7e6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "52675d511d1c35f94e1643002e24f402641f14ad3fa2962f62dab0dc74156815", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e2555441-7829-479e-832b-0352b2371b1f", "node_type": "1", "metadata": {}, "hash": "3a67d630a6d968bb40f28aafce9817c92b67be25f85addaa5e3d64c56fa4e64c", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::optional<ddm::AttachedAttribute> matched_outatt;\n  std::optional<std::string> matched_path;\n  std::unordered_map<std::string, PathSet> out_colname_to_pathset_map;\n  Oid matched_polid = InvalidOid;\n  Oid matched_permid = InvalidOid;\n\n  ScanKeyData key[2];\n  SysScanDesc scan;\n  HeapTuple tup;\n  int nkeys;\n\n  // Populate out_colname_to_pathset_map with the output column names and\n  // corresponding path values from the output AttachedAttributes. We use this\n  // map to identify any output attribute that conflicts with an already\n  // existing attachment's output attribute.\n  for (AttachedAttribute attached_attribute : out_attrs) {\n    std::string colname =\n        GetColumnNameFromAttachedAttribute(attached_attribute, relid);\n    if (attached_attribute.path.has_value()) {\n      std::string_view string_view_path = {attached_attribute.path.value()};\n      out_colname_to_pathset_map[colname].Add(string_view_path);\n    } else {\n      out_colname_to_pathset_map[colname];\n    }\n  }\n\n  Relation pg_permission_mask =\n      heap_openr(PermissionMaskRelationName, AccessShareLock);\n  SCOPE_EXIT_GUARD(heap_close(pg_permission_mask, AccessShareLock));\n\n  ScanKeyInit(&key[0], Anum_pg_permission_mask_relid, BTEqualStrategyNumber,\n              F_OIDEQ, ObjectIdGetDatum(relid));\n  if (priority >= 0) {\n    nkeys = 2;\n    ScanKeyInit(&key[1], Anum_pg_permission_mask_polpriority,\n                BTEqualStrategyNumber, F_INT4EQ, Int32GetDatum(priority));\n  } else {\n    nkeys = 1;\n  }", "mimetype": "text/plain", "start_char_idx": 15873, "end_char_idx": 17366, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2555441-7829-479e-832b-0352b2371b1f": {"__data__": {"id_": "e2555441-7829-479e-832b-0352b2371b1f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5b1c3568-6ad8-4133-a6d9-cc7bf2c9ac05", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2b27eb4d15a562a8c2cb6be00a7318f1a42739c0eab2855d424b976d76ff7b34", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7bce2934-66b6-4917-8c91-1edb9e2f789c", "node_type": "1", "metadata": {}, "hash": "4f6c0fac3b0f2fb270b6ef2739c0d74aa62c0b81e2c4022a319223117e2db7ec", "class_name": "RelatedNodeInfo"}}, "text": "scan = systable_beginscan(pg_permission_mask, PermissionMaskRelPriorityIndex,\n                            true, SnapshotNow, nkeys, key);\n  SCOPE_EXIT_GUARD(systable_endscan(scan));\n\n  bool is_identical_attachment;\n  while (HeapTupleIsValid(tup = systable_getnext(scan))) {\n    is_identical_attachment =\n        CompareWithAttachment(pg_permission_mask, tup, polid_to_attach, relid,\n                              in_attrs, out_attrs, out_colname_to_pathset_map,\n                              matched_outatt, matched_polid, matched_permid);\n    if (is_identical_attachment) {\n      return {matched_polid, matched_permid, std::nullopt /* matched_outatt */,\n              true /* is_identical_attachment */};\n    }\n  }\n\n  if (matched_outatt) {\n    return {matched_polid, matched_permid, matched_outatt,\n            false /* is_identical_attachment */};\n  }\n\n  // If no identitcal attachment is found and no attachment on any specified\n  // columns of the relation, return InvalidOid for found Permission ID and\n  // Policy ID.\n  return {InvalidOid, InvalidOid, std::nullopt,\n          false /* is_identical_attachment */};\n}", "mimetype": "text/plain", "start_char_idx": 17369, "end_char_idx": 18490, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7bce2934-66b6-4917-8c91-1edb9e2f789c": {"__data__": {"id_": "7bce2934-66b6-4917-8c91-1edb9e2f789c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2555441-7829-479e-832b-0352b2371b1f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a5ad74aa060c77f3a18d2ac0ea8f336046ee3d67aec3808b61d79b2f038ff774", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1c4ed300-34ae-4a9d-b03f-1ecb06ccdcd3", "node_type": "1", "metadata": {}, "hash": "08e5891d1206ace7119c50e500c5a48dcdc8506e0f52be6be57ef5f15033ff7d", "class_name": "RelatedNodeInfo"}}, "text": "bool CompareWithAttachment(\n    Relation pg_permission_mask, HeapTuple tup, Oid polid_to_attach, Oid relid,\n    attribute_info_t const& in_attinfo, attribute_info_t const& out_attinfo,\n    std::unordered_map<std::string, PathSet>& out_colname_to_pathset_map,\n    std::optional<ddm::AttachedAttribute>& matched_outatt, Oid& matched_polid,\n    Oid& matched_permid)", "mimetype": "text/plain", "start_char_idx": 18492, "end_char_idx": 18854, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1c4ed300-34ae-4a9d-b03f-1ecb06ccdcd3": {"__data__": {"id_": "1c4ed300-34ae-4a9d-b03f-1ecb06ccdcd3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7bce2934-66b6-4917-8c91-1edb9e2f789c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ad9cb8198c80bac802809c77c97e7338c745fe3eb2bd8b05f559580a5eb14ea6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "79dab1f9-612f-4f28-84f9-17a73ff0d6d3", "node_type": "1", "metadata": {}, "hash": "dc53dd46ee5949654e1cc65fab670d3ceb6bc80c171488c17841d277bd7445dc", "class_name": "RelatedNodeInfo"}}, "text": "{\n  Immutable_pg_permission_mask ptup =\n      reinterpret_cast<Immutable_pg_permission_mask>(GETSTRUCT(tup));\n  Oid polid = ptup->polid;\n  Oid permid = ptup->permid;\n\n  bool is_outattrs_null = false;\n  Datum datum_outattrs =\n      fastgetattr(tup, Anum_pg_permission_mask_polattrsout,\n                  RelationGetDescr(pg_permission_mask), &is_outattrs_null);\n  if (is_outattrs_null) {\n    return false;\n  }\n  char* output_outattrs =\n      DatumGetCString(DirectFunctionCall1(textout, datum_outattrs));\n  XCHECK(output_outattrs != nullptr);\n\n  attribute_info_t parsed_out_attached_atts =\n      ddm::DeserializeAttachedAttributes(output_outattrs);\n\n  bool is_inattrs_null = false;\n  Datum datum_inattrs =\n      fastgetattr(tup, Anum_pg_permission_mask_polattrsin,\n                  RelationGetDescr(pg_permission_mask), &is_inattrs_null);", "mimetype": "text/plain", "start_char_idx": 18855, "end_char_idx": 19693, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "79dab1f9-612f-4f28-84f9-17a73ff0d6d3": {"__data__": {"id_": "79dab1f9-612f-4f28-84f9-17a73ff0d6d3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1c4ed300-34ae-4a9d-b03f-1ecb06ccdcd3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "46ed3fe5bedb2a056b13d7d97b2f94fed1b4c2bbe641c051b356347a221e241f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "226aebd8-31dd-4751-8404-2fba2cf9748b", "node_type": "1", "metadata": {}, "hash": "e6a77cfa87c704caa7b9bb899be5d23df93f2b978a23439d605847a7bb4f4f56", "class_name": "RelatedNodeInfo"}}, "text": "if (gconf_ddm_enable_identical_attachments && polid_to_attach == polid &&\n      !is_inattrs_null && out_attinfo == parsed_out_attached_atts) {\n    char* output_inattrs =\n        DatumGetCString(DirectFunctionCall1(textout, datum_inattrs));\n    XCHECK(output_inattrs != nullptr);\n    attribute_info_t parsed_in_attached_atts =\n        ddm::DeserializeAttachedAttributes(output_inattrs);\n\n    // If the in_attinfo and out_attinfo  are equal with the\n    // parsed_in_attached_atts and parsed_out_attached_atts, an identical policy\n    // is already attached and we return true.\n    if (in_attinfo == parsed_in_attached_atts) {\n      matched_polid = polid;\n      matched_permid = permid;\n      return true;\n    }\n  }\n\n  if (matched_outatt.has_value()) return false;\n\n  for (ddm::AttachedAttribute attached_attribute : parsed_out_attached_atts) {\n    if (IsConflictingAttachedAttribute(attached_attribute,\n                                       out_colname_to_pathset_map, relid)) {\n      matched_outatt = attached_attribute;\n      matched_polid = polid;\n      matched_permid = permid;\n      break;\n    }\n  }\n\n  return false;\n}", "mimetype": "text/plain", "start_char_idx": 19696, "end_char_idx": 20819, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "226aebd8-31dd-4751-8404-2fba2cf9748b": {"__data__": {"id_": "226aebd8-31dd-4751-8404-2fba2cf9748b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "79dab1f9-612f-4f28-84f9-17a73ff0d6d3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d8adac0b5fa64043efd4ed7037df586bd376249edb597d016c1822723b4d2d5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5a4503d4-3184-4127-920c-e684eb1464d8", "node_type": "1", "metadata": {}, "hash": "d28923a59b2b25b8e9dcd9ef2bb540cc578eee71f17d42038f54a96801e79e41", "class_name": "RelatedNodeInfo"}}, "text": "bool IsConflictingAttachedAttribute(\n    const ddm::AttachedAttribute& attached_attribute,\n    const std::unordered_map<std::string, PathSet>& colname_to_pathset_map,\n    Oid relid) {\n  std::string colname =\n      GetColumnNameFromAttachedAttribute(attached_attribute, relid);\n  auto attrs_map_it = colname_to_pathset_map.find(colname);\n\n  if (attrs_map_it == colname_to_pathset_map.end()) return false;\n\n  // if AttachedAttribute has path, we also need to check if the path is\n  // contained (fully / partically) to be a conflicting column.\n  if (attached_attribute.path) {\n    RawPath path(attached_attribute.path->data(),\n                 attached_attribute.path->size());\n    std::vector<std::string_view> components(path.begin(), path.end());\n    PathSet::PathMembership membership =\n        attrs_map_it->second.CheckPathMembership(components);\n\n    if (membership == PathSet::PathMembership::kNotContained) return false;\n  }\n\n  return true;\n}", "mimetype": "text/plain", "start_char_idx": 20821, "end_char_idx": 21770, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5a4503d4-3184-4127-920c-e684eb1464d8": {"__data__": {"id_": "5a4503d4-3184-4127-920c-e684eb1464d8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "226aebd8-31dd-4751-8404-2fba2cf9748b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c42dfe68701aa46f67fd08f423eb2d6b4db854c0041fc287455eb87bd483fc98", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a5cb2300-7fc4-43b0-ae76-bac4aea81aeb", "node_type": "1", "metadata": {}, "hash": "27b5eba23ffd69fe75027e1015b4e95d9587e3282e10a6a06aa1e6f073720be6", "class_name": "RelatedNodeInfo"}}, "text": "std::unordered_set<Oid> GetAttachedPermsForRelOutput(\n    PermissionEntry const& permEntry, PolicyGrantee const& grantee)", "mimetype": "text/plain", "start_char_idx": 21772, "end_char_idx": 21893, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a5cb2300-7fc4-43b0-ae76-bac4aea81aeb": {"__data__": {"id_": "a5cb2300-7fc4-43b0-ae76-bac4aea81aeb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5a4503d4-3184-4127-920c-e684eb1464d8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ba7c8dc8a63351f72218205a4cdd6fa8b4919408493ba46464015df286e2eaf9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c3a6f79-f180-4106-898b-989c3886502a", "node_type": "1", "metadata": {}, "hash": "1bc4fbdcd046ee1d5f15f7e455864d1db3ed4705e8dba0f1a1526a5300e8ba4f", "class_name": "RelatedNodeInfo"}}, "text": "{\n  ScanKeyData key[2];\n  SysScanDesc scan;\n  HeapTuple tup;\n  std::unordered_set<Oid> permIds;\n\n  /* Grab an appropriate lock on the pg_permission_mask relation */\n  Relation pg_permission_mask =\n      heap_openr(PermissionMaskRelationName, RowExclusiveLock);\n  SCOPE_EXIT_GUARD(heap_close(pg_permission_mask, RowExclusiveLock));\n\n  ScanKeyInit(&key[0], Anum_pg_permission_mask_relid, BTEqualStrategyNumber,\n              F_OIDEQ, ObjectIdGetDatum(permEntry.relId));\n  Datum outputAttNumDatum = DirectFunctionCall1(\n      textin, CStringGetDatum(permEntry.key.attrsOut.c_str()));\n  ScanKeyInit(&key[1], Anum_pg_permission_mask_polattrsout,\n              BTEqualStrategyNumber, F_TEXTEQ, outputAttNumDatum);\n  scan = systable_beginscan(pg_permission_mask, PermissionMaskRelAttrsoutIndex,\n                            true, SnapshotNow, 2 /* nkeys */, key);\n  SCOPE_EXIT_GUARD(systable_endscan(scan));\n\n  while (HeapTupleIsValid(tup = systable_getnext(scan))) {\n    Immutable_pg_permission_mask ptup =\n        reinterpret_cast<Immutable_pg_permission_mask>(GETSTRUCT(tup));\n    // Check whether policy ID matches with deleting policy.\n    if (ptup->polid != permEntry.polId) {\n      continue;\n    }\n    // Check whether permission is attached to the grantee.\n    if (!IsPermissionAttached(ptup->permid, grantee)) {\n      continue;\n    }\n    permIds.insert(ptup->permid);\n  }\n  return permIds;\n}", "mimetype": "text/plain", "start_char_idx": 21894, "end_char_idx": 23286, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c3a6f79-f180-4106-898b-989c3886502a": {"__data__": {"id_": "6c3a6f79-f180-4106-898b-989c3886502a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a5cb2300-7fc4-43b0-ae76-bac4aea81aeb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6e0f0480c4e5ab22b918c3efc7b10f8ea07cde1d0e0c6b54ce22343ccedd2dd5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eeee25ef-9b10-4112-a4af-3af5c5c15144", "node_type": "1", "metadata": {}, "hash": "95ef31ff32972c3b842400655bf19a153802a3aa6f12affe46f22403ead0f8a6", "class_name": "RelatedNodeInfo"}}, "text": "PolicyGrantee ResolvePolicyGrantee(const PolicyPrivGrantee* grantee)", "mimetype": "text/plain", "start_char_idx": 23288, "end_char_idx": 23356, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eeee25ef-9b10-4112-a4af-3af5c5c15144": {"__data__": {"id_": "eeee25ef-9b10-4112-a4af-3af5c5c15144", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c3a6f79-f180-4106-898b-989c3886502a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9cbf2f4dae050db559237cee2abfa8fdc027b8df0ed82e4e44994598eb36d0fd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4b32f9a0-b9e0-4c2c-b96f-243280c1f289", "node_type": "1", "metadata": {}, "hash": "6cfa67d0b0378d09584235fbf5f3964f464ba9601e89734b7531d23290ab3ba8", "class_name": "RelatedNodeInfo"}}, "text": "{\n  PolicyGrantee resolvedGrantee;\n  if (grantee->sharename != nullptr) {\n    // Datashare is not supported.\n    XCHECK(grantee->username == nullptr);\n    LogPolicyUnsupportedFeature(\"Datashare\", PolicyType::kPolicyDDM);\n    ereport(ERROR,\n            (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n             errmsg(\"attaching a policy to a datashare is not supported.\")));\n  }\n\n  if (grantee->rolename != nullptr) {\n    char* authname = grantee->rolename;\n    AclId authid = get_roleid(authname);\n    XCHECK(authid != InvalidAclId);\n    // Reserved roles such as sys:dba or sys:operator are not supported.\n    if (IsRoleReserved(authname)) {\n      ereport(ERROR, (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n                      errmsg(\"cannot attach policy to reserved role \\\"%s\\\"\",\n                             authname)));\n    }\n    resolvedGrantee.type = GranteeType::kGranteeRole;\n    resolvedGrantee.id = authid;\n    resolvedGrantee.name = authname;\n    return resolvedGrantee;\n  }", "mimetype": "text/plain", "start_char_idx": 23357, "end_char_idx": 24341, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4b32f9a0-b9e0-4c2c-b96f-243280c1f289": {"__data__": {"id_": "4b32f9a0-b9e0-4c2c-b96f-243280c1f289", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eeee25ef-9b10-4112-a4af-3af5c5c15144", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eba82929cbca63a30af4805291e87a9ca7a10ca2ed02e001c843660044da38fb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "98426c07-1374-4f47-aee7-967d2b84cac3", "node_type": "1", "metadata": {}, "hash": "806bf7c2d54c26045fbc6b5c63b8815cf7687e4758ef2a6fcd0791aa05d358a6", "class_name": "RelatedNodeInfo"}}, "text": "if (grantee->username != nullptr) {\n    char* authname = grantee->username;\n    AclId authid = get_usesysid(authname);\n    XCHECK(authid != InvalidAclId);\n    if (superuser_arg(authid)) {\n      ereport(ERROR,\n              (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n               errmsg(\"cannot attach policy to superuser \\\"%s\\\"\", authname)));\n    }\n    resolvedGrantee.type = GranteeType::kGranteeUser;\n    resolvedGrantee.id = authid;\n    resolvedGrantee.name = authname;\n  } else {\n    resolvedGrantee.type = GranteeType::kGranteePublic;\n    resolvedGrantee.id = InvalidAclId;\n    resolvedGrantee.name = nullptr;\n  }\n  return resolvedGrantee;\n}", "mimetype": "text/plain", "start_char_idx": 24345, "end_char_idx": 24993, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "98426c07-1374-4f47-aee7-967d2b84cac3": {"__data__": {"id_": "98426c07-1374-4f47-aee7-967d2b84cac3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4b32f9a0-b9e0-4c2c-b96f-243280c1f289", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1fd646c4992244fe8375e153a7d46190c5d608f2c0685eee3959036736735de1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b8ad4d8-e167-40a3-bc14-18e18ddd6831", "node_type": "1", "metadata": {}, "hash": "0c6a6b1fae216af42074994fd1d32bcec76ea429c33b55dbd7e99cde4aa26578", "class_name": "RelatedNodeInfo"}}, "text": "std::pair<Oid, bool> AttachPolicyOnRel(\n    PermissionEntry const& perm_entry, std::string pol_name,\n    attribute_info_t const& in_attribute_info,\n    attribute_info_t const& out_attribute_info, std::string rel_name,\n    PolicyGrantee const& grantee) {\n  std::optional<AclId> existing_attachment = CheckDDMPolicyOnRel(\n      perm_entry, pol_name, in_attribute_info, out_attribute_info, rel_name,\n      grantee, false /* isDetach */);\n\n  Oid permid = InvalidAclId;\n  if (existing_attachment.has_value()) {\n    permid = existing_attachment.value();\n  } else {\n    permid = ddm::CreateDDMPolicyPermission(perm_entry);\n  }\n  XCHECK(permid != InvalidAclId, DDM_CALLER);\n  List* role_ids = nullptr;\n  List* user_ids = nullptr;\n  switch (grantee.type) {\n    case kGranteeRole: {\n      role_ids = lappend_int(role_ids, grantee.id);\n      break;\n    }\n    case kGranteeUser:\n    case kGranteePublic: {\n      user_ids = lappend_int(user_ids, grantee.id);\n      break;\n    }\n  }\n\n  // Grant permissions to users and roles on the relation.\n  DoGrant(true /* is_grant */, false /* grant_option */, permid, GetUserId(),\n          GetUserId(), user_ids, role_ids, false /* is_clp */,\n          InvalidOid /* rel_permid */, InvalidAclId /* privid */,\n          nullptr /* qualified_col_name */);\n\n  return std::make_pair(permid, existing_attachment.has_value());\n}", "mimetype": "text/plain", "start_char_idx": 24995, "end_char_idx": 26344, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b8ad4d8-e167-40a3-bc14-18e18ddd6831": {"__data__": {"id_": "2b8ad4d8-e167-40a3-bc14-18e18ddd6831", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "98426c07-1374-4f47-aee7-967d2b84cac3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f9d6986aa16720bdb7daab95167e075e1d0a6655c0211a13b26c94332b724e64", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "32a9d49f-08f9-47e4-b7fa-69e92ffe7adb", "node_type": "1", "metadata": {}, "hash": "187d1e19870f417de8e53c55c8251eb575a5ef66e52f6e5ec52f16850d22f419", "class_name": "RelatedNodeInfo"}}, "text": "std::unordered_set<Oid> DetachDDMPolicyOnRel(\n    PermissionEntry const& perm_entry, std::string pol_name,\n    attribute_info_t const& in_attribute_info,\n    attribute_info_t const& out_attribute_info, std::string rel_name,\n    PolicyGrantee const& grantee) {\n  ddm::CheckDDMPolicyOnRel(perm_entry, pol_name, in_attribute_info,\n                           out_attribute_info, rel_name, grantee,\n                           true /* isDetach */);\n\n  std::unordered_set<Oid> permIds =\n      GetAttachedPermsForRelOutput(perm_entry, grantee);\n  if (permIds.empty()) {\n    const char* columnText =\n        (out_attribute_info.size() > 1) ? \"columns\" : \"column\";\n    const char* granteeName = grantee.name == nullptr ? \"PUBLIC\" : grantee.name;\n    ereport(\n        ERROR,\n        (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n         errmsg(\"DDM policy \\\"%s\\\" is not attached to \\\"%s\\\" on specified %s\",\n                pol_name.c_str(), granteeName, columnText)));\n  }\n\n  for (Oid permId : permIds) {\n    if (OidIsValid(permId)) {\n      // Revoke permissions from users and roles on the relation.\n      ddm::RevokeDDMPermissions(permId, grantee);\n    }\n  }\n  // Make all changes visible before processing the next table.\n  CommandCounterIncrement();\n\n  return permIds;\n}", "mimetype": "text/plain", "start_char_idx": 26346, "end_char_idx": 27607, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "32a9d49f-08f9-47e4-b7fa-69e92ffe7adb": {"__data__": {"id_": "32a9d49f-08f9-47e4-b7fa-69e92ffe7adb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2b8ad4d8-e167-40a3-bc14-18e18ddd6831", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "407a5474708f43e73603c706882c583aefc13dde3229a69fdf2998749340f9e3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02bf4e34-eac2-491a-8053-df957155aa07", "node_type": "1", "metadata": {}, "hash": "4710426c2618060cb321fb8180494684ce38f43eea0d85eaaf7d627f7701e829", "class_name": "RelatedNodeInfo"}}, "text": "void ReportIdenticalPolicyAttachedToGranteeError(\n    std::string const& error_policy, std::string const& rel_name,\n    PolicyGrantee const& grantee) {\n  switch (grantee.type) {\n    case kGranteeRole: {\n      ereport(ERROR,\n              (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n               errmsg(\"DDM policy \\\"%s\\\" is already attached on relation \"\n                      \"\\\"%s\\\" for given column with same priority \"\n                      \"to role \\\"%s\\\"\",\n                      error_policy.c_str(), rel_name.c_str(), grantee.name)));\n      break;\n    }\n    case kGranteeUser: {\n      ereport(ERROR,\n              (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n               errmsg(\"DDM policy \\\"%s\\\" is already attached on relation \"\n                      \"\\\"%s\\\" for given column with same priority \"\n                      \"to user \\\"%s\\\"\",\n                      error_policy.c_str(), rel_name.c_str(), grantee.name)));\n      break;\n    }\n    case kGranteePublic: {\n      ereport(ERROR,\n              (errcode(ERRCODE_INVALID_GRANT_OPERATION),\n               errmsg(\"DDM policy \\\"%s\\\" is already attached on relation \"\n                      \"\\\"%s\\\" for given column with same priority \"\n                      \"to public\",\n                      error_policy.c_str(), rel_name.c_str())));\n      break;\n    }\n  }\n}\n}", "mimetype": "text/plain", "start_char_idx": 27609, "end_char_idx": 28929, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "02bf4e34-eac2-491a-8053-df957155aa07": {"__data__": {"id_": "02bf4e34-eac2-491a-8053-df957155aa07", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "32a9d49f-08f9-47e4-b7fa-69e92ffe7adb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "32c35517ee7f247fce9aaeb95522fd51ddc90301abd95b46bbf733069e37f5ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "43613727-dc5d-4995-b53e-8e8a1a338eea", "node_type": "1", "metadata": {}, "hash": "4cdf394931b8c9bf821ee1a22041ead19c2714160e090df7b01e391fe08e4d0c", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm\n\nOid GetDDMPolicyIdByPermId(Oid permission_id) {\n  HeapTuple tuple = SearchSysCache(PERMID, permission_id, 0, 0, 0);\n  if (!HeapTupleIsValid(tuple)) {\n    elog(ERROR, \"could not find tuple for permission %u\", permission_id);\n  }\n  SCOPE_EXIT_GUARD(ReleaseSysCache(tuple));\n  Immutable_pg_permission pg_permission_form =\n      reinterpret_cast<Immutable_pg_permission>(GETSTRUCT(tuple));\n  XPGCHECK(pg_permission_form->privtype == DDM_POLICY_PRIV_TYPE,\n           policy::tag_for_policy_type(kPolicyDDM));\n  XPGCHECK(OidIsValid(pg_permission_form->privid),\n           policy::tag_for_policy_type(kPolicyDDM));\n  return pg_permission_form->privid;\n}", "mimetype": "text/plain", "start_char_idx": 28931, "end_char_idx": 29595, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "43613727-dc5d-4995-b53e-8e8a1a338eea": {"__data__": {"id_": "43613727-dc5d-4995-b53e-8e8a1a338eea", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dcceaf65692a2ef36b093b32882443f926de14e75e6f074eda82467ff510704", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "02bf4e34-eac2-491a-8053-df957155aa07", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d30981ae57bbc8c528db8f9e80cfad8f6be16402fc82c3318653e406a1804719", "class_name": "RelatedNodeInfo"}}, "text": "bool CheckMaskingOnForDatashares(Oid relid) {\n  // When the GUC gconf_ddm_enable_for_datashares is not enabled, masking is\n  // default on for datashares.\n  if (!gconf_ddm_enable_for_datashares) {\n    return true;\n  }\n\n  ddm::DDMFlagState ddm_flag_state;\n  int64 ddm_datashare_enabled = 0;\n\n  if (!pg::GetClassExtendedEntryInt(relid, PG_CLASS_ENABLE_DDM_RLS_DATASHARES,\n                                    &ddm_datashare_enabled)) {\n    // DDM datasharing flag is unset. If unset(kFlagUnset), the default behavior\n    // is DDM datasharing is enabled.\n    return true;\n  }\n\n  switch (ddm_datashare_enabled) {\n    case DDM_DS_UNSET_RLS_DS_OFF:\n    case DDM_DS_UNSET_RLS_DS_ON:\n      ddm_flag_state = ddm::DDMFlagState::kFlagUnset;\n      break;\n\n    case DDM_DS_OFF_RLS_DS_ON:\n    case DDM_DS_OFF_RLS_DS_OFF:\n    case DDM_DS_OFF_RLS_DS_UNSET:\n      ddm_flag_state = ddm::DDMFlagState::kFlagOff;\n      break;\n\n    case DDM_DS_ON_RLS_DS_OFF:\n    case DDM_DS_ON_RLS_DS_ON:\n    case DDM_DS_ON_RLS_DS_UNSET:\n      ddm_flag_state = ddm::DDMFlagState::kFlagOn;\n      break;\n\n    default:\n      XCHECK_UNREACHABLE(\"Invalid DDM RLS datasharing column value\");\n  }\n\n  // DDM datashare is not enabled only when the DDM datashare is explicitly\n  // set to off.\n  return ddm_flag_state != ddm::DDMFlagState::kFlagOff;\n}", "mimetype": "text/plain", "start_char_idx": 29597, "end_char_idx": 30901, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73703f54-526d-4829-b166-2c90874b7dc6": {"__data__": {"id_": "73703f54-526d-4829-b166-2c90874b7dc6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b9bff384-ca88-4e90-8d5b-d30a89ebda1c", "node_type": "1", "metadata": {}, "hash": "b2a980883af2516cb4fb73784aa49fdd3efd213e5aa677ad62694ff98bf1f54c", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_policy.hpp\"\n\n#include \"access/heapam.h\"\n#include \"catalog/catname.h\"\n#include \"catalog/indexing.h\"\n#include \"catalog/pg_datashare_objects.h\"\n#include \"catalog/pg_permission.h\"\n#include \"catalog/pg_permission_mask.h\"\n#include \"catalog/pg_permission_policy.h\"\n#include \"catalog/pg_policy_mask.h\"\n#include \"commands/rlscmds.h\"\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_lf_alp.hpp\"\n#include \"ddm/ddm_over_nested.hpp\"\n#include \"ddm/ddm_permission.hpp\"\n#include \"ddm/ddm_serialization.hpp\"\n#include \"ddm/unsupported.h\"\n#include \"external_catalog/table_registry.hpp\"\n#include \"nested_fe/nested_query_api.h\"\n#include \"nodes/makefuncs.h\"\n#include \"nodes/pg_list.h\"\n#include \"nodes/value.h\"\n#include \"omnisql/omnisql.h\"\n#include \"omnisql/omnisql_view.h\"\n#include \"parser/analyze.h\"\n#include \"parser/parse_coerce.h\"\n#include \"parser/parse_expr.h\"\n#include \"parser/parse_type.h\"\n#include \"policy/policy_permission.h\"\n#include \"policy/policy_utils.h\"\n#include \"policy/policy_utils.hpp\"\n#include \"rewrite/rewriteHandler.h\"\n#include \"rewrite/rewriteSupport.h\"\n#include \"seclog/seclog_masking.hpp\"\n#include \"storage/lmgr.h\"\n#include \"sys/pg_defs.hpp\"\n#include \"sys/query.hpp\"\n#include \"sys/stats_indicator.hpp\"\n#include \"tcop/tcopprot.h\"\n#include \"util/get_correct_typmod.hpp\"\n#include \"util/stack_guard.h\"\n#include \"utils/builtins.h\"\n#include \"utils/catcache.h\"\n#include \"utils/lsyscache.h\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1475, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b9bff384-ca88-4e90-8d5b-d30a89ebda1c": {"__data__": {"id_": "b9bff384-ca88-4e90-8d5b-d30a89ebda1c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73703f54-526d-4829-b166-2c90874b7dc6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "28fbbc7f2646a9c99926e17d7b519a34d98f5289e07551992846b5442409cd8b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b28c06e5-42f3-46fe-8a05-e34180249556", "node_type": "1", "metadata": {}, "hash": "dc99fc6626cce7524976fef4dd418656f8ed548136363cc48fcf3c2ea542acc1", "class_name": "RelatedNodeInfo"}}, "text": "#include \"xen_utils/scope_exit_guard.hpp\"\n\n#include \"pg/src/include/c.h\"\n#include \"pg/src/include/postgres_ext.h\"\n\n#include <memory>\n#include <set>\n#include <string>\n#include <unordered_map>\n#include <vector>\n\nextern bool gconf_ddm_enable_grant_revoke_for_functions;\nextern bool gconf_ddm_enable_perm_check;\nextern bool gconf_ddm_enable_over_super_paths;\nextern bool gconf_enable_lf_alp;\nextern bool gconf_enable_session_context_variable;\nextern bool g_pgtest_ddm;\nextern bool gconf_spectrum_enable_lf_data_filters;\nextern bool gconf_ddm_enable_lbv_caching;", "mimetype": "text/plain", "start_char_idx": 1476, "end_char_idx": 2033, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b28c06e5-42f3-46fe-8a05-e34180249556": {"__data__": {"id_": "b28c06e5-42f3-46fe-8a05-e34180249556", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9bff384-ca88-4e90-8d5b-d30a89ebda1c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4e211748f1f3b3c4f5fd5909f17a4ec34c31e176cadfdec24e5afd0a6ab60922", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e31416f6-d191-4d9e-b180-6e416b7cca33", "node_type": "1", "metadata": {}, "hash": "d1622a5256075277df7a441314b5198139203894ca21a9609f2bf657f1cef59d", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm", "mimetype": "text/plain", "start_char_idx": 2035, "end_char_idx": 2048, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e31416f6-d191-4d9e-b180-6e416b7cca33": {"__data__": {"id_": "e31416f6-d191-4d9e-b180-6e416b7cca33", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b28c06e5-42f3-46fe-8a05-e34180249556", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "84a0ca2f4a4543069ec451b322204eeaa2324fb630e61c43bb42f22e305b8cc2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8975368a-7008-4e60-9f04-fbe124cbb417", "node_type": "1", "metadata": {}, "hash": "44cba8701e2193f69a15c1c7047ba3235ed276157f61a2955c921b72bb8c1652", "class_name": "RelatedNodeInfo"}}, "text": "{\n\nconst int RESERVE_POL_SIZE = 50;\nconst char* EXPRESSION_DELIM = \", \";\n/// Default value for typmod as 260.\nconst int32 defaultTypmod = 260;\n\n/// @brief Checks (and ereport's if check fails) that the DDM attachment is\n/// supported in (in this version of padb given GIC settings).\n///\n/// Currently, only checks that the attachment is not to a SUPER path.\n///\n/// @param attachment the DDM attachment to check.\n/// @throws ereport if check fails.\nvoid CheckAttachmentSupported(Attachment attachment);\n\n/// Construct a select query for the given rte. Resulting query is of the form\n/// `select col1, col2, col3... from table_name`\nSelectStmt* BuildQueryForRTE(const RangeTblEntry* rte,\n                             std::optional<std::vector<std::string>> colnames);\n\n/// @brief A helper for BuildMaskMap to build inital mask map from attachments\n/// (includes logic for nested attachments). This does not include LF-ALP and\n/// processing of ColumnRef's.\nvoid LoadMaskMapFromAttachments(\n    const std::set<ParsedPolicyAttachment>& attachments, MaskMap* masks);", "mimetype": "text/plain", "start_char_idx": 2049, "end_char_idx": 3111, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8975368a-7008-4e60-9f04-fbe124cbb417": {"__data__": {"id_": "8975368a-7008-4e60-9f04-fbe124cbb417", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e31416f6-d191-4d9e-b180-6e416b7cca33", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "28a5fe4f5fbcd94f3c142b670a3cd914075f42b6e3b0d56e8e63edd6c1f78ae5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fb9fd3ac-725d-477e-bc20-0983fe9de6d8", "node_type": "1", "metadata": {}, "hash": "1de953a2305de104a5485e89d8f5cc39a9d4e10c6154c0995efeba04df163c97", "class_name": "RelatedNodeInfo"}}, "text": "Node* parse_tree_mutator(Node* node, mutator_fn_t mutator, void* context)", "mimetype": "text/plain", "start_char_idx": 3113, "end_char_idx": 3186, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fb9fd3ac-725d-477e-bc20-0983fe9de6d8": {"__data__": {"id_": "fb9fd3ac-725d-477e-bc20-0983fe9de6d8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8975368a-7008-4e60-9f04-fbe124cbb417", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4b0ad831a36754037ea15e81778b1a082a5f003031e762b82580d9d62b457755", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cae8229a-e2de-4102-8d43-7ed34de986b7", "node_type": "1", "metadata": {}, "hash": "f9d20d48b6ad12b26720a000783743c09d00916d11f0ccb332d973d8cab8f1b0", "class_name": "RelatedNodeInfo"}}, "text": "{\n  if (node == nullptr) return nullptr;\n\n  // Guard against stack overflow due to overly complex expressions\n  CheckStackDepth();\n  // mutate node\n  node = mutator(node, context);", "mimetype": "text/plain", "start_char_idx": 3187, "end_char_idx": 3367, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cae8229a-e2de-4102-8d43-7ed34de986b7": {"__data__": {"id_": "cae8229a-e2de-4102-8d43-7ed34de986b7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fb9fd3ac-725d-477e-bc20-0983fe9de6d8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "84cbf4562b7b37e044718b045620a79dbfc0377bd0c80828ee5147d17e93fbae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "32a90ff7-6500-4ae5-b85a-6bfd87668b61", "node_type": "1", "metadata": {}, "hash": "1d04081efe4a6b81a06b3bd0a0d63a730bd37853eacbdd8386ecd67f718f036d", "class_name": "RelatedNodeInfo"}}, "text": "switch (nodeTag(node))", "mimetype": "text/plain", "start_char_idx": 3370, "end_char_idx": 3392, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "32a90ff7-6500-4ae5-b85a-6bfd87668b61": {"__data__": {"id_": "32a90ff7-6500-4ae5-b85a-6bfd87668b61", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cae8229a-e2de-4102-8d43-7ed34de986b7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fde08443c57f3735ce38f8e3f2827c2a670720a1e9c3021b9fbd3b8b225bd1b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b2fc977-c44b-46fd-9f0f-682ae78c96fa", "node_type": "1", "metadata": {}, "hash": "ae3b52ebb26d00cb13c1854ae6f7d449df22ff7ba370be2f55576b428f367f4f", "class_name": "RelatedNodeInfo"}}, "text": "{\n    case T_A_Const:\n    case T_ColumnRef:\n    case T_String:\n    case T_SelectStmt:\n    case T_ParamRef: {\n      return node;\n    }\n    case T_A_Indirection: {\n      A_Indirection* ind = reinterpret_cast<A_Indirection*>(node);\n      ind->arg = parse_tree_mutator(ind->arg, mutator, context);\n      ListCell* lc = nullptr;\n      foreach(lc, ind->indirection) {\n        replace_pointer(\n            lc, parse_tree_mutator(reinterpret_cast<Node*>(lfirst(lc)), mutator,\n                                   context));\n      }\n      return reinterpret_cast<Node*>(ind);\n    }\n    case T_A_Indices: {\n      A_Indices* idx = reinterpret_cast<A_Indices*>(node);\n      idx->lidx = parse_tree_mutator(idx->lidx, mutator, context);\n      idx->uidx = parse_tree_mutator(idx->uidx, mutator, context);\n      return reinterpret_cast<Node*>(idx);\n    }\n    case T_TypeCast: {\n      TypeCast* tc = reinterpret_cast<TypeCast*>(node);\n      tc->arg = parse_tree_mutator(tc->arg, mutator, context);\n      return reinterpret_cast<Node*>(tc);\n    }\n    case T_TryCast: {\n      TryCast* tc = reinterpret_cast<TryCast*>(node);\n      tc->arg = parse_tree_mutator(tc->arg, mutator, context);\n      return reinterpret_cast<Node*>(tc);\n    }\n    case T_A_Expr: {\n      A_Expr* a = reinterpret_cast<A_Expr*>(node);\n      a->lexpr = parse_tree_mutator(a->lexpr, mutator, context);\n      a->rexpr = parse_tree_mutator(a->rexpr, mutator, context);\n      return reinterpret_cast<Node*>(a);\n    }", "mimetype": "text/plain", "start_char_idx": 3393, "end_char_idx": 4855, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b2fc977-c44b-46fd-9f0f-682ae78c96fa": {"__data__": {"id_": "3b2fc977-c44b-46fd-9f0f-682ae78c96fa", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "32a90ff7-6500-4ae5-b85a-6bfd87668b61", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bb1bf7a460420cb547cab2eb04767e561ea148b32af3a82ed7dedd2994d05109", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c5584b8-8e06-4892-b1aa-f58d47e05d4e", "node_type": "1", "metadata": {}, "hash": "03c756e9e90d9613a159bba08fcc2194ad72c3977904ee89c541f4868d04c905", "class_name": "RelatedNodeInfo"}}, "text": "case T_FuncCall: {\n      FuncCall* fn = reinterpret_cast<FuncCall*>(node);\n      ListCell* arg = nullptr;\n      foreach(arg, fn->args) {\n        replace_pointer(arg,\n                        parse_tree_mutator(reinterpret_cast<Node*>(lfirst(arg)),\n                                           mutator, context));\n      }\n      return reinterpret_cast<Node*>(fn);\n    }\n    case T_SubLink: {\n      SubLink* sl = reinterpret_cast<SubLink*>(node);\n      if (sl->subLinkType != EXISTS_SUBLINK && sl->subLinkType != ANY_SUBLINK) {\n        ereport(\n            ERROR,\n            (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n             errmsg(\"Query type not supported in data masking expression.\")));\n      }\n      ListCell* lc = nullptr;\n      foreach(lc, sl->lefthand) {\n        replace_pointer(\n            lc, parse_tree_mutator(reinterpret_cast<Node*>(lfirst(lc)), mutator,\n                                   context));\n      }\n      foreach(lc, sl->operName) {\n        replace_pointer(\n            lc, parse_tree_mutator(reinterpret_cast<Node*>(lfirst(lc)), mutator,\n                                   context));\n      }\n      foreach(lc, sl->operOids) {\n        replace_pointer(\n            lc, parse_tree_mutator(reinterpret_cast<Node*>(lfirst(lc)), mutator,\n                                   context));\n      }\n      sl->subselect = parse_tree_mutator(sl->subselect, mutator, context);\n      return reinterpret_cast<Node*>(sl);\n    }", "mimetype": "text/plain", "start_char_idx": 4860, "end_char_idx": 6293, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c5584b8-8e06-4892-b1aa-f58d47e05d4e": {"__data__": {"id_": "0c5584b8-8e06-4892-b1aa-f58d47e05d4e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b2fc977-c44b-46fd-9f0f-682ae78c96fa", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "084c3d9f55012a19d6511ab7451ae06722cb315191ea0c2b09570310d423882a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d9e60313-8e55-49c6-b1ce-9610646496ee", "node_type": "1", "metadata": {}, "hash": "4aad23df86e656c73fb2aafb80bbe2fb5965bcbd9db368b87345b2cb80673ade", "class_name": "RelatedNodeInfo"}}, "text": "case T_CaseExpr: {\n      CaseExpr* c = reinterpret_cast<CaseExpr*>(node);\n      c->arg = reinterpret_cast<Expr*>(parse_tree_mutator(\n          reinterpret_cast<Node*>(c->arg), mutator, context));\n      c->defresult = reinterpret_cast<Expr*>(parse_tree_mutator(\n          reinterpret_cast<Node*>(c->defresult), mutator, context));\n      ListCell* arg = nullptr;\n      foreach(arg, c->args) {\n        replace_pointer(arg,\n                        parse_tree_mutator(reinterpret_cast<Node*>(lfirst(arg)),\n                                           mutator, context));\n      }\n      return reinterpret_cast<Node*>(c);\n    }\n    case T_CaseWhen: {\n      CaseWhen* cw = reinterpret_cast<CaseWhen*>(node);\n      cw->expr = reinterpret_cast<Expr*>(parse_tree_mutator(\n          reinterpret_cast<Node*>(cw->expr), mutator, context));\n      cw->result = reinterpret_cast<Expr*>(parse_tree_mutator(\n          reinterpret_cast<Node*>(cw->result), mutator, context));\n      return reinterpret_cast<Node*>(cw);\n    }\n    case T_NullTest: {\n      NullTest* nt = reinterpret_cast<NullTest*>(node);\n      nt->arg = reinterpret_cast<Expr*>(parse_tree_mutator(\n          reinterpret_cast<Node*>(nt->arg), mutator, context));\n      return reinterpret_cast<Node*>(nt);\n    }", "mimetype": "text/plain", "start_char_idx": 6298, "end_char_idx": 7550, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d9e60313-8e55-49c6-b1ce-9610646496ee": {"__data__": {"id_": "d9e60313-8e55-49c6-b1ce-9610646496ee", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c5584b8-8e06-4892-b1aa-f58d47e05d4e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "50489759c144cc47f7bfed1379664797f390906146b34c9e8d5ef09204094b36", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "adc53d4f-bd2b-450f-beac-388317022328", "node_type": "1", "metadata": {}, "hash": "f89da7ba60f120cd95ecc86f4bebc370c8ad63dd89b6ce77d2a98c1bd9f51c1d", "class_name": "RelatedNodeInfo"}}, "text": "case T_MinMaxExpr: {\n      MinMaxExpr* mme = reinterpret_cast<MinMaxExpr*>(node);\n      ListCell* arg = nullptr;\n      foreach(arg, mme->args) {\n        replace_pointer(\n            arg, reinterpret_cast<Node*>(parse_tree_mutator(\n                     reinterpret_cast<Node*>(lfirst(arg)), mutator, context)));\n      }\n      return reinterpret_cast<Node*>(mme);\n    }\n    case T_GroupingFunc: {\n      GroupingFunc* g_func = reinterpret_cast<GroupingFunc*>(node);\n      ListCell* arg = nullptr;\n      foreach(arg, g_func->args) {\n        replace_pointer(arg,\n                        parse_tree_mutator(reinterpret_cast<Node*>(lfirst(arg)),\n                                           mutator, context));\n      }\n\n      foreach(arg, g_func->refs) {\n        replace_pointer(arg,\n                        parse_tree_mutator(reinterpret_cast<Node*>(lfirst(arg)),\n                                           mutator, context));\n      }\n      return reinterpret_cast<Node*>(g_func);\n    }\n    case T_BooleanTest: {\n      BooleanTest* b_test = reinterpret_cast<BooleanTest*>(node);\n      b_test->arg = reinterpret_cast<Expr*>(parse_tree_mutator(\n          reinterpret_cast<Node*>(b_test->arg), mutator, context));\n      return reinterpret_cast<Node*>(b_test);\n    }", "mimetype": "text/plain", "start_char_idx": 7555, "end_char_idx": 8809, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "adc53d4f-bd2b-450f-beac-388317022328": {"__data__": {"id_": "adc53d4f-bd2b-450f-beac-388317022328", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d9e60313-8e55-49c6-b1ce-9610646496ee", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "576f3672b27be36a7742dd051c5fdb176af471f29e9f0c9b0ca7557070bb829b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "61ff32d4-be67-47cf-9069-f97f002c4734", "node_type": "1", "metadata": {}, "hash": "0d795dfd4f91f70277310679a5a8776435e12668754ad5ff62a4a7adb53091af", "class_name": "RelatedNodeInfo"}}, "text": "case T_List: {\n      // OBJECT_TRANSFORM arguments are T_Lists.\n      List* list = reinterpret_cast<List*>(node);\n      ListCell* arg = nullptr;\n      foreach(arg, list) {\n        replace_pointer(\n            arg, reinterpret_cast<Node*>(parse_tree_mutator(\n                     reinterpret_cast<Node*>(lfirst(arg)), mutator, context)));\n      }\n      return reinterpret_cast<Node*>(list);\n    }\n    default: {\n      ereport(ERROR,\n              (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n               errmsg(\"Query type not supported in data masking expression.\")));\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 8814, "end_char_idx": 9391, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "61ff32d4-be67-47cf-9069-f97f002c4734": {"__data__": {"id_": "61ff32d4-be67-47cf-9069-f97f002c4734", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "adc53d4f-bd2b-450f-beac-388317022328", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6036c7e5ca75185f0f2ab54d2076ecaac909e89854a4a6da20bdebb535383f6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "98f81877-acb7-4c69-9c94-bfd1453bcd00", "node_type": "1", "metadata": {}, "hash": "77f4723d3042bac3df9bd0e95cdd288e4fab2dc20541a7b9bfa035581f46caf6", "class_name": "RelatedNodeInfo"}}, "text": "// Unreachable statement.\n  XCHECK_UNREACHABLE(false, DDM_CALLER);\n}", "mimetype": "text/plain", "start_char_idx": 9394, "end_char_idx": 9462, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "98f81877-acb7-4c69-9c94-bfd1453bcd00": {"__data__": {"id_": "98f81877-acb7-4c69-9c94-bfd1453bcd00", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "61ff32d4-be67-47cf-9069-f97f002c4734", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ab6327e28f09410417358956721deac69116e012d6e568c9a2e5b1c07228e045", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "311e9acb-7952-4ba0-b00f-58773cf8be35", "node_type": "1", "metadata": {}, "hash": "14ab69ec9790d6e4d832d102191477a678cf2ee3709b54a5d225fbd9ca57cd02", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<std::shared_ptr<ResTarget>> ParsePolExpr(const std::string& expr) {\n  std::vector<ParsedPolicyExpression> parsed_exprs =\n      DeserializeParsedPolicyExpressions(expr);\n\n  std::string mask_expression;\n  mask_expression.reserve(RESERVE_POL_SIZE);\n  for (auto expr : parsed_exprs) {\n    if (!mask_expression.empty()) {\n      mask_expression.append(EXPRESSION_DELIM);\n    }\n    mask_expression.append(expr.expression);\n  }\n\n  std::string pol_query = \"SELECT \" + mask_expression + \";\";\n  List* parsetree_list = NIL;\n  parsetree_list = ParseQuery(pol_query.c_str(), LOG_TAG_DDM);\n  XCHECK(list_length(parsetree_list) == 1, DDM_CALLER);\n  SelectStmt* q = reinterpret_cast<SelectStmt*>(linitial(parsetree_list));\n  XCHECK(q->targetList != NIL, DDM_CALLER);\n  XCHECK(list_length(q->targetList) >= 1, DDM_CALLER);\n\n  std::vector<std::shared_ptr<ResTarget>> targets = {};\n  ListCell* lc = nullptr;\n  ResTarget* rtgt = nullptr;\n\n  foreach(lc, q->targetList) {\n    rtgt = copyObject(reinterpret_cast<ResTarget*>(lfirst(lc)));\n    std::shared_ptr<ResTarget> rtgt_ptr(rtgt, PAlloc_deleter());\n    targets.push_back(rtgt_ptr);\n  }\n  safe_pfree(q);\n\n  return targets;\n}\n\n/// Entry point for Policy Parsing.\nParsedPolicy ParsePolicy(const Policy& pol) {\n  const std::vector<std::shared_ptr<ResTarget>>& targets =\n      ParsePolExpr(pol.polexpr);\n  const std::vector<std::shared_ptr<ColumnDef>>& attrs =\n      DeserializeColumnDefs(pol.polattrs);\n\n  return {pol, attrs, targets};\n}", "mimetype": "text/plain", "start_char_idx": 9464, "end_char_idx": 10939, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "311e9acb-7952-4ba0-b00f-58773cf8be35": {"__data__": {"id_": "311e9acb-7952-4ba0-b00f-58773cf8be35", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "98f81877-acb7-4c69-9c94-bfd1453bcd00", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d7000438bfb65e835cf40c0661efb0a41a871ee1b1eacedf69643e027c3f3e50", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05825c97-ea11-48e4-9d27-559072bb8020", "node_type": "1", "metadata": {}, "hash": "a0c3b7bff805573743afcc028d96a12bba08ee10710dfba45a1b9d6037dc7ae3", "class_name": "RelatedNodeInfo"}}, "text": "ParsedPolicyAttachment ParseAttachment(\n    const Attachment& attachment,\n    const std::optional<ParsedPolicy> parsed_pol) {\n  XCHECK(attachment.pol.has_value(), DDM_CALLER);\n\n  // Lock the target relation so that it doesn't get altered or dropped.\n  Relation rel = relation_open(attachment.relid, AccessShareLock);\n  SCOPE_EXIT_GUARD(relation_close(rel, AccessShareLock));\n\n  const ParsedPolicy& pol =\n      parsed_pol.value_or(ParsePolicy(attachment.pol.value()));\n\n  std::vector<AttachedAttribute> polattrs_in;\n  std::vector<AttachedAttribute> polattrs_out;\n  if (get_rel_relkind(attachment.relid) == RELKIND_VIEW &&\n      get_view_kind(attachment.relid) == OBJTYPE_LBV) {\n    polattrs_in = DeserializeAttachedAttributes(attachment.polattrsin);\n    polattrs_out = DeserializeAttachedAttributes(attachment.polattrsout);\n  } else {\n    polattrs_in = AttributesToColumnDefs(\n        rel, DeserializeAttachedAttributes(attachment.polattrsin));\n    polattrs_out = AttributesToColumnDefs(\n        rel, DeserializeAttachedAttributes(attachment.polattrsout));\n  }\n\n  ParsedPolicyAttachment parsed_attach = {attachment, pol, polattrs_in,\n                                          polattrs_out};\n\n  XCHECK(\n      parsed_attach.polattrs_out.size() == parsed_attach.pol.parsed_pol.size(),\n      DDM_CALLER);\n\n  return parsed_attach;\n}", "mimetype": "text/plain", "start_char_idx": 10941, "end_char_idx": 12267, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "05825c97-ea11-48e4-9d27-559072bb8020": {"__data__": {"id_": "05825c97-ea11-48e4-9d27-559072bb8020", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "311e9acb-7952-4ba0-b00f-58773cf8be35", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0ae715230c0acdf6bf2c5d21afe251efc6dc254d157e9f5c5588748dc52d60d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8dfbd71c-c16f-4642-bb38-55a9609a8bb5", "node_type": "1", "metadata": {}, "hash": "1fe4d6cd3164c96cf3474083fa07e9ee05731135d92c707e630505346509f7dc", "class_name": "RelatedNodeInfo"}}, "text": "Node* SwapColRefMutator(Node* node, void* context)", "mimetype": "text/plain", "start_char_idx": 12269, "end_char_idx": 12319, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8dfbd71c-c16f-4642-bb38-55a9609a8bb5": {"__data__": {"id_": "8dfbd71c-c16f-4642-bb38-55a9609a8bb5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05825c97-ea11-48e4-9d27-559072bb8020", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "80f3ee2179492d8024055e9972b7337002262a5cc98cf3297eff5584e3d07863", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "77712060-501f-496b-8bc5-80755238d20d", "node_type": "1", "metadata": {}, "hash": "37c1fed6cad4c1f36a264b9010ee1aa037b1a23ce04ebb8190d5edf2ba6475f3", "class_name": "RelatedNodeInfo"}}, "text": "{\n  if (!node) return nullptr;", "mimetype": "text/plain", "start_char_idx": 12320, "end_char_idx": 12350, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "77712060-501f-496b-8bc5-80755238d20d": {"__data__": {"id_": "77712060-501f-496b-8bc5-80755238d20d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8dfbd71c-c16f-4642-bb38-55a9609a8bb5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bb49f3774c68ca2ce68c135789b9e489efdf73e1307ce61df2b86e6f16ac83a6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3717998c-13b0-4dbb-adb8-116c062e657a", "node_type": "1", "metadata": {}, "hash": "4e9bf312b6b97cfaa556af067cf0f3818fe1da11c21b4b4ead6b4c0697f2b318", "class_name": "RelatedNodeInfo"}}, "text": "if (IsA(node, ColumnRef))", "mimetype": "text/plain", "start_char_idx": 12354, "end_char_idx": 12379, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3717998c-13b0-4dbb-adb8-116c062e657a": {"__data__": {"id_": "3717998c-13b0-4dbb-adb8-116c062e657a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "77712060-501f-496b-8bc5-80755238d20d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e828e3ec974d945ac695a6a48393cfed658fb8e80a6bd32488c3bbaff4d0502f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "89adac70-d645-4814-85c8-b2c312dc0210", "node_type": "1", "metadata": {}, "hash": "40a22326905954d4e4f250a1dc7192f4785513b6d203cf18fcd801ada159d6f9", "class_name": "RelatedNodeInfo"}}, "text": "{\n    auto ctx = reinterpret_cast<SwapColDefMutatorCtx*>(context);\n    ColumnRef* cref = reinterpret_cast<ColumnRef*>(node);\n\n    // We expect two kinds of column references: references to masking\n    // expression arguments in the form of\n    // MASK_PSEUDO_TBL.column_name[.nested.attributes] and in [DP-46149]\n    // reference to lookup tables of the form\n    // lookup_table_name.column_name[.nested.attributes].\n    XPGCHECK(list_length(cref->fields) >= 2,\n             policy::tag_for_policy_type(kPolicyDDM));\n\n    if (strcmp(strVal(linitial(cref->fields)), MASK_PSEUDO_TBL) != 0) {\n      // All references to masking policy arguments are rewritten as ColumnRef\n      // with alias MASK_PSEUDO_TBL. Thus, if the reference is not in the form\n      // of MASK_PSEUDO_TBL.column_name[.nested.attributes] , we do not swap\n      // anything. The examples include lookup table references with or without\n      // schema / database prefix.\n      return node;\n    }\n    char* name = strVal(lsecond(cref->fields));\n\n    const auto& swap_it = ctx->swap_map.find(std::string(name));", "mimetype": "text/plain", "start_char_idx": 12380, "end_char_idx": 13458, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "89adac70-d645-4814-85c8-b2c312dc0210": {"__data__": {"id_": "89adac70-d645-4814-85c8-b2c312dc0210", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3717998c-13b0-4dbb-adb8-116c062e657a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c89ee771e32e46cb91294f4650006538faa3b9894b7d0bee4253bdc8a34a89ec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ae4122df-6b4d-43d3-b6ee-415f9a0dd3cc", "node_type": "1", "metadata": {}, "hash": "1b8dd4d1b85f8d033c63f8930a8d99ed5adc586d36ead7d57dafcb0a2de80234", "class_name": "RelatedNodeInfo"}}, "text": "if (swap_it != ctx->swap_map.end())", "mimetype": "text/plain", "start_char_idx": 13464, "end_char_idx": 13499, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ae4122df-6b4d-43d3-b6ee-415f9a0dd3cc": {"__data__": {"id_": "ae4122df-6b4d-43d3-b6ee-415f9a0dd3cc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "89adac70-d645-4814-85c8-b2c312dc0210", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "28330e2c1e4166c4ae9c8f248e8f770005b1c681f40d79e227d281da3ac89216", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7d4c0607-13d4-4e17-bac5-aba809318886", "node_type": "1", "metadata": {}, "hash": "fe796cc3b804a130fa15f55fe72949211e940716c45c96e874ce58611284f06a", "class_name": "RelatedNodeInfo"}}, "text": "{\n      // The reference is expected to be of the form\n      // MASK_PSEUDO_TBL.column_name[.<any number of subfields>] . In this\n      // case we replace \"column_name\", remove \"MASK_PSEUDO_TBL\", and leave the\n      // rest (the SUPER navigation path) as is. Note, the fields are ordered by\n      // db, schema, table, column, nested path.\n      List* old_fields = cref->fields;\n      ListCell* field = nullptr;\n      // The first element is the new (swapped) reference.\n      cref->fields =\n          list_make1(makeString(pstrdup(swap_it->second.column_name.c_str())));\n      // Then comes the optional input nested path.\n      if (swap_it->second.nested_path) {\n        RawPath path(swap_it->second.nested_path->data(),\n                     swap_it->second.nested_path->size());\n        for (auto&& component : path) {\n          cref->fields =\n              lappend(cref->fields,\n                      makeString(pstrdup(std::string(component).c_str())));\n        }\n      }\n\n      if (list_length(old_fields) > 2) {\n        // Skip the first two elements: MASK_PSEUDO_TBL and original\n        // column_name to swap.\n        for_each_cell(field, list_nth_cell(old_fields, 2)) {\n          cref->fields = lappend(\n              cref->fields, makeString(pstrdup(strVal(\n                                reinterpret_cast<Value*>(lfirst(field))))));\n        }\n      }\n\n      list_free(old_fields);\n\n      // Add cast around the ref for nested paths.", "mimetype": "text/plain", "start_char_idx": 13500, "end_char_idx": 14946, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7d4c0607-13d4-4e17-bac5-aba809318886": {"__data__": {"id_": "7d4c0607-13d4-4e17-bac5-aba809318886", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ae4122df-6b4d-43d3-b6ee-415f9a0dd3cc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f619d1e95bc9a978ab32439bdeb06cfc6b9e5f1228f8decd25d4682d7be7dd48", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3f73ea23-0eac-4500-9b9d-b8ca1d11ff00", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "// TODO(bogatov): Consider doing this for all policies including\n      // column-level SUPER.\n      if (swap_it->second.nested_path) {\n        TypeCast* cast = makeNode(TypeCast);\n        cast->arg = reinterpret_cast<Node*>(cref);\n        cast->typname = makeTypeNameFromOid(swap_it->second.policy_arg_typid,\n                                            swap_it->second.policy_arg_typmod);\n        return reinterpret_cast<Node*>(cast);\n      }\n    }", "mimetype": "text/plain", "start_char_idx": 14953, "end_char_idx": 15401, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3f73ea23-0eac-4500-9b9d-b8ca1d11ff00": {"__data__": {"id_": "3f73ea23-0eac-4500-9b9d-b8ca1d11ff00", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7d4c0607-13d4-4e17-bac5-aba809318886", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "095978eed0ea041ea4318dae28371160340f170b852baa6c82b2ac6b2bb51d6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7874fc48-48bd-48f8-91f0-9cb89dcf8393", "node_type": "1", "metadata": {}, "hash": "97d18d7ef1a819c717d7fbcad6d50779a52f9397e02bfeb6af2091e18a1320a0", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3525, "end_char_idx": 3526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7874fc48-48bd-48f8-91f0-9cb89dcf8393": {"__data__": {"id_": "7874fc48-48bd-48f8-91f0-9cb89dcf8393", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3f73ea23-0eac-4500-9b9d-b8ca1d11ff00", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ff1a325f-f2dc-4d9d-bad2-f4d846c565f4", "node_type": "1", "metadata": {}, "hash": "12010f0f1d596cbdf4c3214af249f1244237f0e9a331e6b81bd682d8a828413a", "class_name": "RelatedNodeInfo"}}, "text": "return node;\n}", "mimetype": "text/plain", "start_char_idx": 15408, "end_char_idx": 15422, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ff1a325f-f2dc-4d9d-bad2-f4d846c565f4": {"__data__": {"id_": "ff1a325f-f2dc-4d9d-bad2-f4d846c565f4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7874fc48-48bd-48f8-91f0-9cb89dcf8393", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fa794f2515d08207e47eb1f96f2b5c95cb67d4312ced34e55d85759f6ee3eb65", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7e2db37d-c9be-451c-929f-63010759cb1f", "node_type": "1", "metadata": {}, "hash": "40062062b7d57a9807fff74a202faa1277d7c3eeab043183084372592c94c7f9", "class_name": "RelatedNodeInfo"}}, "text": "namespace {\n/// Utility method for building swap context used by SwapColRefMutator\n/// takes as input the attachment for the policy.\nSwapColDefMutatorCtx BuildSwapDefCtx(\n    std::shared_ptr<ParsedPolicyAttachment> attach) {\n  std::vector<AttachedAttribute>& input_atts = attach->polattrs_in;\n  std::vector<std::shared_ptr<ColumnDef>>& pol_atts = attach->pol.parsed_attrs;\n  XCHECK(input_atts.size() == pol_atts.size(),\n         policy::tag_for_policy_type(kPolicyDDM));\n  std::unordered_map<std::string, SwapColDefMutatorCtx::Entry> swap_map = {};\n\n  for (size_t i = 0; i < input_atts.size(); i++) {\n    std::string input_att_colname;\n    AttachedAttribute::Attribute attribute = input_atts[i].attribute;\n\n    if (std::holds_alternative<std::shared_ptr<ColumnDef>>(attribute)) {\n      input_att_colname = std::string(\n          (std::get<std::shared_ptr<ColumnDef>>(attribute))->colname);\n    } else {\n      XCHECK(std::holds_alternative<std::string>(attribute), DDM_CALLER);\n      input_att_colname = std::get<std::string>(attribute);\n    }\n    swap_map.insert({std::string(pol_atts[i]->colname),\n                     SwapColDefMutatorCtx::Entry{\n                         input_att_colname, pol_atts[i]->typname->typid,\n                         pol_atts[i]->typname->typmod, input_atts[i].path}});\n  }\n  return {swap_map};\n}\n}  // namespace", "mimetype": "text/plain", "start_char_idx": 15424, "end_char_idx": 16766, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7e2db37d-c9be-451c-929f-63010759cb1f": {"__data__": {"id_": "7e2db37d-c9be-451c-929f-63010759cb1f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff1a325f-f2dc-4d9d-bad2-f4d846c565f4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "88f90326bbf0f696229dc913e053f7e59841cb051cc39bfa7db7a9d8af035199", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4acd5b89-0107-4f1b-a1d4-7894fd16d65f", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "void LoadMaskMapFromAttachments(\n    const std::set<ParsedPolicyAttachment>& attachments, MaskMap* masks)", "mimetype": "text/plain", "start_char_idx": 3005, "end_char_idx": 3110, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4acd5b89-0107-4f1b-a1d4-7894fd16d65f": {"__data__": {"id_": "4acd5b89-0107-4f1b-a1d4-7894fd16d65f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7e2db37d-c9be-451c-929f-63010759cb1f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fef54be59ec900621f764d6b2269db49f69d7dd690b053d7ff82b3ed8d671c2f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70af5576-f74c-403a-bc8b-ac86c9240a76", "node_type": "1", "metadata": {}, "hash": "a1a6a07e3e258c1a165b86e8f6653cdde084a7916524b90c0a846428e4d83f1b", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 2049, "end_char_idx": 2050, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "70af5576-f74c-403a-bc8b-ac86c9240a76": {"__data__": {"id_": "70af5576-f74c-403a-bc8b-ac86c9240a76", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4acd5b89-0107-4f1b-a1d4-7894fd16d65f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9f68a7cefa3bcb1fd588b08722a48387ab83e568599207a9467184da5f751437", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2a440a9a-33b3-4bf2-a5a1-a4f6975bcd83", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "for (const ParsedPolicyAttachment& attachment : attachments)", "mimetype": "text/plain", "start_char_idx": 16878, "end_char_idx": 16938, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2a440a9a-33b3-4bf2-a5a1-a4f6975bcd83": {"__data__": {"id_": "2a440a9a-33b3-4bf2-a5a1-a4f6975bcd83", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "70af5576-f74c-403a-bc8b-ac86c9240a76", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e193e7b5e568a31a2dad6efe5cb24b4d0eabbfe9c8bd7110ffee72a0dd7db15e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ba285a70-0aaa-42bb-9ab5-83fe031914fb", "node_type": "1", "metadata": {}, "hash": "762c1157284cddc45fc01b189bf9a5bbb4777ab71ad589193053564713acd503", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 2049, "end_char_idx": 2050, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ba285a70-0aaa-42bb-9ab5-83fe031914fb": {"__data__": {"id_": "ba285a70-0aaa-42bb-9ab5-83fe031914fb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2a440a9a-33b3-4bf2-a5a1-a4f6975bcd83", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9f68a7cefa3bcb1fd588b08722a48387ab83e568599207a9467184da5f751437", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8607276f-b4ef-4137-972b-a19d410b3a28", "node_type": "1", "metadata": {}, "hash": "d8041c112f3533408f01b858f22474a10aa17d85730472f14e5367c428584ae1", "class_name": "RelatedNodeInfo"}}, "text": "for (size_t i = 0; i < attachment.polattrs_out.size(); i++)", "mimetype": "text/plain", "start_char_idx": 16945, "end_char_idx": 17004, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8607276f-b4ef-4137-972b-a19d410b3a28": {"__data__": {"id_": "8607276f-b4ef-4137-972b-a19d410b3a28", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba285a70-0aaa-42bb-9ab5-83fe031914fb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bdb0b2163a53e6e01026671119f28e7a72de9e87924c31f423d9d67c81968b4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b0288329-5735-47d8-ab44-3d706882e947", "node_type": "1", "metadata": {}, "hash": "f88f10c75e68a84342acc8110e24d3793645606e417bf31bae8646580e5bab54", "class_name": "RelatedNodeInfo"}}, "text": "{\n      // Create merge entry to be inserted, emplaced or ignored.\n      ResTarget* rtgt_raw = copyObject(\n          reinterpret_cast<ResTarget*>(attachment.pol.parsed_pol[i].get()));\n      MergeEntry entry{\n          std::shared_ptr<ResTarget>(rtgt_raw, PAlloc_deleter()),\n          attachment.attachment.polpriority,\n          std::make_shared<ParsedPolicyAttachment>(attachment),\n          {} /* lf_alp_column_name */,\n          attachment.polattrs_out[i].path,\n      };\n\n      // Get the column key for the map (different logic for LBV and non-LBV).\n      AttachedAttribute::Attribute attribute =\n          attachment.polattrs_out[i].attribute;\n      std::string col_key;\n      if (std::holds_alternative<std::shared_ptr<ColumnDef>>(attribute)) {\n        col_key = std::string(\n            (std::get<std::shared_ptr<ColumnDef>>(attribute))->colname);\n      } else {\n        XCHECK(std::holds_alternative<std::string>(attribute),\n               policy::tag_for_policy_type(kPolicyDDM));\n        col_key = std::get<std::string>(attribute);\n      }\n\n      // The logic of handling of nested paths is roughly the following:\n      // 1. If no entries exist for the column, add this one and exit.\n      // 2. If this entry is a column attachment, check the highest priority\n      // among all entries for the column (naturally, either one other\n      // column-level attachment or possibly multiple nested attachments). If\n      // new entry is still of the highest priority, replace all existing", "mimetype": "text/plain", "start_char_idx": 17005, "end_char_idx": 18499, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b0288329-5735-47d8-ab44-3d706882e947": {"__data__": {"id_": "b0288329-5735-47d8-ab44-3d706882e947", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8607276f-b4ef-4137-972b-a19d410b3a28", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "47518e9c78fde9d7f25a660647edd3017f28c254aedcd09c5f1a59ce6d489420", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3dc75ed4-d97e-4e76-94d9-24d2a140c976", "node_type": "1", "metadata": {}, "hash": "e784982b3c4262ddfb30b52e71ad7e5129d7299d9f965ffb2313782b4d4d003e", "class_name": "RelatedNodeInfo"}}, "text": "// entries with the new one.\n      // 3. At this point we know the entries exist for the column and our entry\n      // is nested. So we go over these existing entries:\n      // 3(a). If we see an existing entry that is column-level, we either\n      // override it (we know and XCHECK it's a sole entry), or it wins and we\n      // drop our entry.\n      // 3(b). We know an existing entry is nested, so we check if our entry\n      // collides with that one. If not, we go to the next entry (i.e., this\n      // existing entry does not bother us).\n      // 3(c). So our entry and existing one collide. We check if our entry is\n      // higher, and if so we remember to delete this existing lower-priority\n      // entry. If our entry is lower, we exit immediately dropping our entry.\n      // 3(d). Lastly, we know our entry is to be inserted, and it needs to\n      // override zero, one or more existing nested entries. So we remove those\n      // very existing entries and insert the new one.\n\n      const auto& target_it = masks->find(col_key);\n      if (target_it == masks->end()) {\n        // Insert or update the entry for the column.\n        (*masks)[col_key] = {entry};\n        continue;\n      }", "mimetype": "text/plain", "start_char_idx": 18506, "end_char_idx": 19707, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3dc75ed4-d97e-4e76-94d9-24d2a140c976": {"__data__": {"id_": "3dc75ed4-d97e-4e76-94d9-24d2a140c976", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b0288329-5735-47d8-ab44-3d706882e947", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9092a0454b3dfdbeb8b45ee41b017d45e272495116eb3941ff6cd79302305601", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe277f1e-225c-4d51-a6aa-66e7c4241dbc", "node_type": "1", "metadata": {}, "hash": "fbec10b597d6db9349b21db5565d1c12597edbffa6aae8051c18a72ccf383aad", "class_name": "RelatedNodeInfo"}}, "text": "if (!entry.nested_path) {\n        // If this entry has no nested path then it will or will not override\n        // the exiting entry based solely on the highest priority of the\n        // existing entries. In other words, column-level attachment overrides\n        // all nested attachments.\n        int4 col_key_priority =\n            std::max_element(target_it->second.begin(), target_it->second.end())\n                ->priority;\n        // If existing entry is of the same or higher priority, don't insert.\n        if (col_key_priority >= entry.priority) continue;\n        (*masks)[col_key] = {entry};\n        continue;\n      }\n\n      // In case of nested we need to check deeper if this attachment can\n      // override an existing one (based among other things on whether there\n      // is conflicting path).\n      RawPath path(entry.nested_path->data(), entry.nested_path->size());\n      bool inserted_or_ignored = false;\n      std::vector<std::string> to_remove;", "mimetype": "text/plain", "start_char_idx": 19715, "end_char_idx": 20684, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe277f1e-225c-4d51-a6aa-66e7c4241dbc": {"__data__": {"id_": "fe277f1e-225c-4d51-a6aa-66e7c4241dbc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3dc75ed4-d97e-4e76-94d9-24d2a140c976", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3351f8dda54ea49c57f5baa71c4535daa9b052e55dd6f462b996e5d1c0868c0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "10ccda00-9cfb-4276-8b1f-5d5abae00252", "node_type": "1", "metadata": {}, "hash": "27b2163c7462535875aca22b41bcfb3aea2bfb35de3157d859f6725f5155c5d0", "class_name": "RelatedNodeInfo"}}, "text": "for (auto existing_entry_it = target_it->second.begin();\n           existing_entry_it != target_it->second.end(); existing_entry_it++)", "mimetype": "text/plain", "start_char_idx": 20691, "end_char_idx": 20825, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "10ccda00-9cfb-4276-8b1f-5d5abae00252": {"__data__": {"id_": "10ccda00-9cfb-4276-8b1f-5d5abae00252", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fe277f1e-225c-4d51-a6aa-66e7c4241dbc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d36ac6c0d5d0d7ebd65c86d419411cac4688557b92b318a1c4d4031248e55a22", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dc060e34-549b-4c5b-b102-cac09e582df5", "node_type": "1", "metadata": {}, "hash": "6d3732333268a7fe45a70326435a253ff5b8cee2765e22447be763d4ba4778e5", "class_name": "RelatedNodeInfo"}}, "text": "{\n        // Short-circuit if existing entry is column-level attachment.\n        if (!existing_entry_it->nested_path) {\n          // If current entry is for a column-level attachment, our new\n          // nested-level attachment will either override it or get ignored\n          // because these two cannot co-exist for same column.\n          XCHECK(target_it->second.size() == 1);\n          inserted_or_ignored = true;\n          if (existing_entry_it->priority >= entry.priority) break;\n          (*masks)[col_key] = {entry};\n          break;\n        }\n\n        RawPath existing_path(existing_entry_it->nested_path->data(),\n                              existing_entry_it->nested_path->size());\n        // If these paths don't conflict, we don't need to check priorities.\n        // We simply move on to rest of nested-attachments.\n        if (RawPath::Diverge(path, existing_path)) continue;\n\n        // If these paths do collide, then we either ignore our entry or collect\n        // exiting entries to remove. In this case below, if there is a\n        // conflicting path with higher priority, we know we cannot insert our\n        // entry.\n        if (existing_entry_it->priority >= entry.priority) {\n          inserted_or_ignored = true;\n          break;\n        }\n        // We have determined that our entry's nested path conflicts with this\n        // existing entry's nested path, and our priority is higher, so we mark\n        // the existing entry for removal.", "mimetype": "text/plain", "start_char_idx": 20826, "end_char_idx": 22297, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc060e34-549b-4c5b-b102-cac09e582df5": {"__data__": {"id_": "dc060e34-549b-4c5b-b102-cac09e582df5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "10ccda00-9cfb-4276-8b1f-5d5abae00252", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "46a9070b6702ebae308447802281cfebd0df2eb38a38aee5794d762762cf029c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "11145d74-d3bb-417a-beee-4a824379e617", "node_type": "1", "metadata": {}, "hash": "fc7fb34ce5d1c75cfe1d2d5aaa816718804b9ccce139d65d703a346d9bbd7d1b", "class_name": "RelatedNodeInfo"}}, "text": "to_remove.push_back(*existing_entry_it->nested_path);\n      }", "mimetype": "text/plain", "start_char_idx": 22306, "end_char_idx": 22367, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "11145d74-d3bb-417a-beee-4a824379e617": {"__data__": {"id_": "11145d74-d3bb-417a-beee-4a824379e617", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dc060e34-549b-4c5b-b102-cac09e582df5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "acb71001d2f63ec95171bb791ad7ee675b32410265414ae7bc8ff410cf2a537c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "120f28e1-f5db-43b5-8ecf-839408a12667", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "// Finally, if we have determined that our entry is eligible for\n      // insertion, we remove those marked for removal and insert ours.\n      if (!inserted_or_ignored) {\n        // Vector resizes after each erase. It's safer to simply remember the\n        // paths to erase than iterators or indices that may change.\n        for (auto&& to_remove_path : to_remove) {\n          target_it->second.erase(\n              std::remove_if(target_it->second.begin(), target_it->second.end(),\n                             [&to_remove_path](const MergeEntry& e) {\n                               return e.nested_path == to_remove_path;\n                             }),\n              target_it->second.end());\n        }\n        target_it->second.push_back(entry);\n      }\n    }", "mimetype": "text/plain", "start_char_idx": 22374, "end_char_idx": 23139, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "120f28e1-f5db-43b5-8ecf-839408a12667": {"__data__": {"id_": "120f28e1-f5db-43b5-8ecf-839408a12667", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "11145d74-d3bb-417a-beee-4a824379e617", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "65d737cefc99479fd13a9e994cf2e82bf35b377640fe6b1482a6c9bb321d7545", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d77badd-5185-447f-8a4b-e5fd35933e72", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3525, "end_char_idx": 3526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d77badd-5185-447f-8a4b-e5fd35933e72": {"__data__": {"id_": "9d77badd-5185-447f-8a4b-e5fd35933e72", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "120f28e1-f5db-43b5-8ecf-839408a12667", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90f5db5c-4004-4050-b11b-f99f3bb8c2b2", "node_type": "1", "metadata": {}, "hash": "8d545f8b3da6da7c2b65a8698f24c386603f260a4950f28deda637ec7768bad7", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3525, "end_char_idx": 3526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "90f5db5c-4004-4050-b11b-f99f3bb8c2b2": {"__data__": {"id_": "90f5db5c-4004-4050-b11b-f99f3bb8c2b2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d77badd-5185-447f-8a4b-e5fd35933e72", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5d6f612e-437e-44f6-977f-63f778c27430", "node_type": "1", "metadata": {}, "hash": "56c6184f55ec3cf44de8f632ff15e9c64d4a84af372814dd034ceb61d02eec15", "class_name": "RelatedNodeInfo"}}, "text": "MaskMap BuildMaskMap(const std::set<ParsedPolicyAttachment>& attachments,\n                     const ObjTransformAlpColumnsCtx& obj_transform_alp_ctx)", "mimetype": "text/plain", "start_char_idx": 23147, "end_char_idx": 23297, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5d6f612e-437e-44f6-977f-63f778c27430": {"__data__": {"id_": "5d6f612e-437e-44f6-977f-63f778c27430", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90f5db5c-4004-4050-b11b-f99f3bb8c2b2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2e655bc8c944291f52a30887c740b50b04bf9b70a886ad037ab7a151081b69a9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "00e45e97-41eb-490d-bffb-d31cc3f5a0f0", "node_type": "1", "metadata": {}, "hash": "95326744be9968f9ebbf60e6e5be388c12b49c1e325ffc9e0196e4f65ef3deb9", "class_name": "RelatedNodeInfo"}}, "text": "{\n  MaskMap masks;\n\n  LoadMaskMapFromAttachments(attachments, &masks);\n\n  // lf_alp_policy_opt that is std::nullopt is a valid state. This naturally\n  // occurs if:\n  // a) RTE is DDM-protected but not LF-ALP-protected.\n  // b) In the case of Spectrum nested relations, that neither are enforced at\n  //    DDM level.\n  // these two cases are mutually exclusive, but we add this code in a way to\n  // support these cases concurrently in the future.\n  if (obj_transform_alp_ctx.lf_alp_policy) {\n    AddLakeFormationALPToDDMMap(\n        &masks, *obj_transform_alp_ctx.lf_alp_policy,\n        obj_transform_alp_ctx.obj_transform_alp_columns);\n  }\n\n  // Loop through map and swap policy definitions.\n  // We are guaranteed that only one policy owns any ResTarget.\n  // All inputs to masking policies should be unmasked.", "mimetype": "text/plain", "start_char_idx": 23298, "end_char_idx": 24112, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "00e45e97-41eb-490d-bffb-d31cc3f5a0f0": {"__data__": {"id_": "00e45e97-41eb-490d-bffb-d31cc3f5a0f0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5d6f612e-437e-44f6-977f-63f778c27430", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d22669a086be8b3d4729921ba9cfe55cb7256cd790388f7ae3668a7c73f42db1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3defbf99-4c99-46bc-89da-0ccd39cef4a8", "node_type": "1", "metadata": {}, "hash": "93fd96683dd71883ddc266115dc9a78d26d8f01c0f41d1479d52f497d6039987", "class_name": "RelatedNodeInfo"}}, "text": "for (auto& entries : masks) {\n    for (MergeEntry& entry : entries.second) {\n      SwapColDefMutatorCtx ctx =\n          entry.attachment\n              ? BuildSwapDefCtx(entry.attachment)\n              // LF-ALP SwapColRefMutator is a no-op.\n              : SwapColDefMutatorCtx{{{entry.lf_alp_column_name,\n                                       SwapColDefMutatorCtx::Entry{\n                                           entry.lf_alp_column_name,\n                                           InvalidOid /* policy_arg_typid */,\n                                           0 /* policy_arg_typmod */,\n                                           std::nullopt /* nested path */}}}};\n      entry.rtgt->val = parse_tree_mutator(\n          reinterpret_cast<Node*>(entry.rtgt->val), SwapColRefMutator, &ctx);\n    }\n  }\n  return masks;\n}", "mimetype": "text/plain", "start_char_idx": 24115, "end_char_idx": 24934, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3defbf99-4c99-46bc-89da-0ccd39cef4a8": {"__data__": {"id_": "3defbf99-4c99-46bc-89da-0ccd39cef4a8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "00e45e97-41eb-490d-bffb-d31cc3f5a0f0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "37ae1d98312f0ba074d51b472a6a96c8722c16b45b008a766ccb0843a8f7ed59", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4385e2aa-f655-4391-a4c4-31640e31549a", "node_type": "1", "metadata": {}, "hash": "c71a5d07f60d35de91d03bf6a0770d95e6bdbd18d9ae211fb7f1e8d175df56f1", "class_name": "RelatedNodeInfo"}}, "text": "namespace {\n/// Get actual column names for the given RTE.\n/// @param RangeTblEntry* rte\n/// @return std::vector of std::string containing the column names.\nstd::vector<std::string> GetActualColumnNames(const RangeTblEntry* rte) {\n  std::vector<std::string> colnames;\n\n  if (rte->actual_colnames == nullptr) {\n    // Note NoLock here because we only need column names here.\n    Relation relation = relation_open(GetRelationRelid(rte), NoLock);\n    SCOPE_EXIT_GUARD(relation_close(relation, NoLock));\n    Copied_pg_attribute* relation_attributes = relation->rd_att->attrs;\n    int maxattrs = relation->rd_att->natts;\n    for (int varattno = 0; varattno < maxattrs; varattno++) {\n      Immutable_pg_attribute attr = relation_attributes[varattno];\n      if (attr->attisdropped) {\n        colnames.push_back(\"\");\n      } else {\n        colnames.push_back(std::string(NameStr(attr->attname)));\n      }\n    }\n  } else {\n    // Actual column names are already filled in.\n    ListCell* lc = nullptr;\n    foreach(lc, rte->actual_colnames) {\n      char* name = reinterpret_cast<char*>(strVal(lfirst(lc)));\n      XCHECK(name != nullptr, DDM_CALLER);\n      colnames.push_back(std::string(name));\n    }\n  }\n\n  return colnames;\n}\n}  // namespace", "mimetype": "text/plain", "start_char_idx": 24936, "end_char_idx": 26167, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4385e2aa-f655-4391-a4c4-31640e31549a": {"__data__": {"id_": "4385e2aa-f655-4391-a4c4-31640e31549a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3defbf99-4c99-46bc-89da-0ccd39cef4a8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "554c2e58f2cbd614758ee79af4bf6d0b3e159d92ef146b57399c67053cb6f720", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d2eef248-94e4-48d7-8792-42e4daa36060", "node_type": "1", "metadata": {}, "hash": "e2cd7b17b9e570054f302c3252787af984b2a6a00bc1d209a0cd930fa416ea72", "class_name": "RelatedNodeInfo"}}, "text": "std::string GetRTEQueryTargetName(const RangeTblEntry* rte)", "mimetype": "text/plain", "start_char_idx": 26169, "end_char_idx": 26228, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d2eef248-94e4-48d7-8792-42e4daa36060": {"__data__": {"id_": "d2eef248-94e4-48d7-8792-42e4daa36060", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4385e2aa-f655-4391-a4c4-31640e31549a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dcfaa8e9e9ab4c7d22fca1c56dfaee72c42cd47f471c7c39a57a2e58b709e71b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "12bdaf6c-0dac-49c7-96ef-b610e5f040c0", "node_type": "1", "metadata": {}, "hash": "f385680617971a31d1009032a57e23eced639a0b4c41fd53044f0604284e3a9e", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::stringstream target;\n  char* ext_db_name = nullptr;\n  char* ext_ns_name = nullptr;\n  char* ext_rel_name = nullptr;", "mimetype": "text/plain", "start_char_idx": 26229, "end_char_idx": 26352, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "12bdaf6c-0dac-49c7-96ef-b610e5f040c0": {"__data__": {"id_": "12bdaf6c-0dac-49c7-96ef-b610e5f040c0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d2eef248-94e4-48d7-8792-42e4daa36060", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a5a45f53d0835b6413337cdc2e46fb7ee840ec5e7ec30178fd92127bed025c7b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "209db6ad-cb24-442d-8aab-7c8732dd8fab", "node_type": "1", "metadata": {}, "hash": "5cd095912b7dff0c9f0b0079b973ea4720518feb8ecbf62641b106b27f47194c", "class_name": "RelatedNodeInfo"}}, "text": "if (gconf_enable_lf_alp &&\n      IsLfManagedRelation(rte, &ext_db_name, &ext_ns_name, &ext_rel_name))", "mimetype": "text/plain", "start_char_idx": 26355, "end_char_idx": 26456, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "209db6ad-cb24-442d-8aab-7c8732dd8fab": {"__data__": {"id_": "209db6ad-cb24-442d-8aab-7c8732dd8fab", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "12bdaf6c-0dac-49c7-96ef-b610e5f040c0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "574ca1bfc2b6216f259a37eaba1bdddd7777488bcbb9e3aa0c11c63c77d09e09", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9c1066bb-d663-4c01-be0c-879d2e316c39", "node_type": "1", "metadata": {}, "hash": "e782662d34a9f8c777be72f78aaf470067361fb7de8dbb16a4474782e5e4f227", "class_name": "RelatedNodeInfo"}}, "text": "{\n    if (g_pgtest_ddm) {\n      // TODO(bogatov): PG test has a weird behavior regarding schema lookup. In\n      // particular, none of the schema names we tried, including\n      // \"pgtest_testcase_schema\" works. So for unit tests we simply supply\n      // relation name and it will find it.\n      target << quote_identifier(ext_rel_name);\n    } else if (rte->nested_subquery) {\n      // This relation refers to an external nested table. In this case, we\n      // access the namespace and relation name from the main RTE directly,\n      // as opposed to the isolated query.\n      if (IsExternalDbRTE(rte)) {\n        // Fully qualify tables with external dbs set.\n        target << quote_identifier(rte->database) << '.';\n      }\n      const char* external_tablename = rte->external_tablename;\n      if (is_RTE_ds_spectrum_table_via_lf(rte)) {\n        external_tablename = rte->datasharing_lf_spectrum_tablename;\n      }\n\n      target << quote_identifier(rte->external_namespace) << '.'\n             << quote_identifier(external_tablename);\n    } else {\n      // LF-managed localized relation.\n      XCHECK(ext_db_name != nullptr, LF_ALP_CALLER);\n      XCHECK(ext_ns_name != nullptr, LF_ALP_CALLER);\n      XCHECK(ext_rel_name != nullptr, LF_ALP_CALLER);\n      target << quote_identifier(ext_db_name) << '.'\n             << quote_identifier(ext_ns_name) << '.'\n             << quote_identifier(ext_rel_name);\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 26457, "end_char_idx": 27874, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9c1066bb-d663-4c01-be0c-879d2e316c39": {"__data__": {"id_": "9c1066bb-d663-4c01-be0c-879d2e316c39", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "209db6ad-cb24-442d-8aab-7c8732dd8fab", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6168539ad9decc33d311f10b94f1998c94947ec7cbc8ce61969bea69a54332d8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "69a0f08f-dc33-4391-bdac-de7b0abc1c90", "node_type": "1", "metadata": {}, "hash": "6c806633e2b77373e1f2d2163c7b1365ec3dbe76176e087863b2bb1c9c43b230", "class_name": "RelatedNodeInfo"}}, "text": "else {\n    char* ns_name =\n        get_namespace_name(get_rel_namespace(GetRelationRelid(rte)));\n    XCHECK(ns_name != nullptr, DDM_CALLER);\n    char* rel_name = get_rel_name(GetRelationRelid(rte));\n    XCHECK(rel_name != nullptr, DDM_CALLER);\n    target << quote_identifier(ns_name) << '.' << quote_identifier(rel_name);\n  }", "mimetype": "text/plain", "start_char_idx": 27875, "end_char_idx": 28200, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "69a0f08f-dc33-4391-bdac-de7b0abc1c90": {"__data__": {"id_": "69a0f08f-dc33-4391-bdac-de7b0abc1c90", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9c1066bb-d663-4c01-be0c-879d2e316c39", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dea0c754fa4b3d6271cfd3df32e537e557abb5a3ac16c8d7a201c802b01a0d41", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d4602de0-8008-422a-9142-193e89789c35", "node_type": "1", "metadata": {}, "hash": "c227ce709082e0331a158bc47ceb52827445b121c3242c27655b0d16e927b4f0", "class_name": "RelatedNodeInfo"}}, "text": "return target.str();\n}", "mimetype": "text/plain", "start_char_idx": 28203, "end_char_idx": 28225, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d4602de0-8008-422a-9142-193e89789c35": {"__data__": {"id_": "d4602de0-8008-422a-9142-193e89789c35", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "69a0f08f-dc33-4391-bdac-de7b0abc1c90", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dcd8a2a6a6b9dab6f359882c28ba3b3d01dbd4de8294d1da73a08341d9899b3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9fd7969c-0722-4040-9a36-914c0cb5b5c0", "node_type": "1", "metadata": {}, "hash": "63e8fe2f2b8efe8877074b29e6f4bb5f2cf9d61c6f7c78d0a0b73b424bff2136", "class_name": "RelatedNodeInfo"}}, "text": "/// Construct a select query for the given rte. Resulting query is of the form\n/// `select col1, col2, col3... from table_name`\n/// \\param RangeTblEntry* rte\n/// \\param colnames optional std::vector containing std::string of column names.\n/// colnames should have entries when the relation type of the rte is lbv. For\n/// lbv, column names cannot be found in pg_attribute.\n/// \\return SelectStmt*\nSelectStmt* BuildQueryForRTE(const RangeTblEntry* rte,\n                             std::optional<std::vector<std::string>> colnames) {\n  std::string column_names_concat;\n  bool first_col = true;\n\n  if (!colnames) colnames = GetActualColumnNames(rte);\n  XCHECK(colnames && colnames->size() != 0, DDM_CALLER);\n\n  for (std::string& colname : *colnames) {\n    XCHECK(colname.size() > 0, DDM_CALLER);\n    if (first_col) {\n      first_col = false;\n    } else {\n      column_names_concat += \", \";\n    }\n    column_names_concat += quote_identifier(colname.c_str());\n  }\n\n  XCHECK(column_names_concat.size() != 0, DDM_CALLER);\n\n  std::string target = GetRTEQueryTargetName(rte);\n\n  std::string sql = \"SELECT \" + column_names_concat + \" FROM \" + target;\n\n  return reinterpret_cast<SelectStmt*>(\n      linitial(ParseQuery(sql.c_str(), LOG_TAG_DDM)));\n}", "mimetype": "text/plain", "start_char_idx": 28227, "end_char_idx": 29466, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9fd7969c-0722-4040-9a36-914c0cb5b5c0": {"__data__": {"id_": "9fd7969c-0722-4040-9a36-914c0cb5b5c0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d4602de0-8008-422a-9142-193e89789c35", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d23bddc57c72470ea2dddb51bf7826297ade2bfe78c0218485912a0c5f577845", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73c47799-4888-4078-84ff-dc65a35af0cc", "node_type": "1", "metadata": {}, "hash": "f9ad1539b0fcd8ee52f7daa150d3b60faf29cddbceb3b945780ad5510b607e63", "class_name": "RelatedNodeInfo"}}, "text": "namespace", "mimetype": "text/plain", "start_char_idx": 2035, "end_char_idx": 2044, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73c47799-4888-4078-84ff-dc65a35af0cc": {"__data__": {"id_": "73c47799-4888-4078-84ff-dc65a35af0cc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9fd7969c-0722-4040-9a36-914c0cb5b5c0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "854e618077bc720e3e641bde8268bd19f1b7ef136e8399702e97cfa701b60d1c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5b36e4e3-84de-4052-9d89-a45b9cec9ad9", "node_type": "1", "metadata": {}, "hash": "641c982389ccd42b5548ec87f9eade3e5f5ee6cdcb5a3c43e5989145a8dbb68f", "class_name": "RelatedNodeInfo"}}, "text": "{\n/// Iterates through the provided SelectStmt's ResTargets and replaces any\n/// matched columns with the Masking expression in the masks map.", "mimetype": "text/plain", "start_char_idx": 29478, "end_char_idx": 29620, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5b36e4e3-84de-4052-9d89-a45b9cec9ad9": {"__data__": {"id_": "5b36e4e3-84de-4052-9d89-a45b9cec9ad9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73c47799-4888-4078-84ff-dc65a35af0cc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "04eb1e7d9a753be5a585c6b2ace7813320de3abc4a79be961b4fd0e2323814d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d090e23-ae25-4a9d-8bdc-46428e201f9e", "node_type": "1", "metadata": {}, "hash": "b215afdf8e5755c2ea16c7b6d565ec69d49943534971e6752d931f85b3117442", "class_name": "RelatedNodeInfo"}}, "text": "SelectStmt* MaskColumns(\n    SelectStmt* select_stmt, const MaskMap& masks,\n    const std::optional<NestedVarNames>& obj_transform_vars_opt)", "mimetype": "text/plain", "start_char_idx": 29621, "end_char_idx": 29761, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1d090e23-ae25-4a9d-8bdc-46428e201f9e": {"__data__": {"id_": "1d090e23-ae25-4a9d-8bdc-46428e201f9e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5b36e4e3-84de-4052-9d89-a45b9cec9ad9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e8ce622e3c6e028a673343325516bd68bf02bd51366dc9aa7aeb4f1bb5c1ecbe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e76be2bd-1d3b-4c30-811e-8a96dd09c369", "node_type": "1", "metadata": {}, "hash": "a1e52df15128beb056f212c1d40d44c5352040e44b53493b0b0b31b56e23cf1f", "class_name": "RelatedNodeInfo"}}, "text": "{\n  ListCell* lc = nullptr;\n  ResTarget* rtgt = nullptr;\n  ResTarget* masked = nullptr;\n  std::string col;\n\n  foreach(lc, select_stmt->targetList) {\n    Node* node = reinterpret_cast<Node*>(lfirst(lc));\n    XCHECK(IsA(node, ResTarget), DDM_CALLER);\n    rtgt = reinterpret_cast<ResTarget*>(node);\n    XCHECK(IsA(rtgt->val, ColumnRef), DDM_CALLER);\n    ColumnRef* cref = reinterpret_cast<ColumnRef*>(rtgt->val);\n    XCHECK(list_length(cref->fields) == 1, DDM_CALLER);\n    col = std::string(strVal(reinterpret_cast<Value*>(linitial(cref->fields))));\n\n    const auto& mask_it = masks.find(col);\n    if (mask_it == masks.end()) continue;\n\n    if (mask_it->second.size() == 1 && !mask_it->second[0].nested_path) {\n      // This block is for column-level attachments only.\n      masked = copyObject(mask_it->second[0].rtgt.get());\n    } else {\n      // This block is for nested path attachments only.\n      if (obj_transform_vars_opt &&\n          obj_transform_vars_opt->find(col) == obj_transform_vars_opt->end()) {\n        // Optimization: if walker did not find any reference for the `col`\n        // that must result in OBJECT_TRANSFORM, then don't use it. Instead, the\n        // mask will be applied on variable level.\n        break;\n      }\n\n      masked = makeNode(ResTarget);\n      masked->val =\n          reinterpret_cast<Node*>(MakeObjectTransform(mask_it->second, col));\n    }\n    masked->name = pstrdup(col.c_str());\n    void* old_val = replace_pointer(lc, masked);\n    safe_pfree(old_val);\n  }", "mimetype": "text/plain", "start_char_idx": 29762, "end_char_idx": 31262, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e76be2bd-1d3b-4c30-811e-8a96dd09c369": {"__data__": {"id_": "e76be2bd-1d3b-4c30-811e-8a96dd09c369", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d090e23-ae25-4a9d-8bdc-46428e201f9e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a0eb60ca0015fa6d74c1e55713a485c509ead82885af9908030738c6508c1a40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "553067b0-471f-44d8-b587-0f547ad3bc97", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "return select_stmt;\n}", "mimetype": "text/plain", "start_char_idx": 31266, "end_char_idx": 31287, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "553067b0-471f-44d8-b587-0f547ad3bc97": {"__data__": {"id_": "553067b0-471f-44d8-b587-0f547ad3bc97", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e76be2bd-1d3b-4c30-811e-8a96dd09c369", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "73c859583695bccba177504396781bdad40d508107c170a64dd50b2d0b336418", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c747aeff-f03f-4b03-89e1-ce9fefc06d0e", "node_type": "1", "metadata": {}, "hash": "1e6bddafe200e95d7f35239dd0c240cc221df129ffd75e25aec698e79e5d7efc", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3525, "end_char_idx": 3526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c747aeff-f03f-4b03-89e1-ce9fefc06d0e": {"__data__": {"id_": "c747aeff-f03f-4b03-89e1-ce9fefc06d0e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "553067b0-471f-44d8-b587-0f547ad3bc97", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "96be9a9f-5687-4d04-9461-1411512d6fb5", "node_type": "1", "metadata": {}, "hash": "89ba5cad82fa46c17f60fefbbddf83510731c54ed2f0d22686cd24aa128c7106", "class_name": "RelatedNodeInfo"}}, "text": "// namespace", "mimetype": "text/plain", "start_char_idx": 16754, "end_char_idx": 16766, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "96be9a9f-5687-4d04-9461-1411512d6fb5": {"__data__": {"id_": "96be9a9f-5687-4d04-9461-1411512d6fb5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c747aeff-f03f-4b03-89e1-ce9fefc06d0e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "67b519d417843c4639c3ddde886c325b928468da35dc97ec3cb1bf8535647d06", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "28b8a9b7-9527-47d4-ac64-3ffc85e66648", "node_type": "1", "metadata": {}, "hash": "16bea4ff6cdc32f71910e6a6a1fa9d42d357331f9aa502329d515de7ddf0cc46", "class_name": "RelatedNodeInfo"}}, "text": "std::tuple<std::shared_ptr<Alias>, std::vector<std::shared_ptr<Node>>,\n           std::shared_ptr<List>>\nAnalyzePolicyStatement(\n    const std::vector<std::shared_ptr<ColumnDef>>& column_definitions,\n    const std::vector<std::shared_ptr<Node>>& masking_expressions)", "mimetype": "text/plain", "start_char_idx": 31305, "end_char_idx": 31571, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "28b8a9b7-9527-47d4-ac64-3ffc85e66648": {"__data__": {"id_": "28b8a9b7-9527-47d4-ac64-3ffc85e66648", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96be9a9f-5687-4d04-9461-1411512d6fb5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4e3192a3d287cd311c3864b6fe4bc121fdc629a92d9788af217c945adbe0d199", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "33c90687-5db2-4af2-88d2-38adf23c5041", "node_type": "1", "metadata": {}, "hash": "fecef58164065a8d921c3d36af0be7588b88c8e028596e8184a326c8ed09a28a", "class_name": "RelatedNodeInfo"}}, "text": "{\n  ParseState* pstate = make_parsestate(NULL);\n  // This is to ensure that when subqueries inside expressions are processed,\n  // the parse state remembers that it is a DDM expression and correctly\n  // validates that the references are allowed (like to the system catalogs).\n  pstate->is_parsing_ddm_policy = true;\n\n  std::shared_ptr<Query> subquery;\n  std::shared_ptr<Alias> alias;\n  std::tie(subquery, alias) = BuildSubqueryForAnalysis(column_definitions);\n\n  // Add the subquery to the parse state's FROM clause.\n  int rtindex = addRangeTableEntryForSubquery(pstate, subquery.get(),\n                                              alias.get(), /*inFromCl=*/true)\n                    .second;\n  addRTEtoQuery(pstate, rtindex, /*addToJoinList*/ true,\n                /*addToNameSpace*/ true);\n\n  std::vector<std::shared_ptr<Node>> transformed_expressions;\n\n  // Now that the parse state represents correct query, run transformation\n  // through all expressions.\n  for (std::shared_ptr<Node> expression : masking_expressions) {\n    std::shared_ptr<Node> transformed_expression(\n        transformExpr(pstate, copyObject(expression.get())), PAlloc_deleter());\n\n    transformed_expressions.push_back(transformed_expression);\n  }\n\n  std::shared_ptr<List> range_table(pstate->p_rtable, PAlloc_deleter());\n\n  return {alias, transformed_expressions, range_table};\n}", "mimetype": "text/plain", "start_char_idx": 31572, "end_char_idx": 32930, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "33c90687-5db2-4af2-88d2-38adf23c5041": {"__data__": {"id_": "33c90687-5db2-4af2-88d2-38adf23c5041", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "28b8a9b7-9527-47d4-ac64-3ffc85e66648", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "112cd598f5fe9ccd79fbafc401ee0b0b0b981fd80126c04c400d37c22cf10306", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9c7f4139-670c-4f4a-928a-58d6f9f161d2", "node_type": "1", "metadata": {}, "hash": "d07d7588144eee2ee77dd40333afd32b494d379fddfc853f4924f44676951699", "class_name": "RelatedNodeInfo"}}, "text": "std::pair<std::shared_ptr<Query>, std::shared_ptr<Alias>>\nBuildSubqueryForAnalysis(\n    const std::vector<std::shared_ptr<ColumnDef>>& column_definitions)", "mimetype": "text/plain", "start_char_idx": 32932, "end_char_idx": 33086, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9c7f4139-670c-4f4a-928a-58d6f9f161d2": {"__data__": {"id_": "9c7f4139-670c-4f4a-928a-58d6f9f161d2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "33c90687-5db2-4af2-88d2-38adf23c5041", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1b18ac3f575fd8b60d8ed01fe196f66194dd35985d2b4d5d0888d70310b08c27", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e64cd54d-fd5c-4efa-adb3-59bb33e72b51", "node_type": "1", "metadata": {}, "hash": "6617d4f6895c0fc23c10aae499c33e93ad02b9793da277fd4adbccdb93f2e18d", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::shared_ptr<Query> subquery(makeNode(Query), PAlloc_deleter());\n  subquery->commandType = CMD_SELECT;\n  subquery->canSetTag = false;\n  RangeTblRef* rtr = makeRangeTblRef(list_length(subquery->rtable));\n  subquery->jointree = makeFromExpr(list_make1(rtr), nullptr);\n\n  List* column_names = NIL;\n\n  // Add each policy column to the query's target list and to the list of column\n  // names for alias.\n  AttrNumber varattno = 0;", "mimetype": "text/plain", "start_char_idx": 33087, "end_char_idx": 33519, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e64cd54d-fd5c-4efa-adb3-59bb33e72b51": {"__data__": {"id_": "e64cd54d-fd5c-4efa-adb3-59bb33e72b51", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9c7f4139-670c-4f4a-928a-58d6f9f161d2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b76b291dab64defefd8c14047c4e7e6dc8b65c2047906feafa222dccf4337270", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c085e418-6a0e-4c48-8333-7998aa306a84", "node_type": "1", "metadata": {}, "hash": "6bfaec5a7ca88e1b9765ea17f460c0f5f6f0b3126561d165915005b2bc0e50a9", "class_name": "RelatedNodeInfo"}}, "text": "for (std::shared_ptr<ColumnDef> column_definition : column_definitions) {\n    XCHECK(column_definition);\n    char* column_name = reinterpret_cast<char*>(column_definition->colname);\n    TypeName* type_name =\n        reinterpret_cast<TypeName*>(column_definition->typname);\n    Oid type_oid = typenameTypeId(type_name);\n\n    Var* var = makeNode(Var);\n    var->varno = 1;\n    var->varattno = ++varattno;\n    var->vartype = type_oid;\n    // Check if type_oid is VARCHAR and tymod is -1.\n    // Set typmod to 260 as default value.\n    if (type_oid == VARCHAROID && type_name->typmod == -1) {\n      type_name->typmod = defaultTypmod;\n    }\n    var->vartypmod = type_name->typmod;\n    var->varlevelsup = 0;\n    Resdom* result_domain =\n        makeResdom(var->varattno, var->vartype, var->vartypmod, column_name,\n                   false /* resjunk */);\n    TargetEntry* tle =\n        makeTargetEntry(result_domain, reinterpret_cast<Expr*>(var));\n    subquery->targetList = lappend(subquery->targetList, tle);\n\n    column_names = lappend(column_names, makeString(pstrdup(column_name)));\n  }\n\n  // Use the column names from DDM policy's WITH clause.\n  std::shared_ptr<Alias> alias(makeAlias(ddm::MASK_PSEUDO_TBL, column_names),\n                               PAlloc_deleter());\n\n  return {subquery, alias};\n}", "mimetype": "text/plain", "start_char_idx": 33522, "end_char_idx": 34822, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c085e418-6a0e-4c48-8333-7998aa306a84": {"__data__": {"id_": "c085e418-6a0e-4c48-8333-7998aa306a84", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e64cd54d-fd5c-4efa-adb3-59bb33e72b51", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "30b07e94da15369e9cd86ff477ab9eeef21ca006b032103814707b16eb1d5f77", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46fa03e8-7f58-4b07-8258-9672c3b459a7", "node_type": "1", "metadata": {}, "hash": "7e4b7fd3eb4f181a81863200bc6134833f4b451a8aa3d37ee57076accc634724", "class_name": "RelatedNodeInfo"}}, "text": "std::shared_ptr<Query> BuildQueryForDeparsing(\n    std::shared_ptr<Alias> alias, std::shared_ptr<Node> expression)", "mimetype": "text/plain", "start_char_idx": 34824, "end_char_idx": 34938, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46fa03e8-7f58-4b07-8258-9672c3b459a7": {"__data__": {"id_": "46fa03e8-7f58-4b07-8258-9672c3b459a7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c085e418-6a0e-4c48-8333-7998aa306a84", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0226e5159cff59959ff46f9ddfa98001d8efa491771a73442cb7e83fc3e21261", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "08f2066c-5bbf-451d-8879-831ed99a68ba", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::string dummy = ddm::DDM_DUMMY_NAME;\n\n  std::shared_ptr<Query> query(makeNode(Query), PAlloc_deleter());\n  query->commandType = CMD_SELECT;\n  RangeTblEntry* rte = makeNode(RangeTblEntry);\n  rte->rtekind = RTE_RELATION;\n  rte->eref = alias.get();\n  rte->inh = false;\n  rte->inFromCl = true;\n  rte->external_table_id = -1;\n  rte->file_registry_id = -1;\n  // Here we set S3 table name so that the FROM clause looks to PG like a valid\n  // external relation. A non-null s3_table_location means to the planner that\n  // the table is external and therefore the planner will not try to validate it\n  // until the runtime. This is what we need here, because there is no table\n  // for this query, we only need the SELECT and ALIAS parts.\n  rte->s3_table_location = pstrdup(dummy.c_str());\n  rte->external_namespace = pstrdup(dummy.c_str());\n  rte->external_tablename = pstrdup(dummy.c_str());\n  query->rtable = lappend(query->rtable, rte);\n\n  // Attach the expression itself.\n  RangeTblRef* rtr = makeRangeTblRef(list_length(query->rtable));\n  query->jointree = makeFromExpr(list_make1(rtr), nullptr);\n\n  // Resdom here contains correct expression return type.\n  Resdom* resdom =\n      makeResdom(1, exprType(expression.get()), exprTypmod(expression.get()),\n                 pstrdup(dummy.c_str()), false /* resjunk */);\n\n  TargetEntry* tle = makeTargetEntry(\n      resdom, std::reinterpret_pointer_cast<Expr>(expression).get());\n  query->targetList = lappend(query->targetList, tle);\n\n  return query;", "mimetype": "text/plain", "start_char_idx": 34939, "end_char_idx": 36440, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "08f2066c-5bbf-451d-8879-831ed99a68ba": {"__data__": {"id_": "08f2066c-5bbf-451d-8879-831ed99a68ba", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46fa03e8-7f58-4b07-8258-9672c3b459a7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a577be31a688b4ec9e1fec72c67f855fd6454d18eadd09b11624f3dcd538ea00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c2c9b0d0-93e2-4cb3-8493-bfee1f43d4ab", "node_type": "1", "metadata": {}, "hash": "c6d3b876809602fdbee26523f5ea8750979885ddccd726dde4a421e65a90fbf4", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3525, "end_char_idx": 3526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2c9b0d0-93e2-4cb3-8493-bfee1f43d4ab": {"__data__": {"id_": "c2c9b0d0-93e2-4cb3-8493-bfee1f43d4ab", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "08f2066c-5bbf-451d-8879-831ed99a68ba", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "456aa230-4add-4ed7-b066-eed356014ce2", "node_type": "1", "metadata": {}, "hash": "e6383e98529ef408cd30e62a7eacce0bdc13fa02fe610e080a074f0817807b2c", "class_name": "RelatedNodeInfo"}}, "text": "void VerifyObjectPermissions(Oid polid) {\n  if (!gconf_ddm_enable_perm_check) return;\n\n  char* pol_att_str = nullptr;\n  char* pol_expr = nullptr;\n  GetPolicyAttrsAndExpr(polid, &pol_att_str, &pol_expr);\n\n  std::vector<std::shared_ptr<ColumnDef>> parsed_attrs =\n      ddm::DeserializeColumnDefs(pol_att_str);\n\n  const std::vector<std::shared_ptr<ResTarget>>& parsed_exprs =\n      ParsePolExpr(pol_expr);\n\n  std::vector<std::shared_ptr<Node>> masking_expressions;\n  for (auto tar : parsed_exprs) {\n    Node* res_tar = copyObject(reinterpret_cast<Node*>(tar.get()->val));\n    std::shared_ptr<Node> s_ptr(res_tar, PAlloc_deleter());\n    masking_expressions.push_back(s_ptr);\n  }\n\n  std::shared_ptr<Alias> alias;\n  std::vector<std::shared_ptr<Node>> expressions;\n  std::shared_ptr<List> range_table;\n  std::tie(alias, expressions, range_table) =\n      ddm::AnalyzePolicyStatement(parsed_attrs, masking_expressions);\n\n  // Convert transformed expressions to ParsedPolicyExpression, one by one.\n  for (auto&& expression : expressions) {\n    auto query = ddm::BuildQueryForDeparsing(alias, expression);\n    policy::PolicyPermCheckContext perm_ctx = {\n        polid, PolicyType::kPolicyDDM /* poltype */};\n    CheckPermissionForPolicy(reinterpret_cast<Node*>(query.get()->targetList),\n                             &perm_ctx);\n  }\n}", "mimetype": "text/plain", "start_char_idx": 36444, "end_char_idx": 37766, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "456aa230-4add-4ed7-b066-eed356014ce2": {"__data__": {"id_": "456aa230-4add-4ed7-b066-eed356014ce2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c2c9b0d0-93e2-4cb3-8493-bfee1f43d4ab", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a05de503a9e80d08665dc0a58499f3934ebd170bf6416fa6257d132286d7d97d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "431a8b92-7462-4852-a885-964042e72910", "node_type": "1", "metadata": {}, "hash": "15ce6f31f3380baa1cd83b534d7f64dcb3fbe1ddd19bf5ba48be6912cf1302f8", "class_name": "RelatedNodeInfo"}}, "text": "void DisableDdmOnFgacTarget(Query* q, const RangeTblEntry* rte)", "mimetype": "text/plain", "start_char_idx": 37768, "end_char_idx": 37831, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "431a8b92-7462-4852-a885-964042e72910": {"__data__": {"id_": "431a8b92-7462-4852-a885-964042e72910", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "456aa230-4add-4ed7-b066-eed356014ce2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a879a49fac61b9c7b2481d2fe69958b2ceffd4e94a9d066a8321c8f28150faac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e6c8263-3f61-4620-904e-a46ddbbe1c16", "node_type": "1", "metadata": {}, "hash": "07c7d60715d1541470fa075600327ea40b11d515cc28a2fbe8211f55183ad922", "class_name": "RelatedNodeInfo"}}, "text": "{\n  XCHECK(q->jointree != nullptr, DDM_CALLER);\n  XCHECK(q->jointree->fromlist != nullptr, DDM_CALLER);\n  XCHECK_EQ(list_length(q->rtable), 1, DDM_CALLER);\n  RangeTblEntry* fgac_target_rte =\n      reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n\n  // THIS IS AN LF RTE, we check correct target based on name.\n  char* rte_db_name = nullptr;\n  char* rte_ns_name = nullptr;\n  char* rte_rel_name = nullptr;\n  const bool is_rel_via_lf =\n      IsLfManagedRelation(rte, &rte_db_name, &rte_ns_name, &rte_rel_name);", "mimetype": "text/plain", "start_char_idx": 37832, "end_char_idx": 38345, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4e6c8263-3f61-4620-904e-a46ddbbe1c16": {"__data__": {"id_": "4e6c8263-3f61-4620-904e-a46ddbbe1c16", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "431a8b92-7462-4852-a885-964042e72910", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "546b6f899a3f4692c7f8b0f0f261a1285b2e470f2f79a61ec76514954251650e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a1bdc427-f56c-476f-887b-48cc55a8d300", "node_type": "1", "metadata": {}, "hash": "cb9d7552bf7841764d679e2c501a552a645b4f56930b9f3eebc851b60d365d0a", "class_name": "RelatedNodeInfo"}}, "text": "if (is_rel_via_lf) {\n    char* fgac_db_name = nullptr;\n    char* fgac_ns_name = nullptr;\n    char* fgac_rel_name = nullptr;\n    const bool is_fgac_rel_via_lf =\n        IsLfManagedRelation(rte, &fgac_db_name, &fgac_ns_name, &fgac_rel_name);\n    XCHECK(is_fgac_rel_via_lf, DDM_CALLER);\n    XCHECK(rte_db_name != nullptr && fgac_db_name != nullptr &&\n               strncmp(rte_db_name, fgac_db_name, NAMEDATALEN) == 0,\n           DDM_CALLER);\n    XCHECK(rte_ns_name != nullptr && fgac_ns_name != nullptr &&\n               strncmp(rte_ns_name, fgac_ns_name, NAMEDATALEN) == 0,\n           DDM_CALLER);\n    XCHECK(rte_rel_name != nullptr && fgac_rel_name != nullptr &&\n               strncmp(rte_rel_name, fgac_rel_name, NAMEDATALEN) == 0,\n           DDM_CALLER);\n  } else {\n    // THIS IS A LOCAL RTE, WE CHECK TARGET BASED ON OID\n    // Target can be a RTE_[RLS]_RELATION: table, regular view, or MV\n    //            or a RTE_[RLS]_SUBQUERY: late binding view.\n    XCHECK(fgac_target_rte->rtekind == RTE_RELATION ||\n               fgac_target_rte->rtekind == RTE_SUBQUERY ||\n               IsRlsRte(fgac_target_rte),\n           DDM_CALLER);\n    XCHECK(GetRelationRelid(fgac_target_rte) == GetRelationRelid(rte),\n           DDM_CALLER);\n  }\n\n  fgac_target_rte->has_ddm_rewrite = false;\n}", "mimetype": "text/plain", "start_char_idx": 38348, "end_char_idx": 39632, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a1bdc427-f56c-476f-887b-48cc55a8d300": {"__data__": {"id_": "a1bdc427-f56c-476f-887b-48cc55a8d300", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e6c8263-3f61-4620-904e-a46ddbbe1c16", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5ec35a9437377407053ccbaab4f931f96e92572ac909526f14c9aa4842d5abbd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eab28f0d-39b3-461d-b2af-31a9f54d8920", "node_type": "1", "metadata": {}, "hash": "9a11f46199552a8447ac8182f3bde806eef4c0ce6c6717ab56725a264a91c341", "class_name": "RelatedNodeInfo"}}, "text": "Query* MergePolsForRTE(const RangeTblEntry* rte, Query* top_query,\n                       const std::set<ParsedPolicyAttachment>& attachments,\n                       const NestedVarMap& ddm_obj_transform_vars,\n                       const ObjTransformAlpColumnsCtx& obj_transform_alp_ctx)", "mimetype": "text/plain", "start_char_idx": 39634, "end_char_idx": 39922, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "eab28f0d-39b3-461d-b2af-31a9f54d8920": {"__data__": {"id_": "eab28f0d-39b3-461d-b2af-31a9f54d8920", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a1bdc427-f56c-476f-887b-48cc55a8d300", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5b8af71e2ffea5e5c0ed40a8ec38667e8559aa281089a9c80fc4ebecd414d1a6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "880558fb-7666-4b8d-b6fa-a739199af742", "node_type": "1", "metadata": {}, "hash": "591ea9c2496786de7217de299c0039784823700c9c6ed8ed90d2166e70b6e4bf", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const bool has_ddm_attachments = !attachments.empty();\n  const bool has_lf_alp_policies =\n      gconf_enable_lf_alp && obj_transform_alp_ctx.lf_alp_policy;\n\n  const bool is_spectrum_relation =\n      is_RTE_s3table(rte) || IsSpectrumNested(rte);  // See [DP-61135].\n  const bool is_under_seclog = seclog::HasAttachment(GetRelationRelid(rte));\n  // It is possible that ALP paths are not treated as PartiQL for Spectrum\n  // nested tables. This is only known after walking the query tree's target\n  // list entries in the ALP walkers. Hence, `has_lf_alp_policies` can return\n  // false, if ALP policies are on top of flattened JOINed scalar attributes of\n  // the Spectrum NestedRewriter. For these, the baseline CLP engine already\n  // suffices. This is also the case for count(*), where we do not have an\n  // explicit reference to columns. Subsequently, the ALP walker does not\n  // capture and cache the ALP policies.", "mimetype": "text/plain", "start_char_idx": 39923, "end_char_idx": 40845, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "880558fb-7666-4b8d-b6fa-a739199af742": {"__data__": {"id_": "880558fb-7666-4b8d-b6fa-a739199af742", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eab28f0d-39b3-461d-b2af-31a9f54d8920", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6439113c1a7d9e6dfd84d87a819c091822e84203feb64f2672d836bb0ca47755", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "13d49da9-dc94-4b0c-add4-4bdcfd7c5c07", "node_type": "1", "metadata": {}, "hash": "7b777f5ea985a94afc27447d58a6e75ff2e16adb1cbd7a27529370963d90a695", "class_name": "RelatedNodeInfo"}}, "text": "if (gconf_enable_lf_alp && !has_lf_alp_policies && is_spectrum_relation &&\n      !is_under_seclog) {\n    // RTEs masked with SecLog are allowed to be Spectrum (case of STCS).\n    XCHECK(gconf_spectrum_enable_lf_data_filters);\n    // In case ALP policies are not present in a Spectrum relation, we still\n    // enforce that the relation does not contain any DDM attachmenet, as these\n    // are not supported on Spectrum tables.\n    XCHECK(!has_ddm_attachments, \"DDM over an external relation\");\n  } else {\n    // One and only one type of attachments must be non-empty until we support\n    // LF and native DDM over on relation.\n    XCHECK(has_ddm_attachments ^ has_lf_alp_policies,\n           \"LF and DDM over on relation\");\n  }\n\n  MaskMap masks = BuildMaskMap(attachments, obj_transform_alp_ctx);\n\n  SelectStmt* select_q;\n  Oid rte_relid = GetRelationRelid(rte);\n  std::optional<std::vector<std::string>> lbv_colnames;\n  List* ddm_reparse_lbvs = NIL;", "mimetype": "text/plain", "start_char_idx": 40848, "end_char_idx": 41799, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "13d49da9-dc94-4b0c-add4-4bdcfd7c5c07": {"__data__": {"id_": "13d49da9-dc94-4b0c-add4-4bdcfd7c5c07", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "880558fb-7666-4b8d-b6fa-a739199af742", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "060442d12dcf6375d17b5dfa13e28c234c4fa5814f4efe30ad70633fe6ace00f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "56335313-d079-4f31-be25-4142b4f8da23", "node_type": "1", "metadata": {}, "hash": "46c95563bdc2dfef3e7a169b91d3de6f724380a072976ffdddb719dadd5d4dea", "class_name": "RelatedNodeInfo"}}, "text": "if (IsLbv(rte_relid)) {\n    char* rel_name = get_rel_name(rte_relid);\n    std::unordered_map<std::string, std::shared_ptr<ColumnDef>>\n        parsed_lbv_columndefs;\n    lbv_colnames = ParseLbvColumns(rte, parsed_lbv_columndefs);\n\n    for (auto attachment : attachments) {\n      CheckAttachmentForColumnsType(attachment, parsed_lbv_columndefs,\n                                    rel_name);\n    }\n\n    if (gconf_ddm_enable_lbv_caching) {\n      // Cache the LBV so it will be reused when parsing the DDM policy. LBVs\n      // can reference data lake objects which are expensive to parse. Also, the\n      // DDM rewriter will be called on each EXECUTE and there are implicit\n      // assumptions that EXECUTE will not create localization objects (which\n      // would happen if the DDM rewriter were to parse the LBV).\n      //\n      // WARNING: disabling GUC gconf_ddm_enable_lbv_caching will result in\n      // query ERROR for DDM-protected LBVs that reference data sharing or\n      // external relations.\n      ddm_reparse_lbvs =\n          list_make1(copyObject(const_cast<RangeTblEntry*>(rte)));\n    }\n  }\n  select_q = BuildQueryForRTE(rte, lbv_colnames);", "mimetype": "text/plain", "start_char_idx": 41802, "end_char_idx": 42958, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "56335313-d079-4f31-be25-4142b4f8da23": {"__data__": {"id_": "56335313-d079-4f31-be25-4142b4f8da23", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "13d49da9-dc94-4b0c-add4-4bdcfd7c5c07", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "763e048ae4ab481b1dd3d1b31537e5f7361f375fe7ff087e7d21fa3866691861", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "977ef768-78f3-42a9-9891-538067e64ef1", "node_type": "1", "metadata": {}, "hash": "5692f13003f77dea91cc5d9e64990d7ea8c619f397b6763ce7ee54aeeab25ed1", "class_name": "RelatedNodeInfo"}}, "text": "for (auto& entries : masks) {\n    // Do only for DDM attachments (not LF-ALP).\n    for (MergeEntry& entry : entries.second) {\n      if (entry.attachment) {\n        // SecLog policies are maintained by Redshift.\n        if (entry.attachment->pol.pol.is_seclog) continue;\n        Oid polid = entry.attachment->pol.pol.polid;\n        XCHECK(polid > 0, policy::tag_for_policy_type(kPolicyDDM));\n        // Verify permissions for all objects in the policy.\n        ddm::VerifyObjectPermissions(polid);\n      }\n    }\n  }\n\n  // If SQL command type is not SELECT, we leave opt as unset, which will cause\n  // MaskColumns to OBJECT_TRANSFORM all columns. If rte_relid is not found, set\n  // opt to empty set, meaning none of the columns will be OBJECT_TRANSFORM'd.\n  // Else pass the set of columns to OBJECT_TRANSFORM.\n  std::optional<NestedVarNames> obj_transform_vars_opt = std::nullopt;\n  if (top_query->commandType != CMD_UPDATE &&\n      top_query->commandType != CMD_DELETE) {\n    auto obj_transform_vars_it = ddm_obj_transform_vars.find(rte_relid);\n    obj_transform_vars_opt =\n        obj_transform_vars_it != ddm_obj_transform_vars.end()\n            ? obj_transform_vars_it->second\n            : NestedVarNames();\n  }\n  select_q = MaskColumns(select_q, masks, obj_transform_vars_opt);\n\n  XCHECK(top_query != nullptr);\n  List* external_rtables =\n      has_lf_alp_policies ? CollectDataSharingExternalRTEs(top_query) : NIL;", "mimetype": "text/plain", "start_char_idx": 42962, "end_char_idx": 44383, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "977ef768-78f3-42a9-9891-538067e64ef1": {"__data__": {"id_": "977ef768-78f3-42a9-9891-538067e64ef1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "56335313-d079-4f31-be25-4142b4f8da23", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "88cb33d5f2de6930b4eda45ddb9e8986ce0385d0915c97200a7ee047a3e87ef3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a0ca6248-36db-4a87-8b33-857292adefe8", "node_type": "1", "metadata": {}, "hash": "c1d94e12ade05d4b4ef64cec44353a46adb0fc2dac50fdef852bd6bb97b2a4f1", "class_name": "RelatedNodeInfo"}}, "text": "if (is_external_table(rte)) {\n    external_rtables =\n        list_concat(external_rtables, CollectExternalTableRTEs(top_query));\n  }\n\n  List* parsed = parse_analyze_int_rw(\n      reinterpret_cast<Node*>(select_q), nullptr /* paramTypes */,\n      0 /* numParams */, ParseTypeDDM, true /* post_ds_perm_checks */,\n      external_rtables /* external_rtables */,\n      false /* is_prepared_statement */,\n      has_lf_alp_policies /* allow_localized_temps */, NIL /* active_lbvs */,\n      false /* only_metadata */, InvalidAclId /* lbv_owner */,\n      InvalidOid /* skip_rls_relid */, ddm_reparse_lbvs,\n      nullptr /* bastion_external_schema */);\n\n  if (gconf_ddm_enable_perm_check) {\n    // Disable Permsissions on the unfolded DDM SubQuery.\n    // Permissions are already verified in ddm::VerifyObjectPermissions.\n    DisableRTEPermCheck(parsed);\n  }\n\n  XCHECK_EQ(list_length(parsed), 1, DDM_CALLER);\n  Query* q = reinterpret_cast<Query*>(linitial(parsed));\n  DisableDdmOnFgacTarget(q, rte);\n  XCHECK(q->jointree != nullptr, DDM_CALLER);\n  XCHECK(q->jointree->fromlist != nullptr, DDM_CALLER);\n  XCHECK_EQ(list_length(q->rtable), 1, DDM_CALLER);\n\n  auto rewritten_rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  rewritten_rte->has_ddm_rewrite = false;\n\n  if (gconf_enable_session_context_variable) {\n    return convert_current_setting_func_to_const(q, NULL /* no param_list */,\n                                                 false /* no folded view*/);\n  }\n\n  return q;\n}", "mimetype": "text/plain", "start_char_idx": 44386, "end_char_idx": 45872, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a0ca6248-36db-4a87-8b33-857292adefe8": {"__data__": {"id_": "a0ca6248-36db-4a87-8b33-857292adefe8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "977ef768-78f3-42a9-9891-538067e64ef1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eb65dfbb9d8f7e74f11faa1c95ddd3636c30454fd91a6bfd21cae5321be3ac00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a666ce49-cf6c-4618-bde6-9ba4c99ea6af", "node_type": "1", "metadata": {}, "hash": "3fe6ada7ab571eebac72a85eb8b667f3bbdedf7e91462432c4311ed833c28dfe", "class_name": "RelatedNodeInfo"}}, "text": "std::string FetchStringFromText(SysCacheIdentifier cache, HeapTuple tup,\n                                int attnum, bool fail_on_null) {\n  bool is_null = true;\n  Datum text_datum = SysCacheGetAttr(cache, tup, attnum, &is_null);\n  if (fail_on_null) {\n    XCHECK(!is_null, DDM_CALLER);\n  }\n  char* toasted =\n      pstrdup(DatumGetCString(DirectFunctionCall1(textout, text_datum)));\n\n  return std::string(toasted);\n}\n\nAttachment AttachmentFromTuple(HeapTuple attachment_tuple) {\n  XCHECK(HeapTupleIsValid(attachment_tuple), DDM_CALLER);\n\n  Immutable_pg_permission_mask mask =\n      reinterpret_cast<Immutable_pg_permission_mask>(\n          GETSTRUCT(attachment_tuple));\n\n  std::string attrs_out =\n      FetchStringFromText(PERMISSIONMASKRELPRIORITY, attachment_tuple,\n                          Anum_pg_permission_mask_polattrsout, true);\n  std::string attrs_in =\n      FetchStringFromText(PERMISSIONMASKRELPRIORITY, attachment_tuple,\n                          Anum_pg_permission_mask_polattrsin, true);\n\n  return Attachment{mask->polid,       mask->permid,        mask->relid,\n                    mask->polpriority, mask->polmodifiedby, attrs_in,\n                    attrs_out};\n}", "mimetype": "text/plain", "start_char_idx": 45874, "end_char_idx": 47052, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a666ce49-cf6c-4618-bde6-9ba4c99ea6af": {"__data__": {"id_": "a666ce49-cf6c-4618-bde6-9ba4c99ea6af", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a0ca6248-36db-4a87-8b33-857292adefe8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "74eab9b97d405bd7ac26b2c98521b408350bde7fed858bf3d4caefd13f50c84f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "32e240a6-0233-463c-98f1-cc4975a216d8", "node_type": "1", "metadata": {}, "hash": "452e8f0cf8313fe6cdf83f6d05dde240d42beda0a87c42074c082d9f28fd4d1b", "class_name": "RelatedNodeInfo"}}, "text": "Policy PolicyFromTuple(HeapTuple pol_tuple) {\n  XCHECK(HeapTupleIsValid(pol_tuple), DDM_CALLER);\n  Immutable_pg_policy_mask pol =\n      reinterpret_cast<Immutable_pg_policy_mask>(GETSTRUCT(pol_tuple));\n\n  return Policy{pol->polid,\n                pol->poldbid,\n                false /* maskoningest */,\n                pol->polname,\n                pol->polmodifiedby,\n                FetchStringFromText(POLICYMASKID, pol_tuple,\n                                    Anum_pg_policy_mask_polattrs, true),\n                FetchStringFromText(POLICYMASKID, pol_tuple,\n                                    Anum_pg_policy_mask_polexpr, true)};\n}\n\nbool HasAttachmentsForRel(const Oid relid) {\n  // First check seclog attachments. They are precompiled.\n  if (seclog::HasAttachment(relid)) return true;\n\n  CatCList* catlist = SearchSysCacheExtendedList(PERMISSIONMASKRELPRIORITY, 1,\n                                                 relid, 0, 0, 0, 0, 0);\n  XCHECK(catlist != nullptr, DDM_CALLER);\n\n  bool has_attachments = false;\n  for (int i = 0; i < catlist->n_members; ++i) {\n    HeapTuple tup = &catlist->members[i]->tuple;\n    if (!HeapTupleIsValid(tup)) {\n      elog(ERROR, \"could not find tuple for relation %u\", relid);\n    }\n    has_attachments = true;\n    break;\n  }\n  ReleaseSysCacheList(catlist);\n  return has_attachments;\n}", "mimetype": "text/plain", "start_char_idx": 47054, "end_char_idx": 48380, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "32e240a6-0233-463c-98f1-cc4975a216d8": {"__data__": {"id_": "32e240a6-0233-463c-98f1-cc4975a216d8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a666ce49-cf6c-4618-bde6-9ba4c99ea6af", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c2ce7312551e92d6768698f1c2e8f421a2be9ad20259649b83e607b20753b6c9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0ff55359-12dc-4f0f-88b5-6a17dc325073", "node_type": "1", "metadata": {}, "hash": "fe478e6c8d49eb5ee75be4d7ad3e5df6bccb8f549e86ba7294b69f372ea0ba09", "class_name": "RelatedNodeInfo"}}, "text": "bool HasAttachmentsForPolicy(const Oid policy_oid) {\n  Relation pg_permission_mask =\n      heap_openr(PermissionMaskRelationName, AccessShareLock);\n  SCOPE_EXIT_GUARD(heap_close(pg_permission_mask, AccessShareLock));\n\n  HeapScanDesc scan_description =\n      heap_beginscan(pg_permission_mask, SnapshotNow, 0, nullptr);\n  SCOPE_EXIT_GUARD(heap_endscan(scan_description));\n\n  HeapTuple tuple;\n\n  while (HeapTupleIsValid(\n      tuple = heap_getnext(scan_description, ForwardScanDirection))) {\n    Immutable_pg_permission_mask permission_form =\n        reinterpret_cast<Immutable_pg_permission_mask>(GETSTRUCT(tuple));\n\n    if (permission_form->polid == policy_oid) {\n      return true;\n    }\n  }\n  return false;\n}", "mimetype": "text/plain", "start_char_idx": 48382, "end_char_idx": 49092, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0ff55359-12dc-4f0f-88b5-6a17dc325073": {"__data__": {"id_": "0ff55359-12dc-4f0f-88b5-6a17dc325073", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "32e240a6-0233-463c-98f1-cc4975a216d8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f83dbd744abc3b98e8d3448c576fa43b571af896ec71e1d261cfb84f23c19a38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf676f75-0796-4eda-8e19-5e0f9b5fe47f", "node_type": "1", "metadata": {}, "hash": "878bff0c80073e19a99289af28b52b2abf36374ad2b311d3ad8cf94c31828cea", "class_name": "RelatedNodeInfo"}}, "text": "std::set<Attachment> FetchAttachmentsForRel(const Oid relid,\n                                            const std::optional<AclId> userid,\n                                            const std::optional<AclId> roleid)", "mimetype": "text/plain", "start_char_idx": 49094, "end_char_idx": 49312, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf676f75-0796-4eda-8e19-5e0f9b5fe47f": {"__data__": {"id_": "cf676f75-0796-4eda-8e19-5e0f9b5fe47f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0ff55359-12dc-4f0f-88b5-6a17dc325073", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d576f5488c3c52f23672385b5da3e02951b169ecef54041eced1847080d9700b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "938d8957-203c-4219-b745-f222422dae1d", "node_type": "1", "metadata": {}, "hash": "4c8947843dddea700945b63912067a66c128583d25f231909478267959a3f7b5", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // First check seclog attachments. They are precompiled.\n  std::optional<Attachment> seclog_attachment = seclog::GetAttachment(relid);\n  if (seclog_attachment) return {*seclog_attachment};\n\n  PGCHECK((userid.has_value()) ^ (roleid.has_value()), \"%s\",\n          policy::tag_for_policy_type(kPolicyDDM).c_str());\n\n  CatCList* catlist = SearchSysCacheExtendedList(PERMISSIONMASKRELPRIORITY, 1,\n                                                 relid, 0, 0, 0, 0, 0);\n  XCHECK(catlist != nullptr, DDM_CALLER);\n  SCOPE_EXIT_GUARD(ReleaseSysCacheList(catlist));\n\n  std::set<Attachment> attachments;\n\n  for (int i = 0; i < catlist->n_members; ++i) {\n    HeapTuple tup = &catlist->members[i]->tuple;\n    if (!HeapTupleIsValid(tup)) {\n      elog(ERROR, \"could not find tuple for relation %u\", relid);\n    }\n\n    auto attach = AttachmentFromTuple(tup);\n    CheckAttachmentSupported(attach);\n\n    AclId public_id = InvalidAclId;\n    bool check_public_priv_dsw =\n        check_default_privilege_on_public(RelOid_pg_class, relid);\n    bool attached_to_public =\n        CheckOnePerm(public_id, attach.permid, check_public_priv_dsw);\n\n    if (!attached_to_public && userid.has_value() &&\n        !CheckOnePerm(userid.value(), attach.permid, check_public_priv_dsw)) {\n      continue;\n    }\n\n    if (!attached_to_public && roleid.has_value() &&\n        !CheckOneRolePerm(roleid.value(), attach.permid)) {\n      continue;\n    }\n\n    attach.pol = FetchPolicy(attach.polid);\n    attachments.insert(attach);\n  }", "mimetype": "text/plain", "start_char_idx": 49313, "end_char_idx": 50806, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "938d8957-203c-4219-b745-f222422dae1d": {"__data__": {"id_": "938d8957-203c-4219-b745-f222422dae1d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf676f75-0796-4eda-8e19-5e0f9b5fe47f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d8807e59cb8b967f4498e0219393e4c2648959344ab6d21b363db2c6111c57d2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9e4980c6-a7e5-4622-856d-11751027ee2a", "node_type": "1", "metadata": {}, "hash": "464873514d329255f3912632da2d8447086dd2763f8261cd0a2b1c235e49984c", "class_name": "RelatedNodeInfo"}}, "text": "return attachments;\n}", "mimetype": "text/plain", "start_char_idx": 50810, "end_char_idx": 50831, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9e4980c6-a7e5-4622-856d-11751027ee2a": {"__data__": {"id_": "9e4980c6-a7e5-4622-856d-11751027ee2a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "938d8957-203c-4219-b745-f222422dae1d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f14d0a4a87a877e99c21f95c3a6854029f2f34f40acdffe4286b18307e848229", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "91eef65c-e249-4e66-b4fc-c25ddab60581", "node_type": "1", "metadata": {}, "hash": "b300f803644cb10824bf054d937bdf999185141f617f4d440acdeda804e82945", "class_name": "RelatedNodeInfo"}}, "text": "Policy FetchPolicy(const Oid polid) {\n  HeapTuple tup =\n      SearchSysCache(POLICYMASKID, ObjectIdGetDatum(polid), 0, 0, 0);\n  SCOPE_EXIT_GUARD(ReleaseSysCache(tup));\n\n  if (!HeapTupleIsValid(tup)) {\n    // foreign key violation\n    ereport(ERROR, (errcode(ERRCODE_INTERNAL_ERROR),\n                    \"could not find tuple for policy %u\", polid));\n  }\n  return PolicyFromTuple(tup);\n}\n\nstd::vector<int> ColumnNamesToAttributeNumbers(\n    Oid rel_id, const std::vector<std::shared_ptr<Value>>& column_names) {\n  std::vector<int> attribute_numbers;\n  attribute_numbers.reserve(column_names.size());\n\n  for (auto&& column_name : column_names) {\n    const char* column_name_cstr = strVal(column_name.get());\n    HeapTuple tuple = SearchSysCacheAttName(rel_id, column_name_cstr);\n    if (!HeapTupleIsValid(tuple))\n      ereport(ERROR,\n              (errcode(ERRCODE_UNDEFINED_COLUMN),\n               errmsg(\"column \\\"%s\\\" does not exist\", column_name_cstr)));\n    SCOPE_EXIT_GUARD(ReleaseSysCache(tuple));\n    int attribute_number = ((Immutable_pg_attribute)GETSTRUCT(tuple))->attnum;\n    XCHECK(attribute_number > 0, DDM_CALLER);\n\n    attribute_numbers.push_back(attribute_number);\n  }\n\n  return attribute_numbers;\n}", "mimetype": "text/plain", "start_char_idx": 50833, "end_char_idx": 52047, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "91eef65c-e249-4e66-b4fc-c25ddab60581": {"__data__": {"id_": "91eef65c-e249-4e66-b4fc-c25ddab60581", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9e4980c6-a7e5-4622-856d-11751027ee2a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0b2fc99f82e4eb00a2e0101d5e6aecfcccb351cd92bbec3e4c74a2ce51867128", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9f90d599-f0bc-4651-950b-2b1263e4de4e", "node_type": "1", "metadata": {}, "hash": "1b29a011ebc51b9020bf13f481f2d57720677970e13292b2b19eaaa14d4e6b02", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<AttachedAttribute> AttributesToColumnDefs(\n    const Relation& relation,\n    const std::vector<AttachedAttribute>& attributes) {\n  std::vector<AttachedAttribute> column_definitions;\n  column_definitions.reserve(attributes.size());\n\n  for (AttachedAttribute attached_attribute : attributes) {\n    XPGCHECK(std::holds_alternative<int>(attached_attribute.attribute));\n\n    int attribute_number = std::get<int>(attached_attribute.attribute);\n\n    XPGCHECK(attribute_number > 0);\n    // Convert from cardinal to ordinal scale.\n    attribute_number -= 1;\n    Copied_pg_attribute* relatts = relation->rd_att->attrs;\n    int n_atts = relation->rd_rel->relnatts;\n    XPGCHECK(attribute_number < n_atts);\n\n    std::shared_ptr<ColumnDef> column_definition(\n        makeColumnDef(relatts[attribute_number]->attname.data,\n                      relatts[attribute_number]->atttypid,\n                      relatts[attribute_number]->atttypmod),\n        PAlloc_deleter());\n\n    column_definitions.push_back({column_definition, attached_attribute.path});\n  }\n\n  return column_definitions;\n}", "mimetype": "text/plain", "start_char_idx": 52049, "end_char_idx": 53133, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9f90d599-f0bc-4651-950b-2b1263e4de4e": {"__data__": {"id_": "9f90d599-f0bc-4651-950b-2b1263e4de4e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "91eef65c-e249-4e66-b4fc-c25ddab60581", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "363d39d5348e64ab648c8c85dc5fe3b644a54faebe88357b7f82c2240a6253b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a0a9fad8-5e40-45fa-a8ac-deb67419b3c1", "node_type": "1", "metadata": {}, "hash": "1d801e0086740c549475aefc353f3c1905eea0dd756eb1db26059d168c2fd4b3", "class_name": "RelatedNodeInfo"}}, "text": "std::pair<attribute_info_t, bool> ColumnNamesToAttachedAttributes(\n    Oid rel_id, List* colnames) {\n  ddm::attribute_info_t attached_attributes;\n  bool has_path = false;\n\n  ListCell* lc = nullptr;\n  foreach(lc, colnames) {\n    List* column_components = reinterpret_cast<List*>(lfirst(lc));\n    attached_attributes.push_back(ColumnComponentsToAttachedAttribute(\n        column_components, rel_id, &has_path));\n  }\n\n  return {attached_attributes, has_path};\n}", "mimetype": "text/plain", "start_char_idx": 53135, "end_char_idx": 53593, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a0a9fad8-5e40-45fa-a8ac-deb67419b3c1": {"__data__": {"id_": "a0a9fad8-5e40-45fa-a8ac-deb67419b3c1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9f90d599-f0bc-4651-950b-2b1263e4de4e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "98f86c40be514590d34dd24802d6b6802a821adc08db41960049648b079dea8d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "381b9548-d148-40b9-b7d7-99fd7d6cdd4e", "node_type": "1", "metadata": {}, "hash": "538c9cb92494be2092f7e2313e885acc1fd54aacb6890737eae406392390083f", "class_name": "RelatedNodeInfo"}}, "text": "ddm::AttachedAttribute ColumnComponentsToAttachedAttribute(\n    List* column_components, Oid rel_id, bool* has_path)", "mimetype": "text/plain", "start_char_idx": 53595, "end_char_idx": 53711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "381b9548-d148-40b9-b7d7-99fd7d6cdd4e": {"__data__": {"id_": "381b9548-d148-40b9-b7d7-99fd7d6cdd4e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a0a9fad8-5e40-45fa-a8ac-deb67419b3c1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "69275efb49518c2ff7ac39f8136f992c1560498fd52e794ed85744e72d4de0ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4c4e0798-15f8-4aa6-aa8a-392dec300240", "node_type": "1", "metadata": {}, "hash": "5cc42104a072ba6767b5375aa39a010cb7f906ad2368125827330b5e576474c7", "class_name": "RelatedNodeInfo"}}, "text": "{\n  XCHECK(list_length(column_components) > 0, DDM_CALLER);\n  std::string colname_str;\n  std::optional<std::string> path;\n  std::stringstream ss_path;\n  int nested_depth = 0;\n\n  ListCell* lc = nullptr;\n  foreach(lc, column_components) {\n    if (colname_str.empty()) {\n      // First entry in the column components is the column name.\n      colname_str = std::string(strVal(lfirst(lc)));\n      continue;\n    }\n\n    *has_path = true;\n    ++nested_depth;\n    if (nested_depth > MAX_PARTIQL_NESTING_LEVELS) {\n      ereport(ERROR, (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n                      errmsg(\"SUPER path exceeds maximum nesting levels of %d\",\n                             MAX_PARTIQL_NESTING_LEVELS)));\n    }\n\n    AddComponentToPath(ss_path, std::string(strVal(lfirst(lc))));\n  }\n\n  if (ss_path.tellp() != std::streampos(0)) path = ss_path.str();\n\n  if (IsLbv(rel_id)) return {colname_str, path};\n\n  // For relations other than LBV (table / regular view), we need to get\n  // attribute number for the column name.\n  const char* column_name_cstr = colname_str.c_str();\n  HeapTuple tuple = SearchSysCacheAttName(rel_id, column_name_cstr);\n  if (!HeapTupleIsValid(tuple))\n    ereport(ERROR, (errcode(ERRCODE_UNDEFINED_COLUMN),\n                    errmsg(\"column \\\"%s\\\" does not exist\", column_name_cstr)));\n  int attribute_number = ((Immutable_pg_attribute)GETSTRUCT(tuple))->attnum;\n  XCHECK(attribute_number > 0, DDM_CALLER);\n  ReleaseSysCache(tuple);\n\n  return {attribute_number, path};\n}", "mimetype": "text/plain", "start_char_idx": 53712, "end_char_idx": 55204, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4c4e0798-15f8-4aa6-aa8a-392dec300240": {"__data__": {"id_": "4c4e0798-15f8-4aa6-aa8a-392dec300240", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "381b9548-d148-40b9-b7d7-99fd7d6cdd4e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9ece184119e4950cacbaaa45274a6d1ab5756c4aeaf6bc18473bbd9405a6e8da", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fef8aa2a-42ac-4b51-b754-a69339015d8f", "node_type": "1", "metadata": {}, "hash": "0bc83761a3ef78c315d9cdfb88c7d3917089ac9e5434d5e2c88a757fbbc3de4b", "class_name": "RelatedNodeInfo"}}, "text": "void AddComponentToPath(std::stringstream& ss_path,\n                        std::string path_component) {\n  if (ss_path.tellp() == std::streampos(0)) {\n    // path_component is the first component of the path.\n    ss_path << std::quoted(path_component, PathSetBase::kQuote);\n  } else {\n    ss_path << PathSetBase::kDelimiter\n            << std::quoted(path_component, PathSetBase::kQuote);\n  }\n}\n\nvoid CheckAttachmentSupported(Attachment attachment) {\n  if (!gconf_ddm_enable_over_super_paths) {\n    for (auto&& attribute_encoded :\n         {attachment.polattrsin, attachment.polattrsout}) {\n      std::vector<ddm::AttachedAttribute> attributes =\n          DeserializeAttachedAttributes(attribute_encoded);\n\n      bool path_found = std::any_of(attributes.begin(), attributes.end(),\n                                    [](ddm::AttachedAttribute attribute) {\n                                      return attribute.path.has_value();\n                                    });\n      if (path_found) UnsupportedSuperPathError();\n    }\n  }\n}\n\nbool IsCastable(TypeName* type_name, Oid typid, int32 typmod) {\n  // Check if type is allowed for safecast.\n  if (kSafeTypeId.find(type_name->typid) != kSafeTypeId.end()) {\n    // Check if it is a safe cast.\n    if (type_name->typid == typid && type_name->typmod >= typmod) {\n      return true;\n    }\n  }\n  // Check if it is a strict cast.\n  return type_name->typid == typid && type_name->typmod == typmod;\n}", "mimetype": "text/plain", "start_char_idx": 55206, "end_char_idx": 56648, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fef8aa2a-42ac-4b51-b754-a69339015d8f": {"__data__": {"id_": "fef8aa2a-42ac-4b51-b754-a69339015d8f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4c4e0798-15f8-4aa6-aa8a-392dec300240", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e5a0f3af7b73736aa4df391bda343b94b388310e3d57301d39b81a4d6eb0d30c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e2bf02f9-634a-49e5-b5be-8e8c995c1011", "node_type": "1", "metadata": {}, "hash": "efbef06c5debba9e46bd03ddcb9044865efeb36b49793704147937aca8118053", "class_name": "RelatedNodeInfo"}}, "text": "bool IsSuperNestedCastable(Oid typid) {\n  CATEGORY type_category = TypeCategory(typid);\n\n  switch (type_category) {\n    case BOOLEAN_TYPE:\n    case STRING_TYPE:\n    case NUMERIC_TYPE:\n      return true;\n    default:\n      return typid == PARTIQLOID;\n  }\n}\n\nstd::vector<std::string> ParseLbvColumns(\n    const RangeTblEntry* rte,\n    std::unordered_map<std::string, std::shared_ptr<ColumnDef>>&\n        parsed_lbv_columndefs) {\n  std::vector<std::string> column_names;\n\n  XCHECK(rte != nullptr, DDM_CALLER);\n  XCHECK(rte->rtekind == RTE_SUBQUERY || rte->rtekind == RTE_RLS_SUBQUERY,\n         DDM_CALLER);\n  Oid rte_relid = GetRelationRelid(rte);\n  XCHECK(OidIsValid(rte_relid), DDM_CALLER);\n  XCHECK(IsLbv(rte_relid), DDM_CALLER);\n  XCHECK(rte->subquery != nullptr, DDM_CALLER);\n  XCHECK(rte->subquery->targetList != nullptr, DDM_CALLER);\n\n  ListCell* lc;\n  foreach(lc, rte->subquery->targetList) {\n    XPGCHECK(IsA(lfirst(lc), TargetEntry), DDM_CALLER);\n    Resdom* resdom = reinterpret_cast<TargetEntry*>(lfirst(lc))->resdom;\n    std::shared_ptr<ColumnDef> column_definition(\n        makeColumnDef(resdom->resname, resdom->restype, resdom->restypmod),\n        PAlloc_deleter());\n    parsed_lbv_columndefs.insert(\n        {std::string(resdom->resname), column_definition});\n    column_names.push_back(std::string(resdom->resname));\n  }\n  return column_names;\n}", "mimetype": "text/plain", "start_char_idx": 56650, "end_char_idx": 58010, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e2bf02f9-634a-49e5-b5be-8e8c995c1011": {"__data__": {"id_": "e2bf02f9-634a-49e5-b5be-8e8c995c1011", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fef8aa2a-42ac-4b51-b754-a69339015d8f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a08eb6d7c4a487a3959b7c041deee55e69ce3aa6a396d4d608713a2b6db550bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a46643f-13be-4e77-8107-9adedd7b905d", "node_type": "1", "metadata": {}, "hash": "c0ebfcbb10f5d4b72ad7a460a5eef3ec91e31904d55f22db877fd57272696f9e", "class_name": "RelatedNodeInfo"}}, "text": "void CheckAttachmentForColumnsType(\n    ParsedPolicyAttachment& attachment,\n    std::unordered_map<std::string, std::shared_ptr<ColumnDef>> const&\n        columndefs_map,\n    const char* rel_name)", "mimetype": "text/plain", "start_char_idx": 58012, "end_char_idx": 58208, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a46643f-13be-4e77-8107-9adedd7b905d": {"__data__": {"id_": "9a46643f-13be-4e77-8107-9adedd7b905d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e2bf02f9-634a-49e5-b5be-8e8c995c1011", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1990c3cc1d6ef3f1d4ac3429b080f2917c3cbd06c939c5c43363a6e042bdae08", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "07c6e72a-31fa-4248-b75e-b7c8a652e072", "node_type": "1", "metadata": {}, "hash": "f2f957bc6a5a54cd3341685609b5106cfb979d4cfe4f88b21710cd0788a780e1", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::vector<std::shared_ptr<TypeName>> exprTargets =\n      ddm::DeserializeTypeNames(attachment.pol.pol.polexpr);\n  XCHECK(exprTargets.size() == attachment.polattrs_out.size(), DDM_CALLER);\n\n  // TODO(bogatov): (1) reduce duplication, (2) clarify that this func must be\n  // called only for LBV attachments.", "mimetype": "text/plain", "start_char_idx": 58209, "end_char_idx": 58520, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "07c6e72a-31fa-4248-b75e-b7c8a652e072": {"__data__": {"id_": "07c6e72a-31fa-4248-b75e-b7c8a652e072", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a46643f-13be-4e77-8107-9adedd7b905d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bdeffc51707f43e32c0c07c7d1e1002cb2a0116bf84a9a69762ba95fd2704a61", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2e607898-c92f-44fe-b309-79eb4caad0a7", "node_type": "1", "metadata": {}, "hash": "7d0dfc9906f59a41983fe45704f1622e84b8f948cae217eaf0608018d6f2bf49", "class_name": "RelatedNodeInfo"}}, "text": "for (size_t i = 0; i < attachment.polattrs_out.size(); ++i) {\n    XPGCHECK(std::holds_alternative<std::string>(\n        attachment.polattrs_out[i].attribute));\n    std::string col_name =\n        std::get<std::string>(attachment.polattrs_out[i].attribute);\n    const auto& columndef_it = columndefs_map.find(col_name);\n    if (columndef_it == columndefs_map.end()) {\n      IncompatibleDDMConfigurationError(rel_name);\n    }\n\n    TypeName* type = exprTargets[i].get();\n    Oid expr_type = type->typid;\n    XCHECK(OidIsValid(expr_type), DDM_CALLER);\n    TypeName* columndef_typename = columndef_it->second->typname;\n    XCHECK(columndef_typename != nullptr, DDM_CALLER);\n    Oid typid = columndef_typename->typid;\n    XCHECK(OidIsValid(typid), DDM_CALLER);\n\n    bool is_type_compatible = false;\n    if (attachment.polattrs_out[i].path) {\n      // For nested attachments two conditions: (1) expression is\n      // SUPER-castable, and (2) column is SUPER.\n      is_type_compatible = ddm::IsSuperNestedCastable(expr_type);\n      is_type_compatible &= (typid == PARTIQLOID);\n    } else {\n      is_type_compatible =\n          can_coerce_type(1, &expr_type, &typid, COERCION_IMPLICIT);\n    }\n\n    if (!is_type_compatible) {\n      IncompatibleDDMConfigurationError(rel_name);\n    }\n  }\n\n  XCHECK(attachment.pol.parsed_attrs.size() == attachment.polattrs_in.size(),\n         DDM_CALLER);", "mimetype": "text/plain", "start_char_idx": 58524, "end_char_idx": 59900, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2e607898-c92f-44fe-b309-79eb4caad0a7": {"__data__": {"id_": "2e607898-c92f-44fe-b309-79eb4caad0a7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "07c6e72a-31fa-4248-b75e-b7c8a652e072", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a955ec8946ac9f29c0fee942c89735678b610310ec3781ead188e3d7b2c991de", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c45824e2-30d0-4334-ba08-82414504b82a", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "for (size_t i = 0; i < attachment.polattrs_in.size(); ++i) {\n    XPGCHECK(std::holds_alternative<std::string>(\n        attachment.polattrs_in[i].attribute));\n    std::string col_name =\n        std::get<std::string>(attachment.polattrs_in[i].attribute);\n    const auto& columndef_it = columndefs_map.find(col_name);\n    if (columndef_it == columndefs_map.end()) {\n      IncompatibleDDMConfigurationError(rel_name);\n    }\n\n    TypeName* parsed_pol_attrs_type_name =\n        attachment.pol.parsed_attrs[i].get()->typname;\n    TypeName* columndef_typename = columndef_it->second->typname;\n    XCHECK(columndef_typename != nullptr, DDM_CALLER);\n    Oid input_typid = columndef_typename->typid;\n    XCHECK(OidIsValid(input_typid), DDM_CALLER);\n\n    bool is_castable = false;\n    if (attachment.polattrs_in[i].path) {\n      // Same two conditions for nested attachments, see above.\n      is_castable =\n          ddm::IsSuperNestedCastable(parsed_pol_attrs_type_name->typid);\n      is_castable &= (input_typid == PARTIQLOID);\n    } else {\n      int32 input_typmod = columndef_typename->typmod;\n      input_typmod = GetCorrectTypmod(input_typid, input_typmod);\n      is_castable = ddm::IsCastable(parsed_pol_attrs_type_name, input_typid,\n                                    input_typmod);\n    }\n\n    if (!is_castable) {\n      IncompatibleDDMConfigurationError(rel_name);\n    }\n  }\n}", "mimetype": "text/plain", "start_char_idx": 59903, "end_char_idx": 61276, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c45824e2-30d0-4334-ba08-82414504b82a": {"__data__": {"id_": "c45824e2-30d0-4334-ba08-82414504b82a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2e607898-c92f-44fe-b309-79eb4caad0a7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c505ccc31186a79e1a7a14e3be497ad314468c87a683d0415222a74c48e4368a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3e037e14-f19b-4386-8421-2e75e23a5dd7", "node_type": "1", "metadata": {}, "hash": "46fdaf0ab8548fdb74cf5b8d27a2a683f308fa90256eabb79cede87f803c109f", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 3525, "end_char_idx": 3526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3e037e14-f19b-4386-8421-2e75e23a5dd7": {"__data__": {"id_": "3e037e14-f19b-4386-8421-2e75e23a5dd7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9557e0c2-0024-42ed-919d-7c2142097152", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "698d610c13713358316c0819d177914023ad43c9dfbccdb5f5cf5037e134af99", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c45824e2-30d0-4334-ba08-82414504b82a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm", "mimetype": "text/plain", "start_char_idx": 61280, "end_char_idx": 61296, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1f80863c-4bba-4245-91cb-68dd019b635e": {"__data__": {"id_": "1f80863c-4bba-4245-91cb-68dd019b635e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f7be40b5-29b7-4cf9-aff8-ee744a17a757", "node_type": "1", "metadata": {}, "hash": "dc99fc6626cce7524976fef4dd418656f8ed548136363cc48fcf3c2ea542acc1", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_serialization.hpp\"\n\n#include \"ddm/constants.hpp\"\n#include \"nodes/makefuncs.h\"\n#include \"parser/parse_type.h\"\n\n#include \"pg/src/include/utils/lsyscache.h\"\n\nnamespace serialization = policy::serialization;\nusing serialization::JSON;\nusing serialization::JSONAllocator;\nusing serialization::JSONDoc;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 391, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f7be40b5-29b7-4cf9-aff8-ee744a17a757": {"__data__": {"id_": "f7be40b5-29b7-4cf9-aff8-ee744a17a757", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1f80863c-4bba-4245-91cb-68dd019b635e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "71d524d24af33cc43e2ad08940ec92f27c90cbfc73e8d34d9b0535489042dafe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cdd425e6-0794-42f4-84cc-f10981bbd03c", "node_type": "1", "metadata": {}, "hash": "2419ec99c1ca508d8d97f376fcb80d73beec476592d9d454f925ba3cc0a5b4d8", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm", "mimetype": "text/plain", "start_char_idx": 393, "end_char_idx": 406, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cdd425e6-0794-42f4-84cc-f10981bbd03c": {"__data__": {"id_": "cdd425e6-0794-42f4-84cc-f10981bbd03c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f7be40b5-29b7-4cf9-aff8-ee744a17a757", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2271317e3e14c1e2f14cb445aac8fc658a5890eedcc5649413a71f3ea80ad3b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1947f71f-9d22-4bf3-af47-0024c2ad7bbf", "node_type": "1", "metadata": {}, "hash": "3704682ac8d0d70ca0d0f5862e3e0894f621c6dfe9893223e3d434756884e13f", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n// Attribute names.\nconst char* kAttributeColumnName = \"colname\";\nconst char* kAttributeExpression = \"expr\";\nconst char* kAttributeTypeOid = \"typoid\";\nconst char* kAttributeTypeMode = \"typmod\";\nconst char* kAttributeType = \"t\";\nconst char* kAttributeColumn = \"column\";\nconst char* kAttributePath = \"path\";\n\nAttachedAttribute DeserializeAttachmentAttribute(const JSON& input);\n\nstd::string SerializeParsedPolicyExpressions(\n    const std::vector<ParsedPolicyExpression>& expressions) {\n  JSONDoc json_document;\n\n  auto serializer = [](const ParsedPolicyExpression& expression,\n                       JSONAllocator& allocator) {\n    JSON json_value(rapidjson::kObjectType);\n\n    serialization::SerializeValueInObject(json_value, kAttributeExpression,\n                                          expression.expression, allocator);\n    serialization::SerializeValueInObject(json_value, kAttributeTypeOid,\n                                          expression.type_oid, allocator);\n    serialization::SerializeValueInObject(json_value, kAttributeTypeMode,\n                                          expression.type_mode, allocator);\n\n    return json_value;\n  };\n\n  JSON json_value = serialization::SerializeToArray<ParsedPolicyExpression>(\n      expressions, serializer, json_document.GetAllocator());\n\n  json_document.Swap(json_value);\n\n  return serialization::JSONToString(json_document);\n}", "mimetype": "text/plain", "start_char_idx": 407, "end_char_idx": 1793, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1947f71f-9d22-4bf3-af47-0024c2ad7bbf": {"__data__": {"id_": "1947f71f-9d22-4bf3-af47-0024c2ad7bbf", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cdd425e6-0794-42f4-84cc-f10981bbd03c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3e8ec5a2a874c19ed14b29c4d4c58bdf72186ed2a5e78aa336d4ab8cf759c8d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c864dca-9227-48d7-a587-b95871f8518d", "node_type": "1", "metadata": {}, "hash": "1cb0592a52fddffbe90bbddfc1cf15be9136951f94c1b6e809d292d91cda98ac", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<ParsedPolicyExpression> DeserializeParsedPolicyExpressions(\n    const std::string& json_string) {\n  // Custom deserializer that extracts and constructs ParsedPolicyExpression.\n  auto deserializer = [](const JSON& input) {\n    std::string expr = serialization::DeserializeValueInObject<std::string>(\n        input, kAttributeExpression);\n    int atttypid =\n        serialization::DeserializeValueInObject<int>(input, kAttributeTypeOid);\n    int atttypmod =\n        serialization::DeserializeValueInObject<int>(input, kAttributeTypeMode);\n\n    return ParsedPolicyExpression{expr, static_cast<Oid>(atttypid), atttypmod};\n  };\n\n  return serialization::DeserializeArray<ParsedPolicyExpression>(json_string,\n                                                                 deserializer);\n}", "mimetype": "text/plain", "start_char_idx": 1795, "end_char_idx": 2590, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c864dca-9227-48d7-a587-b95871f8518d": {"__data__": {"id_": "3c864dca-9227-48d7-a587-b95871f8518d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1947f71f-9d22-4bf3-af47-0024c2ad7bbf", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9c6e5310a4bc357004c4e9232c33cfdb894fedaf9cbcd0dc2da2a0b9eba4d162", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "84eeb0c6-277a-4139-b6e0-4d056324bb7f", "node_type": "1", "metadata": {}, "hash": "133a75faba50cb17fe1e772ec1827d9f0cad375d181f125f07c8669525c6eb1d", "class_name": "RelatedNodeInfo"}}, "text": "std::string SerializeColumnDefs(\n    const std::vector<std::shared_ptr<ColumnDef>>& column_definitons) {\n  JSONDoc json_document;\n\n  auto serializer = [](const std::shared_ptr<ColumnDef>& column_definition,\n                       JSONAllocator& allocator) {\n    JSON json_value(rapidjson::kObjectType);\n\n    serialization::SerializeValueInObject(json_value, kAttributeColumnName,\n                                          column_definition->colname,\n                                          allocator);\n    serialization::SerializeValueInObject(\n        json_value, kAttributeTypeOid,\n        typenameTypeId(column_definition->typname), allocator);\n    serialization::SerializeValueInObject(json_value, kAttributeTypeMode,\n                                          column_definition->typname->typmod,\n                                          allocator);\n\n    return json_value;\n  };\n\n  JSON json_value = serialization::SerializeToArray<std::shared_ptr<ColumnDef>>(\n      column_definitons, serializer, json_document.GetAllocator());\n\n  json_document.Swap(json_value);\n\n  return serialization::JSONToString(json_document);\n}", "mimetype": "text/plain", "start_char_idx": 2592, "end_char_idx": 3717, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "84eeb0c6-277a-4139-b6e0-4d056324bb7f": {"__data__": {"id_": "84eeb0c6-277a-4139-b6e0-4d056324bb7f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c864dca-9227-48d7-a587-b95871f8518d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0090c0f972b12b13a45a9613312954a548f00dcaf82bc21c82cdefae0d7b04db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc1d0b4c-5482-4e23-aa73-98391de9b45b", "node_type": "1", "metadata": {}, "hash": "35842d4a1ec4760ec67a193b9ba9004966fa2490d4283f9a39e3c21e9d5cc93a", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<std::shared_ptr<ColumnDef>> DeserializeColumnDefs(\n    const std::string& json_string) {\n  // Deserializer that extracts and constructs ColumnDef.\n  auto deserializer = [](const JSON& input) {\n    std::string attname = serialization::DeserializeValueInObject<std::string>(\n        input, kAttributeColumnName);\n    Oid atttypid =\n        serialization::DeserializeValueInObject<int>(input, kAttributeTypeOid);\n    int atttypmod =\n        serialization::DeserializeValueInObject<int>(input, kAttributeTypeMode);\n\n    return makeColumnDef(attname.c_str(), atttypid, atttypmod);\n  };\n\n  return serialization::DeserializeArrayToPointers<ColumnDef>(json_string,\n                                                              deserializer);\n}\n\nstd::string SerializeAttributeNumbers(\n    const std::vector<int> attribute_numbers) {\n  JSONDoc json_document;\n\n  JSON json_value = serialization::SerializeToArray<int>(\n      attribute_numbers,\n      [](int attribute_number, JSONAllocator& allocator UNUSED) {\n        return JSON(attribute_number);\n      },\n      json_document.GetAllocator());\n\n  json_document.Swap(json_value);\n\n  return serialization::JSONToString(json_document);\n}", "mimetype": "text/plain", "start_char_idx": 3719, "end_char_idx": 4905, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc1d0b4c-5482-4e23-aa73-98391de9b45b": {"__data__": {"id_": "bc1d0b4c-5482-4e23-aa73-98391de9b45b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "84eeb0c6-277a-4139-b6e0-4d056324bb7f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5964fae1e23d743532a059d597664e7c393331cff95d3eb799c17711702eb92c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5aa9896-72ef-457a-87f7-683fd49a76b8", "node_type": "1", "metadata": {}, "hash": "af95ccb476a04a88099342bb8d5e6810d8e7c710314a12955c697637ebe53fc1", "class_name": "RelatedNodeInfo"}}, "text": "std::string SerializeAttributeNames(\n    const std::vector<std::string> attribute_names) {\n  JSONDoc json_document;\n\n  JSON json_value = serialization::SerializeToArray<std::string>(\n      attribute_names,\n      [](std::string attribute_name, JSONAllocator& allocator) {\n        JSON json_value(rapidjson::kObjectType);\n        serialization::SerializeValueInObject(\n            json_value, kAttributeType,\n            static_cast<int>(ddm::AttachedAttributeType::kLBVsPaths),\n            allocator);\n        serialization::SerializeValueInObject(json_value, kAttributeColumn,\n                                              attribute_name, allocator);\n        return json_value;\n      },\n      json_document.GetAllocator());\n\n  json_document.Swap(json_value);\n\n  return serialization::JSONToString(json_document);\n}", "mimetype": "text/plain", "start_char_idx": 4907, "end_char_idx": 5721, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d5aa9896-72ef-457a-87f7-683fd49a76b8": {"__data__": {"id_": "d5aa9896-72ef-457a-87f7-683fd49a76b8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc1d0b4c-5482-4e23-aa73-98391de9b45b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2c0f75a14560aa3c7351af60738d0cac48b8cd481a7b3c9d6d260c18cafa400e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1e25c674-d287-48e4-868c-1c400dd010d8", "node_type": "1", "metadata": {}, "hash": "06b058eb6bb60360b7eb78672a697b217ecd9caf0a17694e95024bd9654b20dd", "class_name": "RelatedNodeInfo"}}, "text": "std::string SerializeAttachedAttributes(\n    const attribute_info_t attached_attributes)", "mimetype": "text/plain", "start_char_idx": 5723, "end_char_idx": 5811, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1e25c674-d287-48e4-868c-1c400dd010d8": {"__data__": {"id_": "1e25c674-d287-48e4-868c-1c400dd010d8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5aa9896-72ef-457a-87f7-683fd49a76b8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "00c20336216e00f02bf23b0523cc22cc6f638ec724592b8ef688e197cdfa999b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d6444b14-f3f4-47c7-b2ec-895e61c5cf44", "node_type": "1", "metadata": {}, "hash": "978eab263ec96308db7b3a6a004e91fac88526fc0cca96e28a3ba549b61a8172", "class_name": "RelatedNodeInfo"}}, "text": "{\n  JSONDoc json_document;", "mimetype": "text/plain", "start_char_idx": 893, "end_char_idx": 919, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d6444b14-f3f4-47c7-b2ec-895e61c5cf44": {"__data__": {"id_": "d6444b14-f3f4-47c7-b2ec-895e61c5cf44", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1e25c674-d287-48e4-868c-1c400dd010d8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "14ea5b386cf81b1fd6a188cca67af2307a5ce93ec029fbeea1d74c085251870e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "06883569-112a-4bd1-bbdb-308d8429ff03", "node_type": "1", "metadata": {}, "hash": "893f731716f0de8c53fd040b58b522ea5f8373b8286aa181fe0206eecbed54b1", "class_name": "RelatedNodeInfo"}}, "text": "JSON", "mimetype": "text/plain", "start_char_idx": 320, "end_char_idx": 324, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "06883569-112a-4bd1-bbdb-308d8429ff03": {"__data__": {"id_": "06883569-112a-4bd1-bbdb-308d8429ff03", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d6444b14-f3f4-47c7-b2ec-895e61c5cf44", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fff18c365d35af45c63a94102d438d6e08bba68ae1d7c2f3b2cc3c75dafefe45", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a1cbc7da-a1ca-4ae6-881e-50af3a8e2f1f", "node_type": "1", "metadata": {}, "hash": "6e2c5839af6c83f2cddbce07793679069741cb05bdd07d21354c1edd8439558e", "class_name": "RelatedNodeInfo"}}, "text": "json_val_serialized_attached_attrs =", "mimetype": "text/plain", "start_char_idx": 5847, "end_char_idx": 5883, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a1cbc7da-a1ca-4ae6-881e-50af3a8e2f1f": {"__data__": {"id_": "a1cbc7da-a1ca-4ae6-881e-50af3a8e2f1f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "06883569-112a-4bd1-bbdb-308d8429ff03", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9cf9a61de719b88a0ed05889dbf1fb97ae3052a1dd4ee184abc1157da894b9b4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f6a49e54-dd20-47e2-b2cc-3dd71cc69652", "node_type": "1", "metadata": {}, "hash": "db212e05be844ae0608bacc9a81f32c3d8987635d5b2dac7f2c09eef9773993d", "class_name": "RelatedNodeInfo"}}, "text": "serialization::SerializeToArray<\n      AttachedAttribute>", "mimetype": "text/plain", "start_char_idx": 5884, "end_char_idx": 5941, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f6a49e54-dd20-47e2-b2cc-3dd71cc69652": {"__data__": {"id_": "f6a49e54-dd20-47e2-b2cc-3dd71cc69652", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a1cbc7da-a1ca-4ae6-881e-50af3a8e2f1f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0619f19b16a807fdcefc7e1b024ebfed4611d9813af98754e2df04a427be6c9b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c3f95d28-839b-4c48-9915-ec42651875cd", "node_type": "1", "metadata": {}, "hash": "d611bc00e2a61a848da46b4b85df503ef9af09b998df2cf4491d8a9efd7458a0", "class_name": "RelatedNodeInfo"}}, "text": "(\n      attached_attributes,", "mimetype": "text/plain", "start_char_idx": 5941, "end_char_idx": 5969, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c3f95d28-839b-4c48-9915-ec42651875cd": {"__data__": {"id_": "c3f95d28-839b-4c48-9915-ec42651875cd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f6a49e54-dd20-47e2-b2cc-3dd71cc69652", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f7fb722e81c6bf84042ea1e66e77694aca655869d78bf39756eadbe1d6e4ae56", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4c516b04-5953-4e60-acc8-ce2a265c663a", "node_type": "1", "metadata": {}, "hash": "2d913a3c9f90758f337c4ff45996b5b1659a4fc6a8039cbc042f6b206fd3cb9b", "class_name": "RelatedNodeInfo"}}, "text": "[](AttachedAttribute attached_attribute, JSONAllocator& allocator)", "mimetype": "text/plain", "start_char_idx": 5976, "end_char_idx": 6042, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4c516b04-5953-4e60-acc8-ce2a265c663a": {"__data__": {"id_": "4c516b04-5953-4e60-acc8-ce2a265c663a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3f95d28-839b-4c48-9915-ec42651875cd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "faba2e0e8881132041c3e81769a3be132a7aa88a8f9ba40c88857037649b7739", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6bfba5d4-1a3d-40cb-bbc2-d59c67591f62", "node_type": "1", "metadata": {}, "hash": "22666cb166c7431177bceb18f161b9b92b7d2ae61ef582f0c7ce416551912a88", "class_name": "RelatedNodeInfo"}}, "text": "{\n        if (std::holds_alternative<int>(attached_attribute.attribute) &&\n            !attached_attribute.path) {\n          // Attached attribute is from a table or regular view and does not\n          // contain path value.\n          JSON json_value(rapidjson::kNumberType);\n          json_value.SetInt(std::get<int>(attached_attribute.attribute));\n\n          return json_value;\n        }\n\n        JSON json_value(rapidjson::kObjectType);\n\n        serialization::SerializeValueInObject(\n            json_value, kAttributeType,\n            static_cast<int>(ddm::AttachedAttributeType::kLBVsPaths),\n            allocator);\n\n        if (std::holds_alternative<int>(attached_attribute.attribute)) {\n          serialization::SerializeValueInObject(\n              json_value, kAttributeColumn,\n              std::get<int>(attached_attribute.attribute), allocator);\n        } else {\n          // Attached attribute is from a late binding view.\n          XCHECK(std::holds_alternative<std::string>(\n              attached_attribute.attribute));\n          serialization::SerializeValueInObject(\n              json_value, kAttributeColumn,\n              std::get<std::string>(attached_attribute.attribute), allocator);\n        }\n\n        if (attached_attribute.path) {\n          serialization::SerializeValueInObject(json_value, kAttributePath,\n                                                attached_attribute.path.value(),\n                                                allocator);\n        }", "mimetype": "text/plain", "start_char_idx": 6043, "end_char_idx": 7529, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6bfba5d4-1a3d-40cb-bbc2-d59c67591f62": {"__data__": {"id_": "6bfba5d4-1a3d-40cb-bbc2-d59c67591f62", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4c516b04-5953-4e60-acc8-ce2a265c663a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "50a643d6eb0574e770269f304889388a9cf50108658f761ae184d9c5faf770b1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05f7911d-78b6-49bb-8903-2437f4d41fa2", "node_type": "1", "metadata": {}, "hash": "539820fc1981d8352b72af88731d701d820da3215204d8ae95225f12188b66cf", "class_name": "RelatedNodeInfo"}}, "text": "return json_value;\n      }", "mimetype": "text/plain", "start_char_idx": 5566, "end_char_idx": 5592, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "05f7911d-78b6-49bb-8903-2437f4d41fa2": {"__data__": {"id_": "05f7911d-78b6-49bb-8903-2437f4d41fa2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6bfba5d4-1a3d-40cb-bbc2-d59c67591f62", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8a8bca1b8ef9ed592b4566c4c02562c4b0875c782bb36aa9f4d18d4efb2a7e6c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e09c99a8-ea03-4b55-a9a5-1dc79bffe1a1", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": ",\n      json_document.GetAllocator())", "mimetype": "text/plain", "start_char_idx": 4776, "end_char_idx": 4813, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e09c99a8-ea03-4b55-a9a5-1dc79bffe1a1": {"__data__": {"id_": "e09c99a8-ea03-4b55-a9a5-1dc79bffe1a1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05f7911d-78b6-49bb-8903-2437f4d41fa2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b1f3f5f7080a2e2963efaecca585b0b249412cc945115af6afc92105972b1d6a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4541285f-3bdc-4fdf-83ae-96e8bdc86182", "node_type": "1", "metadata": {}, "hash": "a04f80f3054da8e50448c6df51f1b1130892b08fcb76fbc1838b8df574b26c44", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 297, "end_char_idx": 298, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4541285f-3bdc-4fdf-83ae-96e8bdc86182": {"__data__": {"id_": "4541285f-3bdc-4fdf-83ae-96e8bdc86182", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e09c99a8-ea03-4b55-a9a5-1dc79bffe1a1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "70230fecc43c51b3c9815a9aedb680f59d70e58a8807a3899be80693e9849cce", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa7f2ab7-c768-496a-86c1-92ce0dde780d", "node_type": "1", "metadata": {}, "hash": "e1082457886e37559a91533f82d5fdca1d2e917b1fbbc94417239008f9973f9a", "class_name": "RelatedNodeInfo"}}, "text": "json_document.Swap(json_val_serialized_attached_attrs);\n\n  return serialization::JSONToString(json_document);\n}", "mimetype": "text/plain", "start_char_idx": 7607, "end_char_idx": 7718, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aa7f2ab7-c768-496a-86c1-92ce0dde780d": {"__data__": {"id_": "aa7f2ab7-c768-496a-86c1-92ce0dde780d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4541285f-3bdc-4fdf-83ae-96e8bdc86182", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "11be68f75b299c01735158aade396d6672938a26c9af5ec0f75f7de2311c3182", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e33ab236-5dad-40b4-ba52-ba092b3c1438", "node_type": "1", "metadata": {}, "hash": "2f404c0dbbb5a3a6b17b6718984f093c77495b73581c2ed705156e1bc7c1ec23", "class_name": "RelatedNodeInfo"}}, "text": "/// @brief Constructs a single AttachedAttribute object (attribute description\n/// plus optional SUPER path) from JSON-encoded object.\n///\n/// Supports both old and new encoding of attachments (not the type of\n/// attachment is std::variant to accommodate different possible attachment C++\n/// types).\n///\n/// For the reference, here are the examples of old and new encodings.\n/// @example old encoding: plain number\n/// - 5\n///\n/// @example new encoding, object\n/// - note, table / view w/o path uses old encoding\n/// - table / view w/ path: { t: kLBVsPaths, column: 5, path: \"a.b.c\" }\n/// - LBV w/ path: { t: kLBVsPaths, column: \"column_a\" }\n/// - LBV w/o path: { t: kLBVsPaths, column: \"column_a\", path: \"a.b.c\" }\n///\n/// @param input the JSON object of the attached attribute (w/ optional path)\n/// @return AttachedAttribute the object of attached attribute (attribute\n/// description plus optional SUPER path)\n/// @throws XPGCHECK on invalid JSON input or invalid object type (the\n/// kAttributeType attribute in JSON object).", "mimetype": "text/plain", "start_char_idx": 7720, "end_char_idx": 8751, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e33ab236-5dad-40b4-ba52-ba092b3c1438": {"__data__": {"id_": "e33ab236-5dad-40b4-ba52-ba092b3c1438", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa7f2ab7-c768-496a-86c1-92ce0dde780d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a4328ab8f2fd029fdd9306c4a10f86abe2df4decd9189eba89ebfd9f49db97e8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8c578503-12b1-45c2-a1f3-648f9293416b", "node_type": "1", "metadata": {}, "hash": "60445bc06af585860d4ab7e3d60574eef94b163b0ed939512ddb772ff5be3df0", "class_name": "RelatedNodeInfo"}}, "text": "AttachedAttribute DeserializeAttachmentAttribute(const JSON& input)", "mimetype": "text/plain", "start_char_idx": 717, "end_char_idx": 784, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8c578503-12b1-45c2-a1f3-648f9293416b": {"__data__": {"id_": "8c578503-12b1-45c2-a1f3-648f9293416b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e33ab236-5dad-40b4-ba52-ba092b3c1438", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a36cebf0f939009261f96d5a41cc7fc2b09a59c8fb14a38764efe0cebac50421", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "279b04c9-2709-4415-b674-2531b047da69", "node_type": "1", "metadata": {}, "hash": "41848bfbaab7db4ccc005727ee3e07887e45756f47614eb6cd970ab43c079d20", "class_name": "RelatedNodeInfo"}}, "text": "{\n  if (input.IsObject()) {\n    // New encoding scheme -- array of objects where each object has an\n    // explicit type, a column (int attribute or string name) and an optional\n    // SUPER path.\n    int type =\n        serialization::DeserializeValueInObject<int>(input, kAttributeType);\n\n    AttachedAttribute::Attribute attribute;\n\n    switch (type) {\n      case AttachedAttributeType::kLBVsPaths: {\n        if (serialization::CheckTypeInObject<int>(input, kAttributeColumn)) {\n          attribute = serialization::DeserializeValueInObject<int>(\n              input, kAttributeColumn);\n        } else if (serialization::CheckTypeInObject<std::string>(\n                       input, kAttributeColumn)) {\n          attribute = serialization::DeserializeValueInObject<std::string>(\n              input, kAttributeColumn);\n        }\n\n        std::optional<std::string> path =\n            serialization::DeserializeValueInObjectOpt<std::string>(\n                input, kAttributePath);\n\n        return {attribute, path};\n      } break;\n    }\n    // For now kLBVsPaths is the only supported (and expected) type tag. The\n    // block is not in switch-default to resolve GCC -Werror=return-type .\n    XCHECK_UNREACHABLE(\"Unexpected type tag: \", type);\n  } else {\n    // Old encoding scheme -- array of integers where each integer is an\n    // attribute number for a table or view.\n    XPGCHECK(input.IsInt());\n\n    return {serialization::DeserializeInt(input), std::nullopt};\n  }\n}", "mimetype": "text/plain", "start_char_idx": 8820, "end_char_idx": 10296, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "279b04c9-2709-4415-b674-2531b047da69": {"__data__": {"id_": "279b04c9-2709-4415-b674-2531b047da69", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8c578503-12b1-45c2-a1f3-648f9293416b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d2598132f1a4b0666ed117cc7effad47d3cd9af02c625dca6252f0be4f60ab36", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "513a9f4a-bbb1-44df-ae9a-ca42a940c1b7", "node_type": "1", "metadata": {}, "hash": "3a4a47fc0a9a53bdc5eff26b4552f70d40183f5f070136d3f7cbb325469c8f42", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<AttachedAttribute> DeserializeAttachedAttributes(\n    const std::string& json_string) {\n  if (json_string.empty()) return {};\n\n  return serialization::DeserializeArray<AttachedAttribute>(\n      json_string, DeserializeAttachmentAttribute);\n}\n\nstd::vector<std::shared_ptr<TypeName>> DeserializeTypeNames(\n    const std::string& json_string) {\n  // Custom deserializer that extracts and constructs TypeName.\n  auto deserializer = [](const JSON& input) {\n    Oid atttypid =\n        serialization::DeserializeValueInObject<int>(input, kAttributeTypeOid);\n    int atttypmod =\n        serialization::DeserializeValueInObject<int>(input, kAttributeTypeMode);\n\n    return makeTypeNameFromOid(atttypid, atttypmod);\n  };\n\n  return serialization::DeserializeArrayToPointers<TypeName>(json_string,\n                                                             deserializer);\n}\n\nstd::string GetAttributeName(const AttachedAttribute& attached_attribute,\n                             Oid relid) {\n  std::string attr_name =\n      GetColumnNameFromAttachedAttribute(attached_attribute, relid);\n  if (attached_attribute.path.has_value()) {\n    attr_name =\n        attr_name + PathSetBase::kDelimiter + attached_attribute.path.value();\n  }\n\n  return attr_name;\n}", "mimetype": "text/plain", "start_char_idx": 10298, "end_char_idx": 11552, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "513a9f4a-bbb1-44df-ae9a-ca42a940c1b7": {"__data__": {"id_": "513a9f4a-bbb1-44df-ae9a-ca42a940c1b7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "279b04c9-2709-4415-b674-2531b047da69", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "35fe05a5d8b9fd74934c7c786916a58196c0f034012c664ac157ab12586215b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ea89b927-1f68-4925-abf6-3ec6af4f2e74", "node_type": "1", "metadata": {}, "hash": "46fdaf0ab8548fdb74cf5b8d27a2a683f308fa90256eabb79cede87f803c109f", "class_name": "RelatedNodeInfo"}}, "text": "std::string GetColumnNameFromAttachedAttribute(\n    const AttachedAttribute& attached_attribute, Oid relid) {\n  std::string attr_name;\n\n  if (IsLbv(relid)) {\n    XCHECK(std::holds_alternative<std::string>(attached_attribute.attribute));\n    return std::get<std::string>(attached_attribute.attribute);\n  }\n\n  XCHECK(std::holds_alternative<int>(attached_attribute.attribute));\n  return GetColumnName(relid, std::get<int>(attached_attribute.attribute));\n}\n}", "mimetype": "text/plain", "start_char_idx": 11554, "end_char_idx": 12008, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ea89b927-1f68-4925-abf6-3ec6af4f2e74": {"__data__": {"id_": "ea89b927-1f68-4925-abf6-3ec6af4f2e74", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "483b1216-d605-466b-9396-eb456ab30373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f3bef11e279f1bcae0a24901fd39f3f5790f68a66e2e5dd9b619f62a6a3a20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "513a9f4a-bbb1-44df-ae9a-ca42a940c1b7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8eaaea3c3a173a2460b08ae2a78999e4a105d277cfb49d4597a412dd6a1426a0", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm", "mimetype": "text/plain", "start_char_idx": 12010, "end_char_idx": 12026, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dbabf449-4d6f-485e-8f66-f9bc4207a0c2": {"__data__": {"id_": "dbabf449-4d6f-485e-8f66-f9bc4207a0c2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ada30b76-3964-490e-8a21-19dc166af2dd", "node_type": "1", "metadata": {}, "hash": "182b08b9f68b06c56c713820380d61f5609fb4b7c945a020f20fa86524b183d0", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/ddm_system_views.h\"\n\n#include \"ddm/ddm_permission.hpp\"\n#include \"ddm/ddm_serialization.hpp\"\n#include \"policy/policy_system_views.h\"\n#include \"policy/policy_utils.h\"\n#include \"policy/policy_utils.hpp\"\n#include \"rapidjson/document.h\"\n#include \"rapidjson/rapidjson.h\"\n#include \"rapidjson/stringbuffer.h\"\n#include \"rapidjson/writer.h\"\n#include \"redcat/metadata_security.h\"\n#include \"xen_utils/xen_except.h\"\n\n#include \"pg/src/include/access/heapam.h\"\n#include \"pg/src/include/access/tupdesc.h\"\n#include \"pg/src/include/c.h\"\n#include \"pg/src/include/catalog/namespace.h\"\n#include \"pg/src/include/catalog/pg_attribute.h\"\n#include \"pg/src/include/catalog/pg_datashare_objects.h\"\n#include \"pg/src/include/custom_int_types.h\"\n#include \"pg/src/include/nodes/makefuncs.h\"\n#include \"pg/src/include/nodes/primnodes.h\"\n#include \"pg/src/include/postgres.h\"\n#include \"pg/src/include/postgres_ext.h\"\n#include \"pg/src/include/storage/lmgr.h\"\n#include \"pg/src/include/utils/builtins.h\"\n#include \"pg/src/include/utils/lsyscache.h\"\n#include \"pg/src/include/utils/palloc.h\"\n#include \"pg/src/include/utils/rel.h\"\n\n#include <algorithm>\n#include <iomanip>\n#include <memory>\n#include <optional>\n#include <string>\n#include <unordered_set>\n#include <utility>\n#include <vector>\n\n#include <string.h>\n\nnamespace serialization = policy::serialization;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1409, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ada30b76-3964-490e-8a21-19dc166af2dd": {"__data__": {"id_": "ada30b76-3964-490e-8a21-19dc166af2dd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dbabf449-4d6f-485e-8f66-f9bc4207a0c2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f8c9affe08810af7d608e0d82ea96b94263b1a8413198ebf2ddb5cbab4a256a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8ea89b30-3f99-47d7-8846-cac3158716b0", "node_type": "1", "metadata": {}, "hash": "10b32b07b8e60fa2cd349415e37007c62c244b06e0df49287107e87265de054e", "class_name": "RelatedNodeInfo"}}, "text": "VarChar* policy_expression_out_internal(const VarChar* input) {\n  check_policy_attach_privilege(kPolicyDDM);\n\n  return policy_component_out_common(input, \"expr\", kPolicyDDM);\n}", "mimetype": "text/plain", "start_char_idx": 1411, "end_char_idx": 1587, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8ea89b30-3f99-47d7-8846-cac3158716b0": {"__data__": {"id_": "8ea89b30-3f99-47d7-8846-cac3158716b0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ada30b76-3964-490e-8a21-19dc166af2dd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dbcf899ef5d099f1452f8c9b0c66ebc80dfed7d333866fb6c3d7d406f1abf46c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6be9a876-0abe-4bd6-87aa-9bef977c0dcd", "node_type": "1", "metadata": {}, "hash": "52a6c5d592559a7406af56027b7b9c55d12d0e621d58d6eda2d4a68519e71866", "class_name": "RelatedNodeInfo"}}, "text": "VarChar* mask_policy_attached_atts_out_internal(Oid relation_id,\n                                                const VarChar* input)", "mimetype": "text/plain", "start_char_idx": 1589, "end_char_idx": 1723, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6be9a876-0abe-4bd6-87aa-9bef977c0dcd": {"__data__": {"id_": "6be9a876-0abe-4bd6-87aa-9bef977c0dcd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8ea89b30-3f99-47d7-8846-cac3158716b0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c265d1129f9258b0295d273a92069cbd6dbce09afc9d572e0dbaee970f5952e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02ae218d-1086-42dc-b573-c55c92b63da7", "node_type": "1", "metadata": {}, "hash": "de8c669b753b14a46ba56e38396b46cadf7b33d2ddf24858dc02c9e5de799361", "class_name": "RelatedNodeInfo"}}, "text": "{\n  check_policy_attach_privilege(kPolicyDDM);\n\n  std::vector<ddm::AttachedAttribute> attributes;\n  serialization::JSONDoc json_document;\n  serialization::JSON json_array;\n  std::function<serialization::JSON(const ddm::AttachedAttribute& attribute,\n                                    serialization::JSONAllocator& allocator)>\n      serializer;", "mimetype": "text/plain", "start_char_idx": 1724, "end_char_idx": 2068, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "02ae218d-1086-42dc-b573-c55c92b63da7": {"__data__": {"id_": "02ae218d-1086-42dc-b573-c55c92b63da7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6be9a876-0abe-4bd6-87aa-9bef977c0dcd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "183726fb79aa20b072fd30aee57028d079789676213a13ace0d29f2c29569d2a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d131883d-2542-4de6-800f-c18bde4e5ac1", "node_type": "1", "metadata": {}, "hash": "2c1ba576ff2c88d46f8aa0a6c4bcf337ff4a22698adae7c81680833570fcd069", "class_name": "RelatedNodeInfo"}}, "text": "if (get_rel_relkind(relation_id) == RELKIND_VIEW &&\n      get_view_kind(relation_id) == OBJTYPE_LBV) {\n    attributes = ddm::DeserializeAttachedAttributes(\n        std::string(VARDATA(input), VARSIZE(input) - VARHDRSZ));\n\n    serializer = [](const ddm::AttachedAttribute& attribute,\n                    serialization::JSONAllocator& allocator) {\n      XPGCHECK(std::holds_alternative<std::string>(attribute.attribute));\n\n      std::string column_path(std::get<std::string>(attribute.attribute));\n      if (attribute.path.has_value()) {\n        column_path += \".\" + attribute.path.value();\n      }\n\n      serialization::JSON json_value(rapidjson::kStringType);\n      json_value.SetString(column_path.data(), allocator);\n      return json_value;\n    };\n  }", "mimetype": "text/plain", "start_char_idx": 2072, "end_char_idx": 2826, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d131883d-2542-4de6-800f-c18bde4e5ac1": {"__data__": {"id_": "d131883d-2542-4de6-800f-c18bde4e5ac1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "02ae218d-1086-42dc-b573-c55c92b63da7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "32328beb8173ce7c63f165944b9c4208d6e546c331dc0d0d2c16809c738ad4ba", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ece30c98-5d0f-43e5-8432-311c11bda130", "node_type": "1", "metadata": {}, "hash": "e81e3aa6ba2c322f52504d280164d20c0aaa0d7d762e409bf37ee224032b78b6", "class_name": "RelatedNodeInfo"}}, "text": "else {\n    // Note NoLock here. We only need relation name here, and we never read or\n    // write the tuples from the relation itself. Therefore, we don't care if\n    // anything happens to the relation in the meantime.\n    Relation relation = relation_open(relation_id, NoLock);\n    SCOPE_EXIT_GUARD(relation_close(relation, NoLock));\n\n    // @warning ddm::AttributesToColumnDefs XPGCHECKs that the attribute type is\n    // int. For LBV you may not need to call ddm::AttributesToColumnDefs.\n    attributes = ddm::AttributesToColumnDefs(\n        relation, ddm::DeserializeAttachedAttributes(\n                      std::string(VARDATA(input), VARSIZE(input) - VARHDRSZ)));\n\n    serializer = [](const ddm::AttachedAttribute& attribute,\n                    serialization::JSONAllocator& allocator) {\n      XPGCHECK(std::holds_alternative<std::shared_ptr<ColumnDef>>(\n          attribute.attribute));\n\n      std::string column_path(\n          std::get<std::shared_ptr<ColumnDef>>(attribute.attribute)->colname);\n      if (attribute.path.has_value()) {\n        column_path += \".\" + attribute.path.value();\n      }\n\n      serialization::JSON json_value(rapidjson::kStringType);\n      json_value.SetString(column_path.data(), allocator);\n      return json_value;\n    };\n  }", "mimetype": "text/plain", "start_char_idx": 2827, "end_char_idx": 4094, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ece30c98-5d0f-43e5-8432-311c11bda130": {"__data__": {"id_": "ece30c98-5d0f-43e5-8432-311c11bda130", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d131883d-2542-4de6-800f-c18bde4e5ac1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "067731d67d233cdbf32434588f50afee4044a24aef649a5739d591896a9b4096", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b8b249e0-c4bd-4514-9387-fba3f62770f0", "node_type": "1", "metadata": {}, "hash": "50441a8df232f82322564b49c6295d9e54e804ed6a651b53fd4262ae84ff35b2", "class_name": "RelatedNodeInfo"}}, "text": "json_array = serialization::SerializeToArray<ddm::AttachedAttribute>(\n      attributes, serializer, json_document.GetAllocator());\n  json_document.Swap(json_array);\n\n  std::string output = serialization::JSONToString(json_document);\n\n  VarChar* result = palloc(output.size() + VARHDRSZ);\n  VARATT_SIZEP(result) = output.size() + VARHDRSZ;\n  memcpy(VARDATA(result), output.c_str(), output.size());\n\n  return result;\n}", "mimetype": "text/plain", "start_char_idx": 4098, "end_char_idx": 4514, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b8b249e0-c4bd-4514-9387-fba3f62770f0": {"__data__": {"id_": "b8b249e0-c4bd-4514-9387-fba3f62770f0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ece30c98-5d0f-43e5-8432-311c11bda130", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a68e814ea0b537de2b284b1f5ad31fe23d96b4a222ebd2152e8af8e849fa7c90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "edc2ad8c-0736-4acc-9a9d-d601416b2003", "node_type": "1", "metadata": {}, "hash": "12f29eaf20e6363fc84c9e79c1ef111356e01304265de2410d49b83699012243", "class_name": "RelatedNodeInfo"}}, "text": "VarChar* get_ddm_policy_name_for_column(VarChar* schema_name,\n                                        VarChar* relation_name,\n                                        VarChar* column_name,\n                                        VarChar* user_name,\n                                        VarChar* role_name)", "mimetype": "text/plain", "start_char_idx": 4516, "end_char_idx": 4823, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "edc2ad8c-0736-4acc-9a9d-d601416b2003": {"__data__": {"id_": "edc2ad8c-0736-4acc-9a9d-d601416b2003", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b8b249e0-c4bd-4514-9387-fba3f62770f0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d818d743036a0bc4f4c974d574ae6c38b26fd1d12f934cbd64b718d1b55c8d7b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bdca9d61-5da7-464c-879b-27189a93a351", "node_type": "1", "metadata": {}, "hash": "0771716c88244ae700878daf686e2336df12e45f8f7a371d0e28d0ef08fc2715", "class_name": "RelatedNodeInfo"}}, "text": "{\n  check_policy_attach_privilege(kPolicyDDM);\n\n  XCHECK((user_name == nullptr) ^ (role_name == nullptr),\n         policy::tag_for_policy_type(kPolicyDDM));\n\n  // Convert input to null-terminated form.\n  auto convert_varchar = [](VarChar* input) -> char* {\n    int length = VARSIZE(input) - VARHDRSZ;\n    char* result = palloc(length + 1);\n    memcpy(result, VARDATA(input), length);\n    *(result + length) = '\\0';\n    return result;\n  };\n\n  RangeVar* relation = makeRangeVar(convert_varchar(schema_name),\n                                    convert_varchar(relation_name));\n  Oid relation_id = RangeVarGetRelid(relation, true /* failOK */);\n  if (relation_id == InvalidOid) return nullptr;\n\n  if (!skip_metadata_security_check(GetUserId(), RelOid_pg_attribute,\n                                    PG_CATALOG_NAMESPACE) &&\n      !is_relation_owner_or_has_any_permission(relation_id, GetUserId()) &&\n      pg_attribute_aclcheck(\n          relation_id, convert_column_name(relation_id, column_name),\n          GetUserId(), ACL_ALL_RIGHTS_COLUMNS) == ACLCHECK_NO_PRIV) {\n    ereport(ERROR, (errcode(ERRCODE_UNDEFINED_COLUMN),\n                    errmsg(\"column does not exist\")));\n  }\n\n  // get_usesysid and get_roleid will abort query with error if the user or role\n  // does not exist and there's nothing we can do aside from duplicating these\n  // function's implementations.\n\n  std::optional<AclId> user_id = std::nullopt;", "mimetype": "text/plain", "start_char_idx": 4824, "end_char_idx": 6247, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bdca9d61-5da7-464c-879b-27189a93a351": {"__data__": {"id_": "bdca9d61-5da7-464c-879b-27189a93a351", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "459394fe-7545-4a18-9265-b95a9d2f85fb", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f09ecac3212c56ea418d89b1a4443874de593ec4a3c7990951919fdad2d880", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "edc2ad8c-0736-4acc-9a9d-d601416b2003", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3fb3270d7b6c75ae13c4092248449791154f7f76fec861059daf3c36f4012515", "class_name": "RelatedNodeInfo"}}, "text": "if (user_name != nullptr) {\n    user_id = get_usesysid(convert_varchar(user_name));\n    if (user_id == InvalidOid) return nullptr;\n  }\n\n  std::optional<AclId> role_id = std::nullopt;\n  if (role_name != nullptr) {\n    role_id = get_roleid(convert_varchar(role_name));\n    if (role_id == InvalidOid) return nullptr;\n  }\n\n  std::unordered_set<std::string> policy_names =\n      ddm::GetDDMPolicyNamesForColumn(\n          relation_id, user_id, role_id,\n          std::string(convert_varchar(column_name)));\n\n  if (policy_names.empty()) return nullptr;\n\n  std::string output = {};\n  if (policy_names.size() == 1) {\n    output = *policy_names.begin();\n  } else {\n    std::vector<std::string> policy_names_sorted(policy_names.begin(),\n                                                 policy_names.end());\n    std::sort(policy_names_sorted.begin(), policy_names_sorted.end());\n    std::stringstream ss;\n    ss << \"[\";\n    bool first = true;\n    for (auto&& name : policy_names_sorted) {\n      if (!first) ss << \", \";\n      ss << std::quoted(name, '\\\"', '\\\"');\n      first = false;\n    }\n    ss << \"]\";\n    output = ss.str();\n  }\n  VarChar* result = palloc(output.size() + VARHDRSZ);\n  VARATT_SIZEP(result) = output.size() + VARHDRSZ;\n  memcpy(VARDATA(result), output.data(), output.size());\n\n  return result;\n}", "mimetype": "text/plain", "start_char_idx": 6250, "end_char_idx": 7551, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "21f48525-0308-41f6-b5ff-cd057acbc03b": {"__data__": {"id_": "21f48525-0308-41f6-b5ff-cd057acbc03b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_test_helper.cpp", "file_name": "ddm_test_helper.cpp", "file_size": 1482, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d65219ad-8eff-42be-b8cc-9bb261b067a3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_test_helper.cpp", "file_name": "ddm_test_helper.cpp", "file_size": 1482, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "edcb3ebadfdfb04334f10c5c40ea6b424fb8b200ce5eb7c3ec260ab38020ad61", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"pg/ddm/ddm_test_helper.hpp\"\n\nnamespace pgtest {\nQuery* ParseAnalyzeQuery(const std::string& sql) {\n  AutoValueRestorer<bool> postmaster(IsUnderPostmaster, true /*tmpval*/);\n  List* parse_tree = pg::Parse(sql.c_str());\n  List* query_tree = pg::Analyze(parse_tree);\n  return reinterpret_cast<Query*>(linitial(query_tree));\n}\n\nOid GetRelID(Query* q) {\n  RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  return rte->relid;\n}\n\nbool ColumnDefComparator(std::shared_ptr<ColumnDef>& l,\n                         std::shared_ptr<ColumnDef>& r) {\n  return strcmp(l->colname, r->colname) == 0 &&\n         l->typname->typid == r->typname->typid &&\n         l->typname->typmod == r->typname->typmod;\n}\n\nbool AttachedAttributeComparator(ddm::AttachedAttribute& l,\n                                 ddm::AttachedAttribute& r) {\n  bool path_equal = l.path == r.path;\n  bool attribute_equal;\n  if (std::holds_alternative<std::shared_ptr<ColumnDef>>(l.attribute)) {\n    attribute_equal =\n        ColumnDefComparator(std::get<std::shared_ptr<ColumnDef>>(l.attribute),\n                            std::get<std::shared_ptr<ColumnDef>>(r.attribute));\n  } else {\n    // Note, for the rest of possible attributes (int, std::string) the\n    // comparator is well-defined.\n    attribute_equal = l.attribute == r.attribute;\n  }\n\n  return path_equal && attribute_equal;\n}\n\n}  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1481, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc84a66e-e739-41c4-8e7f-134dad2e1423": {"__data__": {"id_": "dc84a66e-e739-41c4-8e7f-134dad2e1423", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_test_helper.hpp", "file_name": "ddm_test_helper.hpp", "file_size": 1019, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "49e9e25e-25f1-40dd-bf87-3f0c87db5499", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_test_helper.hpp", "file_name": "ddm_test_helper.hpp", "file_size": 1019, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "53a52d920a0946016051ed0ee58f5bd3f0124cd7b96474e6c58be9ceacbcb20f", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#pragma once\n\n#include \"ddm/ddm_policy.hpp\"\n\n#include \"pg/test/pg_test.hpp\"\n\n#include <gtest/gtest.h>\n\n#include <memory>\n#include <string>\n\nnamespace pgtest {\n/// Helper to parse query trees. Duplicated from omni tests to avoid\n/// dependencies between test cases.\n/// @param &std::string sql - input SQL for parse/analysis.\n/// @return Query* - Analyzed Query.\nQuery* ParseAnalyzeQuery(const std::string& sql);\n\n/// Helper to get relation id from analyzed query.\n/// The analyzed query is expected have a single\n/// range table entry. Relation id of the range table\n/// entry is returned.\n/// @param Query* - Analyzed Query.\n/// @return Oid* - Relation id.\nOid GetRelID(Query* q);\n\nbool ColumnDefComparator(std::shared_ptr<ColumnDef>& l,\n                         std::shared_ptr<ColumnDef>& r);\n\nbool AttachedAttributeComparator(ddm::AttachedAttribute& l,\n                                 ddm::AttachedAttribute& r);\n\n}  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1018, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6d2cd576-5c01-46d0-b65c-1fff8dcbd19f": {"__data__": {"id_": "6d2cd576-5c01-46d0-b65c-1fff8dcbd19f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "14c0c5b4-c9e1-4689-b8a2-559d99736e00", "node_type": "1", "metadata": {}, "hash": "63e8fe2f2b8efe8877074b29e6f4bb5f2cf9d61c6f7c78d0a0b73b424bff2136", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"ddm/policy_access.h\"\n\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_lf_alp.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"xen_utils/compiler.h\"\n\n#include \"pg/src/include/miscadmin.h\"\n// miscadmin must be imported prior to pg_datashare_objects.\n#include \"catalog/pg_datashare_objects.h\"\n#include \"external_catalog/table_registry.hpp\"\n#include \"nested_fe/nested_query_api.h\"\n#include \"mv/mv_cinterface.h\"\n\n#include \"pg/src/include/postgres_ext.h\"\n#include \"pg/src/include/utils/elog.h\"\n#include \"pg/src/include/utils/elog_sqlstate.h\"\n#include \"pg/src/include/utils/lsyscache.h\"\n#include \"pg/src/include/xen_cinterf.h\"\n\nextern bool gconf_ddm_enable_over_super_paths;\nextern bool gconf_enable_ddm_on_views;\nextern bool gconf_enable_ddm_on_mvs;\nextern bool gconf_enable_ddm;\nextern bool gconf_enable_lf_alp;\nextern bool gconf_enable_object_transform;\nextern bool gconf_spectrum_enable_complex_references;\nextern bool gconf_spectrum_enable_lf_data_filters;\n\n/// Enabled only during unit tests, backing catalog tables may not be created\n/// during initdb (called on every PG test instantiation).\nbool g_pgtest_ddm = false;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1201, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "14c0c5b4-c9e1-4689-b8a2-559d99736e00": {"__data__": {"id_": "14c0c5b4-c9e1-4689-b8a2-559d99736e00", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d2cd576-5c01-46d0-b65c-1fff8dcbd19f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "095a7199f79d63488c61388e988596f40dd614782e8bf6b7e617827b9b8aa790", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "64580b5d-0145-49fd-85b8-83295e5cfcff", "node_type": "1", "metadata": {}, "hash": "e9635b2490f00dd6da64dbd34b5d674f51f28bc6b640378ee704aa92d2e06d6a", "class_name": "RelatedNodeInfo"}}, "text": "namespace", "mimetype": "text/plain", "start_char_idx": 1204, "end_char_idx": 1213, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "64580b5d-0145-49fd-85b8-83295e5cfcff": {"__data__": {"id_": "64580b5d-0145-49fd-85b8-83295e5cfcff", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "14c0c5b4-c9e1-4689-b8a2-559d99736e00", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "15dd5bba1877a9b1645aada4a17080556ad39951dedd54a54ea94515bbc6b98a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aed59d84-7ccf-420c-9623-478b074cb392", "node_type": "1", "metadata": {}, "hash": "f39aceca9e9885b9328c8d8d3841b3b12ecf4dd22161f7809f2acc54b1b9fc21", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n/// Check if DDM is GUC enabled for the relation kind of a given range table\n/// entry.\n///\n/// @param rte The range table entry to check.\n/// @param rte_oid The oid of the range table entry.\n/// @return true if DDM is enabled for the relation kind, otherwise false.\n/// @throws XCHECK_UNREACHABLE if the relation kind is unknown.", "mimetype": "text/plain", "start_char_idx": 1214, "end_char_idx": 1547, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aed59d84-7ccf-420c-9623-478b074cb392": {"__data__": {"id_": "aed59d84-7ccf-420c-9623-478b074cb392", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "64580b5d-0145-49fd-85b8-83295e5cfcff", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "761ced7e19fd0cdc3019406a648be8674d465c681c0d0cdccd753826cb2a010d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c937bb04-057e-4fde-a71b-24a1463d8ed8", "node_type": "1", "metadata": {}, "hash": "1e6bddafe200e95d7f35239dd0c240cc221df129ffd75e25aec698e79e5d7efc", "class_name": "RelatedNodeInfo"}}, "text": "bool IsDDMEnabledForRelkind(RangeTblEntry* rte, Oid rte_oid) {\n  // The basic DDM GUC must be enabled to support any kind of relation.\n  bool is_ddm_enabled = gconf_enable_ddm;\n  // For views and S3 tables we need to check additional GUCs.\n  char relkind = get_rel_relkind(rte_oid);\n  switch (relkind) {\n    case RELKIND_RELATION:\n      break;\n    case RELKIND_VIEW:\n      if (IsMv(rte_oid)) {\n        is_ddm_enabled &= gconf_enable_ddm_on_mvs;\n      } else {\n        is_ddm_enabled &= gconf_enable_ddm_on_views;\n      }\n      break;\n    default:\n      // An external RTE Oid refers to an InvalidOid relation, as it does not\n      // exist in the local catalog. In these cases, if this RTE refers to a\n      // nested Spectrum table (deferred localization), and if the external\n      // table id is already registered in the external registry, handle it\n      // differently.\n      if ((rte_oid == InvalidOid) &&\n          external_catalog::TableRegistry::HasTable(rte->external_table_id) &&\n          IsSpectrumNested(rte)) {\n        // Check if it's a spectrum relation. In such case, the localization is\n        // deferred to post parsing. Hence, we refer to the RTE external table\n        // id to infer the table in the external catalog registry.\n        XCHECK(rte->rtekind == RTE_RELATION);\n        is_ddm_enabled &= gconf_spectrum_enable_lf_data_filters;\n        break;\n      }\n\n      XCHECK_UNREACHABLE(\"DDM was applied on unsupported relkind\", relkind);\n  }\n  return is_ddm_enabled;\n}\n\n}", "mimetype": "text/plain", "start_char_idx": 1548, "end_char_idx": 3046, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c937bb04-057e-4fde-a71b-24a1463d8ed8": {"__data__": {"id_": "c937bb04-057e-4fde-a71b-24a1463d8ed8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aed59d84-7ccf-420c-9623-478b074cb392", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "518b660fdcbf6cb3f23f429c760f3d3fd8806557232a5d4feb4d0344f80b9c76", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "496a6edd-e885-47b9-8984-317f2b80058b", "node_type": "1", "metadata": {}, "hash": "df05bda84d4bdac848a0e72ba4380524f8aa4e60849dc51bf548d73cfcf303b2", "class_name": "RelatedNodeInfo"}}, "text": "// namespace", "mimetype": "text/plain", "start_char_idx": 3048, "end_char_idx": 3060, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "496a6edd-e885-47b9-8984-317f2b80058b": {"__data__": {"id_": "496a6edd-e885-47b9-8984-317f2b80058b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c937bb04-057e-4fde-a71b-24a1463d8ed8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c4f65abfa6e1e7653344dc56e371d13ab5b82fd3530c79e0ea050dfb83b9c54c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4cae9c97-861f-4fa3-a03b-8ac546436f19", "node_type": "1", "metadata": {}, "hash": "34dfb31455acc10e7838f3eb3e18901da9f4bfff1feebcfa7edcf5142124575d", "class_name": "RelatedNodeInfo"}}, "text": "#ifdef __cplusplus", "mimetype": "text/plain", "start_char_idx": 3063, "end_char_idx": 3081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4cae9c97-861f-4fa3-a03b-8ac546436f19": {"__data__": {"id_": "4cae9c97-861f-4fa3-a03b-8ac546436f19", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "496a6edd-e885-47b9-8984-317f2b80058b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eb1c8cdb5b73b389821eac2c53def892b217191b193f123343133b8b4d064273", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97bc7d84-e480-4dcb-b3eb-042e39b36cdc", "node_type": "1", "metadata": {}, "hash": "22034094765aaf64ccd3103bce97e9723d3b674859ced859db549febac0b5a89", "class_name": "RelatedNodeInfo"}}, "text": "extern \"C\"", "mimetype": "text/plain", "start_char_idx": 3082, "end_char_idx": 3092, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "97bc7d84-e480-4dcb-b3eb-042e39b36cdc": {"__data__": {"id_": "97bc7d84-e480-4dcb-b3eb-042e39b36cdc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4cae9c97-861f-4fa3-a03b-8ac546436f19", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a8ff5c64c67db12408eee2b7ab07f952c378bb876b3e18258c200f61d01d8eaf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "10246811-e001-43e6-8561-9521408ba0b0", "node_type": "1", "metadata": {}, "hash": "c8cbf06077bc45f378775b54a0b46700af84f6d3d29dc95f1e9910c37723a860", "class_name": "RelatedNodeInfo"}}, "text": "{\n#endif", "mimetype": "text/plain", "start_char_idx": 3093, "end_char_idx": 3101, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "10246811-e001-43e6-8561-9521408ba0b0": {"__data__": {"id_": "10246811-e001-43e6-8561-9521408ba0b0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "97bc7d84-e480-4dcb-b3eb-042e39b36cdc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fe7380bba9b3787c8a2d2e03ef844a6a63c2d2adef4ab338747154eca7e81266", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8f41ee34-cf48-44da-9017-ef8b1301bbf5", "node_type": "1", "metadata": {}, "hash": "34c049517435fc8d69c4eed9c6c40d6d82c3db3fb79462518e88cebba007a2b5", "class_name": "RelatedNodeInfo"}}, "text": "bool HasDDMRewrite(RangeTblEntry* rte) {\n  if ((UNLIKELY(!is_xen_process())) && !g_pgtest_ddm) {\n    return false;\n  }\n\n  // Determine if the relation has attached DDM policies either via native DDM\n  // or via Lake Formation ALP (attribute level protection).\n  Oid rte_oid = GetRelationRelid(rte);\n  bool has_ddm_rewrite = ddm::HasAttachmentsForRel(rte_oid);\n  if (gconf_enable_lf_alp) {\n    bool has_lf_alp = ddm::HasLakeFormationALPForRTE(rte);\n    // This invariant must hold until we support LF and DDM on one relation.\n    XCHECK(!(has_ddm_rewrite && has_lf_alp), ddm::LF_ALP_CALLER);\n    has_ddm_rewrite |= has_lf_alp;\n  }\n\n  // If there is an attached policy we raise an ERROR if DDM is not enabled for\n  // the given relation kind. We do not raise this error if current user is a\n  // super user. This enables super users to perform emergency administration\n  // even when DDM is off.\n  if (has_ddm_rewrite && !IsDDMEnabledForRelkind(rte, rte_oid) &&\n      !superuser()) {\n    ereport(ERROR,\n            (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n             errmsg(\"Relation \\\"%s\\\" is protected with Dynamic Data Masking \"\n                    \"(DDM), however, DDM is unavailable. Please upgrade to a \"\n                    \"version with DDM to query DDM-protected relations. \"\n                    \"Alternatively, superuser can turn off DDM protection \"\n                    \"using DETACH MASKING POLICY.\",\n                    get_rel_name(rte_oid))));\n  }\n\n  return has_ddm_rewrite;\n}", "mimetype": "text/plain", "start_char_idx": 3102, "end_char_idx": 4593, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8f41ee34-cf48-44da-9017-ef8b1301bbf5": {"__data__": {"id_": "8f41ee34-cf48-44da-9017-ef8b1301bbf5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "10246811-e001-43e6-8561-9521408ba0b0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a1a6cf8b680b7e8fe952ce4f9b69ba8c62e9fa7ebfcbb138c7974c6ab2cd9315", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "98dce371-a0c0-4a04-9a83-2f43653a5b80", "node_type": "1", "metadata": {}, "hash": "e0753c6a6ed3826330c75d55eacb68de251c879acc84dcdc595b99f984d255ee", "class_name": "RelatedNodeInfo"}}, "text": "bool HasDDMAttachmentForRel(Oid relid) {\n  return ddm::HasAttachmentsForRel(relid);\n}\n\nbool DDMEnabledOverSuperPaths() {\n  return gconf_ddm_enable_over_super_paths && gconf_enable_object_transform;\n}\n#ifdef __cplusplus\n}", "mimetype": "text/plain", "start_char_idx": 4595, "end_char_idx": 4815, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "98dce371-a0c0-4a04-9a83-2f43653a5b80": {"__data__": {"id_": "98dce371-a0c0-4a04-9a83-2f43653a5b80", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06be1824fcfd48b5b15b2c90096f64d8393119100cefb26d6a7df88e9d9f7eaf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8f41ee34-cf48-44da-9017-ef8b1301bbf5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e731387fe0d316d6c8773efc5518193aa79b6cba5c1ee2a405d0cea62adef6a7", "class_name": "RelatedNodeInfo"}}, "text": "#endif", "mimetype": "text/plain", "start_char_idx": 3095, "end_char_idx": 3101, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c0b9e8b6-51ad-4dc4-b871-d92e99f782d5": {"__data__": {"id_": "c0b9e8b6-51ad-4dc4-b871-d92e99f782d5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4cbf960c-2947-4057-b24d-3670bcd117ea", "node_type": "1", "metadata": {}, "hash": "1cd21cad089da35bcdd8b0ddc4ad3ff5ce2810e810f4a9759ea6a906a7cb697e", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#include \"ddm/rewriter.h\"\n\n#include \"catalog/pg_policy_mask.h\"\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_lf_alp.hpp\"\n#include \"ddm/ddm_over_nested.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/policy_access.h\"\n#include \"monitoring/user_query/user_query_info.h\"\n#include \"monitoring/user_query/user_query_info.hpp\"\n#include \"omnisql/omnisql_print_sql.hpp\"\n#include \"omnisql/omnisql_reparse_sql.hpp\"\n#include \"omnisql/omnisql_translate_query.hpp\"\n#include \"omnisql/omnisql_view.h\"\n#include \"parser/parsetree.h\"\n#include \"pg2volt/QueryWalker.h\"\n#include \"policy/policy_utils.h\"\n#include \"policy/policy_utils.hpp\"\n#include \"rewrite/rewriteHandler.h\"\n#include \"seclog/seclog_masking.hpp\"\n#include \"sys/xen_backend_pids_api.h\"\n#include \"systables/stl_applied_masking_policy.hpp\"\n#include \"xen_utils/exception/xcheck.hpp\"\n#include \"xen_utils/smart_ptr.hpp\"\n\n#include \"pg/src/include/access/xact.h\"\n#include \"pg/src/include/c.h\"\n#include \"pg/src/include/miscadmin.h\"\n#include \"pg/src/include/monitoring_pg_wrapper.h\"\n#include \"pg/src/include/nodes/nodes.h\"\n#include \"pg/src/include/nodes/parsenodes.h\"\n#include \"pg/src/include/nodes/pg_list.h\"\n#include \"pg/src/include/nodes/primnodes.h\"\n#include \"pg/src/include/optimizer/clauses.h\"\n#include \"pg/src/include/postgres_ext.h\"\n#include \"pg/src/include/rewrite/rewriteSupport.h\"\n#include \"pg/src/include/utils/elog.h\"\n#include \"pg/src/include/utils/elog_sqlstate.h\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1488, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4cbf960c-2947-4057-b24d-3670bcd117ea": {"__data__": {"id_": "4cbf960c-2947-4057-b24d-3670bcd117ea", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c0b9e8b6-51ad-4dc4-b871-d92e99f782d5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "45791e6ce1dfa422cac0d4f139a3d7b1d0db4e5b67e8b1cc576325f9e41da5ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3bd14241-8a7d-4320-8c9a-810826853061", "node_type": "1", "metadata": {}, "hash": "dc99fc6626cce7524976fef4dd418656f8ed548136363cc48fcf3c2ea542acc1", "class_name": "RelatedNodeInfo"}}, "text": "#include \"pg/src/include/utils/lsyscache.h\"\n\n#include <iomanip>\n#include <memory>\n#include <optional>\n#include <set>\n#include <string>\n#include <unordered_map>\n#include <unordered_set>\n#include <utility>\n#include <vector>\n\n#include <stddef.h>\n\nextern bool gconf_ddm_enable_omni_reparse_on_updates;\nextern bool gconf_enable_ddm;\nextern bool gconf_enable_ddm_case_sensitive_guc_check;\nextern bool gconf_enable_lf_alp;\nextern bool gconf_enable_logging_for_ddm_applied_masking_policy;", "mimetype": "text/plain", "start_char_idx": 1489, "end_char_idx": 1969, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3bd14241-8a7d-4320-8c9a-810826853061": {"__data__": {"id_": "3bd14241-8a7d-4320-8c9a-810826853061", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4cbf960c-2947-4057-b24d-3670bcd117ea", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7fb22a7c8f3aabb30eb7a8688f9a98af17fc32ad3e47a3452bcee44b73eb3013", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70c773d4-0954-4918-809a-194f0cddd4e3", "node_type": "1", "metadata": {}, "hash": "1b49bcde5629a036490654e0d87e32c5b7ecd1a1089a32f56dce6b81dd76ef26", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm", "mimetype": "text/plain", "start_char_idx": 1971, "end_char_idx": 1984, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "70c773d4-0954-4918-809a-194f0cddd4e3": {"__data__": {"id_": "70c773d4-0954-4918-809a-194f0cddd4e3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3bd14241-8a7d-4320-8c9a-810826853061", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "332b592b18030e13437faa5f98e731e71d98f153cbaab7df4295e7e297b14cc3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4250423c-35f8-4352-89b6-a2aa9f0ed03a", "node_type": "1", "metadata": {}, "hash": "63e8fe2f2b8efe8877074b29e6f4bb5f2cf9d61c6f7c78d0a0b73b424bff2136", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n// Flags used for the query_tree_mutator for both initial traversal,\n// and traversing subqueries.\nconst unsigned int kDDMMutatorFlags =\n    (QTW_WALK_RELATIONS ^ QTW_DONT_COPY_NODE ^ QTW_WALK_RTE_SUBQUERY);\n\n// Flags used for the query_tree_walker when marking relations as having ddm.\nconst unsigned int kMarkWalkerFlag =\n    (QTW_WALK_RELATIONS ^ QTW_WALK_RTE_SUBQUERY);\n\n/// Struct to manage context for RTE permission push down.\nstruct RTEPermPushDownContext {\n  /// source_rte who's permissions are pushed down.\n  RangeTblEntry* source_rte = nullptr;\n};\n\n/// Struct representing the context for view definition push down.\nstruct ViewPushDownContext {\n  /// The source_rte representing rewritten view.\n  RangeTblEntry* view_rte;\n  /// view_rte original relid.\n  Oid view_rte_original_relid;\n  /// Rewritten view query.\n  Query* view_query;\n  /// Count of view subquery push down.\n  int push_down_count = 0;\n};", "mimetype": "text/plain", "start_char_idx": 1985, "end_char_idx": 2902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4250423c-35f8-4352-89b6-a2aa9f0ed03a": {"__data__": {"id_": "4250423c-35f8-4352-89b6-a2aa9f0ed03a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "70c773d4-0954-4918-809a-194f0cddd4e3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b244f66b25c25555251b64ab18252d28010c6da6d4e3542246643a5c175443d6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1193f819-983f-44a6-8d4c-439afee4cd40", "node_type": "1", "metadata": {}, "hash": "6329383aed92302ffd2c24a591647d885534eb92c2abe81505a93b0554334831", "class_name": "RelatedNodeInfo"}}, "text": "namespace", "mimetype": "text/plain", "start_char_idx": 1971, "end_char_idx": 1980, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1193f819-983f-44a6-8d4c-439afee4cd40": {"__data__": {"id_": "1193f819-983f-44a6-8d4c-439afee4cd40", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4250423c-35f8-4352-89b6-a2aa9f0ed03a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "062004f6c0a6c5e0fe2a39f1c838697ff3cd90b131fd73695198a6c5c007f43a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "24dab265-8a49-46c8-8e1f-34c5b1b1f9b3", "node_type": "1", "metadata": {}, "hash": "4ca1ccdbb42b2afe902fea6cc710e3028ae99d8b891b3b4203c42d6253873ef4", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n/// Rewrites the provided node. Leverages caches to avoid repeating work.\n/// Will rewrite any node which has the following.\n///\n/// 1. A RangeTblEntry*\n/// 2. rte->has_ddm_rewrite is true (set during query parsing).\n///\n/// The resulting RTE will preserve Alias's and other RTE information.\n/// @param[in] Node* node - node to be rewritten.\n/// @param[in] void* context - RewriteMutatorContext which is used to represent\n/// cached data.\n/// @return Node - The node to include in the mutated tree.\n/// @throws ereport - If a masking policy cannot be built for the associated\n/// query\nNode* RewriteMutator(Node* node, void* context);\n\n/// Deparses the given query q and reparses again using OMNI.\n/// @param[in] q query to reparse using OMNI.\n/// @return Query* reparsed using OMNI.\nQuery* ReparseOmniQuery(Query* q);\n\n/// Checks if there exist such case where a joinaliasvar entry from the given\n/// rte_join_list of RTE_JOINs and an entry in result_relation_indexes refer\n/// to the same target relation / target relation alias.\n/// @param[in] rte_join_list Vector containing RangeTblEntry* entries of kind\n/// RTE_JOIN.\n/// @param[in] result_relation_indexes Set containing the indexes of RTEs that\n/// refer to result relation / result result relation alias.\n/// @return true if a joinaliasvar entry refers to a target relation / target\n/// relation alias.", "mimetype": "text/plain", "start_char_idx": 2914, "end_char_idx": 4278, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "24dab265-8a49-46c8-8e1f-34c5b1b1f9b3": {"__data__": {"id_": "24dab265-8a49-46c8-8e1f-34c5b1b1f9b3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1193f819-983f-44a6-8d4c-439afee4cd40", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c3f1a149b5ce81ecf76a17dd9d4a0dfce9b3aa2ed567df7a7a1c9fa19c3ee86e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3c8daac1-7b83-4809-a17f-9183586d3b0b", "node_type": "1", "metadata": {}, "hash": "23541826fff4da7b06fd6aa8c86079483ad3b314b6d86c3f2684eca447ef8ac5", "class_name": "RelatedNodeInfo"}}, "text": "bool JoinaliasvarHasTargetRelation(\n    std::vector<RangeTblEntry*> rte_join_list,\n    std::unordered_set<Index> result_relation_indexes);\n\n/// Private Walker for pushing down permissions to nested RTEs.\nbool RTEPermissionsPushdownWalker(Node* node, void* context) {\n  if (node == nullptr) {\n    return false;\n  }\n\n  if (IsA(node, RangeTblEntry)) {\n    XCHECK(context != nullptr);\n    auto ctx = reinterpret_cast<RTEPermPushDownContext*>(context);\n    RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(node);\n    if (GetRelationRelid(rte) == GetRelationRelid(ctx->source_rte)) {\n      RangeTblEntry* source_rte = ctx->source_rte;\n      rte->requiredPerms = source_rte->requiredPerms;\n      rte->checkAsUser = source_rte->checkAsUser;\n      rte->selectedCols = bms_copy(source_rte->selectedCols);\n      rte->updatedCols = bms_copy(source_rte->updatedCols);\n    }\n    return false;\n\n  } else if (IsA(node, Query)) {\n    return query_tree_walker(reinterpret_cast<Query*>(node),\n                             RTEPermissionsPushdownWalker, context,\n                             QTW_WALK_RELATIONS);\n  }\n\n  return expression_tree_walker(node, RTEPermissionsPushdownWalker, context);\n}\n\n/// Walker responsible for pushing down unfolded view subquery. In\n/// the case of a view, we first rewrite the query as SELECT user_mask FROM\n/// view_def followed by a request SELECT user_mask FROM (unfolded_view).\n/// This walker takes care of pushing the unfolded view definition into any", "mimetype": "text/plain", "start_char_idx": 4279, "end_char_idx": 5754, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3c8daac1-7b83-4809-a17f-9183586d3b0b": {"__data__": {"id_": "3c8daac1-7b83-4809-a17f-9183586d3b0b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "24dab265-8a49-46c8-8e1f-34c5b1b1f9b3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5888b316871777b7296cb68008ee03c169ac99a21af90bf8957f2a535036e7b8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6529f9db-5104-4ce1-8083-92655ba0c03f", "node_type": "1", "metadata": {}, "hash": "ccbe6bc03287a6d82448d0b1eaea38f5e2a31b027406b413e07b106d1d659949", "class_name": "RelatedNodeInfo"}}, "text": "/// nested view reference.\nbool ViewPushdownWalker(Node* node, void* context) {\n  if (node == nullptr) {\n    return false;\n  }\n\n  if (IsA(node, RangeTblEntry)) {\n    XCHECK(context != nullptr);\n    auto ctx = reinterpret_cast<ViewPushDownContext*>(context);\n    RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(node);\n    Oid rte_relid = GetRelationRelid(rte);\n    if (OidIsValid(rte_relid) && rte_relid == ctx->view_rte_original_relid) {\n      XCHECK(ctx->view_query != nullptr);\n      rte->subquery = copyObject(ctx->view_query);\n      // If rte kind is RTE_RELATION, we need to set the kind to RTE_SUBQUERY\n      // as we are setting the view_query as rte's subquery.\n      if (rte->rtekind == RTE_RELATION) {\n        rte->rtekind = RTE_SUBQUERY;\n      }\n      rte->has_ddm_rewrite = false;\n      ctx->push_down_count = ctx->push_down_count + 1;\n    }\n    return false;\n\n  } else if (IsA(node, Query)) {\n    return query_tree_walker(reinterpret_cast<Query*>(node), ViewPushdownWalker,\n                             context, QTW_WALK_RELATIONS);\n  }\n\n  return expression_tree_walker(node, ViewPushdownWalker, context);\n}\n\n/// For all relation types, distinct applied policies and SQL command types,\n/// this method logs an entry into stl_applied_masking_policy table.\n/// @param RelAttachments attachments - Cached Attachments for the current query\n/// which consists all the applied attachments/policies.\n/// @return Logs an entry into stl_applied_masking_policy table.", "mimetype": "text/plain", "start_char_idx": 5755, "end_char_idx": 7231, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6529f9db-5104-4ce1-8083-92655ba0c03f": {"__data__": {"id_": "6529f9db-5104-4ce1-8083-92655ba0c03f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3c8daac1-7b83-4809-a17f-9183586d3b0b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d73941430505a95ab8912728bec0269c31df9a55cd80892216d475368f697f55", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bfcc8e4a-9cbe-4850-abd8-6f4c041a9634", "node_type": "1", "metadata": {}, "hash": "0d5a5562a22f0016cbe26a91a3788e152d32766497dc97340ce93231cb2a692a", "class_name": "RelatedNodeInfo"}}, "text": "void LogDDMAppliedPolicies(RelAttachments attachments) {\n  int64 recordtime = current_micro_time();\n  int64_t query_id = get_current_user_query_id();\n  const UserQueryInfo& qinfo = GetUserQueryInfo(query_id);\n  std::set<Oid> polids;\n  for (auto attachment : attachments) {\n    MaskMap masks =\n        BuildMaskMap(attachment.second, {} /* obj_transform_alp_ctx */);\n    for (auto merge_entries : masks) {\n      for (auto merge_entry : merge_entries.second) {\n        polids.insert(merge_entry.attachment->pol.pol.polid);\n      }\n    }\n    const char* ddm_relkind = nullptr;\n    char relkind = get_rel_relkind(attachment.first);\n    if (relkind == RELKIND_RELATION) {\n      // Local table.\n      ddm_relkind = GetRelationKindName(RELKIND_RELATION);\n    } else if (relkind == RELKIND_VIEW) {\n      // Local view.\n      ddm_relkind = GetRelationKindName(get_view_kind(attachment.first));\n    }\n    PGCHECK(ddm_relkind != nullptr, \"Relation is invalid.\");\n    for (auto polid : polids) {\n      // Log the information in system table.\n      stl_applied_masking_policy_rec::log(\n          polid, GetUserId(), recordtime, GetMyExposedPid(),\n          GetCurrentTransactionIdIfAny(), qinfo.query_id, MyDatabaseId,\n          attachment.first /* relid */, ddm_relkind);\n    }\n  }\n}\n\n/// TODO(bogatov): VarAdjustMutator in ddm_over_nested file is a more robust\n/// version of this.\n/// Mutator which adjusts varlevelsup to be equal to the depth", "mimetype": "text/plain", "start_char_idx": 7232, "end_char_idx": 8665, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bfcc8e4a-9cbe-4850-abd8-6f4c041a9634": {"__data__": {"id_": "bfcc8e4a-9cbe-4850-abd8-6f4c041a9634", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6529f9db-5104-4ce1-8083-92655ba0c03f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06d5c3b4f1a11551287e85e7f123a4668f961a6b2722f535971ae2bae99b2f98", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d32cb29f-79c1-4662-ab19-f684b7aa87db", "node_type": "1", "metadata": {}, "hash": "04741ecce153b0d96bf5c5f198f8fc940fd7b70e6a260d1f3baf419e831923ed", "class_name": "RelatedNodeInfo"}}, "text": "/// of the context and, updates the varno and varnoold. This change ensures that\n/// vars on the cherry picked masking expressions for UPDATE and DELETE queries\n/// points to the correct rtable in the top level query.\n/// @param Node* node - Node which is being traversed.\n/// @param RewriteMutatorCtx* context - Mutator context containing depth field.\n/// @return bool - Whether to recurse into the node.\n///                For use in expression_tree_walker\nbool VarLevelsUpMutator(Node* node, void* context) {\n  if (node == NULL) return false;\n\n  if (IsA(node, Var)) {\n    auto var = reinterpret_cast<Var*>(node);\n    auto ctx = reinterpret_cast<RewriteMutatorCtx*>(context);\n    /// Only update the mutator when it is the first RTIndex in the masking expr\n    /// subquery.\n    if (var->varno == 1) {\n      var->varlevelsup = ctx->rtables.size() - 1;\n      var->varno = ctx->target_varno;\n      var->varnoold = ctx->target_varno;\n    }\n    return false;\n  }\n\n  return expression_tree_walker(node, VarLevelsUpMutator, context);\n}\n\n/// Builds a Masking policy query from cached attachments.\n/// Stores resulting query in the provided context's queries map.\n/// @param[in] RangeTblEntry* rte - RangeTable to build a masking query for.\n/// @param[in] RewriteMutatorCtx* ctx - Context object tracking cached data.\n/// @return bool - True if Query was built.", "mimetype": "text/plain", "start_char_idx": 8666, "end_char_idx": 10021, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d32cb29f-79c1-4662-ab19-f684b7aa87db": {"__data__": {"id_": "d32cb29f-79c1-4662-ab19-f684b7aa87db", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfcc8e4a-9cbe-4850-abd8-6f4c041a9634", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "db1d867826b71fe623c224771d5100027a9cc9b4f24a741cb27e5f75f939bf63", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "683ebad7-fb86-4a9d-aa3e-c564199ff7f6", "node_type": "1", "metadata": {}, "hash": "75ea440a185dcd87f328fb50b9fd2e1de7de2d6f61557aca8152c654470f918d", "class_name": "RelatedNodeInfo"}}, "text": "bool PopulateQueryFromAttachments(const RangeTblEntry* rte,\n                                  RewriteMutatorCtx* ctx) {\n  std::unordered_map<Oid, std::set<ParsedPolicyAttachment>>::iterator\n      cached_attachments = ctx->attachments.find(GetRelationRelid(rte));\n\n  if (cached_attachments != ctx->attachments.end()) {\n    if (!cached_attachments->second.empty()) {\n      Query* q = MergePolsForRTE(\n          rte, ctx->top_query, cached_attachments->second,\n          ctx->obj_transform_vars,\n          ctx->obj_transform_alp_columns_rel_map[GetRelationRelid(rte)]);\n      ctx->queries.insert(\n          {GetRelationRelid(rte), std::shared_ptr<Query>(q, PAlloc_deleter())});\n    } else {\n      ctx->queries.insert({GetRelationRelid(rte), std::nullopt});\n    }\n    return true;\n  }\n\n  return false;\n}\n\n/// Builds a Masking policy query from source Catalog tables.\n/// Guarantees that each associated policy ID is parsed at most once.\n/// @param[in] RangeTblEntry* rte - RangeTable to build a masking query for.\n/// @param[in] RewriteMutatorCtx* ctx - Context object tracking cached data.\n/// @return bool - True if Query was built.\n/// @throws ereport - If a masking policy cannot be found for the masked\n/// attachment.", "mimetype": "text/plain", "start_char_idx": 10022, "end_char_idx": 11241, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "683ebad7-fb86-4a9d-aa3e-c564199ff7f6": {"__data__": {"id_": "683ebad7-fb86-4a9d-aa3e-c564199ff7f6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d32cb29f-79c1-4662-ab19-f684b7aa87db", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bbcf018753c966032adef8d042803da7274fc08705541a2dd5711ad92e6134ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3dda847f-2316-4d13-a4aa-c7c231edc5cd", "node_type": "1", "metadata": {}, "hash": "898be7e5c86c8b01ab9eaad714b1f26e71f535ab35275b29960715e2ab6c01b0", "class_name": "RelatedNodeInfo"}}, "text": "bool PopulateQueryFromCatalog(const RangeTblEntry* rte,\n                              RewriteMutatorCtx* ctx)", "mimetype": "text/plain", "start_char_idx": 11242, "end_char_idx": 11351, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3dda847f-2316-4d13-a4aa-c7c231edc5cd": {"__data__": {"id_": "3dda847f-2316-4d13-a4aa-c7c231edc5cd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "683ebad7-fb86-4a9d-aa3e-c564199ff7f6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "145dab49c6c78b1e4ecbef252dba254979e0c8aeb548fada4b451429cc51a3af", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bbf2b8b1-7513-4d75-af0f-940abd51b2bf", "node_type": "1", "metadata": {}, "hash": "ab98764c9356e9ae065f3820220f7ff20f8ddf82274b2474065b9d450f4fbbce", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const std::set<Attachment>& attachments = FetchAttachmentsForRel(\n      GetRelationRelid(rte), GetUserId(), std::nullopt /* roleid */);\n  std::set<ParsedPolicyAttachment> parsed_attachments;\n  for (auto attach : attachments) {\n    const std::unordered_map<Oid, ParsedPolicy>::iterator& cached_pol =\n        ctx->policies.find(attach.polid);\n    ParsedPolicy parsed_pol;\n    if (cached_pol != ctx->policies.end()) {\n      parsed_pol = cached_pol->second;\n      attach.pol = cached_pol->second.pol;\n    } else {\n      // First check seclog attachments. They are precompiled.\n      std::optional<Policy> seclog_policy = seclog::GetPolicy(attach.relid);\n      if (seclog_policy) {\n        XCHECK(attach.pol);\n      } else {\n        attach.pol = FetchPolicy(attach.polid);\n      }\n      if (!attach.pol.has_value()) {\n        ereport(ERROR, (errcode(ERRCODE_INTERNAL_ERROR),\n                        \"Could not find policy for mask attachment\"));\n      }\n      parsed_pol = ParsePolicy(attach.pol.value());\n      if (!attach.pol->is_seclog) {\n        // Do not cache SecLog attachments since (1) they are constant lookup,\n        // (2) we cache by Policy ID which is not set for SecLog policies, and\n        // SecLog policy generation does not involve parser.\n        ctx->policies.insert({parsed_pol.pol.polid, parsed_pol});\n      }\n    }\n    parsed_attachments.insert(ParseAttachment(attach, parsed_pol));\n  }\n  ctx->attachments.insert({GetRelationRelid(rte), parsed_attachments});", "mimetype": "text/plain", "start_char_idx": 11352, "end_char_idx": 12835, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bbf2b8b1-7513-4d75-af0f-940abd51b2bf": {"__data__": {"id_": "bbf2b8b1-7513-4d75-af0f-940abd51b2bf", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3dda847f-2316-4d13-a4aa-c7c231edc5cd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4715025611d2ae696b84919c7664128e391e2fed7d97d38bbcfbfa3e5c2027a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "13c1b00c-9b11-4a66-b885-765a07dc9a0e", "node_type": "1", "metadata": {}, "hash": "b97083e5106c3b712de2cd417ea02f26f5bc6ff1f2564d6531658ccee23d4a04", "class_name": "RelatedNodeInfo"}}, "text": "return PopulateQueryFromAttachments(rte, ctx);\n}", "mimetype": "text/plain", "start_char_idx": 12838, "end_char_idx": 12886, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "13c1b00c-9b11-4a66-b885-765a07dc9a0e": {"__data__": {"id_": "13c1b00c-9b11-4a66-b885-765a07dc9a0e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bbf2b8b1-7513-4d75-af0f-940abd51b2bf", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b39558241cdfb9750418e04a11747364321988ebaa464e2556b6d06832dcf6ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f80d767d-1bf0-464e-be51-167d0c323a26", "node_type": "1", "metadata": {}, "hash": "8c5a1ff015787adb841222a4eb864888d02f356fbc8efe781e038a4f46b99cd7", "class_name": "RelatedNodeInfo"}}, "text": "/// Builds Subquery for the given relation. Leverages caches stored in ctx\n/// to build Masking queries. Subquery is built using policies associated\n/// to GetUserId(), and each query, policy, and attachment is parsed once.\n/// @param[in] RangeTblEntry* rte - RangeTable to build a masking query for.\n/// @param[in] RewriteMutatorCtx* ctx - Context object tracking cached data.\n/// @return optional<shared_ptr<Query>> - built query. Empty if there were\n///                                       no attachments.\n/// @throws ereport - If a masking policy cannot be built.", "mimetype": "text/plain", "start_char_idx": 12888, "end_char_idx": 13457, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f80d767d-1bf0-464e-be51-167d0c323a26": {"__data__": {"id_": "f80d767d-1bf0-464e-be51-167d0c323a26", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "13c1b00c-9b11-4a66-b885-765a07dc9a0e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0c81ecd35b55410ad7a8c25a8d50fcce39ac112da642f6de3ce80c01b60b8f19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "609459a5-793c-4796-ac0a-2eef3dacefbe", "node_type": "1", "metadata": {}, "hash": "17aac459b35b2da1ec4c7bf5e08ed2effa02301e0e1499d618c81f239ee84029", "class_name": "RelatedNodeInfo"}}, "text": "std::optional<std::shared_ptr<Query>> BuildSubQueryForRel(\n    const RangeTblEntry* rte, RewriteMutatorCtx* ctx) {\n  Oid relid = GetRelationRelid(rte);\n  XCHECK(OidIsValid(relid));\n\n  // If LF-ALP is defined for RTE, short circuit since LF-ALP and DDM are\n  // currently mutually exclusive.\n  if (gconf_enable_lf_alp && ddm::HasLakeFormationALPForRTE(rte)) {\n    return std::shared_ptr<Query>(\n        MergePolsForRTE(rte, ctx->top_query, {} /* attachments */,\n                        ctx->obj_transform_vars,\n                        ctx->obj_transform_alp_columns_rel_map[relid]),\n        PAlloc_deleter());\n  }\n\n  // First, look for already built queries for the given relid in the local\n  // ctx->queries directly in the context memory.\n  std::unordered_map<Oid, std::optional<std::shared_ptr<Query>>>::iterator\n      cached_query = ctx->queries.find(relid);\n  if (cached_query != ctx->queries.end()) {\n    return cached_query->second;\n  } else if (PopulateQueryFromAttachments(rte, ctx)) {\n    // If queries not found in the context, try to build them from fetched\n    // attachments.\n    cached_query = ctx->queries.find(relid);\n  } else if (PopulateQueryFromCatalog(rte, ctx)) {\n    // Otherwise, fetch the attachment and build the queries from them.\n    cached_query = ctx->queries.find(relid);\n  } else {\n    ereport(ERROR, (errcode(ERRCODE_INTERNAL_ERROR),\n                    \"Could not build masking policies for query\"));\n  }\n\n  return cached_query->second;\n}", "mimetype": "text/plain", "start_char_idx": 13458, "end_char_idx": 14929, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "609459a5-793c-4796-ac0a-2eef3dacefbe": {"__data__": {"id_": "609459a5-793c-4796-ac0a-2eef3dacefbe", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f80d767d-1bf0-464e-be51-167d0c323a26", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0e24a793d9745ed4c6b17839e2991ceeaf3403f7010ee0cf83dc70c725e9090b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f78aeac8-4453-4b8d-9e98-9a439570ff14", "node_type": "1", "metadata": {}, "hash": "cc2484d8abffc24691af758dd3652c0c31fe387f7a2ccee0a9e148048cb69da3", "class_name": "RelatedNodeInfo"}}, "text": "/// Convert DDM protected RTEs into RTE_SUBQUERY. Mutates the node in place.\n/// If the DDM portected RTE already has a subquery, we unfold the DDM inside of\n/// view, store the view subquery and push down the view subquery.\n/// Permission Checks are performed, and the resulting Node has permission\n/// checks disabled. The rational for this approach is described below.\n///\n/// Currently, Redshift uses the following procedure for performing\n/// permission checks.\n///  1. Evaluate permissions in-line QueryRewriteAllWithOptions.\n///  2. (Optional) During RLS Rewriting.\n///  3. At Query Planning time.\n/// As OmniSQL reparses the query, it's impossible to carry definer\n/// permissions for views, RLS, or DDM policies permissions past OmniSQL.\n/// The current solution to this problem is for each component to call\n/// CheckRTEPermissions to check permissions,\n/// followed either by a call to DisableRTEPermCheck or a boolean passthrough on\n/// disable_permission_checks in QueryRewriteAll. This approach is secure,\n/// however caution must be exercised to ensure that permissions cannot\n/// leak. In DDM, we return a boolean to QueryRewriteAll and treat DDM\n/// permissions in the same manner as view permissions.\n///\n/// @param[in] Node* node - RTE to be replaced with SubQuery.\n/// @param[in] RewriteMutatorCtx* ctx - Context for the rewrite operation.\n/// @return Node* - rewritten RTE.", "mimetype": "text/plain", "start_char_idx": 14931, "end_char_idx": 16325, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f78aeac8-4453-4b8d-9e98-9a439570ff14": {"__data__": {"id_": "f78aeac8-4453-4b8d-9e98-9a439570ff14", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "609459a5-793c-4796-ac0a-2eef3dacefbe", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0ef80c2f4ca9a2cc8aed490f5acc108902120c929047edfe9e3d9c5b3d99f727", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa1a4e08-836b-4aa7-a32b-5df73689e70d", "node_type": "1", "metadata": {}, "hash": "8bba17a92f5736b2e91d77dc3041b0000c94f17b46e84fcb7efa9fceb1cdeac6", "class_name": "RelatedNodeInfo"}}, "text": "Node* MutateRTE(Node* node, RewriteMutatorCtx* ctx)", "mimetype": "text/plain", "start_char_idx": 16326, "end_char_idx": 16377, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aa1a4e08-836b-4aa7-a32b-5df73689e70d": {"__data__": {"id_": "aa1a4e08-836b-4aa7-a32b-5df73689e70d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f78aeac8-4453-4b8d-9e98-9a439570ff14", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "db6603c4c5f598e18af79c0124f1d414975d0f78d0203e713edb9deb7839603c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "09d52dd5-7643-4bef-9a2c-b575f375b18f", "node_type": "1", "metadata": {}, "hash": "f24e4041eff526920aabefa67911e7373459e4947aa01996bc7f274f25c09a45", "class_name": "RelatedNodeInfo"}}, "text": "{\n  XCHECK(ctx != nullptr, DDM_CALLER);\n  XCHECK(node != nullptr, DDM_CALLER);\n  XCHECK(IsA(node, RangeTblEntry), DDM_CALLER);\n\n  auto rte = reinterpret_cast<RangeTblEntry*>(node);\n  std::optional<Query*> view_sub_query;\n\n  /// Ignore mutating placeholder RTE entries added during view rewrite.\n  if (rte->eref != NULL && (strcmp(rte->eref->aliasname, \"*OLD*\") == 0 ||\n                            strcmp(rte->eref->aliasname, \"*NEW*\") == 0)) {\n    return reinterpret_cast<Node*>(rte);\n  }\n\n  if (rte->subquery != nullptr) {\n    /// This is unfolding DDM inside of views. We are storing the view subquery\n    /// because BuildSubQueryForRel below will build a DDM subquery that\n    /// contains a view reference instead of the view's subquery.\n    ctx->rtables.push_back(rte->subquery->rtable);\n    rte->subquery = reinterpret_cast<Query*>(query_tree_mutator(\n        rte->subquery, RewriteMutator, ctx, kDDMMutatorFlags));\n    ctx->rtables.pop_back();\n    view_sub_query = rte->subquery;\n  }", "mimetype": "text/plain", "start_char_idx": 16378, "end_char_idx": 17369, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "09d52dd5-7643-4bef-9a2c-b575f375b18f": {"__data__": {"id_": "09d52dd5-7643-4bef-9a2c-b575f375b18f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aa1a4e08-836b-4aa7-a32b-5df73689e70d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1c97410f011b2098d6aacf4cc280400cd8ad0fefd6465c258ea92981b2947a41", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "03808316-69c8-4d7e-849c-92283279942e", "node_type": "1", "metadata": {}, "hash": "1a585c1128a2cfcbbe021f24214346077878a273ad605daa0759a67d232589d9", "class_name": "RelatedNodeInfo"}}, "text": "if (rte->has_ddm_rewrite)", "mimetype": "text/plain", "start_char_idx": 17373, "end_char_idx": 17398, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "03808316-69c8-4d7e-849c-92283279942e": {"__data__": {"id_": "03808316-69c8-4d7e-849c-92283279942e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "09d52dd5-7643-4bef-9a2c-b575f375b18f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "71f56b2500e155217e2ca54fa497faa63ed3e88632e49a249ca87bbfebd19a3b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02d4987d-8c31-46bb-bf58-87223a735b3c", "node_type": "1", "metadata": {}, "hash": "ff7bf4e3c810275d36c769bfd172b96205526036a89373c4e44d30bed8924f51", "class_name": "RelatedNodeInfo"}}, "text": "{\n    if (gconf_enable_ddm_case_sensitive_guc_check &&\n        !seclog::HasAttachment(GetRelationRelid(rte)) &&\n        CheckCaseSensitiveGucsChanged()) {\n      // Note, seclog::HasAttachment means RTE is SecLog-governed and thus\n      // cannot have regular DDM policies.\n      ereport(\n          ERROR,\n          (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n           errmsg(\n               \"DDM protected relation does not support session level config \"\n               \"on case sensitivity being different from its default value.\")));\n    }\n\n    // When parsing we set has_ddm_rewrite if there is any attachment on the\n    // rel. This is necessary to enforce Executor privilege views as\n    // currently all views are unfolded with view owner as the current user\n    // id. When we do permission checks on a per-user basis, this can lead to\n    // an empty attachment set for the RTE which we model as an optional sub\n    // query.\n    std::optional<std::shared_ptr<Query>> q_opt = BuildSubQueryForRel(rte, ctx);", "mimetype": "text/plain", "start_char_idx": 17399, "end_char_idx": 18412, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "02d4987d-8c31-46bb-bf58-87223a735b3c": {"__data__": {"id_": "02d4987d-8c31-46bb-bf58-87223a735b3c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "03808316-69c8-4d7e-849c-92283279942e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d0baa39231043d5c17c19205ad614df534d4b856dccfbc9410a2591f124d0d5e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b5780323-d8dd-433b-8ef8-881ed7ffca66", "node_type": "1", "metadata": {}, "hash": "a6f52fc16af84c58bd60671820e9d18b43e25116a8babda71e6e3383f38b6114", "class_name": "RelatedNodeInfo"}}, "text": "if (q_opt)", "mimetype": "text/plain", "start_char_idx": 18417, "end_char_idx": 18427, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b5780323-d8dd-433b-8ef8-881ed7ffca66": {"__data__": {"id_": "b5780323-d8dd-433b-8ef8-881ed7ffca66", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "02d4987d-8c31-46bb-bf58-87223a735b3c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b552fb9d24f2efc752fa12f4b1eab86284d28e45d61d54959e3dd54b1f314ac2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "04133bbc-2b6e-47b3-93ca-08f4775c5b80", "node_type": "1", "metadata": {}, "hash": "35f178cd8d143ef189b88bb5b51be2b95d8e755150e1fccf77152bf442ccd815", "class_name": "RelatedNodeInfo"}}, "text": "{\n      Query* q = copyObject(q_opt->get());\n      // Check Permissions on DDM subquery. First push down permissions from\n      // parent RTE, then apply CheckRTEPermissions. This approach avoids any\n      // risk that the query contains objects that the user should not have\n      // access to - such as the case when a lookup table's permissions are\n      // revoked from the policy.\n\n      RTEPermPushDownContext push_down_ctx = {rte /* source_rte */};\n      query_tree_walker(q, RTEPermissionsPushdownWalker, &push_down_ctx,\n                        QTW_WALK_RELATIONS);\n      CheckRTEPermissions(q);\n      ctx->ddm_applied = true;\n      XCHECK(q != NULL, DDM_CALLER);\n      // After we set view RTE Subquery with masking query, we may not have\n      // the placeholder view old rte for getting view relid. We get the\n      // RTE relid before setting the masking query as subquery.\n      Oid rte_relid = GetRelationRelid(rte);\n      rte->subquery = q;\n      rte->rtekind = RTE_SUBQUERY;\n      rte->has_ddm_rewrite = false;\n\n      // Push down view subquery.", "mimetype": "text/plain", "start_char_idx": 18428, "end_char_idx": 19489, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "04133bbc-2b6e-47b3-93ca-08f4775c5b80": {"__data__": {"id_": "04133bbc-2b6e-47b3-93ca-08f4775c5b80", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b5780323-d8dd-433b-8ef8-881ed7ffca66", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6e90a64e1d8260cda5adbe9d067b0fe075e41d5f7c01e725c8577040b5eccc1e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a391d3c2-7219-48f3-ae4c-6cd7188eafc3", "node_type": "1", "metadata": {}, "hash": "d4feea42c51125f5c9c241f5ddc4b99dff248ed4bbf5a0ede6826883f365b86d", "class_name": "RelatedNodeInfo"}}, "text": "if (view_sub_query) {\n        // To push down unfolded view, when view kind is regular view,\n        // traversing of QTW_WALK_RELATIONS is required. When view kind is LBV\n        // traversing of QTW_WALK_RTE_SUBQUERY and ignoring\n        // QTW_IGNORE_RT_SUBQUERIES is required.\n        ViewPushDownContext view_pushdown_ctx = {rte, rte_relid,\n                                                 *view_sub_query};\n        query_tree_walker(rte->subquery, ViewPushdownWalker, &view_pushdown_ctx,\n                          QTW_WALK_RELATIONS ^ QTW_WALK_RTE_SUBQUERY ^\n                              QTW_IGNORE_RT_SUBQUERIES);\n        XCHECK(view_pushdown_ctx.push_down_count == 1, DDM_CALLER);\n      }\n    }", "mimetype": "text/plain", "start_char_idx": 19496, "end_char_idx": 20199, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a391d3c2-7219-48f3-ae4c-6cd7188eafc3": {"__data__": {"id_": "a391d3c2-7219-48f3-ae4c-6cd7188eafc3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "04133bbc-2b6e-47b3-93ca-08f4775c5b80", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "daf41a0258f4b60fd4a01226530f0a999d9e79f0ff2f1d31e3bf17b4b1311665", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "286ea94b-c40a-4618-acfd-4a9b924aa11e", "node_type": "1", "metadata": {}, "hash": "06ab706104a9c6a1f20e94737752cf54a1cf3f012d32ff3aedda09e229d45604", "class_name": "RelatedNodeInfo"}}, "text": "rte->has_ddm_rewrite = false;\n  }", "mimetype": "text/plain", "start_char_idx": 20204, "end_char_idx": 20237, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "286ea94b-c40a-4618-acfd-4a9b924aa11e": {"__data__": {"id_": "286ea94b-c40a-4618-acfd-4a9b924aa11e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a391d3c2-7219-48f3-ae4c-6cd7188eafc3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e405c3348cc22cd5b4bf70c48e51d5cb9c3e44abcac754aa2433e4834345e266", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "67ccef92-7afc-466c-b54a-ccd75a2c7c0b", "node_type": "1", "metadata": {}, "hash": "49d1cc632ff79bacdb89c866389130cd7fd5bffd191622236c8002796dd3ec31", "class_name": "RelatedNodeInfo"}}, "text": "return reinterpret_cast<Node*>(rte);\n}", "mimetype": "text/plain", "start_char_idx": 20241, "end_char_idx": 20279, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "67ccef92-7afc-466c-b54a-ccd75a2c7c0b": {"__data__": {"id_": "67ccef92-7afc-466c-b54a-ccd75a2c7c0b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "286ea94b-c40a-4618-acfd-4a9b924aa11e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ff677ea0610c6882bcde0d5c2bea51921c870906366ded0c110174c4e600eb2b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "81b273de-bb09-4aed-896c-12c4d518f515", "node_type": "1", "metadata": {}, "hash": "4cc2acb6d8acfd60b0086955ab12a641e362a9789f9e66ddf7e2d235eed108c9", "class_name": "RelatedNodeInfo"}}, "text": "/// To avoid a nested loop join. We do not rewrite rtable when it is the\n/// target of a Delete or update statement. Instead we cherry pick the\n/// expressions from the masking policy and attach them to each var. We\n/// validate that we have the correct number of varlevelsup vs. depth to\n/// ensure we are only rewriting references to the result ref.\n/// @param[in] Node* node - node to be rewritten.\n/// @param[in] RewriteMutatorCtx* ctx - context to use for rewrite.\n/// return Node* - rewritten node.", "mimetype": "text/plain", "start_char_idx": 20281, "end_char_idx": 20785, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "81b273de-bb09-4aed-896c-12c4d518f515": {"__data__": {"id_": "81b273de-bb09-4aed-896c-12c4d518f515", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67ccef92-7afc-466c-b54a-ccd75a2c7c0b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ef26ff1bd0a8abdcb3ca41b9de759b98d6c54ef172a4c55743b4d3d2cc3c866b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ff73723-467c-4337-be84-9280c5b744a7", "node_type": "1", "metadata": {}, "hash": "4b1e02286cbd8bf1b754b1b15ac2b65e9698d9c3d39aa63de2376fee9f20b184", "class_name": "RelatedNodeInfo"}}, "text": "Node* MutateVar(Node* node, RewriteMutatorCtx* ctx) {\n  XCHECK(IsA(node, Var), DDM_CALLER);\n  XCHECK(ctx != nullptr, DDM_CALLER);\n  XCHECK(node != nullptr, DDM_CALLER);\n\n  auto var = reinterpret_cast<Var*>(node);\n\n  // Since MutateVar is only meant to be used in UPDATE and DELETE queries, we\n  // ensure that the following processing logic applies only to variables of\n  // result relation or result relation alias.\n  if (ctx->result_relation_indexes.count(var->varno - 1) &&\n      ctx->rewrite_result_refs &&\n      (ctx->rtables.size() - 1) == var->varlevelsup) {\n    RangeTblEntry* rte = rt_fetch(var->varno, ctx->rtables[0]);\n    ctx->target_varno = var->varno;\n\n    std::optional<std::shared_ptr<Query>> sub_query_opt =\n        BuildSubQueryForRel(rte, ctx);\n    if (sub_query_opt) {\n      Query* sub_query = copyObject(sub_query_opt->get());\n      TargetEntry* mask_tgt = copyObject(reinterpret_cast<TargetEntry*>(\n          lfirst(list_nth_cell(sub_query->targetList, var->varattno - 1))));\n      /// We walk the TargetEntry and replace result rtable references with\n      /// the correct depth.\n      expression_tree_walker(reinterpret_cast<Node*>(mask_tgt),\n                             VarLevelsUpMutator, ctx);\n\n      // Will apply SUPER navigation only if applicable.\n      return MakePartiQLNavigationPath(var,\n                                       reinterpret_cast<Node*>(mask_tgt->expr));\n    }\n  }\n  return node;\n}", "mimetype": "text/plain", "start_char_idx": 20786, "end_char_idx": 22217, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ff73723-467c-4337-be84-9280c5b744a7": {"__data__": {"id_": "6ff73723-467c-4337-be84-9280c5b744a7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "81b273de-bb09-4aed-896c-12c4d518f515", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8770c6e8112254984e3b4b0d758ee0f24dc952ab9c6fd5dda51fd13c6a0bb132", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "540cac75-5225-4aca-8f1b-34cba9800cb8", "node_type": "1", "metadata": {}, "hash": "e0175fa259f445071fdb4b8c3e1f840479e35633ae10135b560ebe712c50dd57", "class_name": "RelatedNodeInfo"}}, "text": "/// Rewrites the provided node. Leverages caches to avoid repeating work.\n/// Will rewrite any node which has the following.\n///\n/// 1. A RangeTblEntry*\n/// 2. rte->has_ddm_rewrite is true (set during query parsing).\n/// 3. rte->rtekind is not RTE_SUBQUERY.\n///\n/// The resulting RTE will preserve Alias's and other RTE information.\n/// @param[in] Node* node - node to be rewritten.\n/// @param[in] void* context - RewriteMutatorContext which is used to represent\n/// cached data.\n/// @return Node - The node to include in the mutated tree.\n/// @throws ereport - If a masking policy cannot be built for the associated\n/// query", "mimetype": "text/plain", "start_char_idx": 22219, "end_char_idx": 22845, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "540cac75-5225-4aca-8f1b-34cba9800cb8": {"__data__": {"id_": "540cac75-5225-4aca-8f1b-34cba9800cb8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ff73723-467c-4337-be84-9280c5b744a7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1e67a620a18fbab6ad79dfabc1c12f2d3a036a90d1ddbf5a37bd0d18cf652d73", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "74005b6a-051d-46af-a9b0-0c192cc07c4e", "node_type": "1", "metadata": {}, "hash": "661598f787a84d3acea6c96299076fdd395693c56ede87f72af7182fc8ca38ce", "class_name": "RelatedNodeInfo"}}, "text": "Node* RewriteMutator(Node* node, void* context) {\n  auto ctx = reinterpret_cast<RewriteMutatorCtx*>(context);\n\n  if (node == nullptr) return node;\n\n  if (IsA(node, RangeTblEntry)) return MutateRTE(node, ctx);\n\n  if (IsA(node, Query)) {\n    auto input_q = reinterpret_cast<Query*>(node);\n    ctx->rtables.push_back(input_q->rtable);\n    Query* result =\n        query_tree_mutator(input_q, RewriteMutator, context, kDDMMutatorFlags);\n    ctx->rtables.pop_back();\n    // This invariant is required by omni.\n    XCHECK(input_q == result, DDM_CALLER);\n    return reinterpret_cast<Node*>(result);\n  }\n\n  if (IsA(node, Var)) {\n    if (ctx->cmd_type == CMD_UPDATE || ctx->cmd_type == CMD_DELETE) {\n      return MutateVar(node, ctx);\n    } else {\n      return MutateNestedVar(reinterpret_cast<Var*>(node), ctx);\n    }\n  }\n\n  return expression_tree_mutator_with_flags(node, RewriteMutator, context,\n                                            kDDMMutatorFlags);\n}\n\nQuery* ReparseOmniQuery(Query* q) {\n  std::string sql_omni = omnisql::PrintSQL(omnisql::TranslateQuery(q));\n  List* reparsed_list = omnisql::ReparseSQL(\n      sql_omni.c_str(), const_cast<Query*>(q), LOG_TAG_DDM, ParseTypeDDM);\n\n  XCHECK(list_length(reparsed_list) == 1, DDM_CALLER);\n  Query* omni_reparsed = reinterpret_cast<Query*>(linitial(reparsed_list));\n  omnisql::RestoreQuery(q, omni_reparsed);\n  return omni_reparsed;\n}", "mimetype": "text/plain", "start_char_idx": 22846, "end_char_idx": 24229, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "74005b6a-051d-46af-a9b0-0c192cc07c4e": {"__data__": {"id_": "74005b6a-051d-46af-a9b0-0c192cc07c4e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "540cac75-5225-4aca-8f1b-34cba9800cb8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5f6d0bb2934fc7d39d1aecf620a369ce930ef720a66a37257dcedf03b60683dc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "879fc715-3760-4c87-a625-5f2d5191f6d3", "node_type": "1", "metadata": {}, "hash": "1e6bddafe200e95d7f35239dd0c240cc221df129ffd75e25aec698e79e5d7efc", "class_name": "RelatedNodeInfo"}}, "text": "bool JoinaliasvarHasTargetRelation(\n    std::vector<RangeTblEntry*> rte_join_list,\n    std::unordered_set<Index> result_relation_indexes) {\n  for (RangeTblEntry* rte_join : rte_join_list) {\n    XCHECK(rte_join != nullptr, DDM_CALLER);\n    XCHECK(rte_join->rtekind == RTE_JOIN, DDM_CALLER);\n    if (rte_join->joinaliasvars == nullptr) continue;\n\n    ListCell* lc;\n    foreach(lc, rte_join->joinaliasvars) {\n      Var* var = reinterpret_cast<Var*>(lfirst(lc));\n      XCHECK(var != nullptr, DDM_CALLER);\n      XCHECK(IsA(var, Var), DDM_CALLER);\n\n      // Result relation index value 'x' and var with varno 'x-1' refer to\n      // same target relation / target relation alias.\n      if (result_relation_indexes.count(var->varno - 1)) return true;\n    }\n  }\n\n  return false;\n}\n}", "mimetype": "text/plain", "start_char_idx": 24231, "end_char_idx": 25004, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "879fc715-3760-4c87-a625-5f2d5191f6d3": {"__data__": {"id_": "879fc715-3760-4c87-a625-5f2d5191f6d3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "74005b6a-051d-46af-a9b0-0c192cc07c4e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9a95c62c8b5305afd2a2bf93e088a99c55a3a318b0756484c7da1137d3a43024", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8544d516-e35e-4195-971d-e776a92232fd", "node_type": "1", "metadata": {}, "hash": "7e732ecd0c3be4e767ba6b0b572c469d24fb53322a5e4204e7cfcf31dec8eb21", "class_name": "RelatedNodeInfo"}}, "text": "// namespace", "mimetype": "text/plain", "start_char_idx": 25006, "end_char_idx": 25018, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8544d516-e35e-4195-971d-e776a92232fd": {"__data__": {"id_": "8544d516-e35e-4195-971d-e776a92232fd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "879fc715-3760-4c87-a625-5f2d5191f6d3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c66329dea7370f352b5e8f564085cf46a44b3bcca154d54da82dca574bc18556", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "42a806be-e7a2-4f98-9f7e-6baae6172b0c", "node_type": "1", "metadata": {}, "hash": "0f6618938dc88edf852d6730c5e85873d5ac17079b81e837937b527d6f4dc6a4", "class_name": "RelatedNodeInfo"}}, "text": "RewriteResult RewriteQuery(Query* q, bool log_applied_policy)", "mimetype": "text/plain", "start_char_idx": 25020, "end_char_idx": 25081, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42a806be-e7a2-4f98-9f7e-6baae6172b0c": {"__data__": {"id_": "42a806be-e7a2-4f98-9f7e-6baae6172b0c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8544d516-e35e-4195-971d-e776a92232fd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6a4c62c247e45bcc41a8459e9f38ba35ce19ec199492fdc87af05fdb5d52a560", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "309049f6-139b-4230-a1be-58de154a5769", "node_type": "1", "metadata": {}, "hash": "aa78ea317e044452bbd568ac985b3fe6682a044311a8b41bd949528ff8f49875", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // We operate on the same command types across DDM and RLS for now.\n  if (!gconf_enable_ddm ||\n      !policy::IsSecureRewriteEnabledCommand(q->commandType)) {\n    return {false /* ddm_applied */, q /* rewrite */};\n  }\n  RewriteMutatorCtx ctx;\n  std::vector<RangeTblEntry*> rte_join_list;\n  bool omni_reparse_required = false;\n  ctx.top_query = q;\n\n  ctx.cmd_type = q->commandType;\n  ctx.rtables.push_back(q->rtable);\n  ctx.log_applied_policy = log_applied_policy;\n  ctx.result_relation_indexes.insert(q->resultRelation - 1);", "mimetype": "text/plain", "start_char_idx": 25082, "end_char_idx": 25610, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "309049f6-139b-4230-a1be-58de154a5769": {"__data__": {"id_": "309049f6-139b-4230-a1be-58de154a5769", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "42a806be-e7a2-4f98-9f7e-6baae6172b0c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4dec39b221333c3d05fee695ca557c611d6d09d4a0eccf699f1d670a50bc4e2e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8496a818-c52a-4309-8493-8662fd650d97", "node_type": "1", "metadata": {}, "hash": "34e8329f4d87ca5b9a94fcbfc58b7032c991a70b29ae21320f7b0a83a155da49", "class_name": "RelatedNodeInfo"}}, "text": "if (ctx.cmd_type == CMD_UPDATE || ctx.cmd_type == CMD_DELETE ||\n      ctx.cmd_type == CMD_INSERT)", "mimetype": "text/plain", "start_char_idx": 25614, "end_char_idx": 25711, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8496a818-c52a-4309-8493-8662fd650d97": {"__data__": {"id_": "8496a818-c52a-4309-8493-8662fd650d97", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "309049f6-139b-4230-a1be-58de154a5769", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5069ba0b4e87b73463d6457ad27ffaaefec3ef5e53a39cc7db5b87250c1496af", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26dd57fd-c9bd-4166-a3ad-828d3d40f7cb", "node_type": "1", "metadata": {}, "hash": "f24e4041eff526920aabefa67911e7373459e4947aa01996bc7f274f25c09a45", "class_name": "RelatedNodeInfo"}}, "text": "{\n    RangeTblEntry* rte = rt_fetch(q->resultRelation - 1, q->rtable);", "mimetype": "text/plain", "start_char_idx": 25712, "end_char_idx": 25782, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "26dd57fd-c9bd-4166-a3ad-828d3d40f7cb": {"__data__": {"id_": "26dd57fd-c9bd-4166-a3ad-828d3d40f7cb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8496a818-c52a-4309-8493-8662fd650d97", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "135ce179098c020dd41fb83544067208ae99ca01b18bfcaf01975de844fb4c70", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2ae86419-2ace-41ba-8018-5e8cf7cd7adf", "node_type": "1", "metadata": {}, "hash": "c512390962ef429ec37161f297b2cc0788cde952163be5f0215cecd434124de3", "class_name": "RelatedNodeInfo"}}, "text": "if (rte->has_ddm_rewrite)", "mimetype": "text/plain", "start_char_idx": 17373, "end_char_idx": 17398, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2ae86419-2ace-41ba-8018-5e8cf7cd7adf": {"__data__": {"id_": "2ae86419-2ace-41ba-8018-5e8cf7cd7adf", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26dd57fd-c9bd-4166-a3ad-828d3d40f7cb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "71f56b2500e155217e2ca54fa497faa63ed3e88632e49a249ca87bbfebd19a3b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f8833b8-37d0-4a00-b9da-bb6e5f589a63", "node_type": "1", "metadata": {}, "hash": "8f29899fc8d0bbc5d03cbfeadcb625d1de96c640dd62ab3bac88c4d989a741f7", "class_name": "RelatedNodeInfo"}}, "text": "{\n      if (gconf_enable_ddm_case_sensitive_guc_check &&\n          CheckCaseSensitiveGucsChanged()) {\n        ereport(ERROR, (errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n                        errmsg(\"DDM protected relation does not support \"\n                               \"session level config on case sensitivity being \"\n                               \"different from its default value.\")));\n      }\n\n      ctx.rewrite_result_refs = true;\n      // if we are rewriting the result ref, we must apply the permissions check\n      // to the result ref and then inform QueryRewriteAll that we should\n      // disable checks post-omni.\n      ExecCheckRTEPerms(rte, false /* recursive */, false /* clp_only */,\n                        false /* is_materialized_view */,\n                        false /* check_schema_priv_as_view_owner */,\n                        nullptr /* data_sharing_temp_views */);\n      ctx.ddm_applied = true;\n\n      Oid result_rte_relid = GetRelationRelid(rte);\n      XCHECK(OidIsValid(result_rte_relid));\n\n      // We identify all the rtes that are result relation / result relation\n      // alias. We keep track of these rte indexes to only mutate vars that\n      // belong to these rtes during UPDATE.\n      ListCell* rt;\n      Index index = 0;\n      foreach(rt, q->rtable)", "mimetype": "text/plain", "start_char_idx": 25814, "end_char_idx": 27105, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7f8833b8-37d0-4a00-b9da-bb6e5f589a63": {"__data__": {"id_": "7f8833b8-37d0-4a00-b9da-bb6e5f589a63", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2ae86419-2ace-41ba-8018-5e8cf7cd7adf", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "98fc2a97fc5a3cf4fce92726a080061b3e0eceac7c6ba6d9b9961c470faa95f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c794b34-0307-41aa-9fbb-0689391fb537", "node_type": "1", "metadata": {}, "hash": "6d544965f4b14cdb642c099bc5e350363bb60b87ada253bc724ddd87d7f81130", "class_name": "RelatedNodeInfo"}}, "text": "{\n        RangeTblEntry* rte_ptr = reinterpret_cast<RangeTblEntry*>(lfirst(rt));\n\n        if (GetRelationRelid(rte_ptr) == result_rte_relid) {\n          ctx.result_relation_indexes.insert(index);\n          rte_ptr->has_ddm_rewrite = false;\n        }\n\n        if (rte_ptr->rtekind == RTE_JOIN) rte_join_list.push_back(rte_ptr);\n        ++index;\n      }\n\n      // ON UPDATE queries, we perform in place mutation on those vars which\n      // refer to target relation / target relation alias. If UPDATE query\n      // has JOIN condition, MutateVar() also mutates those vars in the\n      // joinaliasvars list of RTE_JOIN that refer to target relation / target\n      // relation alias. In place mutation of such vars results in nested loop\n      // join error in planner. To avoid this,\n      // 1. We mark the query as omni_reparse_required which:\n      //  (a) is an UPDATE statement.\n      //  (b) has DDM protected target relation.\n      //  (c) has joinaliasvar that refers to target relation / target relation\n      //      alias.\n      // 2. Once DDM rewrite is performed, we deparse the marked query and\n      // reparse again using OMNI. Omni avoids nested loop joins by flattening\n      // the query:\n      // (a) OMNI has a query normalization to remove use of join alias vars.\n      // (b) In join tree quals, instead of referring joinaliasvars, OMNI\n      //     directly references relations from the top query along with\n      //     applying the corresponding masking expressions it found from", "mimetype": "text/plain", "start_char_idx": 27106, "end_char_idx": 28610, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c794b34-0307-41aa-9fbb-0689391fb537": {"__data__": {"id_": "6c794b34-0307-41aa-9fbb-0689391fb537", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7f8833b8-37d0-4a00-b9da-bb6e5f589a63", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ffffba86d9a94b665d6c492b2da7e8bc0ad844e2d7fde59996c5c0288598a10b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86def108-ed27-4437-bdb0-5d3d2bdb49f8", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "//     the deparsed query.\n      if (gconf_ddm_enable_omni_reparse_on_updates && !rte_join_list.empty() &&\n          ctx.cmd_type == CMD_UPDATE &&\n          JoinaliasvarHasTargetRelation(rte_join_list,\n                                        ctx.result_relation_indexes)) {\n        omni_reparse_required = true;\n      }\n    }", "mimetype": "text/plain", "start_char_idx": 28617, "end_char_idx": 28942, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86def108-ed27-4437-bdb0-5d3d2bdb49f8": {"__data__": {"id_": "86def108-ed27-4437-bdb0-5d3d2bdb49f8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c794b34-0307-41aa-9fbb-0689391fb537", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c4a1503596d070a49bff722c999fe1d2c1a3836e8d2ded6c6b9e51e02e7c79f0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "013b45f2-5236-4328-b5ff-c25189b821e4", "node_type": "1", "metadata": {}, "hash": "46040b01e7a2cc5b9fa8647a11b4a8ab3f0bc9c3611e29bb391fa5c70759938b", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 2545, "end_char_idx": 2546, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "013b45f2-5236-4328-b5ff-c25189b821e4": {"__data__": {"id_": "013b45f2-5236-4328-b5ff-c25189b821e4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "86def108-ed27-4437-bdb0-5d3d2bdb49f8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6936e89715be20692a6f219c8f38bcbda0ac2e953d2fc780f6aae93c70e50cfd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d7971eb-ca16-4ee7-be9a-0eee8e6e7c08", "node_type": "1", "metadata": {}, "hash": "2c7b2fb0ede3624e0ecb8cdccf28637400168acd41f7a8c91e7f2e1ec49f6d45", "class_name": "RelatedNodeInfo"}}, "text": "ctx.obj_transform_alp_columns_rel_map = WalkVarLevelALP(q);\n\n  ctx.obj_transform_vars = WalkInPlaceNestedVars(q);\n\n  Query* rewrite =\n      query_tree_mutator(q, RewriteMutator, &ctx, kDDMMutatorFlags);\n\n  // Logging of applied masking policy.\n  if (gconf_enable_logging_for_ddm_applied_masking_policy &&\n      ctx.log_applied_policy) {\n    LogDDMAppliedPolicies(ctx.attachments);\n  }\n\n  if (omni_reparse_required) {\n    return {ctx.ddm_applied /* ddm_applied */,\n            ReparseOmniQuery(rewrite) /*rewrite */, true /*omni_reparsed*/};\n  }\n\n  return {ctx.ddm_applied /* ddm_applied */, rewrite /*rewrite */,\n          false /*omni_reparsed*/};\n}", "mimetype": "text/plain", "start_char_idx": 28949, "end_char_idx": 29599, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2d7971eb-ca16-4ee7-be9a-0eee8e6e7c08": {"__data__": {"id_": "2d7971eb-ca16-4ee7-be9a-0eee8e6e7c08", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "013b45f2-5236-4328-b5ff-c25189b821e4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c8ad702de30831a85db3c0a1a82b2af9f1827370b07ca35bb6e0a769f8604d39", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7954adf0-aad6-4670-b13d-e1b04fa8d64d", "node_type": "1", "metadata": {}, "hash": "8c2b46e55152e62a7e5c2bd0c6ac3cfe47d95d9ef446a4d52fa66028b53a2c12", "class_name": "RelatedNodeInfo"}}, "text": "namespace {\nbool MarkDDMWalker(Node* node, void* context) {\n  if (node == nullptr) {\n    return false;\n  }\n\n  if (IsA(node, RangeTblEntry)) {\n    RangeTblEntry* rte = reinterpret_cast<RangeTblEntry*>(node);\n    if (GetRelationRelid(rte) != InvalidOid && HasDDMRewrite(rte)) {\n      rte->has_ddm_rewrite = true;\n    }\n    return false;\n  } else if (IsA(node, Query)) {\n    return query_tree_walker(reinterpret_cast<Query*>(node), MarkDDMWalker,\n                             context, kMarkWalkerFlag);\n  }\n\n  return expression_tree_walker(node, MarkDDMWalker, context);\n}\n\nvoid MarkDDMRelations(Query* q) {\n  query_tree_walker(q, MarkDDMWalker, nullptr, kMarkWalkerFlag);\n}\n}  // namespace\n}", "mimetype": "text/plain", "start_char_idx": 29601, "end_char_idx": 30290, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7954adf0-aad6-4670-b13d-e1b04fa8d64d": {"__data__": {"id_": "7954adf0-aad6-4670-b13d-e1b04fa8d64d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "29de4a8ef210e13809700158027aa2b837f8074ee43130ca9709616b4930847a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d7971eb-ca16-4ee7-be9a-0eee8e6e7c08", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4adb288447b13c696ab998c1f2298adf84f6aa5276fa1a060c0aacd4f54eb6b6", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm\n\nbool RewriteDDM(List* queries, bool log_applied_policy) {\n  if (!gconf_enable_ddm) return false;\n  xen_spin(\"ddm_rewriter\");\n  bool ddm_applied = false;\n  ListCell* query = NULL;\n  foreach(query, queries) {\n    Query* q = reinterpret_cast<Query*>(lfirst(query));\n    int64 query_id = q->queryId;\n    struct HeapMemoryUsageStats entry_usage_stats = {};\n    PG_GET_HEAP_MEM_USAGE_LOG_ENTRY(kRewriteDDMEntry, query_id,\n                                    &entry_usage_stats);\n    ddm::RewriteResult rewrite_result = ddm::RewriteQuery(\n        reinterpret_cast<Query*>(lfirst(query)), log_applied_policy);\n\n    if (rewrite_result.omni_reparsed) {\n      // We are not freeing the old query here. Because the caller\n      // QueryRewriteAllWithOptions() refers to the the original querytree\n      // afterwards.\n      replace_pointer(query, rewrite_result.rewrite);\n    }\n\n    ddm_applied |= rewrite_result.ddm_applied;\n    PG_HEAP_MEM_USAGE_LOG_EXIT(kRewriteDDMExit, query_id, &entry_usage_stats);\n  }\n  return ddm_applied;\n}\n\nvoid MarkDDMRelations(Query* q) { ddm::MarkDDMRelations(q); }", "mimetype": "text/plain", "start_char_idx": 30292, "end_char_idx": 31393, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a406d80-1ac6-4f93-84a5-1f896fa8e5df": {"__data__": {"id_": "9a406d80-1ac6-4f93-84a5-1f896fa8e5df", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "40b47f40-9bb4-4d01-a950-e4593328b61d", "node_type": "1", "metadata": {}, "hash": "eacf1e70aca057b35433ff7e505baafb5413431bff8f13d75da95638a4cc3100", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"pg/ddm/test_attach_policy.hpp\"\n\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/policy_access.h\"\n#include \"utils/builtins.h\"\n#include \"utils/memutils.h\"\n\n#include \"pg/ddm/ddm_test_helper.hpp\"\n#include \"pg/src/include/catalog/pg_policy_mask.h\"\n#include \"pg/src/include/utils/lsyscache.h\"\n#include \"pg/test/pg_test.hpp\"\n\n#include <boost/algorithm/string/replace.hpp>\n#include <boost/format.hpp>\n#include <gtest/gtest.h>\n\n#include <algorithm>\n#include <cstdio>\n#include <memory>\n#include <set>\n#include <string>\n\nextern bool gconf_enable_ddm;\nextern bool g_pgtest_ddm;\nextern bool gconf_ddm_enable_over_super_paths;\nextern bool gconf_enable_object_transform;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 767, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "40b47f40-9bb4-4d01-a950-e4593328b61d": {"__data__": {"id_": "40b47f40-9bb4-4d01-a950-e4593328b61d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a406d80-1ac6-4f93-84a5-1f896fa8e5df", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "cbe0701daa2ec1d2feefcaa4938749d85af4d9be3fb909d821d1d66b623d7b4c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f3d85fea-f834-4b0c-83ac-0b2a610fe0e6", "node_type": "1", "metadata": {}, "hash": "5fd123e7de20fe2c3e00eed52285fb7ed302f63d313421a49e7a63862747e3b9", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest", "mimetype": "text/plain", "start_char_idx": 769, "end_char_idx": 785, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f3d85fea-f834-4b0c-83ac-0b2a610fe0e6": {"__data__": {"id_": "f3d85fea-f834-4b0c-83ac-0b2a610fe0e6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "40b47f40-9bb4-4d01-a950-e4593328b61d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "cd7b0bfbca585fc850669d05772896bf1feca66945c2351adf99f2adcfdaee5a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1942fa39-5eb0-480a-ab67-230101ff7a5d", "node_type": "1", "metadata": {}, "hash": "6ea109d44527f828cf835018815499ece211333657b693cf92fd3edf24e06f70", "class_name": "RelatedNodeInfo"}}, "text": "{\n\nOid relid_attach;\n\nvoid TestDDMPolicyAttachment::SetUpTestCase() {\n  g_pgtest_ddm = true;\n  gconf_enable_ddm = true;\n  gconf_ddm_enable_over_super_paths = true;\n  gconf_enable_object_transform = true;\n  // Setting DDM policy commands to exist within a Transaction context.\n  TopTransactionContext = AllocSetContextCreate(\n      TopMemoryContext, \"DDMPolicyAttachContext\", ALLOCSET_DEFAULT_MINSIZE,\n      ALLOCSET_DEFAULT_INITSIZE, ALLOCSET_DEFAULT_MAXSIZE);\n  CurTransactionContext = TopTransactionContext;\n  pg::RunQuery(\n      \"CREATE TABLE target_table(a INT, b VARCHAR(12),\"\n      \"s super, \\\"a\\\"\\\"b\\\"\\\"\\\" INT, f FLOAT)\");\n  pg::RunQuery(\"CREATE VIEW target_view AS SELECT * FROM target_table\");\n  pg::RunQuery(\n      \"CREATE VIEW target_lbv AS SELECT * FROM public.target_table WITH NO \"\n      \"SCHEMA BINDING\");\n  auto q = pgtest::ParseAnalyzeQuery(\"select * from target_table\");\n  relid_attach = GetRelID(q);\n  pg::RunQuery(\"CREATE USER u1 PASSWORD DISABLE\");\n  pg::RunQuery(\"CREATE ROLE r1\");\n}\n\nvoid TestDDMPolicyAttachment::TearDownTestCase() {\n  g_pgtest_ddm = false;\n  pg::RunQuery(\"DROP USER u1\");\n  pg::RunQuery(\"DROP ROLE r1\");\n}\n\n/// Executes queries of the PolicyAttachmentParam to\n/// create and attach policy to target. Parses policy\n/// attachment and tests parsed policy against expected\n/// policy size, input attributes size, output attributes size\n/// and output attribute column name.", "mimetype": "text/plain", "start_char_idx": 786, "end_char_idx": 2198, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1942fa39-5eb0-480a-ab67-230101ff7a5d": {"__data__": {"id_": "1942fa39-5eb0-480a-ab67-230101ff7a5d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f3d85fea-f834-4b0c-83ac-0b2a610fe0e6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61e0caa5fa49743a8da91a6ceea418fdd8e18cf90cbb554e0a2412c4f8b7ff2a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c8085bab-6007-427c-9083-12a6b52faa05", "node_type": "1", "metadata": {}, "hash": "ee5612a3827267d3a022ef323ce07af5c77a66cdf475694b0f081fa62ca2b49e", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_P(TestDDMPolicyAttachment, TestAttachPolicy)", "mimetype": "text/plain", "start_char_idx": 2199, "end_char_idx": 2251, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c8085bab-6007-427c-9083-12a6b52faa05": {"__data__": {"id_": "c8085bab-6007-427c-9083-12a6b52faa05", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1942fa39-5eb0-480a-ab67-230101ff7a5d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f9f29ceca8bbd4d6b9a04dd667b4b2684f19ccf1f54df483b58e96c7ea0017e3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5cfb40b3-bcbc-4c2f-b644-99b744b87418", "node_type": "1", "metadata": {}, "hash": "04c80b9bff3e87c8db3e03d6ec0b46a97af5dcad1b2f878d2fba34aa81246128", "class_name": "RelatedNodeInfo"}}, "text": "{\n  for (auto& s : GetParam().queries) {\n    pg::RunQuery(s);\n  }\n  const char* name = GetParam().pol_name.c_str();\n  Oid pol_id = GetDDMPolicyId(name);\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n  ddm::Policy pol = {pol_id /* polid */,       0 /* poldbid */,\n                     false /* maskoningest */, *polname,\n                     0 /* polmodifiedby */,    GetParam().pol_attrs,\n                     GetParam().pol_expr};\n  auto parsed = ddm::ParseAttachment(\n      {pol_id /* polid */, 0 /* permid */, relid_attach, 0 /* polpriority */,\n       0 /* polmodifiedby */, GetParam().pol_attrsin /* polattrsin */,\n       // car_col, dar_col\n       GetParam().pol_attrsout /* polattrsout */, pol},\n      std::nullopt);\n  EXPECT_TRUE(parsed.pol.parsed_pol.size() == GetParam().expected_pol_size)\n      << boost::format(\"wrong number of targets %lu, expected %lu\") %\n             parsed.pol.parsed_pol.size() % GetParam().expected_pol_size;\n  EXPECT_TRUE(parsed.polattrs_in.size() == GetParam().expected_polattrsin_size)\n      << boost::format(\"wrong number of input attributes %lu expected %lu\") %\n             parsed.polattrs_in.size() % GetParam().expected_polattrsin_size;\n  EXPECT_TRUE(parsed.polattrs_out.size() ==\n              GetParam().expected_polattrsout_size)\n      << boost::format(\"wrong number of output attributes %lu expected %lu\") %\n             parsed.polattrs_out.size() % GetParam().expected_polattrsout_size;", "mimetype": "text/plain", "start_char_idx": 2252, "end_char_idx": 3737, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5cfb40b3-bcbc-4c2f-b644-99b744b87418": {"__data__": {"id_": "5cfb40b3-bcbc-4c2f-b644-99b744b87418", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c8085bab-6007-427c-9083-12a6b52faa05", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ffc459ba34a23c031f28d842568ba191a7db6dbf5989097eea1a124ea88a3a8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "11431ef2-bace-42b3-b838-a11662bfe899", "node_type": "1", "metadata": {}, "hash": "87095979f637fabc86981874f286786bb7e1791fa23d9b9dc8bca37639d74c14", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(strcmp((std::get<std::shared_ptr<ColumnDef>>(\n                          parsed.polattrs_in[0].attribute))\n                         ->colname,\n                     GetParam().expected_polattrsin_0_colname.c_str()) == 0)\n      << boost::format(\"wrong col expected %s was %s\") %\n             GetParam().expected_polattrsin_0_colname %\n             (std::get<std::shared_ptr<ColumnDef>>(\n                  parsed.polattrs_in[0].attribute))\n                 ->colname;\n  EXPECT_TRUE(strcmp((std::get<std::shared_ptr<ColumnDef>>(\n                          parsed.polattrs_out[0].attribute))\n                         ->colname,\n                     GetParam().expected_polattrsout_0_colname.c_str()) == 0)\n      << boost::format(\"wrong col expected %s was %s\") %\n             GetParam().expected_polattrsout_0_colname %\n             (std::get<std::shared_ptr<ColumnDef>>(\n                  parsed.polattrs_out[0].attribute))\n                 ->colname;\n}", "mimetype": "text/plain", "start_char_idx": 3740, "end_char_idx": 4699, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "11431ef2-bace-42b3-b838-a11662bfe899": {"__data__": {"id_": "11431ef2-bace-42b3-b838-a11662bfe899", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5cfb40b3-bcbc-4c2f-b644-99b744b87418", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0e81cbf0e8d4e44b4575a540097ea965bfe9f63d486cd18239e0fe735db29e1e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ea66f83b-c70d-42ef-aab6-7f85be11b3ed", "node_type": "1", "metadata": {}, "hash": "e1463620a0217a5485d4941c01dacbf914b4c56793dd2b9624bb4e9e3c0a1a84", "class_name": "RelatedNodeInfo"}}, "text": ";\n\n/// Each PolicyAttachmentParam entry in policy_attachment_test_cases\n/// corresponds to a test case of TestDDMPolicyAttachment. Parameters\n/// of each PolicyAttachmentParam entry include\n/// list of queries to create and attach masking policy,\n/// name of the policy to be attached,\n/// policy attributes, policy expression,\n/// input attributes for the masking policy expression in JSON,\n/// output attributes for the masking policy expression in JSON,\n/// expected total number of the parsed policies,\n/// expected parsed policy's total number of input attributes,\n/// expected parsed policy's total number of output attributes,\n/// expected column name of the parsed policy's attrsin[0],\n/// expected column name of the parsed policy's attrsout[0].", "mimetype": "text/plain", "start_char_idx": 4699, "end_char_idx": 5453, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ea66f83b-c70d-42ef-aab6-7f85be11b3ed": {"__data__": {"id_": "ea66f83b-c70d-42ef-aab6-7f85be11b3ed", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "11431ef2-bace-42b3-b838-a11662bfe899", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5d32d372bc035229ad21a468d4f53505a208d8ba3e0933d16cbe2ffb7da01a98", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b66d1bbc-9b94-4809-a699-503c9c5707b5", "node_type": "1", "metadata": {}, "hash": "e810c967a8d072d5d4d8de3adc07506e1871615c22697d9eadec4a7c479789d2", "class_name": "RelatedNodeInfo"}}, "text": "PolicyAttachmentParam", "mimetype": "text/plain", "start_char_idx": 1963, "end_char_idx": 1984, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b66d1bbc-9b94-4809-a699-503c9c5707b5": {"__data__": {"id_": "b66d1bbc-9b94-4809-a699-503c9c5707b5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ea66f83b-c70d-42ef-aab6-7f85be11b3ed", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7aab0c123640ca88f9d1108c8fea36509864e9e59754bc93d565bbc5c40ec79a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02f8b631-b959-42f3-b35b-47205e34c0c2", "node_type": "1", "metadata": {}, "hash": "aed31e76149944fc440c7654cb772cd8e831bd09aeadd53c649099106591db4e", "class_name": "RelatedNodeInfo"}}, "text": "policy_attachment_test_cases[] =", "mimetype": "text/plain", "start_char_idx": 5476, "end_char_idx": 5508, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "02f8b631-b959-42f3-b35b-47205e34c0c2": {"__data__": {"id_": "02f8b631-b959-42f3-b35b-47205e34c0c2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b66d1bbc-9b94-4809-a699-503c9c5707b5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "cad26bb2440dfa6603edd119caeafc2487de65dc8928d786b22e5980670d2902", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b4a0f891-29f1-4cfa-a85b-3ed1dce192c6", "node_type": "1", "metadata": {}, "hash": "8c9bbdbbd65e2dbffc455bf0a73db1f16d1f70e657739ca99553ad7feb446204", "class_name": "RelatedNodeInfo"}}, "text": "{\n    PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_1 WITH \"\n         \"(col1 INT) USING ( 1 )\",\n         \"ATTACH MASKING POLICY ddm_policy_1 ON \"\n         \"target_table (a) USING (a) TO PUBLIC\"},\n        \"ddm_policy_1\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"},\n    PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_2 WITH \"\n         \"(col1 INT, col2 FLOAT) USING ( col1 * 1, col2 + 1.0 )\",\n         \"ATTACH MASKING POLICY ddm_policy_2 ON \"\n         \"target_table (a, f) USING (a, f) TO PUBLIC PRIORITY 1;\",\n         \"ATTACH MASKING POLICY ddm_policy_2 ON \"\n         \"target_table (a, f) TO PUBLIC PRIORITY 2\"},\n        \"ddm_policy_2\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1},\n        {\"colname\":\"col2\",\"typoid\":701,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" masked_table.col1 * CAST(1 AS INT4) \",\n        \"typoid\":23,\"typmod\":-1},\n        {\"expr\":\"masked_table.col2 + 1.0\",\n        \"typoid\":701,\"typmod\":-1}])\",\n        \"[1,5]\",\n        \"[1,5]\",\n        2,\n        2,\n        2,\n        \"a\",\n        \"a\"},", "mimetype": "text/plain", "start_char_idx": 5509, "end_char_idx": 6738, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b4a0f891-29f1-4cfa-a85b-3ed1dce192c6": {"__data__": {"id_": "b4a0f891-29f1-4cfa-a85b-3ed1dce192c6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "02f8b631-b959-42f3-b35b-47205e34c0c2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "47bb22adb12f4b9432538b8937d1c78511e30d8138e2985c352e9899cb92ac93", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a73e2050-59d1-4410-a077-5a452ef7efbe", "node_type": "1", "metadata": {}, "hash": "e8b317dd87c227739295dad5c4e13d9ca15b02f9779685b88db5ed7c973281d9", "class_name": "RelatedNodeInfo"}}, "text": "PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_3 WITH \"\n         \"(col1 INT, col2 FLOAT) USING ( col1 * 1, col1 + 1.0 )\",\n         \"ATTACH MASKING POLICY ddm_policy_3 ON \"\n         \"target_table (a, f) TO PUBLIC PRIORITY 3\"},\n        \"ddm_policy_3\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1},\n        {\"colname\":\"col2\",\"typoid\":701,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" masked_table.col1 * CAST(1 AS INT4) \",\n        \"typoid\":23,\"typmod\":-1},{\"expr\":\"masked_table.col1 +\n        1.0\",\"typoid\":1700,\"typmod\":-1}])\",\n        \"[1,5]\",\n        \"[1,5]\",\n        2,\n        2,\n        2,\n        \"a\",\n        \"a\"},\n    PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_4 WITH \"\n         \"(a INT) USING ( 1 )\",\n         \" ATTACH MASKING POLICY ddm_policy_4 ON \"\n         \"target_table (a) TO ROLE r1 PRIORITY 5\"},\n        \"ddm_policy_4\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"},", "mimetype": "text/plain", "start_char_idx": 6743, "end_char_idx": 7840, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a73e2050-59d1-4410-a077-5a452ef7efbe": {"__data__": {"id_": "a73e2050-59d1-4410-a077-5a452ef7efbe", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b4a0f891-29f1-4cfa-a85b-3ed1dce192c6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dd9e5b5aa74e340028a9160dcae8c4ffc122b2ae0257bea326c4441496299d4f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0a7e6901-7ebb-4ed5-8adb-15f2d0bf20d4", "node_type": "1", "metadata": {}, "hash": "c47a2fcf5b0eadb1cd9c9b003da25f960a12805ef1164f57bcac4ac33f93747c", "class_name": "RelatedNodeInfo"}}, "text": "PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_5 WITH \"\n         \"(col1 INT, col2 FLOAT) USING ( col1, col2 )\",\n         \"ATTACH MASKING POLICY ddm_policy_5 ON \"\n         \"target_table (a, f) TO ROLE r1 PRIORITY 6\"},\n        \"ddm_policy_5\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1},\n        {\"colname\":\"col2\",\"typoid\":701,\"typmod\":-1}])\",\n        R\"([{\"expr\":\"masked_table.col1\",\"typoid\":23,\"typmod\":-1},\n        {\"expr\":\"masked_table.col2\",\"typoid\":701,\"typmod\":-1}])\",\n        \"[1,5]\",\n        \"[1,5]\",\n        2,\n        2,\n        2,\n        \"a\",\n        \"a\"},\n    PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_6 WITH \"\n         \"(col1 INT) USING ( 1 )\",\n         \"ATTACH MASKING POLICY ddm_policy_6 ON \"\n         \"target_table (a) USING (a) TO u1 PRIORITY 7\"},\n        \"ddm_policy_6\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"},", "mimetype": "text/plain", "start_char_idx": 7845, "end_char_idx": 8905, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0a7e6901-7ebb-4ed5-8adb-15f2d0bf20d4": {"__data__": {"id_": "0a7e6901-7ebb-4ed5-8adb-15f2d0bf20d4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a73e2050-59d1-4410-a077-5a452ef7efbe", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "793fa3a40ceda1937e247cf1258f27f9c15ddd39376b4d206f74310d83a93340", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d66b1e9-85e4-492c-bf6b-f1a3ca8ee4e4", "node_type": "1", "metadata": {}, "hash": "4cfb26ce273dbf334fe88c663c03f729331f60170b3286337d90aca0628e26e5", "class_name": "RelatedNodeInfo"}}, "text": "PolicyAttachmentParam{\n        {\"CREATE MASKING POLICY ddm_policy_7 WITH \"\n         \"(col1 INT, col2 FLOAT, col3 FLOAT) USING ( col1 * 1, col2 + 1.0 \"\n         \")\",\n         \"ATTACH MASKING POLICY ddm_policy_7 ON \"\n         \"target_table (a, f) USING (a, f, f) TO PUBLIC PRIORITY 4\"},\n        \"ddm_policy_7\",\n        R\"([{\"colname\":\"col1\",\"typoid\":23,\"typmod\":-1},\n        {\"colname\":\"col2\",\"typoid\":701,\"typmod\":-1},\n        {\"colname\":\"col3\",\"typoid\":701,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" masked_table.col1 * CAST(1 AS INT4) \",\n        \"typoid\":23,\"typmod\":-1},{\"expr\":\"masked_table.col2 +\n        1.0\",\"typoid\":701,\"typmod\":-1}])\",\n        \"[1,5,5]\",\n        \"[1,5]\",\n        2,\n        3,\n        2,\n        \"a\",\n        \"a\"},\n    PolicyAttachmentParam{\n        {\"CREATE TABLE attach(a INT)\",\n         \"CREATE MASKING POLICY attach WITH (a INT) USING ( 1 )\",\n         \"ATTACH MASKING POLICY attach ON attach (a) TO PUBLIC\"},\n        \"attach\",\n        R\"([{\"colname\":\"a\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"},", "mimetype": "text/plain", "start_char_idx": 8910, "end_char_idx": 10076, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d66b1e9-85e4-492c-bf6b-f1a3ca8ee4e4": {"__data__": {"id_": "9d66b1e9-85e4-492c-bf6b-f1a3ca8ee4e4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0a7e6901-7ebb-4ed5-8adb-15f2d0bf20d4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6061c95102a9360d58770b6ef468ebc1707c597b51950aff5429aa59eb96b8a6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "468c65b0-14e5-42e4-bdef-2fa0d42d51d9", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "PolicyAttachmentParam{\n        {\"CREATE TABLE masking(a INT)\",\n         \"CREATE MASKING POLICY masking WITH (a INT) USING ( 1 )\",\n         \"ATTACH MASKING POLICY masking ON masking (a) TO PUBLIC\"},\n        \"masking\",\n        R\"([{\"colname\":\"a\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"},\n    PolicyAttachmentParam{\n        {\"CREATE TABLE policy(a INT)\",\n         \"CREATE MASKING POLICY policy WITH (a INT) USING ( 1 )\",\n         \"ATTACH MASKING POLICY policy ON policy (a) TO PUBLIC\"},\n        \"policy\",\n        R\"([{\"colname\":\"a\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"},\n    PolicyAttachmentParam{\n        {\"CREATE TABLE priority(a INT)\",\n         \"CREATE MASKING POLICY priority WITH (a INT) USING ( 1 )\",\n         \"ATTACH MASKING POLICY priority ON priority (a) TO PUBLIC\"},\n        \"priority\",\n        R\"([{\"colname\":\"a\",\"typoid\":23,\"typmod\":-1}])\",\n        R\"([{\"expr\":\" CAST(1 AS INT4) \",\"typoid\":23,\"typmod\":-1}])\",\n        \"[1]\",\n        \"[1]\",\n        1,\n        1,\n        1,\n        \"a\",\n        \"a\"}}", "mimetype": "text/plain", "start_char_idx": 10081, "end_char_idx": 11384, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "468c65b0-14e5-42e4-bdef-2fa0d42d51d9": {"__data__": {"id_": "468c65b0-14e5-42e4-bdef-2fa0d42d51d9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d66b1e9-85e4-492c-bf6b-f1a3ca8ee4e4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "56495bdce8efcc08d7c97ed7c29436d6edfeb07b8ad9816859e638a9fbdbd8aa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a8734f3f-92b3-4f5c-8b3f-ab57b74d12ba", "node_type": "1", "metadata": {}, "hash": "4ff57a50e9312a4be43f53f97ec6cca455ae3ab43eb75f197bde4bb16425cd3d", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 650, "end_char_idx": 651, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a8734f3f-92b3-4f5c-8b3f-ab57b74d12ba": {"__data__": {"id_": "a8734f3f-92b3-4f5c-8b3f-ab57b74d12ba", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "468c65b0-14e5-42e4-bdef-2fa0d42d51d9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7f28facbe5e654027c8fceb41d3c4a5ff2bd27bbe56fd17cdac9560e6208c03c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "96da04e1-22c4-46b6-8200-aaaa2bef2794", "node_type": "1", "metadata": {}, "hash": "925f2db31fb9b753bdb812145727ae8f5215163abfb25c8aca4eeb86904dbf93", "class_name": "RelatedNodeInfo"}}, "text": "INSTANTIATE_TEST_SUITE_P(PolicyAttachmentTests, TestDDMPolicyAttachment,\n                         ::testing::ValuesIn(policy_attachment_test_cases));", "mimetype": "text/plain", "start_char_idx": 11386, "end_char_idx": 11535, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "96da04e1-22c4-46b6-8200-aaaa2bef2794": {"__data__": {"id_": "96da04e1-22c4-46b6-8200-aaaa2bef2794", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a8734f3f-92b3-4f5c-8b3f-ab57b74d12ba", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2876af68e9a91d0330a2377f08ef46f7824ee0e02ec9d5f97553b6d1b0dca469", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cbef0c8e-828d-42f7-bd76-adfb732ac9a8", "node_type": "1", "metadata": {}, "hash": "05d58fd01649976529d2a17af5c2545aec7126e6208ab586310852dcf1f5b231", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicyAttachment, TestAttachPolicySuperMaxPath)", "mimetype": "text/plain", "start_char_idx": 11537, "end_char_idx": 11601, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cbef0c8e-828d-42f7-bd76-adfb732ac9a8": {"__data__": {"id_": "cbef0c8e-828d-42f7-bd76-adfb732ac9a8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96da04e1-22c4-46b6-8200-aaaa2bef2794", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2e490354046d242fdaabdb9c4fd04ab7e0d3fcc5a6c28e5983337468544984a6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e540ab8e-f3b4-49a5-ad77-2e2b8b95fb9f", "node_type": "1", "metadata": {}, "hash": "fcd5e328da25972a00d6d9a224d20ba170cd4d4317b65a663f15c5c356daa3ae", "class_name": "RelatedNodeInfo"}}, "text": "{\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp_super_max_path with (a int) USING (a)\");\n\n  std::stringstream ss;\n  std::string path_component = \"path\";\n  for (unsigned int i = 0; i < MAX_PARTIQL_NESTING_LEVELS - 1; ++i) {\n    ss << path_component << PathSetBase::kDelimiter;\n  }\n  ss << path_component;\n\n  std::vector<std::string> rel_names = {\"target_table\", \"target_view\",\n                                        \"target_lbv\"};", "mimetype": "text/plain", "start_char_idx": 11602, "end_char_idx": 12034, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e540ab8e-f3b4-49a5-ad77-2e2b8b95fb9f": {"__data__": {"id_": "e540ab8e-f3b4-49a5-ad77-2e2b8b95fb9f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cbef0c8e-828d-42f7-bd76-adfb732ac9a8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f7a61965f5b4005d8792f1962502150ccd871082218ad32fb0fb176c6b85d951", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d3a65d2f-5592-418c-a96b-0e32aca1465a", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "for (std::string rel_name : rel_names) {\n    std::string attach_statement =\n        \"ATTACH MASKING POLICY mp_super_max_path ON \" + rel_name + \" (s.\" +\n        ss.str() + \") TO PUBLIC\";\n    pg::RunQuery(attach_statement);\n    SUCCEED();\n\n    // Adding one more level to exceed MAX_PARTIQL_NESTING_LEVELS.\n    attach_statement = \"ATTACH MASKING POLICY mp_super_max_path ON \" +\n                       rel_name + \" (s.another_path.\" + ss.str() +\n                       \") TO PUBLIC\";\n\n    bool query_failed = false;\n    PG_TRY();\n    { pg::RunQuery(attach_statement); }\n    PG_CATCH();\n    {\n      query_failed = true;\n      // Note, the framework seems to only copy first 256 characters of the\n      // error!\n      ErrorData* errData = CopyErrorData();\n      std::string error_message = std::string(errData->message);\n      std::transform(error_message.begin(), error_message.end(),\n                     error_message.begin(),\n                     [](unsigned char c) { return std::tolower(c); });\n\n      EXPECT_TRUE(error_message.find(\"super path\") != std::string::npos);\n      EXPECT_TRUE(error_message.find(\"exceeds\") != std::string::npos);\n      EXPECT_TRUE(error_message.find(\"nesting levels\") != std::string::npos);\n\n      FreeErrorData(errData);\n      FlushErrorState();\n    }\n    PG_END_TRY();\n    ASSERT_TRUE(query_failed);\n  }\n}", "mimetype": "text/plain", "start_char_idx": 12038, "end_char_idx": 13375, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d3a65d2f-5592-418c-a96b-0e32aca1465a": {"__data__": {"id_": "d3a65d2f-5592-418c-a96b-0e32aca1465a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e540ab8e-f3b4-49a5-ad77-2e2b8b95fb9f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6dbb9830702106314f1d8a2331e5fe8dd3203a1801e59df3416d4242a2041671", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "17a1ed8e-93c2-4dad-a6d7-33ca3fb78128", "node_type": "1", "metadata": {}, "hash": "3e343f2d6a7b017690a05ea007db18c7d4d86c26839889db4ecdc706ccfac0da", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 1790, "end_char_idx": 1791, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "17a1ed8e-93c2-4dad-a6d7-33ca3fb78128": {"__data__": {"id_": "17a1ed8e-93c2-4dad-a6d7-33ca3fb78128", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993214a845c307775d77c7c5b9dd4a1132b3084af0690a4922e592e253e68b39", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d3a65d2f-5592-418c-a96b-0e32aca1465a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "01015738199f31745756fde6650e3724a227500ffe19c6922821504906da0b3a", "class_name": "RelatedNodeInfo"}}, "text": ";  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 13377, "end_char_idx": 13399, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "62a7fcb9-0e64-4961-82d7-732bc8843205": {"__data__": {"id_": "62a7fcb9-0e64-4961-82d7-732bc8843205", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.hpp", "file_name": "test_attach_policy.hpp", "file_size": 1530, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "462a0ba7-096e-4d04-bbe0-8802231ed273", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.hpp", "file_name": "test_attach_policy.hpp", "file_size": 1530, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3aef8becb104453241562ab3f1c68f922a0bf27ef8922d180e66fccf3404ac34", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2ebf2c82-087b-4fb5-adda-d174999379be", "node_type": "1", "metadata": {}, "hash": "b9ef2b80694d705875925c77072ce30999e013a8086b081ce793b368bc7b7a35", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#pragma once\n\n#include <gtest/gtest.h>\n\n#include \"ddm/ddm_policy.hpp\"\n\n#include \"pg/test/pg_test.hpp\"\n\n#include <string>\n#include <vector>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 215, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2ebf2c82-087b-4fb5-adda-d174999379be": {"__data__": {"id_": "2ebf2c82-087b-4fb5-adda-d174999379be", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.hpp", "file_name": "test_attach_policy.hpp", "file_size": 1530, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "462a0ba7-096e-4d04-bbe0-8802231ed273", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.hpp", "file_name": "test_attach_policy.hpp", "file_size": 1530, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3aef8becb104453241562ab3f1c68f922a0bf27ef8922d180e66fccf3404ac34", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "62a7fcb9-0e64-4961-82d7-732bc8843205", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.hpp", "file_name": "test_attach_policy.hpp", "file_size": 1530, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7d5030d5fe2c873fac11966ad40958e5a8e9c00b7ea1b904fbca0f1b5ee81bd6", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest {\n/// Container for parameters of masking policy attachment test cases.\nstruct PolicyAttachmentParam {\n  /// Query to be executed to create and attach the policy.\n  std::vector<std::string> queries;\n  /// Name of the policy to be created and attached.\n  std::string pol_name;\n  /// Policy attrs.\n  std::string pol_attrs;\n  /// Policy expression.\n  std::string pol_expr;\n  /// Input attributes for the masking policy expression in JSON.\n  std::string pol_attrsin;\n  /// Output attributes for the masking policy expression in JSON.\n  std::string pol_attrsout;\n  /// Expected total number of the parsed policies\n  std::size_t expected_pol_size;\n  /// Expected parsed policy's total number of input attributes.\n  std::size_t expected_polattrsin_size;\n  /// Expected parsed policy's total number of output attributes.\n  std::size_t expected_polattrsout_size;\n  /// Expected column name of the parsed policy's attrsin[0].\n  std::string expected_polattrsin_0_colname;\n  /// Expected column name of the parsed policy's attrsout[0].\n  std::string expected_polattrsout_0_colname;\n};\nclass TestDDMPolicyAttachment\n    : public pg::PgTest,\n      public ::testing::WithParamInterface<PolicyAttachmentParam> {\n public:\n  static void SetUpTestCase();\n  static void TearDownTestCase();\n};\n}  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 217, "end_char_idx": 1529, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2c75431d-a252-4457-97ca-dae822a6fcd7": {"__data__": {"id_": "2c75431d-a252-4457-97ca-dae822a6fcd7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "203fa30f-889a-4b20-8ea4-f9b0dcaad359", "node_type": "1", "metadata": {}, "hash": "eacf1e70aca057b35433ff7e505baafb5413431bff8f13d75da95638a4cc3100", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"pg/ddm/test_create_policy.hpp\"\n\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/policy_access.h\"\n#include \"utils/builtins.h\"\n#include \"utils/memutils.h\"\n\n#include \"pg/ddm/ddm_test_helper.hpp\"\n#include \"pg/src/include/catalog/pg_policy_mask.h\"\n#include \"pg/src/include/utils/lsyscache.h\"\n#include \"pg/test/pg_test.hpp\"\n\n#include <boost/algorithm/string/replace.hpp>\n#include <boost/format.hpp>\n#include <gtest/gtest.h>\n\n#include <cstdio>\n#include <set>\n#include <string>\n\nextern bool gconf_enable_ddm;\nextern bool g_pgtest_ddm;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 638, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "203fa30f-889a-4b20-8ea4-f9b0dcaad359": {"__data__": {"id_": "203fa30f-889a-4b20-8ea4-f9b0dcaad359", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c75431d-a252-4457-97ca-dae822a6fcd7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fbf30eb7c522538f8df41b27880bc28fc401a8235d2ab70e11925f7cfa428b0d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6b730e0-adec-4a91-b73e-d2606d354c9b", "node_type": "1", "metadata": {}, "hash": "fc2951b9106e3d8b588d9a73704c8c88addefc53c3ff639b879db38b407e26e3", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest", "mimetype": "text/plain", "start_char_idx": 640, "end_char_idx": 656, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c6b730e0-adec-4a91-b73e-d2606d354c9b": {"__data__": {"id_": "c6b730e0-adec-4a91-b73e-d2606d354c9b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "203fa30f-889a-4b20-8ea4-f9b0dcaad359", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e84dfa21f8cc54c7bd0ccd68bd39d9fad5336522d03fc0df0dbc7d2799c820ae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6230ecf9-37fa-4e88-b791-25c43fe5c675", "node_type": "1", "metadata": {}, "hash": "266b3982e902ec7f9f55ecbda69eb4c947ce268382dd4e4aa64fbf716e3d0911", "class_name": "RelatedNodeInfo"}}, "text": "{\n\nOid relid_create;\n\nvoid TestDDMPolicyCreation::SetUpTestCase() {\n  g_pgtest_ddm = true;\n  gconf_enable_ddm = true;\n  // Setting DDM policy commands to exist within a Transaction context.\n  TopTransactionContext = AllocSetContextCreate(\n      TopMemoryContext, \"DDMPolicyCreateContext\", ALLOCSET_DEFAULT_MINSIZE,\n      ALLOCSET_DEFAULT_INITSIZE, ALLOCSET_DEFAULT_MAXSIZE);\n  CurTransactionContext = TopTransactionContext;\n  pg::RunQuery(\n      \"CREATE TABLE target_table(a INT, b VARCHAR(12),\"\n      \"s super, \\\"a\\\"\\\"b\\\"\\\"\\\" INT, f FLOAT)\");\n  auto q = pgtest::ParseAnalyzeQuery(\"SELECT * FROM target_table\");\n  relid_create = GetRelID(q);\n}\n\nvoid TestDDMPolicyCreation::TearDownTestCase() {\n  g_pgtest_ddm = false;\n}\n\nPG_TEST_P(TestDDMPolicyCreation, TestCreatePolicy) {\n  pg::RunQuery(GetParam().query.c_str());\n  Oid pol_id = GetDDMPolicyId(GetParam().name.c_str());\n  EXPECT_TRUE(pol_id != InvalidOid)\n      << boost::format(\"Expected to find '%s' policy\") %\n             (GetParam().name.c_str());\n}", "mimetype": "text/plain", "start_char_idx": 657, "end_char_idx": 1663, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6230ecf9-37fa-4e88-b791-25c43fe5c675": {"__data__": {"id_": "6230ecf9-37fa-4e88-b791-25c43fe5c675", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c6b730e0-adec-4a91-b73e-d2606d354c9b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5eb47206a236224d8f25da21b23144a0c1832ca3162f76780ba478371589e748", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "03931d7a-d1f0-4171-8615-9ab145781669", "node_type": "1", "metadata": {}, "hash": "96f704ab4592992043114f50f1f3850da9ca22707e8bfd59dddd1a093079080f", "class_name": "RelatedNodeInfo"}}, "text": "PolicyCreationParam", "mimetype": "text/plain", "start_char_idx": 1665, "end_char_idx": 1684, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "03931d7a-d1f0-4171-8615-9ab145781669": {"__data__": {"id_": "03931d7a-d1f0-4171-8615-9ab145781669", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6230ecf9-37fa-4e88-b791-25c43fe5c675", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d834f3358dbe5c870717e8146f66a9be670bca0ffde40b95bc3630a76aa85935", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46799270-95c7-48c9-85d7-446648eb7089", "node_type": "1", "metadata": {}, "hash": "7ca57e6545a28afe14bfa579e27b946906c5f890ae6208edc8769b286c79081a", "class_name": "RelatedNodeInfo"}}, "text": "policy_create_test_cases[] =", "mimetype": "text/plain", "start_char_idx": 1685, "end_char_idx": 1713, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46799270-95c7-48c9-85d7-446648eb7089": {"__data__": {"id_": "46799270-95c7-48c9-85d7-446648eb7089", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "03931d7a-d1f0-4171-8615-9ab145781669", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ff7d2e6acc675c77a7990f5283dcf4c5f635804300a4575b9c35d4812f39ee1d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4868997a-370f-4997-9833-bacabc4a032e", "node_type": "1", "metadata": {}, "hash": "8a09215d12136237d58d36d622fb0fdb9a775f22fa3c8c02841c3f9c5fe2b056", "class_name": "RelatedNodeInfo"}}, "text": "{\n    PolicyCreationParam{// Simple policy\n                        \"CREATE MASKING POLICY mp_simple WITH \"\n                        \"(a int, b float) USING(a + 1, a + b > 5)\",\n                        \"mp_simple\"},\n    PolicyCreationParam{\n        // More columns than expressions\n        \"CREATE MASKING POLICY mp_more_columns WITH \"\n        \"(a int, b float, c VARCHAR(10)) USING (a + 1, a + b > 5)\",\n        \"mp_more_columns\"},\n    PolicyCreationParam{// More expressions than columns\n                        \"CREATE MASKING POLICY mp_more_expressions WITH \"\n                        \"(a int, b float) USING (a + 1, a + b > 5, b + 2)\",\n                        \"mp_more_expressions\"},\n    PolicyCreationParam{// Constant in the USING clause\n                        \"CREATE MASKING POLICY mp_constant_int WITH \"\n                        \" (a int, b float) USING (2)\",\n                        \"mp_constant_int\"},\n    PolicyCreationParam{\"CREATE MASKING POLICY mp_constant_bool WITH \"\n                        \"(a int, b float) USING (TRUE)\",\n                        \"mp_constant_bool\"},\n    PolicyCreationParam{\"CREATE MASKING POLICY mp_constant_null WITH \"\n                        \"(a int, b float) USING (NULL)\",\n                        \"mp_constant_null\"},\n    PolicyCreationParam{\"CREATE MASKING POLICY mp_constant_null_case WITH \"\n                        \"(a int, b float) USING (\"\n                        \"CASE a WHEN 4 THEN NULL ELSE 5*2 END)\",\n                        \"mp_constant_null_case\"},", "mimetype": "text/plain", "start_char_idx": 1714, "end_char_idx": 3210, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4868997a-370f-4997-9833-bacabc4a032e": {"__data__": {"id_": "4868997a-370f-4997-9833-bacabc4a032e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46799270-95c7-48c9-85d7-446648eb7089", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "84d71439ffd130c16320e550fae66fd247f5398506cd6a2186bb859f76b5c7c6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4f2a3a46-b1ef-4cd9-8cad-e46aad4d8ea9", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "PolicyCreationParam{// Quoted column\n                        \"CREATE MASKING POLICY mp_quoted_column WITH \"\n                        \"(\\\"a\\\"\\\"b\\\"\\\"\\\" int) USING (\\\"a\\\"\\\"b\\\"\\\"\\\" + 3)\",\n                        \"mp_quoted_column\"},\n    PolicyCreationParam{// SUPER type\n                        \"CREATE MASKING POLICY mp_super_type WITH \"\n                        \"(a super) USING (a.x.y + 4)\",\n                        \"mp_super_type\"},\n    PolicyCreationParam{\n        // Policy with CASES\n        \"CREATE MASKING POLICY mp_cases WITH \"\n        \"(a int) USING (CASE a WHEN 3 THEN a + 1 ELSE a - 1 END)\",\n        \"mp_cases\"},\n    PolicyCreationParam{// policy with expression type error\n                        \"CREATE MASKING POLICY mp_expression_type_error WITH \"\n                        \"(a text, b float) USING (a - 1, a + b > 5)\",\n                        \"mp_expression_type_error\"}}", "mimetype": "text/plain", "start_char_idx": 3215, "end_char_idx": 4097, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4f2a3a46-b1ef-4cd9-8cad-e46aad4d8ea9": {"__data__": {"id_": "4f2a3a46-b1ef-4cd9-8cad-e46aad4d8ea9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4868997a-370f-4997-9833-bacabc4a032e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "74e2d4ac922c07835f5bcfd4fb456670fd5f223084170d587c704837c924ddac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4bfa466a-677e-4951-8143-eb2a73b330e0", "node_type": "1", "metadata": {}, "hash": "f1b8086dc5d4acab24ee1e7e41044ca861295a0962bb2d9b78baddd3e3830dc3", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 611, "end_char_idx": 612, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4bfa466a-677e-4951-8143-eb2a73b330e0": {"__data__": {"id_": "4bfa466a-677e-4951-8143-eb2a73b330e0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4f2a3a46-b1ef-4cd9-8cad-e46aad4d8ea9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b02d66c9c9ae7bb8cfacf69eff0515dc1bd4a50d40016b6508bc62a2440adef9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b10d1b0c-5e23-4c50-9589-ccc3e9fa6567", "node_type": "1", "metadata": {}, "hash": "3e343f2d6a7b017690a05ea007db18c7d4d86c26839889db4ecdc706ccfac0da", "class_name": "RelatedNodeInfo"}}, "text": "INSTANTIATE_TEST_SUITE_P(PolicyCreationTests, TestDDMPolicyCreation,\n                         ::testing::ValuesIn(policy_create_test_cases));\n}", "mimetype": "text/plain", "start_char_idx": 4100, "end_char_idx": 4243, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b10d1b0c-5e23-4c50-9589-ccc3e9fa6567": {"__data__": {"id_": "b10d1b0c-5e23-4c50-9589-ccc3e9fa6567", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "982b5303661aa62a6747f919e80c3a3f2ff2f651629f3850cbef1b073c95d438", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4bfa466a-677e-4951-8143-eb2a73b330e0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "197d17a86be9529abd355665f865a2941e650928b3bbacf5735a2ffbef36e366", "class_name": "RelatedNodeInfo"}}, "text": ";  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 4243, "end_char_idx": 4265, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "062f71ed-56da-4ee5-9ce5-429a38f6321f": {"__data__": {"id_": "062f71ed-56da-4ee5-9ce5-429a38f6321f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.hpp", "file_name": "test_create_policy.hpp", "file_size": 681, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "40be1f8c-df6b-42e1-9966-53651c2ea9c8", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.hpp", "file_name": "test_create_policy.hpp", "file_size": 681, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "619d54bce20a8c4bcfb5481e91c8f1baa266853d9557d42b6cf5fbbd8590f4c5", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#pragma once\n\n#include <gtest/gtest.h>\n\n#include \"ddm/ddm_policy.hpp\"\n\n#include \"pg/test/pg_test.hpp\"\n\n#include <string>\n\nnamespace pgtest {\n/// Container for parameters of the test case of policy creation.\nstruct PolicyCreationParam {\n  /// Query to be executed to create the masking policy.\n  std::string query;\n  /// Name of the masking policy to be created.\n  std::string name;\n};\nclass TestDDMPolicyCreation\n    : public pg::PgTest,\n      public ::testing::WithParamInterface<PolicyCreationParam> {\n public:\n  static void SetUpTestCase();\n  static void TearDownTestCase();\n};\n}  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 680, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1fc1e9cb-3921-4784-8faf-0e4178189d20": {"__data__": {"id_": "1fc1e9cb-3921-4784-8faf-0e4178189d20", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "004cca88-e3b9-40f6-8684-dbf6ab133614", "node_type": "1", "metadata": {}, "hash": "4f3c3198e4589f474fe1f420642cb6c2f5f0cee2aac24643c5168bae2968f849", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n// These two includes must go first and in this order.\n// clang-format off\n#include <gmock/gmock-matchers.h>\n#include <gtest/gtest.h>\n#include \"pg/test/pg_test.hpp\"\n#include <gmock/gmock.h>\n// clang-format on\n\n#include \"ddm/ddm_lf_alp.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/policy_access.h\"\n#include \"ddm/rewriter.h\"\n#include \"external_catalog/model/constants.hpp\"\n#include \"federation/FederatedSnapshotManager.hpp\"\n#include \"nodes/nodes_print.h\"\n#include \"omnisql/omnisql_print_sql.hpp\"\n#include \"omnisql/omnisql_translate_query.hpp\"\n#include \"optimizer/clauses.h\"\n#include \"rewrite/rewriteHandler.h\"\n#include \"sys/event_list.hpp\"\n#include \"utils/lsyscache.h\"\n\n#include <boost/algorithm/string/case_conv.hpp>\n\n#include <sstream>\n#include <unordered_map>\n\nextern bool gconf_enable_lf_alp;\nextern bool gconf_enable_lf_alp_var_optimization;\nextern bool gconf_enable_object_transform;\nextern bool gconf_enable_qpc_for_session;\nextern bool g_pgtest_ddm;\nextern bool gconf_spectrum_enable_lf_data_filters;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1087, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "004cca88-e3b9-40f6-8684-dbf6ab133614": {"__data__": {"id_": "004cca88-e3b9-40f6-8684-dbf6ab133614", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1fc1e9cb-3921-4784-8faf-0e4178189d20", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c710f1453ff7896290b4b83140b0776ba3b4eab04cff0b41991980a3f91d9204", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90aa1a71-3d45-4200-81c8-78b3d96639e6", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 1089, "end_char_idx": 1107, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "90aa1a71-3d45-4200-81c8-78b3d96639e6": {"__data__": {"id_": "90aa1a71-3d45-4200-81c8-78b3d96639e6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "004cca88-e3b9-40f6-8684-dbf6ab133614", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "15db151a193d629d820c571f44c00e8f8469a46e23a27604dbecf655f7e10607", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b05c1cf8-96d8-4e2c-a82d-a3aee836a1df", "node_type": "1", "metadata": {}, "hash": "9ef3a2dff14189b7f48ec24bc307b48d29d77f694648dbc95695fb18d76a6ffc", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 1108, "end_char_idx": 1109, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b05c1cf8-96d8-4e2c-a82d-a3aee836a1df": {"__data__": {"id_": "b05c1cf8-96d8-4e2c-a82d-a3aee836a1df", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90aa1a71-3d45-4200-81c8-78b3d96639e6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "01a6340cdb78ea1c7b17ec785e71e3f3a96b3a2c04de3bbe49f2806e1dec9814", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ceda3b80-659c-4786-a7d8-ccd6c7fbb9a4", "node_type": "1", "metadata": {}, "hash": "123ef997ec904804dc12bc275c8bac1b70f4821b032bd766c068d611c634d171", "class_name": "RelatedNodeInfo"}}, "text": "class TestDDMLakeFormationALP : public pg::PgTest", "mimetype": "text/plain", "start_char_idx": 1111, "end_char_idx": 1160, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ceda3b80-659c-4786-a7d8-ccd6c7fbb9a4": {"__data__": {"id_": "ceda3b80-659c-4786-a7d8-ccd6c7fbb9a4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b05c1cf8-96d8-4e2c-a82d-a3aee836a1df", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "69793101845ba652647fa743efef8e11bdebc4b7a4c065132fc35c5bb1dbb13e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23edbdcd-462f-40a1-917c-3f5277250517", "node_type": "1", "metadata": {}, "hash": "47b6a63cc489a64ab7f25862bd19d332d2b8d71b0d937f141ad9f5ce0b9a8e0d", "class_name": "RelatedNodeInfo"}}, "text": "{\n public:\n  TestDDMLakeFormationALP() {\n    {\n      auto select_q = reinterpret_cast<Query*>(\n          linitial(pg::Analyze(pg::Parse(\"SELECT * FROM t_dp49994_mutator\"))));\n      auto table_rte =\n          reinterpret_cast<RangeTblEntry*>(linitial(select_q->rtable));\n      table_oid_map.insert({\"t_dp49994_mutator\", table_rte->relid});\n    }\n    {\n      auto select_q = reinterpret_cast<Query*>(linitial(pg::Analyze(\n          pg::Parse(\"SELECT * FROM t_dp49994_double_quotes_mutator\"))));\n      auto table_rte =\n          reinterpret_cast<RangeTblEntry*>(linitial(select_q->rtable));\n      table_oid_map.insert(\n          {\"t_dp49994_double_quotes_mutator\", table_rte->relid});\n    }\n  }\n\n protected:\n  std::unordered_map<std::string, Oid> table_oid_map;\n\n  void RewriteTest(\n      std::string user_query, std::string lf_policy_json,\n      std::string query_expected_str, bool has_ddm_rewrite,\n      std::string table_name = \"t_dp49994_mutator\" /* main table */);", "mimetype": "text/plain", "start_char_idx": 1161, "end_char_idx": 2128, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "23edbdcd-462f-40a1-917c-3f5277250517": {"__data__": {"id_": "23edbdcd-462f-40a1-917c-3f5277250517", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ceda3b80-659c-4786-a7d8-ccd6c7fbb9a4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "17d7ef3f8a80c6280479d71da53f85ea435997b58e66914062704d1587af2258", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3996553f-2995-44e5-b897-ec49c7d72ca6", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "static void SetUpTestCase() {\n    gconf_enable_lf_alp = true;\n    // Enable LF data filters, in order to retrieve ALP policies.\n    gconf_spectrum_enable_lf_data_filters = true;\n    // This test suite assumes no var-level optimization.\n    gconf_enable_lf_alp_var_optimization = false;\n    gconf_enable_object_transform = true;\n    gconf_enable_qpc_for_session = false;\n    g_pgtest_ddm = true;\n\n    pg::RunQuery(R\"(\n      CREATE TABLE t_dp49994_mutator (\n        col_int INT,\n        col_text TEXT,\n        col_bool BOOLEAN,\n        col_super_1 SUPER,\n        col_super_2 SUPER\n      )\n    )\");\n\n    // Table with double quoted identifiers\n    pg::RunQuery(R\"(\n      CREATE TABLE t_dp49994_double_quotes_mutator (\n        \"col_int\" INT,\n        \"col_super\"\"double_quotes\" SUPER,\n        \"col_super\"\"\"\"two_double_quotes\" SUPER\n      )\n    )\");\n    if (get_user_id_by_name(\"u_dp49994\") == InvalidAclId) {\n      // We have another test suite that inherits from this one. This user is\n      // never DROPed as it is a master user, so we need to ensure we don't\n      // CREATE it twice.\n      pg::RunQuery(\"CREATE USER u_dp49994 WITH PASSWORD 'Test1234!'\");\n      pg::RunQuery(\"ALTER USER u_dp49994 with CREATEUSER\");\n    }\n  }\n\n  static void TearDownTestCase() {\n    pg::RunQuery(\"DROP TABLE t_dp49994_mutator\");\n    pg::RunQuery(\"DROP TABLE t_dp49994_double_quotes_mutator\");\n    // Do not DROP u_dp49994 since it's a master user.\n  }\n}", "mimetype": "text/plain", "start_char_idx": 2132, "end_char_idx": 3567, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3996553f-2995-44e5-b897-ec49c7d72ca6": {"__data__": {"id_": "3996553f-2995-44e5-b897-ec49c7d72ca6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "23edbdcd-462f-40a1-917c-3f5277250517", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bdb8e03764e2c52b4c9c4259911a61cabac920826977a0a74063211a25859a1e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "58a3e985-a318-4229-a968-d04216d1e94b", "node_type": "1", "metadata": {}, "hash": "1f46f014a66fa5187b45f6d808ff83a313edc6337f688f24d19dda670d6ee90c", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 874, "end_char_idx": 875, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "58a3e985-a318-4229-a968-d04216d1e94b": {"__data__": {"id_": "58a3e985-a318-4229-a968-d04216d1e94b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3996553f-2995-44e5-b897-ec49c7d72ca6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d3cdb669f0f373f7b7c564297e1387825d8ea238923d207787e6e0dae3c5ecf3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4d3cebae-82a3-4dc7-80ca-39cfae154dff", "node_type": "1", "metadata": {}, "hash": "85f67d99572646524dcee9228f7a596cc62ed143e2225a80b1f8e1a119a473db", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, ParsingNestedPaths)", "mimetype": "text/plain", "start_char_idx": 3570, "end_char_idx": 3624, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4d3cebae-82a3-4dc7-80ca-39cfae154dff": {"__data__": {"id_": "4d3cebae-82a3-4dc7-80ca-39cfae154dff", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "58a3e985-a318-4229-a968-d04216d1e94b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6356be94aa198303945e77fcbf208b14326a3f7c9fcacb25ae9e3f0ff6af328d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1263e12a-2103-4eac-a6c3-e6b904c677f2", "node_type": "1", "metadata": {}, "hash": "1c6c6016884f20c41a3fd9c715c2469ffd51c6ce3931fe8395f660df589c83ab", "class_name": "RelatedNodeInfo"}}, "text": "{\n  Event_info mock_lf_event(EtLakeFormationMockTableResponse);\n  mock_lf_event.m_args[\"remote_db.remote_schema.remote_relation\"] =\n      R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"d\\\"\",\n            \"\\\"b\\\".\\\"level_1_a\\\".\\\"level_2_a\\\"\",\n            \"\\\"b\\\".\\\"level_1_a\\\"\",\n            \"\\\"b\\\".\\\"level_1_a\\\".\\\"level_2_b\\\"\",\n            \"\\\"b\\\".\\\"level_1_c\\\".\\\"level_2_a\\\"\",\n            \"\\\"b\\\".\\\"level_1_b\\\"\",\n            \"\\\"c\\\".\\\"something\\\"\"\n        ]\n      })\";\n  xen_populate_single_event(&mock_lf_event);\n\n  Xen->events->set_event(&mock_lf_event);\n\n  {\n    // Make sure GetAuthorizedColumns still works as expected.\n    auto [found, columns] = fsmutils::GetAuthorizedColumns(\n        \"remote_db\", \"remote_schema\", \"remote_relation\");\n    EXPECT_TRUE(found);\n\n    std::vector<std::string> expected_columns = {\"d\", \"b\", \"c\"};\n\n    EXPECT_EQ(expected_columns.size(), columns.size());\n    for (auto&& column : expected_columns) {\n      EXPECT_TRUE(std::find(columns.begin(), columns.end(), column) !=\n                  columns.end());\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 3625, "end_char_idx": 4679, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1263e12a-2103-4eac-a6c3-e6b904c677f2": {"__data__": {"id_": "1263e12a-2103-4eac-a6c3-e6b904c677f2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4d3cebae-82a3-4dc7-80ca-39cfae154dff", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ace3ce2c6eb96d2381faccb6e2f4328ef690663baa0732939fe31dba2796bfd1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "00e17bd2-b9f4-457b-97ef-a672448aa226", "node_type": "1", "metadata": {}, "hash": "edda35433d0c53858f08c4aec6e7669a4b9b71521ceddb2064274e6d3cf04301", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // Test GetAuthorizedNestedPaths.\n    auto&& [found, paths_map] = fsmutils::GetAuthorizedNestedPaths(\n        \"remote_db\", \"remote_schema\", \"remote_relation\");\n\n    EXPECT_TRUE(found);\n    EXPECT_EQ(2, paths_map.size());\n    EXPECT_TRUE(paths_map.find(R\"(\"b\")\") != paths_map.end());\n    EXPECT_TRUE(paths_map.find(R\"(\"c\")\") != paths_map.end());\n\n    std::vector<std::string> expected_b = {R\"(\"level_1_a\")\", R\"(\"level_1_b\")\",\n                                           R\"(\"level_1_c\".\"level_2_a\")\"};\n    std::vector<std::string> expected_c = {R\"(\"something\")\"};\n    std::sort(expected_b.begin(), expected_b.end());\n\n    std::vector<std::string> actual_b, actual_c;\n    std::vector<std::string_view> stack;\n    PathSetView(paths_map[R\"(\"b\")\"]).Export(&actual_b, &stack);\n    PathSetView(paths_map[R\"(\"c\")\"]).Export(&actual_c, &stack);\n    std::sort(actual_b.begin(), actual_b.end());\n\n    EXPECT_EQ(expected_b, actual_b);\n    EXPECT_EQ(expected_c, actual_c);\n  }\n\n  Xen->events->unset_event(EtLakeFormationMockTableResponse);\n}", "mimetype": "text/plain", "start_char_idx": 4683, "end_char_idx": 5714, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "00e17bd2-b9f4-457b-97ef-a672448aa226": {"__data__": {"id_": "00e17bd2-b9f4-457b-97ef-a672448aa226", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1263e12a-2103-4eac-a6c3-e6b904c677f2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7bfcea7d11e8008a9420a60f1b80b62bb55e6d2df13b1280b8f6e7c513e9a423", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "52b6ffa1-37c5-41bf-abd8-46a42c486475", "node_type": "1", "metadata": {}, "hash": "263bfa5b28be693292632ec273a64e369275dd1444814087fb5003e21bd20d71", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, ParsingNestedPathsError) {\n  Event_info mock_lf_event(EtLakeFormationMockTableResponse);\n  mock_lf_event.m_args[\"remote_db.remote_schema.remote_relation\"] =\n      R\"(text://{\n        \"AuthorizedColumns\": [\n            \"malformed_entry_without_quotes\"\n        ]\n      })\";\n  xen_populate_single_event(&mock_lf_event);\n\n  Xen->events->set_event(&mock_lf_event);\n\n  try {\n    fsmutils::GetAuthorizedColumns(\"remote_db\", \"remote_schema\",\n                                   \"remote_relation\");\n    FAIL() << \"Expected ParseError\";\n  } catch (ParseError const& err) {\n    EXPECT_THAT(\n        err.what(),\n        ::testing::HasSubstr(::awsapi::datacatalog::keys::AUTHORIZED_COLUMNS));\n  } catch (...) {\n    FAIL() << \"Wring exception\";\n  }\n\n  Xen->events->unset_event(EtLakeFormationMockTableResponse);\n}", "mimetype": "text/plain", "start_char_idx": 5716, "end_char_idx": 6549, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "52b6ffa1-37c5-41bf-abd8-46a42c486475": {"__data__": {"id_": "52b6ffa1-37c5-41bf-abd8-46a42c486475", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "00e17bd2-b9f4-457b-97ef-a672448aa226", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "89d2f33fc1d4e93e74c671daf38de9b998feb803e5d5981317d024e38465138e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5084214d-07b9-45cf-9be6-f358e7dce523", "node_type": "1", "metadata": {}, "hash": "70df5ee74e2cd00b06334d424d63cc12bd49e25fd4255ad9a972f9d44f791da4", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMLakeFormationALP::RewriteTest(std::string user_query,\n                                          std::string lf_policy_json,\n                                          std::string query_expected_str,\n                                          bool has_ddm_rewrite,\n                                          std::string table_name)", "mimetype": "text/plain", "start_char_idx": 6551, "end_char_idx": 6890, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5084214d-07b9-45cf-9be6-f358e7dce523": {"__data__": {"id_": "5084214d-07b9-45cf-9be6-f358e7dce523", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "52b6ffa1-37c5-41bf-abd8-46a42c486475", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e6cce428b188c5ae9c0e26a7dbbd9b47126cf0084cdc5d6112cc2eebd532518a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4ab7598c-ca0b-462e-8d82-769aa7f721a6", "node_type": "1", "metadata": {}, "hash": "ec0f1f9dc5c11039369e62778727f968e4928c7606214b57c8a166dd15ae111e", "class_name": "RelatedNodeInfo"}}, "text": "{\n  Event_info mock_lf_event(EtLakeFormationMockTableResponse);\n  const std::string db_name = \"dev\";\n  const std::string ns_name = \"pgtest_testcase_schema\";\n  auto relation_fmt =\n      boost::format(\"%1%.%2%.%3%\") % db_name % ns_name % table_name;\n  mock_lf_event.m_args[relation_fmt.str().c_str()] = lf_policy_json.c_str();\n  xen_populate_single_event(&mock_lf_event);\n  Xen->events->set_event(&mock_lf_event);\n\n  Event_info mock_lf_is_localized_event(EtLakeFormationMockRTELocalViaLF);\n  mock_lf_is_localized_event.m_args[\"oid\"] =\n      std::to_string(table_oid_map[table_name]).c_str();\n  mock_lf_is_localized_event.m_args[\"db_name\"] = db_name;\n  mock_lf_is_localized_event.m_args[\"ns_name\"] = ns_name;\n  mock_lf_is_localized_event.m_args[\"rel_name\"] = table_name;\n  xen_populate_single_event(&mock_lf_is_localized_event);\n  Xen->events->set_event(&mock_lf_is_localized_event);\n\n  auto current_id = GetUserId();\n  auto target_id = get_user_id_by_name(\"u_dp49994\");\n  SetUserId(target_id);\n\n  auto query_fmt = boost::format(\"SELECT * FROM %1%\") % table_name;\n\n  RangeTblEntry* main_table_rte = reinterpret_cast<RangeTblEntry*>(\n      linitial(reinterpret_cast<Query*>(\n                   linitial(pg::Analyze(pg::Parse(query_fmt.str()))))\n                   ->rtable));\n\n  ASSERT_EQ(has_ddm_rewrite, HasDDMRewrite(main_table_rte));", "mimetype": "text/plain", "start_char_idx": 6891, "end_char_idx": 8224, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4ab7598c-ca0b-462e-8d82-769aa7f721a6": {"__data__": {"id_": "4ab7598c-ca0b-462e-8d82-769aa7f721a6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5084214d-07b9-45cf-9be6-f358e7dce523", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "aedd4c3908ef87247ca6e8b30438e22bddf25b5289d54d52b0b3b666172ac327", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5a9cfd7a-b232-43ef-abb7-4dc60a956913", "node_type": "1", "metadata": {}, "hash": "e546e739308c06f82d15377d70a4d45d2f7598ec449261a62ee12c30172c33da", "class_name": "RelatedNodeInfo"}}, "text": "if (has_ddm_rewrite) {\n    Query* query =\n        reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(user_query))));\n    auto query_rewritten =\n        ddm::RewriteQuery(copyObject(query), false /* log_applied_policy */)\n            .rewrite;\n    auto query_rewritten_omni =\n        omnisql::PrintSQL(omnisql::TranslateQuery(query_rewritten));\n\n    Query* query_expected = reinterpret_cast<Query*>(\n        linitial(pg::Analyze(pg::Parse(query_expected_str))));\n    std::string query_expected_omni =\n        omnisql::PrintSQL(omnisql::TranslateQuery(query_expected));\n\n    ASSERT_EQ(query_expected_omni, query_rewritten_omni);\n  }\n\n  SetUserId(current_id);\n\n  Xen->events->unset_event(EtLakeFormationMockTableResponse);\n  Xen->events->unset_event(EtLakeFormationMockRTELocalViaLF);\n}", "mimetype": "text/plain", "start_char_idx": 8227, "end_char_idx": 9015, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5a9cfd7a-b232-43ef-abb7-4dc60a956913": {"__data__": {"id_": "5a9cfd7a-b232-43ef-abb7-4dc60a956913", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ab7598c-ca0b-462e-8d82-769aa7f721a6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "87f2a3dd8650a84970ee44522e980efdf3321adb40542c425680c9b4644c398d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "953aed7e-9d2d-4b00-9e54-cfd69203165c", "node_type": "1", "metadata": {}, "hash": "7c44b078af968b3c5a3ff02b3b15278029e55df93560808073b1cefea2b4a88e", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, SimpleRewrite) {\n  RewriteTest(\n      /* user_query */\n      std::string(R\"(\n        SELECT\n          *\n        FROM\n          t_dp49994_mutator)\"),\n      /* lf_policy_json */\n      std::string(R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super_1\\\".\\\"level_1_a\\\".\\\"level_2_a\\\"\",\n            \"\\\"col_super_1\\\".\\\"level_1_a\\\"\",\n            \"\\\"col_super_1\\\".\\\"level_1_a\\\".\\\"level_2_b\\\"\",\n            \"\\\"col_super_1\\\".\\\"level_1_c\\\".\\\"level_2_a\\\"\",\n            \"\\\"col_super_1\\\".\\\"level_1_b\\\"\",\n            \"\\\"col_super_2\\\".\\\"something\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\"),\n      /* query_expected_str */\n      std::string(R\"(\n        SELECT\n          \"col_super_1\",\n          \"col_super_2\"\n        FROM\n          (\n            SELECT\n              \"col_int\",\n              \"col_text\",\n              \"col_bool\",\n              OBJECT_TRANSFORM(\n                \"col_super_1\"\n                KEEP\n                  '\"level_1_a\"',\n                  '\"level_1_b\"',\n                  '\"level_1_c\".\"level_2_a\"'\n              ) AS \"col_super_1\",\n              OBJECT_TRANSFORM(\n                \"col_super_2\"\n                KEEP\n                  '\"something\"'\n              ) AS \"col_super_2\"\n            FROM\n              \"t_dp49994_mutator\"\n          ) AS \"t_dp49994_mutator\"\n      )\"),\n      true /* has_ddm_rewrite */);\n}", "mimetype": "text/plain", "start_char_idx": 9017, "end_char_idx": 10405, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "953aed7e-9d2d-4b00-9e54-cfd69203165c": {"__data__": {"id_": "953aed7e-9d2d-4b00-9e54-cfd69203165c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5a9cfd7a-b232-43ef-abb7-4dc60a956913", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b369db850a5722f41a9dbaaa197c08bec0fbacd873d884ae6004ad83b3cbc4a1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0924744a-fbf8-4eb9-b895-029cde6d6b33", "node_type": "1", "metadata": {}, "hash": "0ef97eff70c8b6faf110a43df8e36a135c78e56f244315535ff5be031d083a0a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, NoRewrite) {\n  RewriteTest(\n      /* user_query */\n      std::string(R\"(\n        SELECT\n          *\n        FROM\n          t_dp49994_mutator)\"),\n      /* lf_policy_json */\n      std::string(R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super_1\\\"\",\n            \"\\\"col_super_2\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\"),\n      /* query_expected_str */\n      std::string(), false /* has_ddm_rewrite */);\n}\n\nPG_TEST_F(TestDDMLakeFormationALP, InjectionAttackAttempt) {\n  RewriteTest(\n      /* user_query */\n      std::string(R\"(\n        SELECT\n          *\n        FROM\n          t_dp49994_mutator)\"),\n      /* lf_policy_json */\n      std::string(R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super_1\\\".\\\"current_user: ' || CURRENT_USER || ' end\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\"),\n      /* query_expected_str */\n      std::string(R\"(\n        SELECT\n          \"col_super_1\"\n        FROM\n          (\n            SELECT\n              \"col_int\",\n              \"col_text\",\n              \"col_bool\",\n              OBJECT_TRANSFORM(\n                \"col_super_1\"\n                KEEP\n                  '\"current_user: \\' || CURRENT_USER || \\' end\"'\n              ) AS \"col_super_1\",\n              \"col_super_2\"\n            FROM\n              \"t_dp49994_mutator\"\n          ) AS \"t_dp49994_mutator\"\n      )\"),\n      true /* has_ddm_rewrite */);\n}", "mimetype": "text/plain", "start_char_idx": 10407, "end_char_idx": 11851, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0924744a-fbf8-4eb9-b895-029cde6d6b33": {"__data__": {"id_": "0924744a-fbf8-4eb9-b895-029cde6d6b33", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "953aed7e-9d2d-4b00-9e54-cfd69203165c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6761836ac489f006e9c5fbb22cb51470cecd8743983545c1d07e0dd7edd14f6a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d780237-530b-4a3d-a54e-1ccb741e48f8", "node_type": "1", "metadata": {}, "hash": "5f35e106e40d159bd7d9d131b9f1e01df6395014a6a78da31a8d548a98bc89cc", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, DoubleQuotesInPaths) {\n  RewriteTest(\n      /* user_query */\n      std::string(R\"(\n        SELECT\n          *\n        FROM\n          t_dp49994_double_quotes_mutator)\"),\n      /* lf_policy_json */\n      std::string(R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super\\\"\\\"double_quotes\\\".\\\"level_1\\\"\\\"double_quotes\\\"\",\n            \"\\\"col_super\\\"\\\"\\\"\\\"two_double_quotes\\\".\\\"level_1\\\"\\\"\\\"\\\"two_double_quotes\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\"),\n      /* query_expected_str */\n      std::string(R\"(\n        SELECT\n          \"col_super\"\"double_quotes\",\n          \"col_super\"\"\"\"two_double_quotes\"\n        FROM\n          (\n            SELECT\n              \"col_int\",\n              OBJECT_TRANSFORM(\n                \"col_super\"\"double_quotes\"\n                KEEP\n                  '\"level_1\"double_quotes\"'\n              ) AS \"col_super\"\"double_quotes\",\n              OBJECT_TRANSFORM(\n                \"col_super\"\"\"\"two_double_quotes\"\n                KEEP\n                  '\"level_1\"\"two_double_quotes\"'\n              ) AS \"col_super\"\"\"\"two_double_quotes\"\n            FROM\n              \"t_dp49994_double_quotes_mutator\"\n          ) AS \"t_dp49994_double_quotes_mutator\"\n      )\"),\n      true /* has_ddm_rewrite */,\n      \"t_dp49994_double_quotes_mutator\" /* table_name */);\n}", "mimetype": "text/plain", "start_char_idx": 11853, "end_char_idx": 13196, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8d780237-530b-4a3d-a54e-1ccb741e48f8": {"__data__": {"id_": "8d780237-530b-4a3d-a54e-1ccb741e48f8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0924744a-fbf8-4eb9-b895-029cde6d6b33", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1f56ff1f2ceb00a1557d9dddfe1b6bb24c95c34b7eff1f00b24e523aacff8fac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ea5cc5c-955f-49bb-a98f-dca6c3745ed5", "node_type": "1", "metadata": {}, "hash": "ed67c060c6a3a7639ea65171066053c30520ed82b81735a8266e8ccd3088a89a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, VariableLevelALPSelect) {\n  bool old_guc = gconf_enable_lf_alp_var_optimization;\n  gconf_enable_lf_alp_var_optimization = true;\n  SCOPE_EXIT_GUARD({ gconf_enable_lf_alp_var_optimization = old_guc; });\n\n  RewriteTest(\n      /* user_query */\n      std::string(R\"(\n        SELECT\n          \"col_super_1\".\"level_1_a\".\"authorized\",\n          \"col_super_2\"\n        FROM\n          t_dp49994_mutator)\"),\n      /* lf_policy_json */\n      std::string(R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super_1\\\".\\\"level_1_a\\\"\",\n            \"\\\"col_super_2\\\".\\\"level_1_b\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\"),\n      /* query_expected_str */\n      std::string(R\"(\n        SELECT\n          \"col_super_1\".\"level_1_a\".\"authorized\",\n          \"col_super_2\"\n        FROM\n          (\n            SELECT\n              \"col_int\",\n              \"col_text\",\n              \"col_bool\",\n              \"col_super_1\",\n              OBJECT_TRANSFORM(\n                \"col_super_2\"\n                KEEP\n                  '\"level_1_b\"'\n              ) AS \"col_super_2\"\n            FROM\n              \"t_dp49994_mutator\"\n          ) AS \"t_dp49994_mutator\"\n      )\"),\n      true /* has_ddm_rewrite */);\n}", "mimetype": "text/plain", "start_char_idx": 13198, "end_char_idx": 14438, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6ea5cc5c-955f-49bb-a98f-dca6c3745ed5": {"__data__": {"id_": "6ea5cc5c-955f-49bb-a98f-dca6c3745ed5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d780237-530b-4a3d-a54e-1ccb741e48f8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "217f546b5d2f7b4aee09f5a1aedb3f84f1a726f8a3f6f9bfdf32bd98252d711f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d3e5d622-5ec0-4f96-9d04-9250dcc6218e", "node_type": "1", "metadata": {}, "hash": "58bae69dbdbc25974ceb5dc6c44f903e30bef4ff1f773c835f3ae661d543fbbe", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMLakeFormationALP, VariableLevelALPWhere) {\n  bool old_guc = gconf_enable_lf_alp_var_optimization;\n  gconf_enable_lf_alp_var_optimization = true;\n  SCOPE_EXIT_GUARD({ gconf_enable_lf_alp_var_optimization = old_guc; });\n\n  RewriteTest(\n      /* user_query */\n      std::string(R\"(\n        SELECT\n          1 AS result\n        FROM\n          t_dp49994_mutator\n        WHERE\n          \"col_super_1\".\"level_1_a\" = json_parse('{ \"a\": 5 }')\n      )\"),\n      /* lf_policy_json */\n      std::string(R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super_1\\\".\\\"level_1_a\\\".\\\"level_2_b\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\"),\n      /* query_expected_str */\n      std::string(R\"(\n        SELECT\n          1::INT AS result\n        FROM\n          (\n            SELECT\n              \"col_int\",\n              \"col_text\",\n              \"col_bool\",\n              OBJECT_TRANSFORM(\n                \"col_super_1\"\n                KEEP\n                  '\"level_1_a\".\"level_2_b\"'\n              ) AS \"col_super_1\",\n              \"col_super_2\"\n            FROM\n              \"t_dp49994_mutator\"\n          ) AS \"t_dp49994_mutator\"\n        WHERE\n          \"col_super_1\".\"level_1_a\" = json_parse('{ \"a\": 5 }')\n      )\"),\n      true /* has_ddm_rewrite */);\n}\n\nclass TestDDMLakeFormationPreALP : public pg::PgTest {\n protected:\n  static void SetUpTestCase() {\n    gconf_enable_lf_alp = false;\n    gconf_enable_object_transform = true;\n  }\n};", "mimetype": "text/plain", "start_char_idx": 14440, "end_char_idx": 15904, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d3e5d622-5ec0-4f96-9d04-9250dcc6218e": {"__data__": {"id_": "d3e5d622-5ec0-4f96-9d04-9250dcc6218e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ea5cc5c-955f-49bb-a98f-dca6c3745ed5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "925bb45ea9a8a456e1f70ce35627e471bb1a4d07fd99f15d046a5b09894f9b65", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5ea222bc-52f1-4e9e-9ff2-aa0381438541", "node_type": "1", "metadata": {}, "hash": "0f3005e1e76175b97e87f724e2a2409f295c09d989295ce74dbbd694b84fb418", "class_name": "RelatedNodeInfo"}}, "text": "/// Make sure GetAuthorizedColumns still works as expected when the LF-ALP GUC\n/// is OFF.\nPG_TEST_F(TestDDMLakeFormationPreALP, ColumnsParsing) {\n  Event_info mock_lf_event(EtLakeFormationMockTableResponse);\n  mock_lf_event.m_args[\"remote_db.remote_schema.remote_relation\"] =\n      R\"(text://{\n        \"AuthorizedColumns\": [\n            \"column_1\",\n            \"column_2.something\",\n            \"\\\"column_3\\\"\",\n            \"\\\"column_5\\\".\\\"other\\\"\"\n        ]\n      })\";\n  xen_populate_single_event(&mock_lf_event);\n\n  Xen->events->set_event(&mock_lf_event);\n\n  // Make sure GetAuthorizedColumns still works as expected.\n  auto [found, columns] = fsmutils::GetAuthorizedColumns(\n      \"remote_db\", \"remote_schema\", \"remote_relation\");\n  EXPECT_TRUE(found);\n  std::vector<std::string> expected_columns = {\"column_1\", \"column_2.something\",\n                                               \"\\\"column_3\\\"\",\n                                               \"\\\"column_5\\\".\\\"other\\\"\"};\n\n  EXPECT_EQ(expected_columns.size(), columns.size());\n  for (auto&& column : expected_columns) {\n    EXPECT_TRUE(std::find(columns.begin(), columns.end(), column) !=\n                columns.end());\n  }\n\n  Xen->events->unset_event(EtLakeFormationMockTableResponse);\n}\n\nclass TestDDMLakeFormationPostALP : public pg::PgTest {\n protected:\n  static void SetUpTestCase() {\n    gconf_enable_lf_alp = true;\n    gconf_enable_object_transform = true;\n  }\n};", "mimetype": "text/plain", "start_char_idx": 15906, "end_char_idx": 17329, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5ea222bc-52f1-4e9e-9ff2-aa0381438541": {"__data__": {"id_": "5ea222bc-52f1-4e9e-9ff2-aa0381438541", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d3e5d622-5ec0-4f96-9d04-9250dcc6218e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3bcf2d9ffbc6cc6a67fdc209e69d585b9ff7bf1253b886df04a3ce31419c1679", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2eb6cac7-f6ff-4902-aa8e-f65f32aa1428", "node_type": "1", "metadata": {}, "hash": "4dd5a89f015fd4cd96ff8a5e20087a3832aa5fe67c5291e3bb9399edadcfbea9", "class_name": "RelatedNodeInfo"}}, "text": "/// Make sure GetAuthorizedColumns still works as expected when the LF-ALP GUC\n/// is ON.\nPG_TEST_F(TestDDMLakeFormationPostALP, ColumnsParsing) {\n  Event_info mock_lf_event(EtLakeFormationMockTableResponse);\n  mock_lf_event.m_args[\"remote_db.remote_schema.remote_relation\"] =\n      R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"column_1\\\"\",\n            \"\\\"column_2\\\".\\\"something\\\"\",\n            \"\\\"column_2\\\".\\\"something_else\\\"\",\n            \"\\\"column_3\\\"\",\n            \"\\\"column_5\\\".\\\"other\\\"\",\n            \"\\\"column_5.other\\\"\"\n        ]\n      })\";\n  xen_populate_single_event(&mock_lf_event);\n\n  Xen->events->set_event(&mock_lf_event);\n\n  // Make sure GetAuthorizedColumns still works as expected.\n  auto [found, columns] = fsmutils::GetAuthorizedColumns(\n      \"remote_db\", \"remote_schema\", \"remote_relation\");\n  EXPECT_TRUE(found);\n  std::vector<std::string> expected_columns = {\n      \"column_1\", \"column_2\", \"column_3\", \"column_5\", \"column_5.other\",\n  };\n\n  EXPECT_EQ(expected_columns.size(), columns.size());\n  for (auto&& column : expected_columns) {\n    EXPECT_TRUE(std::find(columns.begin(), columns.end(), column) !=\n                columns.end());\n  }\n\n  Xen->events->unset_event(EtLakeFormationMockTableResponse);\n}\n\nusing alp_decision = PathSet::PathMembership;", "mimetype": "text/plain", "start_char_idx": 17331, "end_char_idx": 18619, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2eb6cac7-f6ff-4902-aa8e-f65f32aa1428": {"__data__": {"id_": "2eb6cac7-f6ff-4902-aa8e-f65f32aa1428", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5ea222bc-52f1-4e9e-9ff2-aa0381438541", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f3e7547fd3ea2e51c1a5aac7aa04d48cd12036135f8c853fcd8438b15f68bd5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "64897206-76b6-485d-a2de-f53cadddf9f3", "node_type": "1", "metadata": {}, "hash": "4b0ffb07e41a9e7aad84baf7c0615d77f73cfe403610395753a1680719d83d30", "class_name": "RelatedNodeInfo"}}, "text": "struct VarLevelALPParam {\n  std::string case_name;\n  std::string user_query_fmt;\n  // Following are overrides for how to map pathset membership to ALP action for\n  // the particular test case. For most cases, these are default.\n  alp_decision override_authorized = alp_decision::kContainedFully;\n  alp_decision override_error = alp_decision::kNotContained;\n  alp_decision override_obj_transform = alp_decision::kContainedPartially;\n};", "mimetype": "text/plain", "start_char_idx": 18621, "end_char_idx": 19055, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "64897206-76b6-485d-a2de-f53cadddf9f3": {"__data__": {"id_": "64897206-76b6-485d-a2de-f53cadddf9f3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2eb6cac7-f6ff-4902-aa8e-f65f32aa1428", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d672c5a10d69e4ec7c7a63b61ad351bcbf8b0b570e1236f543727bb9fb010111", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6bf8eb0a-ca99-4d8e-83c8-439dd4c96cc7", "node_type": "1", "metadata": {}, "hash": "bab2779a32b610902416337bb57ee42ff5da417b865f50aafa75fa6a702999e5", "class_name": "RelatedNodeInfo"}}, "text": "class TestDDMVarLevelLakeFormationALP\n    : public TestDDMLakeFormationALP,\n      public ::testing::WithParamInterface<VarLevelALPParam> {\n public:\n  static void SetUpTestCase() {\n    TestDDMLakeFormationALP::SetUpTestCase();\n    pg::RunQuery(R\"(\n      CREATE TABLE t_dp54610_join (\n        col_int INT\n      )\n    )\");\n    pg::RunQuery(\"CREATE USER u_dp54610 WITH PASSWORD 'Test1234!'\");\n    pg::RunQuery(\"ALTER USER u_dp54610 with CREATEUSER\");\n    gconf_enable_lf_alp_var_optimization = true;\n  }\n  static void TearDownTestCase() {\n    pg::RunQuery(\"DROP TABLE t_dp54610_join\");\n    // Do not DROP u_dp54610 since it's a master user.\n    TestDDMLakeFormationALP::TearDownTestCase();\n  }\n\n  static void ValidateALPPolicyCorrectness(\n      std::optional<ddm::LFALPPolicy> lf_alp_policy,\n      const std::string& nested_path) {\n    EXPECT_TRUE(lf_alp_policy);\n    EXPECT_THAT(*lf_alp_policy, ::testing::SizeIs(1)) << nested_path;\n    const std::string top_level_name{R\"(\"col_super_1\")\"};\n    EXPECT_THAT(\n        *lf_alp_policy,\n        ::testing::Contains(::testing::Key(::testing::Eq(top_level_name))))\n        << nested_path;\n    std::vector<std::string> components;\n    std::vector<std::string_view> stack;\n    PathSetView((*lf_alp_policy)[top_level_name]).Export(&components, &stack);\n    EXPECT_THAT(components, ::testing::ElementsAre(R\"(\"transform\".\"nested\")\",\n                                                   R\"(\"authorized\")\"))\n        << nested_path;\n  }\n};", "mimetype": "text/plain", "start_char_idx": 19057, "end_char_idx": 20526, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6bf8eb0a-ca99-4d8e-83c8-439dd4c96cc7": {"__data__": {"id_": "6bf8eb0a-ca99-4d8e-83c8-439dd4c96cc7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "64897206-76b6-485d-a2de-f53cadddf9f3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0c6bb089537b28ac2f80f3f15bff2569779298e3e4975fc3d37c3828fe9f0a7d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "37b8e2be-52ab-45d9-a28b-f30eef92d25b", "node_type": "1", "metadata": {}, "hash": "9308f7279c7c111d7939af11c7fe2bde21e938faddd21de73fd66ca39e7a27e1", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_P(TestDDMVarLevelLakeFormationALP, VarLevelALP)", "mimetype": "text/plain", "start_char_idx": 20528, "end_char_idx": 20583, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "37b8e2be-52ab-45d9-a28b-f30eef92d25b": {"__data__": {"id_": "37b8e2be-52ab-45d9-a28b-f30eef92d25b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6bf8eb0a-ca99-4d8e-83c8-439dd4c96cc7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "824774d5df89c43baa3fb2b7fd117558ac75e3f083c75df1341a4f745c1d2923", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8419a9f3-e49c-4943-9f1e-9c6a933b2cd8", "node_type": "1", "metadata": {}, "hash": "6de77de5a1210fb5a7b1925f888b6caab2c4550118df9adb9d44091d9e9ab04e", "class_name": "RelatedNodeInfo"}}, "text": "{\n  Event_info mock_lf_event(EtLakeFormationMockTableResponse);\n  mock_lf_event.m_args[\"dev.pgtest_testcase_schema.t_dp49994_mutator\"] =\n      R\"(text://{\n        \"AuthorizedColumns\": [\n            \"\\\"col_super_1\\\".\\\"authorized\\\"\",\n            \"\\\"col_super_1\\\".\\\"transform\\\".\\\"nested\\\"\"\n        ],\n        \"CombinedRowFilter\": \"TRUE\"\n      })\";\n  xen_populate_single_event(&mock_lf_event);\n  Xen->events->set_event(&mock_lf_event);\n\n  Event_info mock_lf_is_localized_event(EtLakeFormationMockRTELocalViaLF);\n  mock_lf_is_localized_event.m_args[\"oid\"] =\n      std::to_string(table_oid_map[\"t_dp49994_mutator\"]).c_str();\n  mock_lf_is_localized_event.m_args[\"db_name\"] = \"dev\";\n  mock_lf_is_localized_event.m_args[\"ns_name\"] = \"pgtest_testcase_schema\";\n  mock_lf_is_localized_event.m_args[\"rel_name\"] = \"t_dp49994_mutator\";\n  xen_populate_single_event(&mock_lf_is_localized_event);\n  Xen->events->set_event(&mock_lf_is_localized_event);\n\n  auto current_id = GetUserId();\n  auto target_id = get_user_id_by_name(\"u_dp54610\");\n  SetUserId(target_id);", "mimetype": "text/plain", "start_char_idx": 20584, "end_char_idx": 21628, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8419a9f3-e49c-4943-9f1e-9c6a933b2cd8": {"__data__": {"id_": "8419a9f3-e49c-4943-9f1e-9c6a933b2cd8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "37b8e2be-52ab-45d9-a28b-f30eef92d25b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6ff67482adef033422790eeccf004c220418e0abf51b16fd9dc12f5606eb4fc9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dbd9cbcf-9309-4efb-ad09-f6c5e5490654", "node_type": "1", "metadata": {}, "hash": "176668a962f322941676f6006baf3f120f782d7f61adfe0f9b1675a320a4e728", "class_name": "RelatedNodeInfo"}}, "text": "for (alp_decision testcase :\n       {alp_decision::kContainedFully, alp_decision::kContainedPartially,\n        alp_decision::kNotContained})", "mimetype": "text/plain", "start_char_idx": 21632, "end_char_idx": 21772, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dbd9cbcf-9309-4efb-ad09-f6c5e5490654": {"__data__": {"id_": "dbd9cbcf-9309-4efb-ad09-f6c5e5490654", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8419a9f3-e49c-4943-9f1e-9c6a933b2cd8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b033066f1d20f45ae933070c28dc5b43c02be3b8d016b5d38046c68c81bac9ac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4bf2a061-8289-4dbd-9d1d-c51e125a54d5", "node_type": "1", "metadata": {}, "hash": "0cc783bf672c99af30a64ef74f2ba48115a4c6b9e88841aa44bc654787b01452", "class_name": "RelatedNodeInfo"}}, "text": "{\n    std::string nested_path;\n    switch (testcase) {\n      case alp_decision::kContainedFully:\n        nested_path = R\"(\"authorized\")\";\n        break;\n      case alp_decision::kContainedPartially:\n        nested_path = R\"(\"transform\")\";\n        break;\n      case alp_decision::kNotContained:\n        nested_path = R\"(\"denied\")\";\n        break;\n    }\n    std::string user_query =\n        boost::str(boost::format(GetParam().user_query_fmt) %\n                   std::string(R\"(\"col_super_1\")\") % nested_path);\n\n    Query* query =\n        reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(user_query))));\n\n    bool error = false;\n    ddm::ObjTransformAlpColumnsRelationMap obj_transform_alp_columns_rel_map;\n    try {\n      obj_transform_alp_columns_rel_map = ddm::WalkVarLevelALP(query);\n    } catch (std::exception& e) {\n      std::string error_message = e.what();\n      FlushErrorState();\n      boost::algorithm::to_lower(error_message);\n      if (error_message.find(\"permission\")) error = true;\n    }\n\n    // Respect overrides.\n    switch (testcase) {\n      case alp_decision::kContainedFully:\n        testcase = GetParam().override_authorized;\n        break;\n      case alp_decision::kContainedPartially:\n        testcase = GetParam().override_obj_transform;\n        break;\n      case alp_decision::kNotContained:\n        testcase = GetParam().override_error;\n        break;\n    }", "mimetype": "text/plain", "start_char_idx": 21773, "end_char_idx": 23163, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4bf2a061-8289-4dbd-9d1d-c51e125a54d5": {"__data__": {"id_": "4bf2a061-8289-4dbd-9d1d-c51e125a54d5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dbd9cbcf-9309-4efb-ad09-f6c5e5490654", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f0993cdd648cbbba3ec0f1677f52d18d5874a2e872276807a641771301a35b8b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30970f96-f200-4af1-9a0f-39909c2857b4", "node_type": "1", "metadata": {}, "hash": "4017d1db9c95add71cda2df8e48ebdb4f33c215dcc2ca1279120c6eb778231d1", "class_name": "RelatedNodeInfo"}}, "text": "ddm::ObjTransformAlpColumnsCtx alp_ctx =\n        obj_transform_alp_columns_rel_map[table_oid_map[\"t_dp49994_mutator\"]];\n    switch (testcase) {\n      case alp_decision::kContainedFully:\n        EXPECT_THAT(error, ::testing::IsFalse()) << nested_path;\n        ValidateALPPolicyCorrectness(alp_ctx.lf_alp_policy, nested_path);\n        EXPECT_THAT(alp_ctx.obj_transform_alp_columns, ::testing::IsEmpty())\n            << nested_path;\n        break;\n      case alp_decision::kContainedPartially:\n        EXPECT_THAT(error, ::testing::IsFalse()) << nested_path;\n        ValidateALPPolicyCorrectness(alp_ctx.lf_alp_policy, nested_path);\n        EXPECT_THAT(alp_ctx.obj_transform_alp_columns, ::testing::SizeIs(1))\n            << nested_path;\n        EXPECT_THAT(alp_ctx.obj_transform_alp_columns,\n                    ::testing::Contains(std::string_view(\"col_super_1\")))\n            << nested_path;\n        break;\n      case alp_decision::kNotContained:\n        EXPECT_THAT(error, ::testing::IsTrue()) << nested_path;\n        break;\n    }\n  }", "mimetype": "text/plain", "start_char_idx": 23168, "end_char_idx": 24203, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "30970f96-f200-4af1-9a0f-39909c2857b4": {"__data__": {"id_": "30970f96-f200-4af1-9a0f-39909c2857b4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4bf2a061-8289-4dbd-9d1d-c51e125a54d5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b0a40f08a1ff9ff4f82ae1317967013c76b7521eb92db75dbe656563faaa2ac6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "957ec85c-1fc5-44e7-ab5b-388a42f5dd3e", "node_type": "1", "metadata": {}, "hash": "0a4a4411fc84a9e2f376780c7e942e4dab00255c20f25a59a77ad246dba6309a", "class_name": "RelatedNodeInfo"}}, "text": "SetUserId(current_id);\n\n  Xen->events->unset_event(EtLakeFormationMockTableResponse);\n  Xen->events->unset_event(EtLakeFormationMockRTELocalViaLF);\n}", "mimetype": "text/plain", "start_char_idx": 8866, "end_char_idx": 9015, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "957ec85c-1fc5-44e7-ab5b-388a42f5dd3e": {"__data__": {"id_": "957ec85c-1fc5-44e7-ab5b-388a42f5dd3e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "30970f96-f200-4af1-9a0f-39909c2857b4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "565ea41c591548b92b093a3d400e15f225155d5cba66a354d0b8c8e9fe4cd215", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c5e1b723-74d8-4d4e-ba2e-af24b39aae9b", "node_type": "1", "metadata": {}, "hash": "487bd25f8597a5746426a19929d7f924b5cb802f3f299f5611d20c4eade82a64", "class_name": "RelatedNodeInfo"}}, "text": "VarLevelALPParam", "mimetype": "text/plain", "start_char_idx": 18628, "end_char_idx": 18644, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c5e1b723-74d8-4d4e-ba2e-af24b39aae9b": {"__data__": {"id_": "c5e1b723-74d8-4d4e-ba2e-af24b39aae9b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "957ec85c-1fc5-44e7-ab5b-388a42f5dd3e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "befaef5d93bb1a318edb58943fd28921f002b7f156830d70103b50cb324345ce", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80c8cd8f-3209-4cc2-bd81-1a53cb02b33b", "node_type": "1", "metadata": {}, "hash": "5e27deb8d00b07eac820ca1c9d9cccab40d6fff8e4a12337bb3b900bb69c1950", "class_name": "RelatedNodeInfo"}}, "text": "var_level_optimization_cases[] =", "mimetype": "text/plain", "start_char_idx": 24375, "end_char_idx": 24407, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80c8cd8f-3209-4cc2-bd81-1a53cb02b33b": {"__data__": {"id_": "80c8cd8f-3209-4cc2-bd81-1a53cb02b33b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c5e1b723-74d8-4d4e-ba2e-af24b39aae9b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "aa0f16368810dfef20a96499125d715356f1fe9746ab077b7118363925351d9e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c63f4606-8ac6-4910-bf23-afc0c0ce2c80", "node_type": "1", "metadata": {}, "hash": "77546872f1166dda85a34a5cc88c9eac765064ee6fa4acd4018213d96f504095", "class_name": "RelatedNodeInfo"}}, "text": "{\n    VarLevelALPParam{\n        \"Simple SELECT\",\n        R\"(\n          SELECT %1%.%2%\n          FROM t_dp49994_mutator\n        )\",\n    },\n    VarLevelALPParam{\n        \"Simple WHERE\",\n        R\"(\n          SELECT 1\n          FROM t_dp49994_mutator\n          WHERE %1%.%2% = 'hello'\n      )\",\n    },\n    VarLevelALPParam{\n        \"ORDER BY\",\n        R\"(\n          SELECT 1\n          FROM t_dp49994_mutator\n          ORDER BY %1%.%2%::INT\n        )\",\n    },\n    VarLevelALPParam{\n        \"GROUP BY\",\n        R\"(\n          SELECT 1\n          FROM t_dp49994_mutator\n          GROUP BY %1%.%2%::INT\n        )\",\n    },\n    VarLevelALPParam{\n        // Where the relation of interest is the second one.\n        \"Multiple relations in FROM\",\n        R\"(\n          SELECT\n              A.col_int + B.%1%.%2%::INT\n          FROM\n              t_dp54610_join A,\n              t_dp49994_mutator B\n        )\",\n    },\n    VarLevelALPParam{\n        \"JOIN\",\n        R\"(\n          SELECT 1\n          FROM t_dp49994_mutator\n          JOIN t_dp54610_join ON (\n            t_dp49994_mutator.%1%.%2%::INT = t_dp54610_join.col_int\n          )\n        )\",\n        // In JOIN clause variable is presented without nested path. So the case\n        // when request authorized path is equivalent to obj_transform.\n        alp_decision::kContainedPartially /* override_authorized */,\n    },", "mimetype": "text/plain", "start_char_idx": 24408, "end_char_idx": 25769, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c63f4606-8ac6-4910-bf23-afc0c0ce2c80": {"__data__": {"id_": "c63f4606-8ac6-4910-bf23-afc0c0ce2c80", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80c8cd8f-3209-4cc2-bd81-1a53cb02b33b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a37b6cac0987e32e37979fab96a328c99c6f6f442205993af57f71b0fb60aa72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "857ce279-dc5e-40c7-af2e-1dfa653ff203", "node_type": "1", "metadata": {}, "hash": "63c30d2aed9ba63f0e2b15097d6d8bdcec4d5c77f99e57e56e586698ad77a1fb", "class_name": "RelatedNodeInfo"}}, "text": "VarLevelALPParam{\n        \"Sub-SELECT\",\n        R\"(\n          SELECT 1\n          FROM t_dp49994_mutator\n          WHERE (\n            t_dp49994_mutator.%1%.%2% IN (\n              SELECT t_dp54610_join.col_int FROM t_dp54610_join\n            )\n          )\n        )\",\n    },\n    VarLevelALPParam{\n        \"In expression\",\n        R\"(\n          SELECT %1%.%2% * 10\n          FROM t_dp49994_mutator\n        )\",\n    },\n    VarLevelALPParam{\n        \"CTE with variable in CTE\",\n        R\"(\n          WITH cte\n          AS\n            (\n              SELECT\n                %1%.%2% AS m\n              FROM t_dp49994_mutator\n            )\n          SELECT m FROM cte;\n        )\",\n    },\n    VarLevelALPParam{\n        \"CTE with variable in outer query\",\n        R\"(\n          WITH cte\n          AS\n            (\n              SELECT\n                %1% AS m\n              FROM t_dp49994_mutator\n            )\n          SELECT m.%2% FROM cte;\n        )\",\n        // Here the variable reference in CTE will trigger column to be\n        // obj_transformed. Because CTE itself (and n RTE) is not LF-ALPed, we\n        // don't check anything for the outer reference.\n        alp_decision::kContainedPartially /* override_authorized */,\n        alp_decision::kContainedPartially /* override_error */,\n    },", "mimetype": "text/plain", "start_char_idx": 25774, "end_char_idx": 27067, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "857ce279-dc5e-40c7-af2e-1dfa653ff203": {"__data__": {"id_": "857ce279-dc5e-40c7-af2e-1dfa653ff203", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c63f4606-8ac6-4910-bf23-afc0c0ce2c80", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eeca0538cd507cd38eb90123ba86e21e4c023ad294ef456483100e7d1c477cb8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ad348ea1-9d02-4d7b-8642-5199b6f3c6a6", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "VarLevelALPParam{\n        \"UNPIVOT\",\n        R\"(\n          SELECT\n            value\n          FROM UNPIVOT(\n            SELECT\n              c.%1%.%2%\n            AS cn\n            FROM t_dp49994_mutator c\n          ) OVER (\n            cn AS value\n          )\n        )\",\n    },\n    VarLevelALPParam{\n        \"UNNEST\",\n        R\"(\n          SELECT\n            address\n          FROM UNNEST(\n            SELECT\n              c.%1%.%2% AS cd\n            FROM t_dp49994_mutator c\n          ) OVER (\n            cd AS address\n          )\n        )\",\n    },\n    VarLevelALPParam{\n        \"UPDATE\",\n        R\"(\n          UPDATE t_dp49994_mutator\n          SET col_int = (%1%.%2% + 1)::INT\n        )\",\n    },\n    VarLevelALPParam{\n        \"DELETE\",\n        R\"(\n          DELETE FROM t_dp49994_mutator\n          WHERE %1%.%2% = 'hello'\n        )\",\n    },\n}", "mimetype": "text/plain", "start_char_idx": 27072, "end_char_idx": 27921, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ad348ea1-9d02-4d7b-8642-5199b6f3c6a6": {"__data__": {"id_": "ad348ea1-9d02-4d7b-8642-5199b6f3c6a6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "857ce279-dc5e-40c7-af2e-1dfa653ff203", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64221205babf501f7e384e55cb39b930bb411ab40963f9a68ebaeb7748ff18a9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5845e4ee-b434-49b7-a7b0-38a640f70eea", "node_type": "1", "metadata": {}, "hash": "ad1c5338644a1dbc6c30b6cd5138fa395fdd4e3d8de3df20ca124df5ce79effe", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 874, "end_char_idx": 875, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5845e4ee-b434-49b7-a7b0-38a640f70eea": {"__data__": {"id_": "5845e4ee-b434-49b7-a7b0-38a640f70eea", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ad348ea1-9d02-4d7b-8642-5199b6f3c6a6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d3cdb669f0f373f7b7c564297e1387825d8ea238923d207787e6e0dae3c5ecf3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c81027a8-5f19-44ed-9eed-d1e376ffa4fa", "node_type": "1", "metadata": {}, "hash": "e216614096329ea09b29243f279e122071ff7882dcf6db9d5da28b4bb1899dae", "class_name": "RelatedNodeInfo"}}, "text": "INSTANTIATE_TEST_SUITE_P(\n    VarLevelALPTests, TestDDMVarLevelLakeFormationALP,\n    ::testing::ValuesIn(var_level_optimization_cases),\n    [](const testing::TestParamInfo<TestDDMVarLevelLakeFormationALP::ParamType>&\n           info) {\n      std::string name = info.param.case_name;\n      std::replace_if(\n          name.begin(), name.end(), [](char c) { return !std::isalnum(c); },\n          '_');\n      return name;\n    });\n\n}", "mimetype": "text/plain", "start_char_idx": 27924, "end_char_idx": 28352, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c81027a8-5f19-44ed-9eed-d1e376ffa4fa": {"__data__": {"id_": "c81027a8-5f19-44ed-9eed-d1e376ffa4fa", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f59898697b6c2ab09539739d79e80a488f1a5c76db86917b82409adc84c6f284", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5845e4ee-b434-49b7-a7b0-38a640f70eea", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "83e5bdfeab8889b674fabe6cbd3693f051f23933cb598c0ed19d6fb8d0e5724b", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 28354, "end_char_idx": 28375, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ce6b7b37-49df-4b92-8e29-62bbc2d47060": {"__data__": {"id_": "ce6b7b37-49df-4b92-8e29-62bbc2d47060", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4a083e25-2bd2-4037-b881-d91ceca6a126", "node_type": "1", "metadata": {}, "hash": "eacf1e70aca057b35433ff7e505baafb5413431bff8f13d75da95638a4cc3100", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"pg/ddm/test_mutator.hpp\"\n\n#include \"omnisql/omnisql_translate_query.hpp\"\n#include \"rewrite/rewriteHandler.h\"\n\n#include \"pg/src/include/optimizer/clauses.h\"\n#include \"pg/test/pg_test.hpp\"\n\n#include <gtest/gtest.h>\n\n#include <cstdio>\n#include <set>\n#include <string>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 351, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4a083e25-2bd2-4037-b881-d91ceca6a126": {"__data__": {"id_": "4a083e25-2bd2-4037-b881-d91ceca6a126", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ce6b7b37-49df-4b92-8e29-62bbc2d47060", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ae058550f8bb2c234597be7c88a42d6b67bd5d15a2df9a1c10656c959b19fed3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "df8e1476-7b73-4846-9314-92076a5eb819", "node_type": "1", "metadata": {}, "hash": "7887849cf715c723573dc2a47d6124771d1ef0002a7e5bd9ff3d9a0906666c75", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest", "mimetype": "text/plain", "start_char_idx": 353, "end_char_idx": 369, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "df8e1476-7b73-4846-9314-92076a5eb819": {"__data__": {"id_": "df8e1476-7b73-4846-9314-92076a5eb819", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a083e25-2bd2-4037-b881-d91ceca6a126", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "99330bcd16e96c2c0011e3efe2b9fd1e5b0a89497c1a739b8e59e60bfc345b45", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3e21be2d-06b4-47a3-8311-f1ecce5054f2", "node_type": "1", "metadata": {}, "hash": "02879e8560ae2163a430e856431bae72545d2036e7dff329726401726ca1470d", "class_name": "RelatedNodeInfo"}}, "text": "{\n\nstruct VisitorContext {\n  // Counter of visits the mutator has made across the Query Tree.\n  int visits = 0;\n};\n\nNode* NoOpMutator(Node* node, void* context) {\n  auto ctx = reinterpret_cast<VisitorContext*>(context);\n  ++ctx->visits;\n  return node;\n}\n\nvoid TestDDMMutator::SetUpTestCase() {\n  pg::RunQuery(\"CREATE TABLE mutator_t (a int);\");\n  pg::RunQuery(\"CREATE TABLE mutator_rls_t (a int);\");\n  pg::RunQuery(\"ALTER TABLE mutator_rls_t ROW LEVEL SECURITY ON;\");\n  pg::RunQuery(\"CREATE USER u1_mutator_test PASSWORD DISABLE;\");\n  pg::RunQuery(\"GRANT SELECT ON mutator_rls_t TO u1_mutator_test;\");\n  pg::RunQuery(\"GRANT SELECT ON mutator_t TO u1_mutator_test;\");\n  pg::RunQuery(\"ALTER USER u1_mutator_test with CREATEUSER;\");\n}\n\nvoid TestDDMMutator::TearDownTestCase() {\n  pg::RunQuery(\"DROP TABLE mutator_t;\");\n  pg::RunQuery(\"DROP TABLE mutator_rls_t;\");\n  pg::RunQuery(\"DROP USER u1_mutator_test;\");\n}", "mimetype": "text/plain", "start_char_idx": 370, "end_char_idx": 1278, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3e21be2d-06b4-47a3-8311-f1ecce5054f2": {"__data__": {"id_": "3e21be2d-06b4-47a3-8311-f1ecce5054f2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "df8e1476-7b73-4846-9314-92076a5eb819", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "17cb5a5e403d6cde0bf6a5a5258055200a07165a643bed3471953fe3bfa73b18", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2e3a0fc4-b2e4-4656-b37f-1a12bda53867", "node_type": "1", "metadata": {}, "hash": "298e7f021a2ad11e77e18dff585516b9327af35b59241e96dd116d297d091dbb", "class_name": "RelatedNodeInfo"}}, "text": "void ValidateNoOpEquality(Query* input_q, int flags)", "mimetype": "text/plain", "start_char_idx": 1280, "end_char_idx": 1332, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2e3a0fc4-b2e4-4656-b37f-1a12bda53867": {"__data__": {"id_": "2e3a0fc4-b2e4-4656-b37f-1a12bda53867", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3e21be2d-06b4-47a3-8311-f1ecce5054f2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "aeb5ab47e34c783f1ec81b6d82595e8690d3559841a898ef2afa52ebe30010d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dd65e54f-66b6-4357-a266-24e028863a55", "node_type": "1", "metadata": {}, "hash": "cda87bf5f9f4c417575a63445e277f5a7ee8219f1ac11ec9a9c62bd2b224576e", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n  Query* input_q_copy = copyObject(input_q);\n  auto ctx = VisitorContext();\n  Query* result = query_tree_mutator(input_q_copy, NoOpMutator, &ctx, flags);\n  auto copy_visits = ctx.visits;\n  EXPECT_TRUE(copy_visits > 0) << \"Expected to visit multiple nodes.\";\n\n  EXPECT_TRUE(input_q_copy != result)\n      << \"Expected result to not be pointer equal with input_q.\";\n  EXPECT_TRUE(equal(input_q, result)) << \"Failed deep equality check\";\n\n  input_q_copy = copyObject(input_q);\n  ctx = VisitorContext();\n  result = query_tree_mutator(input_q_copy, NoOpMutator, &ctx,\n                              flags ^ QTW_DONT_COPY_NODE);\n  auto no_copy_visits = ctx.visits;\n  EXPECT_TRUE(input_q_copy->targetList == result->targetList)\n      << \"Mutator replaced targetList pointer.\";\n  EXPECT_TRUE(linitial(input_q_copy->targetList) ==\n              linitial(result->targetList))\n      << \"Mutator replaced targetEntry pointer\";\n  EXPECT_TRUE(no_copy_visits > 0) << \"Expected to visit multiple nodes.\";\n  EXPECT_TRUE(no_copy_visits == copy_visits)\n      << \"Visited a different number of nodes\";\n  EXPECT_TRUE(input_q_copy == result)\n      << \"Expected result to be pointer equal with input_q.\";\n  EXPECT_TRUE(equal(input_q, result)) << \"Failed deep equality check\";\n\n\n  auto old_rte =\n      reinterpret_cast<RangeTblEntry*>(linitial(input_q_copy->rtable));\n  auto new_rte = reinterpret_cast<RangeTblEntry*>(linitial(result->rtable));", "mimetype": "text/plain", "start_char_idx": 1333, "end_char_idx": 2754, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dd65e54f-66b6-4357-a266-24e028863a55": {"__data__": {"id_": "dd65e54f-66b6-4357-a266-24e028863a55", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2e3a0fc4-b2e4-4656-b37f-1a12bda53867", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "65645cc5436f0d8a5fe464e8fa75a87a39b56f26f0dc924faf991188702cb0a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1672be59-d030-483d-b735-706ec59bb012", "node_type": "1", "metadata": {}, "hash": "a597e039d8c895f1f8b3e29d10805697497776a22314b6fa3765ed53c2b70ae5", "class_name": "RelatedNodeInfo"}}, "text": "if (result->rtable != nullptr && old_rte->rtekind == RTE_SUBQUERY) {\n    EXPECT_TRUE(old_rte->rtekind == RTE_SUBQUERY) << \"expected a subquery.\";\n    EXPECT_TRUE(old_rte->subquery != nullptr) << \"expected non-null subquery\";\n    EXPECT_TRUE(old_rte->subquery == new_rte->subquery)\n        << \"expected subquery not to be modified.\";\n  }\n\n  EXPECT_TRUE(equal(input_q, result)) << \"Failed deep equality check\";\n\n  input_q_copy = copyObject(input_q);\n  ctx = VisitorContext();\n  result = query_tree_mutator(input_q_copy, NoOpMutator, &ctx,\n                              flags ^ QTW_DONT_COPY_QUERY);\n  no_copy_visits = ctx.visits;\n  EXPECT_TRUE(no_copy_visits > 0) << \"Expected to visit multiple nodes.\";\n  EXPECT_TRUE(no_copy_visits == copy_visits)\n      << \"Visited a different number of nodes\";\n  EXPECT_TRUE(input_q_copy == result)\n      << \"Expected result to be pointer equal with input_q.\";\n  EXPECT_TRUE(equal(input_q, result)) << \"Failed deep equality check\";\n}", "mimetype": "text/plain", "start_char_idx": 2757, "end_char_idx": 3724, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1672be59-d030-483d-b735-706ec59bb012": {"__data__": {"id_": "1672be59-d030-483d-b735-706ec59bb012", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dd65e54f-66b6-4357-a266-24e028863a55", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "784434ad98ea7d4d803e89573a1cdddf4c61997dc02aa3f9e7fa30abb61323b3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "deeeb361-0690-42c6-9124-fbc1e6bb3bbb", "node_type": "1", "metadata": {}, "hash": "90300aa80a6208ff80a02f96c08735a7502461fb678699a799d06597069c5b59", "class_name": "RelatedNodeInfo"}}, "text": "// Performs an A/B test that a complex query is correctly processed across\n// different combinations of flags.\nPG_TEST_F(TestDDMMutator, TestNoOpCopy) {\n  auto input_q_str =\n      \"WITH cte1 AS (SELECT * FROM mutator_t AS d where a > 5),\"\n      \" rlscte1 AS (SELECT avg(distinct(a)), a FROM mutator_rls_t WHERE a < 5 \"\n      \"GROUP BY a HAVING a <3 ORDER BY 1 desc)\"\n      \" SELECT e.a, d.a FROM (SELECT * FROM rlscte1) as d JOIN cte1 \"\n      \"as e ON (e.a = \"\n      \"d.a);\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  ValidateNoOpEquality(input_q, 0x0);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS);\n\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_WALK_RLS_SUBQUERIES);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_WALK_RLS_SUBQUERIES);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_IGNORE_RT_SUBQUERIES);\n}\n\n// Performs an A/B test of a sub query containing an RLS reference.", "mimetype": "text/plain", "start_char_idx": 3726, "end_char_idx": 4698, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "deeeb361-0690-42c6-9124-fbc1e6bb3bbb": {"__data__": {"id_": "deeeb361-0690-42c6-9124-fbc1e6bb3bbb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1672be59-d030-483d-b735-706ec59bb012", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7e202d466481a0a3364fa24c6ac15a3f78e9ccc277f1e6412bfc216b810b8eb2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9e32e683-e58f-496d-bbcd-ae7f2d599ab8", "node_type": "1", "metadata": {}, "hash": "8bebf6c1fcbc9bef1388b3ff098320b9ed38557151d00da9834cfce599f0ef66", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMMutator, TestNoOpCopySimpleSubQuery) {\n  auto input_q_str =\n      \"SELECT * from (SELECT * from mutator_rls_t) as mutator_rls_t;\";\n\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto subquery_rte =\n      reinterpret_cast<RangeTblEntry*>(linitial(input_q->rtable));\n  EXPECT_TRUE(subquery_rte->rtekind == RTE_SUBQUERY) << \"Expected subquery\";\n  auto nested_rls_rte = reinterpret_cast<RangeTblEntry*>(\n      linitial(subquery_rte->subquery->rtable));\n\n  EXPECT_TRUE(nested_rls_rte->rtekind == RTE_RLS_RELATION) << \"Expected RLS\";\n  nested_rls_rte->subquery = copyObject(subquery_rte->subquery);\n\n  ValidateNoOpEquality(input_q, 0x0);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS);\n\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_WALK_RLS_SUBQUERIES);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_WALK_RLS_SUBQUERIES);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_IGNORE_RT_SUBQUERIES);\n}\n\n// A/B test that unnest queries have identical visits with and without copy\n// flags.", "mimetype": "text/plain", "start_char_idx": 4699, "end_char_idx": 5780, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9e32e683-e58f-496d-bbcd-ae7f2d599ab8": {"__data__": {"id_": "9e32e683-e58f-496d-bbcd-ae7f2d599ab8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "deeeb361-0690-42c6-9124-fbc1e6bb3bbb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e5a66d59f8984439b3677f0c117f3b71c893e5333499f1c1efc7091c184419bb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "120a67e2-a03e-4d47-8dc8-edd3b1958968", "node_type": "1", "metadata": {}, "hash": "3e343f2d6a7b017690a05ea007db18c7d4d86c26839889db4ecdc706ccfac0da", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMMutator, TestUnnestQuery) {\n  auto input_q_str =\n      \"WITH data AS (SELECT array(1,2,3,4) AS num UNION ALL (SELECT array(5,6) \"\n      \"as num)) SELECT nums FROM data as d, d.num AS nums;\";\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::ParseWithNestedSupport(input_q_str))));\n\n  ValidateNoOpEquality(input_q, 0x0);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS);\n\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_WALK_RLS_SUBQUERIES);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_WALK_RLS_SUBQUERIES);\n  ValidateNoOpEquality(input_q, QTW_WALK_RELATIONS ^ QTW_IGNORE_RT_SUBQUERIES);\n}\n}", "mimetype": "text/plain", "start_char_idx": 5781, "end_char_idx": 6437, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "120a67e2-a03e-4d47-8dc8-edd3b1958968": {"__data__": {"id_": "120a67e2-a03e-4d47-8dc8-edd3b1958968", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "536f86c56adc39987a85c6341116eadb5b11fe058dcd08908c31ffdd9fd75036", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9e32e683-e58f-496d-bbcd-ae7f2d599ab8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1155920aa49b3d9e67838af6521e9406be2076af80c295068449ec28707976bd", "class_name": "RelatedNodeInfo"}}, "text": ";  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 6437, "end_char_idx": 6459, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "08df2dfc-4492-4d2c-813c-68e6914454c1": {"__data__": {"id_": "08df2dfc-4492-4d2c-813c-68e6914454c1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.hpp", "file_name": "test_mutator.hpp", "file_size": 860, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d3a80a31-b92c-48ba-9c6f-a45e6e2dd55d", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.hpp", "file_name": "test_mutator.hpp", "file_size": 860, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "146bdefcafd483707453a736701a6267e252f4e9925227753c74ec7172f0e451", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#pragma once\n\n#include <gtest/gtest.h>\n\n#include <string>\n\n#include \"pg/src/include/parser/parse_node.h\"\n#include \"pg/test/pg_test.hpp\"\n\nnamespace pgtest {\n\nclass TestDDMMutator : public pg::PgTest {\n public:\n  static void SetUpTestCase();\n  static void TearDownTestCase();\n};\n\n/// no-op mutator to verify copy flags\nNode* NoOpMutator(Node* node, void* context);\n\n/// Utility method which tests that given an input query, and flags that\n/// the the NoOp query_tree_mutator visits an equal number of nodes and produces\n/// an equivalent query tree when the no copy and copy flags are set. This\n/// method has appropriate assertions for QTW_DONT_COPY_QUERY\n/// QTW_DONT_COPY_SUBQUERY\n/// QTW_DONT_COPY_NODE\nvoid ValidateNoOpEquality(Query* input_q, int flags);\n\n};  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 859, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d81d7bf4-bf6d-4859-8c6d-0cae30590c95": {"__data__": {"id_": "d81d7bf4-bf6d-4859-8c6d-0cae30590c95", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "94225b7e-ca4c-4890-868a-0f6d96688850", "node_type": "1", "metadata": {}, "hash": "4f3c3198e4589f474fe1f420642cb6c2f5f0cee2aac24643c5168bae2968f849", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n// These two includes must go first and in this order.\n// clang-format off\n#include <gtest/gtest.h>\n#include \"pg/test/pg_test.hpp\"\n#include <gmock/gmock.h>\n// clang-format on\n\n#include \"ddm/ddm_over_nested.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/rewriter.h\"\n#include \"omnisql/omnisql_print_sql.hpp\"\n#include \"omnisql/omnisql_translate_query.hpp\"\n#include \"pg2volt/volt_cinterface.h\"\n#include \"rewrite/rewriteHandler.h\"\n#include \"utils/lsyscache.h\"\n\nextern bool gconf_ddm_enable_over_super_paths;\nextern bool gconf_enable_object_transform;\nextern bool gconf_enable_qpc_for_session;\nextern bool g_pgtest_ddm;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 692, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "94225b7e-ca4c-4890-868a-0f6d96688850": {"__data__": {"id_": "94225b7e-ca4c-4890-868a-0f6d96688850", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d81d7bf4-bf6d-4859-8c6d-0cae30590c95", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ce51665fc500fecae21a6ffebaea7c5c24d8c505f2116d7c524e1759f0fdb0fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "867d55db-d653-4933-911b-cf61bd4e4c27", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 694, "end_char_idx": 712, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "867d55db-d653-4933-911b-cf61bd4e4c27": {"__data__": {"id_": "867d55db-d653-4933-911b-cf61bd4e4c27", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "94225b7e-ca4c-4890-868a-0f6d96688850", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "433cf805c62970ee8a28378dc2190bd4865d58560dc921dec02b530495d0e1df", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a9c1c199-a899-4a21-9093-bad09101f9f2", "node_type": "1", "metadata": {}, "hash": "5d9f3758dcd72319f403bdcc1fc9031cab24b3199c9380908cb24fe9775acff2", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 713, "end_char_idx": 714, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a9c1c199-a899-4a21-9093-bad09101f9f2": {"__data__": {"id_": "a9c1c199-a899-4a21-9093-bad09101f9f2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "867d55db-d653-4933-911b-cf61bd4e4c27", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ddf388d27fbc2fe3bbc7ef1663e9f6c76c4ce1d820b1a1fe5537c17048b16a1c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a090ba91-8f4c-431b-b618-37dcbd4ba423", "node_type": "1", "metadata": {}, "hash": "b761796eb277e2eb45a4a76d95563871fb05abd85291a235ef52cf8c32607e0b", "class_name": "RelatedNodeInfo"}}, "text": "class TestDDMOverNested : public pg::PgTest", "mimetype": "text/plain", "start_char_idx": 716, "end_char_idx": 759, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a090ba91-8f4c-431b-b618-37dcbd4ba423": {"__data__": {"id_": "a090ba91-8f4c-431b-b618-37dcbd4ba423", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a9c1c199-a899-4a21-9093-bad09101f9f2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d5c5d1cf2cb490d0e2f37c90763255cb650e2a1f425b257dfcc6ffa5b82a5b20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d744c305-9a8e-480f-820a-d5f61ef8522c", "node_type": "1", "metadata": {}, "hash": "2cd1c078252dd3560c9d88904226859470bb0d0dba0a1d0f0dab5b600352691e", "class_name": "RelatedNodeInfo"}}, "text": "{\n public:\n  TestDDMOverNested() {\n    main_table_oid = OidFromName(\"t_dp50000_target\");\n    main_view_oid = OidFromName(\"v_dp50000_target\");\n    main_lbv_oid = OidFromName(\"lbv_dp50000_target\");\n  }\n\n protected:\n  Oid main_table_oid;\n  Oid main_view_oid;\n  Oid main_lbv_oid;\n\n  void RewriteTest(const char* user_query_str, const char* policy_arg_type,\n                   const char* policy_expr, const char* attach_in,\n                   const char* attach_out, const char* query_expected_str);\n\n  void InPlaceNestedVarsWalkerTest(const char* query_str,\n                                   std::vector<std::string> attachment_targets,\n                                   ddm::NestedVarMap expected);\n\n  void NavPathOptimizationRewrite(const char* user_query_str,\n                                  const char* query_expected_complex_str,\n                                  const char* query_expected_optimized_str);\n\n  ddm::MaskMap GenerateExpectedMaskMap(\n      std::unordered_map<\n          std::string, std::vector<std::pair<int, std::optional<std::string>>>>\n          input);\n\n  std::set<ddm::ParsedPolicyAttachment> GenerateParsedAttachments(\n      std::vector<std::pair<\n          int, std::vector<std::pair<std::string, std::optional<std::string>>>>>\n          input);\n\n  bool MaskMapEqual(const ddm::MaskMap& left, const ddm::MaskMap& right);\n\n  const std::string kColSuper1 = \"col_super_1\";", "mimetype": "text/plain", "start_char_idx": 760, "end_char_idx": 2157, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d744c305-9a8e-480f-820a-d5f61ef8522c": {"__data__": {"id_": "d744c305-9a8e-480f-820a-d5f61ef8522c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a090ba91-8f4c-431b-b618-37dcbd4ba423", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "653f106f5fb010aac43ad26a813cbceecd04efe42c46afdfd624710e497e08fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "38cba851-bee2-49bc-938e-76c431dffbf8", "node_type": "1", "metadata": {}, "hash": "687243ba6c434463d3ccf62d771e5a33a9a83f85fc4cab0b866b0376b62125f0", "class_name": "RelatedNodeInfo"}}, "text": "Oid OidFromName(const char* name) {\n    auto query_str = boost::str(boost::format(\"SELECT * FROM %1%\") % name);\n    auto select_q =\n        reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(query_str))));\n    auto rte = reinterpret_cast<RangeTblEntry*>(linitial(select_q->rtable));\n    return GetRelationRelid(rte);\n  }", "mimetype": "text/plain", "start_char_idx": 2161, "end_char_idx": 2486, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "38cba851-bee2-49bc-938e-76c431dffbf8": {"__data__": {"id_": "38cba851-bee2-49bc-938e-76c431dffbf8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d744c305-9a8e-480f-820a-d5f61ef8522c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ca72f8531978159c8df1aa6609cc5ec01af0d6212fc2da7f062221102574c14a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36ad888c-2f39-48de-9f3a-469b3919637c", "node_type": "1", "metadata": {}, "hash": "631ea28a7f7046f2fa25d682aa50143b790792393fced92083bbecc5982e8c41", "class_name": "RelatedNodeInfo"}}, "text": "static void SetUpTestCase()", "mimetype": "text/plain", "start_char_idx": 2490, "end_char_idx": 2517, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "36ad888c-2f39-48de-9f3a-469b3919637c": {"__data__": {"id_": "36ad888c-2f39-48de-9f3a-469b3919637c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "38cba851-bee2-49bc-938e-76c431dffbf8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "84b3af805c09cc22475ffa6e07221c954b73a12a4e5f1de5ec95af597d3fa7bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af3aaadf-dc33-4cad-bc09-3ce4a736518b", "node_type": "1", "metadata": {}, "hash": "cccc953cc0a070c2d4cee53800f28aa7c2c01a6f737062d04e652c79dda9301a", "class_name": "RelatedNodeInfo"}}, "text": "{\n    gconf_ddm_enable_over_super_paths = true;\n    gconf_enable_object_transform = true;\n    gconf_enable_qpc_for_session = false;\n    g_pgtest_ddm = true;\n\n    pg::RunQuery(R\"(\n      CREATE TABLE t_dp50000_target (\n        col_int INT,\n        col_text TEXT,\n        col_bool BOOLEAN,\n        col_super_1 SUPER,\n        col_super_2 SUPER\n      )\n    )\");\n    pg::RunQuery(R\"(\n      CREATE TABLE t_dp50000_join (\n        col_int INT\n      )\n    )\");\n    pg::RunQuery(R\"(\n      CREATE VIEW v_dp50000_target AS\n      SELECT\n        col_int,\n        col_text,\n        col_bool,\n        (col_super_1 * 2)::SUPER AS col_super_1,\n        col_super_2\n      FROM t_dp50000_target\n    )\");\n    pg::RunQuery(R\"(\n      CREATE VIEW v_dp50000_ref_nested AS\n      SELECT\n        col_super_1.nested AS col_nested\n      FROM t_dp50000_target\n    )\");\n    pg::RunQuery(R\"(\n      CREATE VIEW lbv_dp50000_ref_nested AS\n      SELECT\n        col_super_1.nested AS col_nested\n      FROM pgtest_testcase_schema.t_dp50000_target\n      WITH NO SCHEMA BINDING\n    )\");\n    pg::RunQuery(R\"(\n      CREATE VIEW lbv_dp50000_target AS\n      SELECT\n        col_int,\n        col_text,\n        col_bool,\n        (col_super_1 * 3)::SUPER AS col_super_1,\n        col_super_2\n      FROM pgtest_testcase_schema.t_dp50000_target\n      WITH NO SCHEMA BINDING\n    )\");", "mimetype": "text/plain", "start_char_idx": 2518, "end_char_idx": 3846, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af3aaadf-dc33-4cad-bc09-3ce4a736518b": {"__data__": {"id_": "af3aaadf-dc33-4cad-bc09-3ce4a736518b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36ad888c-2f39-48de-9f3a-469b3919637c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "99f0e24a0b3efa8a8c45806fe6cda80788e5a7f560e95fa87546f4dc8afb19ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0362cf76-d4ec-42ca-ace3-0c412f276cec", "node_type": "1", "metadata": {}, "hash": "d2786beda9ab99619774e0aa12c10755085b1d8b0e058a6bdb625784fffcd86a", "class_name": "RelatedNodeInfo"}}, "text": "pg::RunQuery(R\"(\n      CREATE FUNCTION udf_dp50000 (INT, INT)\n        RETURNS INT\n      STABLE\n      AS $$\n        SELECT CASE WHEN $1 > $2 THEN $1\n          ELSE $2\n        END\n      $$ LANGUAGE SQL\n    )\");\n    pg::RunQuery(\"CREATE USER u_dp50000 WITH PASSWORD 'Test1234!'\");\n    pg::RunQuery(\"ALTER USER u_dp50000 with CREATEUSER\");\n    pg::RunQuery(\"CREATE ROLE r_dp50000\");\n    pg::RunQuery(\"GRANT ROLE r_dp50000 to u_dp50000\");\n  }", "mimetype": "text/plain", "start_char_idx": 3851, "end_char_idx": 4288, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0362cf76-d4ec-42ca-ace3-0c412f276cec": {"__data__": {"id_": "0362cf76-d4ec-42ca-ace3-0c412f276cec", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af3aaadf-dc33-4cad-bc09-3ce4a736518b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2d5f7e33f9bd69126b7ce72557ed95baa70696d42de4633c03561ff4eec3aa6d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86cf368d-4c8a-4dbf-9ba2-1055559d1309", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "static void TearDownTestCase() {\n    pg::RunQuery(\"DROP VIEW lbv_dp50000_target\");\n    pg::RunQuery(\"DROP VIEW lbv_dp50000_ref_nested\");\n    pg::RunQuery(\"DROP VIEW v_dp50000_target\");\n    pg::RunQuery(\"DROP VIEW v_dp50000_ref_nested\");\n    pg::RunQuery(\"DROP TABLE t_dp50000_target\");\n    pg::RunQuery(\"DROP TABLE t_dp50000_join\");\n    pg::RunQuery(\"DROP FUNCTION udf_dp50000(INT, INT) CASCADE\");\n    pg::RunQuery(\"DROP ROLE r_dp50000 FORCE\");\n    // Do not DROP u_dp50000 since it's a master user.\n  }\n}", "mimetype": "text/plain", "start_char_idx": 4292, "end_char_idx": 4797, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "86cf368d-4c8a-4dbf-9ba2-1055559d1309": {"__data__": {"id_": "86cf368d-4c8a-4dbf-9ba2-1055559d1309", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0362cf76-d4ec-42ca-ace3-0c412f276cec", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d2fb7f0ab5a6fd64fe0db99ef4c727bf9249fa00304ff303d0e61c5d63e2b0be", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b99a035e-f880-4bad-80a5-289c17744165", "node_type": "1", "metadata": {}, "hash": "771ea873276152f6615c9f259eeb7dc8ee1d87ec9228822a8cc9c7a3a2621d74", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 580, "end_char_idx": 581, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b99a035e-f880-4bad-80a5-289c17744165": {"__data__": {"id_": "b99a035e-f880-4bad-80a5-289c17744165", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "86cf368d-4c8a-4dbf-9ba2-1055559d1309", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9e11705066bcf8eda5e5a0fe3cef419e038cb0871620bf05ba7a5955a2ccc35b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c59c540d-171f-494e-8208-669fc4406992", "node_type": "1", "metadata": {}, "hash": "025aacbbf17ba23fb5c2e16cb6d6522cadde5d3b2fbbb69fcaea97ddaacb59bd", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMOverNested::RewriteTest(const char* user_query_str,\n                                    const char* policy_arg_type,\n                                    const char* policy_expr,\n                                    const char* attach_in,\n                                    const char* attach_out,\n                                    const char* query_expected_str)", "mimetype": "text/plain", "start_char_idx": 4800, "end_char_idx": 5176, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c59c540d-171f-494e-8208-669fc4406992": {"__data__": {"id_": "c59c540d-171f-494e-8208-669fc4406992", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b99a035e-f880-4bad-80a5-289c17744165", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1c5c16b89a163d772c4b8c17350ca8651c58408b8f1adefad43deb3b50b0dd1d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "022a3e53-c605-4f2f-909f-b06fb14a9102", "node_type": "1", "metadata": {}, "hash": "0c861802e5174d00ced661bc4089bcf10b112e0c28290aad87f54174055a34b7", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto target_id = get_user_id_by_name(\"u_dp50000\");\n\n  pg::RunQuery(boost::str(boost::format(R\"SQL(\n    CREATE MASKING POLICY mp_dp50000\n    WITH(a %1%) USING ( %2% )\n  )SQL\") % policy_arg_type %\n                          policy_expr));\n  pg::RunQuery(boost::str(boost::format(R\"SQL(\n    ATTACH MASKING POLICY mp_dp50000\n    ON t_dp50000_target(%1%) USING (%2%)\n    TO ROLE r_dp50000\n  )SQL\") % attach_out % attach_in));\n  SetUserId(target_id);\n\n  Query* query = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(std::string(user_query_str)))));\n  auto query_rewritten =\n      ddm::RewriteQuery(copyObject(query), false /* log_applied_policy */)\n          .rewrite;\n  auto query_rewritten_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(query_rewritten));\n\n  Query* query_expected = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(std::string(query_expected_str)))));\n  std::string query_expected_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(query_expected));\n\n  EXPECT_EQ(query_expected_omni, query_rewritten_omni);\n\n  SetUserId(current_id);\n  pg::RunQuery(R\"SQL(DROP MASKING POLICY mp_dp50000 CASCADE)SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 5177, "end_char_idx": 6369, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "022a3e53-c605-4f2f-909f-b06fb14a9102": {"__data__": {"id_": "022a3e53-c605-4f2f-909f-b06fb14a9102", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c59c540d-171f-494e-8208-669fc4406992", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "18ca67cbe65e49c5d87f245253f50f8c2a390276b7585a83e9e659d89d07ff8a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "efc048e1-c027-4a32-b855-ec905ee8e0e6", "node_type": "1", "metadata": {}, "hash": "1aa0cb1727e953eca63ca71c66433e3f16f652192542d2f44e8326f1dde4c616", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteSimpleInNested) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM t_dp50000_target\n      )SQL\",\n      \"SUPER\",                   /* policy_arg_type */\n      \"a + 10\",                  /* policy_expr */\n      \"col_super_1.nested.path\", /* attach_in */\n      \"col_super_2\",             /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              (col_super_1.nested.path + 10) AS col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 6371, "end_char_idx": 7179, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "efc048e1-c027-4a32-b855-ec905ee8e0e6": {"__data__": {"id_": "efc048e1-c027-4a32-b855-ec905ee8e0e6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "022a3e53-c605-4f2f-909f-b06fb14a9102", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c95b23212a2f562213c0e842acb8f738da6a925f0ced9888e9fd51052a9e82af", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f375dba6-335e-4f3e-89f3-87e245b3c970", "node_type": "1", "metadata": {}, "hash": "9f7e6537de1986380b8e5e0f46637307205ca6a1afc1f2459b704e4013339d9a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteSimpleInNestedPlusNested) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM t_dp50000_target\n      )SQL\",\n      \"SUPER\",                   /* policy_arg_type */\n      \"a.another.level + 10\",    /* policy_expr */\n      \"col_super_1.nested.path\", /* attach_in */\n      \"col_super_2\",             /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              (col_super_1.nested.path.another.level + 10) AS col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 7181, "end_char_idx": 8013, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f375dba6-335e-4f3e-89f3-87e245b3c970": {"__data__": {"id_": "f375dba6-335e-4f3e-89f3-87e245b3c970", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "efc048e1-c027-4a32-b855-ec905ee8e0e6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7c9b94c5ff11ed1f4a354a22f9c93e841e961567ae38a85f563ef3e6afb565b8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "576903e8-da15-40ce-af4b-3b96efd61bd7", "node_type": "1", "metadata": {}, "hash": "f74f43aaac122ee680b92bb5ae5af78afabb82f19ba8f1bd6c63e069a802decc", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteSimpleOutNested) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM t_dp50000_target\n      )SQL\",\n      \"SUPER\",                   /* policy_arg_type */\n      \"a + 10\",                  /* policy_expr */\n      \"col_super_1\",             /* attach_in */\n      \"col_super_2.nested.path\", /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              OBJECT_TRANSFORM(\n                col_super_2\n                SET\n                    '\"nested\".\"path\"', (col_super_1 + 10)\n              ) AS col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 8015, "end_char_idx": 8933, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "576903e8-da15-40ce-af4b-3b96efd61bd7": {"__data__": {"id_": "576903e8-da15-40ce-af4b-3b96efd61bd7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f375dba6-335e-4f3e-89f3-87e245b3c970", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "be586e304ad308b0e77d68ed4264f5d0c4e9992c2a13fd13c340c296d70fe5de", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c0245ee8-3171-4c14-bf97-ca3f2e04a17a", "node_type": "1", "metadata": {}, "hash": "850868467d3ac0c3640732b9de63e0b7c35a58f26f3de7d272defadaa1f1264c", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteSimpleOutNestedPlusNested) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM t_dp50000_target\n      )SQL\",\n      \"SUPER\",                   /* policy_arg_type */\n      \"a.another.level + 10\",    /* policy_expr */\n      \"col_super_1\",             /* attach_in */\n      \"col_super_2.nested.path\", /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        SELECT\n          col_super_2,\n          col_bool\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              OBJECT_TRANSFORM(\n                col_super_2\n                SET\n                    '\"nested\".\"path\"', (col_super_1.another.level + 10)\n              ) AS col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 8935, "end_char_idx": 9877, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c0245ee8-3171-4c14-bf97-ca3f2e04a17a": {"__data__": {"id_": "c0245ee8-3171-4c14-bf97-ca3f2e04a17a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "576903e8-da15-40ce-af4b-3b96efd61bd7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0afea95d9dfcdc90e02163b493064c6790e96ba48923f530a56c92313104ea71", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b1b220eb-f194-46a4-85da-9432d566b1fb", "node_type": "1", "metadata": {}, "hash": "c9b58d87d7537097acc0c4d9941572db942abd85da58de47c557f2494d73153e", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteSimpleInOutNested) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        SELECT\n          col_super_1\n        FROM t_dp50000_target\n      )SQL\",\n      \"INT\",                     /* policy_arg_type */\n      \"a + 10\",                  /* policy_expr */\n      \"col_super_1.nested.path\", /* attach_in */\n      \"col_super_1.nested.path\", /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        SELECT\n          col_super_1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (col_super_1.nested.path::INT + 10)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 9879, "end_char_idx": 10776, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1b220eb-f194-46a4-85da-9432d566b1fb": {"__data__": {"id_": "b1b220eb-f194-46a4-85da-9432d566b1fb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c0245ee8-3171-4c14-bf97-ca3f2e04a17a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "22864fa49b5e54277990703691b590c6efcbc25ea4a71538ba4d1b1c84696cd6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dbfb9ca3-8299-4dc5-b9f1-706497dbe998", "node_type": "1", "metadata": {}, "hash": "396c34d5eb7e5d7dae818afccab4548af10d1d7a7f9e5987d069d417df4183d5", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteUPDATEInOutNestedObj) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        UPDATE t_dp50000_target\n        SET col_int = col_super_1.nested.path::INT\n      )SQL\",\n      \"INT\",                     /* policy_arg_type */\n      \"a + 10\",                  /* policy_expr */\n      \"col_super_1.nested.path\", /* attach_in */\n      \"col_super_1.nested.path\", /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        UPDATE t_dp50000_target\n        SET col_int =\n          GET_OBJECT_PATH(\n            GET_OBJECT_PATH(\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (col_super_1.nested.path::INT + 10)\n              ),\n              'nested'::VARCHAR\n            ),\n            'path'::VARCHAR\n          )::INT\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 10778, "end_char_idx": 11623, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dbfb9ca3-8299-4dc5-b9f1-706497dbe998": {"__data__": {"id_": "dbfb9ca3-8299-4dc5-b9f1-706497dbe998", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1b220eb-f194-46a4-85da-9432d566b1fb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "972cbb4365e638b7038c71f3f57adf62ff6448adeaa0ac1867efd5c61f7ed3bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "78091935-38aa-4591-9d1e-a41a917c239a", "node_type": "1", "metadata": {}, "hash": "6736b7ea639f7146489435370d8ea7a259431812b2664efa9b04554ebed5d173", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteUPDATEInOutNestedArray) {\n  RewriteTest(\n      /* user_query */\n      R\"SQL(\n        UPDATE t_dp50000_target\n        SET col_int = col_super_1.very.nested[2].path::INT\n      )SQL\",\n      \"SUPER\",            /* policy_arg_type */\n      \"a + 10\",           /* policy_expr */\n      \"col_super_1.very\", /* attach_in */\n      \"col_super_1.very\", /* attach_out */\n      /* query_expected_str */\n      R\"SQL(\n        UPDATE t_dp50000_target\n        SET col_int =\n          GET_OBJECT_PATH(\n            GET_ARRAY_PATH(\n              GET_OBJECT_PATH(\n                GET_OBJECT_PATH(\n                  OBJECT_TRANSFORM(\n                    col_super_1\n                    SET\n                        '\"very\"', (col_super_1.very::SUPER + 10)\n                  ),\n                  'very'::VARCHAR\n                ),\n                'nested'::VARCHAR\n              ),\n              2::INT\n            ),\n            'path'::VARCHAR\n          )::INT\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 11625, "end_char_idx": 12614, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "78091935-38aa-4591-9d1e-a41a917c239a": {"__data__": {"id_": "78091935-38aa-4591-9d1e-a41a917c239a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dbfb9ca3-8299-4dc5-b9f1-706497dbe998", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "01f30327ac1270702986932a8cf0999ee8f901550fa55ecc16b7efeeed8e7864", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3cb85877-0e34-4303-89b6-bad0576eaf29", "node_type": "1", "metadata": {}, "hash": "40d6327c23695fdd70032087417e2a13751f57e12c94d2d5cfbd881a3e140c0f", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, RewriteComplex)", "mimetype": "text/plain", "start_char_idx": 12616, "end_char_idx": 12660, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3cb85877-0e34-4303-89b6-bad0576eaf29": {"__data__": {"id_": "3cb85877-0e34-4303-89b6-bad0576eaf29", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "78091935-38aa-4591-9d1e-a41a917c239a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f266a8bce6b5166f5b2f3c656ab6332fcc5f692e7fcba5518b52eea42ac8529e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "35fb228d-54d8-4c3b-a3e6-18b3d942b50a", "node_type": "1", "metadata": {}, "hash": "c8ba53a7b9e52a1a139665dc5f412ce4bbb5d4ad1b08959771a82cf50b7fd8b9", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto target_id = get_user_id_by_name(\"u_dp50000\");\n\n  pg::RunQuery(R\"SQL(\n    CREATE MASKING POLICY mp_dp50000_redact_ssn\n    WITH(age INT, state TEXT, ssn TEXT)\n    USING (\n      CASE\n        WHEN age <= 18 THEN 'XXX-XX-XXXX'\n        WHEN state != 'CA' THEN 'XXX-XX-'||SUBSTRING(ssn::TEXT FROM 8 FOR 4)\n        ELSE ssn\n      END\n    )\n  )SQL\");\n  pg::RunQuery(R\"SQL(\n    CREATE MASKING POLICY mp_dp50000_redact_salary\n    WITH(salary FLOAT)\n    USING (\n      FLOOR(salary / 10) * 10\n    )\n  )SQL\");\n  pg::RunQuery(R\"SQL(\n    CREATE MASKING POLICY mp_dp50000_redact_name\n    WITH(name TEXT)\n    USING ( '<name>'::TEXT )\n  )SQL\");\n\n  pg::RunQuery(R\"SQL(\n    ATTACH MASKING POLICY mp_dp50000_redact_ssn\n    ON t_dp50000_target(col_super_1.person.ssn)\n    USING (\n      col_super_1.person.age,\n      col_super_1.person.state,\n      col_super_1.person.ssn\n    )\n    TO ROLE r_dp50000\n  )SQL\");\n  pg::RunQuery(R\"SQL(\n    ATTACH MASKING POLICY mp_dp50000_redact_salary\n    ON t_dp50000_target(col_super_1.person.salary)\n    TO ROLE r_dp50000\n  )SQL\");\n  pg::RunQuery(R\"SQL(\n    ATTACH MASKING POLICY mp_dp50000_redact_name\n    ON t_dp50000_target(col_super_1.person.name)\n    TO ROLE r_dp50000\n  )SQL\");\n  pg::RunQuery(R\"SQL(\n    ATTACH MASKING POLICY mp_dp50000_redact_name\n    ON t_dp50000_target(col_text)\n    TO ROLE r_dp50000\n  )SQL\");\n  SetUserId(target_id);", "mimetype": "text/plain", "start_char_idx": 12661, "end_char_idx": 14057, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "35fb228d-54d8-4c3b-a3e6-18b3d942b50a": {"__data__": {"id_": "35fb228d-54d8-4c3b-a3e6-18b3d942b50a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3cb85877-0e34-4303-89b6-bad0576eaf29", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ffbab57a2f3b6c0718b17c3a6cb4fbdeeff0b6f8e1e79957ad7537f077c3ed8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb27c8a9-1290-4e4b-8d39-56ffcdcf4002", "node_type": "1", "metadata": {}, "hash": "aa064276de2df8c384a31e7c40f6c89433b85af3bc0f0a112174c90dcdfb2fc1", "class_name": "RelatedNodeInfo"}}, "text": "const char* user_query_str = R\"SQL(\n    SELECT\n      col_super_1,\n      col_text\n    FROM t_dp50000_target\n  )SQL\";\n\n  Query* query = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(std::string(user_query_str)))));\n  auto query_rewritten =\n      ddm::RewriteQuery(copyObject(query), false /* log_applied_policy */)\n          .rewrite;\n  auto query_rewritten_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(query_rewritten));", "mimetype": "text/plain", "start_char_idx": 14061, "end_char_idx": 14507, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bb27c8a9-1290-4e4b-8d39-56ffcdcf4002": {"__data__": {"id_": "bb27c8a9-1290-4e4b-8d39-56ffcdcf4002", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "35fb228d-54d8-4c3b-a3e6-18b3d942b50a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c184c98241c0b7fcf74fbe6fb3348aa5773fc982586e9fdad207b61f2696cde5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9dec8f1e-3c36-4a48-8e01-12fca62094b8", "node_type": "1", "metadata": {}, "hash": "b73c4212043fbcafb3080950d4c64fef0b9350117f3acd8d6538b47ff32f84b9", "class_name": "RelatedNodeInfo"}}, "text": "const char* query_expected_str = R\"SQL(\n    SELECT\n      col_super_1,\n      col_text\n    FROM\n      (\n        SELECT\n          col_int,\n          '<name>'::TEXT AS col_text,\n          col_bool,\n          OBJECT_TRANSFORM(\n            col_super_1\n            SET\n              '\"person\".\"name\"', ('<name>'::TEXT),\n              '\"person\".\"salary\"', (\n                FLOOR(col_super_1.person.salary::FLOAT / 10) * 10\n              ),\n              '\"person\".\"ssn\"', (\n                CASE\n                  WHEN\n                    col_super_1.person.age::INT <= 18\n                    THEN 'XXX-XX-XXXX'::TEXT\n                  WHEN\n                    col_super_1.person.state::VARCHAR(256) != 'CA'::TEXT\n                    THEN 'XXX-XX-'::TEXT || SUBSTRING(\n                      col_super_1.person.ssn::VARCHAR(256) FROM 8 FOR 4\n                    )\n                  ELSE\n                    col_super_1.person.ssn::VARCHAR(256)\n                END\n              )\n          ) AS col_super_1,\n          col_super_2\n        FROM\n          t_dp50000_target\n      ) AS t_dp50000_target\n  )SQL\";\n\n  Query* query_expected = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(std::string(query_expected_str)))));\n  std::string query_expected_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(query_expected));\n\n  EXPECT_EQ(query_expected_omni, query_rewritten_omni);\n\n  SetUserId(current_id);\n  pg::RunQuery(R\"SQL(DROP MASKING POLICY mp_dp50000_redact_ssn CASCADE)SQL\");", "mimetype": "text/plain", "start_char_idx": 14511, "end_char_idx": 15998, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9dec8f1e-3c36-4a48-8e01-12fca62094b8": {"__data__": {"id_": "9dec8f1e-3c36-4a48-8e01-12fca62094b8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bb27c8a9-1290-4e4b-8d39-56ffcdcf4002", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ae7f889a33bb090383e3accf9439b30cc6e71b2f75cc54ca8c0340f71400e4a7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "16a14e4e-3b9c-4eb9-b3c3-ed2b24293a5e", "node_type": "1", "metadata": {}, "hash": "05072ba7fa21bf564fbbc8119fa7c40acae3bbc00552b256937cca81d552b9c1", "class_name": "RelatedNodeInfo"}}, "text": "pg::RunQuery(\n      R\"SQL(DROP MASKING POLICY mp_dp50000_redact_salary CASCADE)SQL\");\n  pg::RunQuery(R\"SQL(DROP MASKING POLICY mp_dp50000_redact_name CASCADE)SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 16001, "end_char_idx": 16167, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "16a14e4e-3b9c-4eb9-b3c3-ed2b24293a5e": {"__data__": {"id_": "16a14e4e-3b9c-4eb9-b3c3-ed2b24293a5e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9dec8f1e-3c36-4a48-8e01-12fca62094b8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "25580aff0d6beda848116af479e76fec2e6c9c798f81b273f834908b9328018e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a14ec67b-0b3b-447a-81b4-24ebb3c8b1e1", "node_type": "1", "metadata": {}, "hash": "c85267fea2f316943f4044e17f1ebef58369be0b283c84cf89589859cc1dc62c", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMOverNested::InPlaceNestedVarsWalkerTest(\n    const char* query_str, std::vector<std::string> attachment_targets,\n    ddm::NestedVarMap expected) {\n  auto current_id = GetUserId();\n  auto user_id = get_user_id_by_name(\"u_dp50000\");\n\n  pg::RunQuery(R\"SQL(\n    CREATE MASKING POLICY mp_dp50000\n    WITH(a INT) USING ( a + 10 )\n  )SQL\");\n  for (auto&& target : attachment_targets) {\n    pg::RunQuery(boost::str(boost::format(R\"SQL(\n      ATTACH MASKING POLICY mp_dp50000\n      ON %1%(col_super_1.nested.path)\n      TO ROLE r_dp50000\n    )SQL\") % target));\n  }\n\n  SetUserId(user_id);\n\n  Query* query = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(std::string(query_str)))));\n  // Need to expand views.\n  List* pg_rewrite = QueryRewrite(query);\n  ASSERT_EQ(1, list_length(pg_rewrite));\n  query = reinterpret_cast<Query*>(linitial(pg_rewrite));\n\n  ddm::NestedVarMap map = ddm::WalkInPlaceNestedVars(query);\n\n  EXPECT_EQ(expected, map);\n\n  SetUserId(current_id);\n  pg::RunQuery(R\"SQL(DROP MASKING POLICY mp_dp50000 CASCADE)SQL\");\n}\n\nPG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerSimpleTable) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT col_super_1.nested\n        FROM t_dp50000_target\n      )SQL\",\n      {\"t_dp50000_target\"}, /* attachment_targets */\n      {{main_table_oid, {kColSuper1}}} /* expected */);\n}", "mimetype": "text/plain", "start_char_idx": 16169, "end_char_idx": 17544, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a14ec67b-0b3b-447a-81b4-24ebb3c8b1e1": {"__data__": {"id_": "a14ec67b-0b3b-447a-81b4-24ebb3c8b1e1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "16a14e4e-3b9c-4eb9-b3c3-ed2b24293a5e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9b8b6298fcdb84be838119254358e40e71b82344a8a6e57c7d5d464321506c93", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d027643c-07a6-4fd9-aa04-2c68045a0fd6", "node_type": "1", "metadata": {}, "hash": "1f7a1abb9eedecba34e103f4750a256a08421d3b3a8bc328228548178c7063ca", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerSimpleView) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT col_super_1.nested\n        FROM v_dp50000_target\n      )SQL\",\n      {\"v_dp50000_target\"}, /* attachment_targets */\n      {{main_view_oid, {kColSuper1}}} /* expected */);\n}\n\nPG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerSimpleTblViaView) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT v_dp50000_target.col_super_1.nested\n        FROM v_dp50000_target\n      )SQL\",\n      {\"t_dp50000_target\"}, /* attachment_targets */\n      {{main_table_oid, {kColSuper1}}} /* expected */);\n}\n\nPG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerViewRefsNested) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT col_nested\n        FROM v_dp50000_ref_nested\n      )SQL\",\n      {\"t_dp50000_target\"}, /* attachment_targets */\n      {{main_table_oid, {kColSuper1}}} /* expected */);\n}\n\nPG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerLBVRefsNested) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT col_nested\n        FROM lbv_dp50000_ref_nested\n      )SQL\",\n      {\"t_dp50000_target\"}, /* attachment_targets */\n      {{main_table_oid, {kColSuper1}}} /* expected */);\n}", "mimetype": "text/plain", "start_char_idx": 17546, "end_char_idx": 18851, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d027643c-07a6-4fd9-aa04-2c68045a0fd6": {"__data__": {"id_": "d027643c-07a6-4fd9-aa04-2c68045a0fd6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a14ec67b-0b3b-447a-81b4-24ebb3c8b1e1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "15e92a1cad5b96dd89768c10e8617a4f8420c130e9f712285cf490f64e4a3340", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "511309a5-be2d-42af-89af-b09a7bd45815", "node_type": "1", "metadata": {}, "hash": "bf3c7202cff63521fa743d4610e205be521e7aa9f15ea62bde55a75a4d3e78ec", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerSimpleLBV) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT col_super_1.nested\n        FROM lbv_dp50000_target\n      )SQL\",\n      {\"lbv_dp50000_target\"}, /* attachment_targets */\n      {{main_lbv_oid, {kColSuper1}}} /* expected */);\n}\n\nPG_TEST_F(TestDDMOverNested, InPlaceNestedVarsWalkerAllRelTypes) {\n  InPlaceNestedVarsWalkerTest(\n      /* query_str */\n      R\"SQL(\n        SELECT\n          T.col_super_1.nested,\n          V.col_super_1.nested,\n          LBV.col_super_1.nested\n        FROM\n          t_dp50000_target T\n          JOIN v_dp50000_target V ON (T.col_int = V.col_int)\n          JOIN lbv_dp50000_target LBV ON (T.col_int = LBV.col_int)\n      )SQL\",\n      {\n          \"t_dp50000_target\",\n          \"v_dp50000_target\",\n          \"lbv_dp50000_target\",\n      }, /* attachment_targets */\n      {\n          {main_table_oid, {kColSuper1}},\n          {main_view_oid, {kColSuper1}},\n          {main_lbv_oid, {kColSuper1}},\n      } /* expected */);\n}\n\n// TODO(bogatov): add tests for when nested path is same, shorter, longer, or\n// divergent from attached.\n\n// TODO(bogatov): check multiple vars per RTE.\n\n// TODO(bogatov): check nav path with array.", "mimetype": "text/plain", "start_char_idx": 18853, "end_char_idx": 20095, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "511309a5-be2d-42af-89af-b09a7bd45815": {"__data__": {"id_": "511309a5-be2d-42af-89af-b09a7bd45815", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d027643c-07a6-4fd9-aa04-2c68045a0fd6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f0b6d36fa3492e6601892d1a7cb0ff21b27ee4bc2b7fe3e67e9307d83fdf336d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "db9b87cd-3f93-46b1-958a-d98bd11819da", "node_type": "1", "metadata": {}, "hash": "2a1f5021c24f963ded4ef21dc58cc7b102dc1a61d0977451b6841ed32954bcee", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMOverNested::NavPathOptimizationRewrite(\n    const char* user_query_str, const char* query_expected_complex_str,\n    const char* query_expected_optimized_str)", "mimetype": "text/plain", "start_char_idx": 20097, "end_char_idx": 20266, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "db9b87cd-3f93-46b1-958a-d98bd11819da": {"__data__": {"id_": "db9b87cd-3f93-46b1-958a-d98bd11819da", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "511309a5-be2d-42af-89af-b09a7bd45815", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ed10869d9f6d1c5a211098a8a62025079ce1223dbfd1d7f8c17314d43997596b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b55e477-35db-4451-812e-3a9b9aa5a749", "node_type": "1", "metadata": {}, "hash": "88e31469b330ddbeeb6392bb481ccde323f93a666f5223d12cef4167e74f0653", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n\n  struct PolicyCase {\n    const char* arg_type;\n    const char* policy_str;\n    const char* policy_sql;\n  };", "mimetype": "text/plain", "start_char_idx": 20267, "end_char_idx": 20411, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8b55e477-35db-4451-812e-3a9b9aa5a749": {"__data__": {"id_": "8b55e477-35db-4451-812e-3a9b9aa5a749", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "db9b87cd-3f93-46b1-958a-d98bd11819da", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3949566d075f02a356360ca071fc0075733ffff8f2dfd6314caecf1105ee83a2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8a7e6157-1b93-4ec1-80e7-53da96169e19", "node_type": "1", "metadata": {}, "hash": "a58ed0a697f839c221a8bd1e609c1b258cafe401bfa6385494127053ea98ef6b", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<PolicyCase>", "mimetype": "text/plain", "start_char_idx": 20414, "end_char_idx": 20437, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8a7e6157-1b93-4ec1-80e7-53da96169e19": {"__data__": {"id_": "8a7e6157-1b93-4ec1-80e7-53da96169e19", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8b55e477-35db-4451-812e-3a9b9aa5a749", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "406f32317223e39bb7f1e86ab503825779e8f12366370f8cf68a4b66c4b7bb5c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "12887210-c57f-4327-aac5-93a677061aeb", "node_type": "1", "metadata": {}, "hash": "0a2e730e65c4a006c316aaa8dc1bb11498e4a441a392c7dd7d73c4da3b6705c7", "class_name": "RelatedNodeInfo"}}, "text": "policies =", "mimetype": "text/plain", "start_char_idx": 20438, "end_char_idx": 20448, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "12887210-c57f-4327-aac5-93a677061aeb": {"__data__": {"id_": "12887210-c57f-4327-aac5-93a677061aeb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8a7e6157-1b93-4ec1-80e7-53da96169e19", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "78b36e6463584565682453f365f368db8f84fb933478e2dc575cdd34d7b28bbf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b269556-8ca6-47c6-a425-9fff1351e6ef", "node_type": "1", "metadata": {}, "hash": "3fc7f1975e276c1546f1c023c6eb9d6c40092a841ad6a945de295afbb72d7f7f", "class_name": "RelatedNodeInfo"}}, "text": "{\n      PolicyCase{\n          \"INT\",                                          /* arg_type */\n          R\"SQL( a + 10 )SQL\",                            /* policy_str */\n          R\"SQL( col_super_1.nested.path::INT + 10 )SQL\", /* policy_sql */\n      },\n      PolicyCase{\n          \"INT\",                /* arg_type */\n          R\"SQL( 10::INT )SQL\", /* policy_str */\n          R\"SQL( 10::INT )SQL\", /* policy_sql */\n      },\n      PolicyCase{\n          \"INT\",                          /* arg_type */\n          R\"SQL( udf_dp50000(a, 5) )SQL\", /* policy_str */\n          R\"SQL(\n            udf_dp50000(\n              col_super_1.nested.path::INT,\n              5::INT\n            )\n          )SQL\",                          /* policy_sql */\n      },\n      PolicyCase{\n          \"SUPER\",                                         /* arg_type */\n          R\"SQL( a.other + 10 )SQL\",                       /* policy_str */\n          R\"SQL( col_super_1.nested.path.other + 10 )SQL\", /* policy_sql */\n      },", "mimetype": "text/plain", "start_char_idx": 20449, "end_char_idx": 21448, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b269556-8ca6-47c6-a425-9fff1351e6ef": {"__data__": {"id_": "3b269556-8ca6-47c6-a425-9fff1351e6ef", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "12887210-c57f-4327-aac5-93a677061aeb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4d9d3bb83fb85801611cd0285cacc88b64b6ac61d5cf08a3e7d96b4acbc3a26a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9aaf39db-98a7-4ea6-9644-5787335a2469", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "PolicyCase{\n          \"INT\", /* arg_type */\n          R\"SQL(\n            CASE\n                WHEN\n                    a IN (\n                        SELECT J.col_int\n                        FROM t_dp50000_join J\n                        WHERE J.col_int IS NOT NULL\n                    )\n                THEN 'found'\n                ELSE 'not-found'\n            END::TEXT\n          )SQL\", /* policy_str */\n          R\"SQL(\n            CASE\n                WHEN\n                    col_super_1.nested.path::INT IN (\n                        SELECT J.col_int\n                        FROM t_dp50000_join J\n                        WHERE J.col_int IS NOT NULL\n                    )\n                THEN 'found'::TEXT\n                ELSE 'not-found'::TEXT\n            END\n          )SQL\", /* policy_sql */\n      },\n  }", "mimetype": "text/plain", "start_char_idx": 21455, "end_char_idx": 22266, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9aaf39db-98a7-4ea6-9644-5787335a2469": {"__data__": {"id_": "9aaf39db-98a7-4ea6-9644-5787335a2469", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b269556-8ca6-47c6-a425-9fff1351e6ef", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1c5e39e1956a1a4df4dc95dd99b43d2506a413563db08c110ba3c140ec942e74", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4ac02080-979c-465d-b31a-06cf40653acc", "node_type": "1", "metadata": {}, "hash": "b5e32675a15cbb080cacc5cd679b3e654379f4a0ab7d7ef8f39a2c40e08c1dc2", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 580, "end_char_idx": 581, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4ac02080-979c-465d-b31a-06cf40653acc": {"__data__": {"id_": "4ac02080-979c-465d-b31a-06cf40653acc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9aaf39db-98a7-4ea6-9644-5787335a2469", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9e11705066bcf8eda5e5a0fe3cef419e038cb0871620bf05ba7a5955a2ccc35b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9279856f-6f84-4293-8c08-a120b3e12a70", "node_type": "1", "metadata": {}, "hash": "e3bf6ea3c50d8ca44ca2b0b3a5d4460acb65068592f3a3c411c6450b28d02ca4", "class_name": "RelatedNodeInfo"}}, "text": "for (auto&& policy : policies)", "mimetype": "text/plain", "start_char_idx": 22271, "end_char_idx": 22301, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9279856f-6f84-4293-8c08-a120b3e12a70": {"__data__": {"id_": "9279856f-6f84-4293-8c08-a120b3e12a70", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ac02080-979c-465d-b31a-06cf40653acc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "482f2d6af2ab803c9fdefc1dbd07416203be4480fd2123d3ee21b3a47c9db90d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e64f5fd7-68a8-424c-9e4d-1054cfbff1ba", "node_type": "1", "metadata": {}, "hash": "e7051f4e571a498eb0d7ab09b4ea6dc313d51b57a8ef7fadc29a1862a658fa01", "class_name": "RelatedNodeInfo"}}, "text": "{\n    pg::RunQuery(boost::str(boost::format(R\"SQL(\n      CREATE MASKING POLICY mp_dp50000\n      WITH(a %1%) USING ( %2% )\n    )SQL\") % policy.arg_type %\n                            policy.policy_str));\n    pg::RunQuery(R\"SQL(\n      ATTACH MASKING POLICY mp_dp50000\n      ON t_dp50000_target(col_super_1.nested.path)\n      TO ROLE r_dp50000\n    )SQL\");\n\n    auto target_id = get_user_id_by_name(\"u_dp50000\");\n    SetUserId(target_id);", "mimetype": "text/plain", "start_char_idx": 22302, "end_char_idx": 22735, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e64f5fd7-68a8-424c-9e4d-1054cfbff1ba": {"__data__": {"id_": "e64f5fd7-68a8-424c-9e4d-1054cfbff1ba", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9279856f-6f84-4293-8c08-a120b3e12a70", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "be75249dc625da21799242c88dc0d24a1fe6a2920b0b07437ee2b4b853ef48fa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b6d2ed40-9e6c-4581-b219-004cf1106ebd", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "for (auto&& ref_complex : {true, false}) {\n      auto ref = ref_complex ? \"col_super_1.nested\" : \"col_super_1.nested.path\";\n\n      auto query_str = boost::str(boost::format(user_query_str) % ref);\n\n      auto query_expected_str = ref_complex ? query_expected_complex_str\n                                            : query_expected_optimized_str;\n      auto query_expected_formatted =\n          boost::str(boost::format(query_expected_str) % policy.policy_sql);\n\n      Query* query = reinterpret_cast<Query*>(\n          linitial(pg::Analyze(pg::Parse(std::string(query_str)))));\n      auto query_rewritten =\n          ddm::RewriteQuery(copyObject(query), false /* log_applied_policy */)\n              .rewrite;\n\n      auto query_rewritten_omni =\n          omnisql::PrintSQL(omnisql::TranslateQuery(query_rewritten));\n\n      Query* query_expected = reinterpret_cast<Query*>(\n          linitial(pg::Analyze(pg::Parse(query_expected_formatted))));\n\n      std::string query_expected_omni =\n          omnisql::PrintSQL(omnisql::TranslateQuery(query_expected));\n\n      EXPECT_EQ(query_expected_omni, query_rewritten_omni)\n          << policy.policy_str << \" : \"\n          << (ref_complex ? \"complex\" : \"optimized\");\n    }\n    SetUserId(current_id);\n    pg::RunQuery(R\"SQL(DROP MASKING POLICY mp_dp50000 CASCADE)SQL\");\n  }", "mimetype": "text/plain", "start_char_idx": 22741, "end_char_idx": 24056, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b6d2ed40-9e6c-4581-b219-004cf1106ebd": {"__data__": {"id_": "b6d2ed40-9e6c-4581-b219-004cf1106ebd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e64f5fd7-68a8-424c-9e4d-1054cfbff1ba", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "84ad2a2e103329bcac580b5ae682982087c59095cbed6399424ad807b6148616", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36b77334-1c05-49be-a4cf-e1a2906a7974", "node_type": "1", "metadata": {}, "hash": "2002d3db91c323efd3ace7769484ae60e66ef4c3c0d8fdd9d36c9ce17180799a", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 958, "end_char_idx": 959, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "36b77334-1c05-49be-a4cf-e1a2906a7974": {"__data__": {"id_": "36b77334-1c05-49be-a4cf-e1a2906a7974", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b6d2ed40-9e6c-4581-b219-004cf1106ebd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b8859b5755e3934c4eadb67d56845dc40eec3bdba399571e7f159ae5b9448d27", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2f9aef30-7cac-42aa-a274-1994bc0d9310", "node_type": "1", "metadata": {}, "hash": "c92839debb4fe930a1148106f71940495ebae9da67251f322392723c11389dc2", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteSelect) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          %1% AS result\n        FROM\n          t_dp50000_target\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          col_super_1.nested AS result\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          (%1%)::SUPER AS result\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 24060, "end_char_idx": 25149, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2f9aef30-7cac-42aa-a274-1994bc0d9310": {"__data__": {"id_": "2f9aef30-7cac-42aa-a274-1994bc0d9310", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "36b77334-1c05-49be-a4cf-e1a2906a7974", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2e6628c423615eee5fc46e2ef3953a006294f358264334f3a5ba1b8c1dbf0ec8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8297c51b-c444-4be5-b20d-c82414aaf824", "node_type": "1", "metadata": {}, "hash": "5538d2c12f16042b258e2410beccc02f9f9bfc124bde582efdba2b66c4cc1731", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteWhere) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          t_dp50000_target\n        WHERE\n          %1% = 20\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        WHERE\n          col_super_1.nested = 20\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        WHERE\n          (%1%)::SUPER = 20\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 25151, "end_char_idx": 26302, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8297c51b-c444-4be5-b20d-c82414aaf824": {"__data__": {"id_": "8297c51b-c444-4be5-b20d-c82414aaf824", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2f9aef30-7cac-42aa-a274-1994bc0d9310", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2173336ff4d5ba3efb5c1625bb728ad3989cfb52558275aedd64aebae9899233", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4be32de4-c008-4d1f-be8c-4c0c10c718dc", "node_type": "1", "metadata": {}, "hash": "4405d005df886c74b464b905886219aeb6ae2f8e55616eecd8067206698c88d8", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteOrderBy) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          t_dp50000_target\n        ORDER BY %1%\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        ORDER BY col_super_1.nested\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        ORDER BY (%1%)::SUPER\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 26304, "end_char_idx": 27421, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4be32de4-c008-4d1f-be8c-4c0c10c718dc": {"__data__": {"id_": "4be32de4-c008-4d1f-be8c-4c0c10c718dc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8297c51b-c444-4be5-b20d-c82414aaf824", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "51e28b48de7aad25ada277a2b11d1438c2c24ef1dd2c552ff85b8f4cfa4a393f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e6c8bf5-bc6d-4e74-a23f-b0d41081ebb9", "node_type": "1", "metadata": {}, "hash": "6ec13e434435003e6bdb028be4872fea9c9cf847ac227c248527f4717a6bef94", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteGroupBy) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          t_dp50000_target\n        GROUP BY %1%\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        GROUP BY col_super_1.nested\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        GROUP BY (%1%)::SUPER\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 27423, "end_char_idx": 28540, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6e6c8bf5-bc6d-4e74-a23f-b0d41081ebb9": {"__data__": {"id_": "6e6c8bf5-bc6d-4e74-a23f-b0d41081ebb9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4be32de4-c008-4d1f-be8c-4c0c10c718dc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eee91c2b962ec92f09d0a2f687ee3d0b6c2ed8f82d98d2d206d0f76085b7e0c3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b5e7609c-02eb-401b-846f-2adcca074e51", "node_type": "1", "metadata": {}, "hash": "285de8ae73b8a81cd7f5b3c4b5740eaa44a12bdfc5b52178f0350f7ca626c90f", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteMultipleFrom) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n            J.col_int + T.%1%\n        FROM\n            t_dp50000_join J,\n            t_dp50000_target T\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          J.col_int + T.col_super_1.nested\n        FROM\n          t_dp50000_join J,\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS T\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          J.col_int + (%1%)::SUPER\n        FROM\n          t_dp50000_join J,\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS T\n      )SQL\");\n}\n\n// @warning in this case optimization does not apply! It's because the Var of\n// JOIN clause appears not to have a nested path (in Var). Therefore, we must\n// handle it as complex projection.", "mimetype": "text/plain", "start_char_idx": 28542, "end_char_idx": 29902, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b5e7609c-02eb-401b-846f-2adcca074e51": {"__data__": {"id_": "b5e7609c-02eb-401b-846f-2adcca074e51", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e6c8bf5-bc6d-4e74-a23f-b0d41081ebb9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c0374b3117de4912c33238d6be1b73f2f5dc0648285a4b6c1ab6f4a001572c90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc9efc4f-fa95-4ca5-a1fd-6b659bcb671e", "node_type": "1", "metadata": {}, "hash": "f6fe6ebacb92784831b5f17127bce6f90a98bd612f1d86b72708bbbadcd0e44c", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteJoin) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          t_dp50000_target\n        JOIN t_dp50000_join ON (\n          t_dp50000_target.%1% = t_dp50000_join.col_int\n        )\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        JOIN t_dp50000_join ON (\n          t_dp50000_target.col_super_1.nested = t_dp50000_join.col_int\n        )\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        JOIN t_dp50000_join ON (\n          t_dp50000_target.col_super_1.nested.path = t_dp50000_join.col_int\n        )\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 29903, "end_char_idx": 31392, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc9efc4f-fa95-4ca5-a1fd-6b659bcb671e": {"__data__": {"id_": "bc9efc4f-fa95-4ca5-a1fd-6b659bcb671e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b5e7609c-02eb-401b-846f-2adcca074e51", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d205c850abada843442d25ab17fc883fd1d61c5f23e2acb2a40c1d2909ae7e64", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fcf77ec5-83ee-4a40-a52b-1d8c2514d23c", "node_type": "1", "metadata": {}, "hash": "e8edd9f192cd97a3d5b8be0edfceef7ad05b950b140e70e9c1c67bbdef445a53", "class_name": "RelatedNodeInfo"}}, "text": "/// @note: no optimization, see above.", "mimetype": "text/plain", "start_char_idx": 31394, "end_char_idx": 31432, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fcf77ec5-83ee-4a40-a52b-1d8c2514d23c": {"__data__": {"id_": "fcf77ec5-83ee-4a40-a52b-1d8c2514d23c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc9efc4f-fa95-4ca5-a1fd-6b659bcb671e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e7d152fcb3f7608aa50cd93eccb9529b9dfce1d47a55f3601e6017a9dce128c7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8bd37d18-7575-4228-8f71-13c262bc5e69", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteSelfJoin)", "mimetype": "text/plain", "start_char_idx": 31433, "end_char_idx": 31497, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8bd37d18-7575-4228-8f71-13c262bc5e69": {"__data__": {"id_": "8bd37d18-7575-4228-8f71-13c262bc5e69", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fcf77ec5-83ee-4a40-a52b-1d8c2514d23c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "84ff1bd5bb9b452f7fe66fd353691e00d63d30f76bea1952316b61e6e9a5f348", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f10c2952-74d9-43fb-a205-ad81f41bbb2d", "node_type": "1", "metadata": {}, "hash": "2b4c3aa0a1d8bbe585cac0210ec55c94ecc258c56dd2d3aac1620d4bf85812e2", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 713, "end_char_idx": 714, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f10c2952-74d9-43fb-a205-ad81f41bbb2d": {"__data__": {"id_": "f10c2952-74d9-43fb-a205-ad81f41bbb2d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8bd37d18-7575-4228-8f71-13c262bc5e69", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ddf388d27fbc2fe3bbc7ef1663e9f6c76c4ce1d820b1a1fe5537c17048b16a1c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "87220ecf-619c-40a2-b4b0-f11fdcbcef01", "node_type": "1", "metadata": {}, "hash": "246b1e2045ceae6317387a62bc097c08c9763a6421c833dee046bbb232e6fcc8", "class_name": "RelatedNodeInfo"}}, "text": "NavPathOptimizationRewrite", "mimetype": "text/plain", "start_char_idx": 1467, "end_char_idx": 1493, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "87220ecf-619c-40a2-b4b0-f11fdcbcef01": {"__data__": {"id_": "87220ecf-619c-40a2-b4b0-f11fdcbcef01", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f10c2952-74d9-43fb-a205-ad81f41bbb2d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "167f3fad93f25bc99a423780d5e55a86b25a3784cfd596d48f50a2fb971a5092", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cab1e94d-3577-45ac-bad8-d85d64cbd6eb", "node_type": "1", "metadata": {}, "hash": "9455682ada28c558e9e7f112cf672ca1e4cb52f8224865b91a6b7340c9f69682", "class_name": "RelatedNodeInfo"}}, "text": "(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          t_dp50000_target T1\n        JOIN t_dp50000_target T2 ON (\n          T1.%1% = T2.%1%\n        )\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS T1\n        JOIN (\n          SELECT\n            col_int,\n            col_text,\n            col_bool,\n            OBJECT_TRANSFORM(\n              col_super_1\n              SET\n                  '\"nested\".\"path\"', (%1%)\n            ) AS col_super_1,\n            col_super_2\n          FROM\n            t_dp50000_target\n        ) AS T2\n        ON (\n          T1.col_super_1.nested = T2.col_super_1.nested\n        )\n      )SQL\",\n      /* query_expected_optimized_str */", "mimetype": "text/plain", "start_char_idx": 31528, "end_char_idx": 32630, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cab1e94d-3577-45ac-bad8-d85d64cbd6eb": {"__data__": {"id_": "cab1e94d-3577-45ac-bad8-d85d64cbd6eb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "87220ecf-619c-40a2-b4b0-f11fdcbcef01", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a4baafca305cab5d7bbb86dc75188ca906c171a51238094f31ffce3f5c347d73", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "64d5caab-d60b-4207-aecb-243768c05d4a", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS T1\n        JOIN (\n          SELECT\n            col_int,\n            col_text,\n            col_bool,\n            OBJECT_TRANSFORM(\n              col_super_1\n              SET\n                  '\"nested\".\"path\"', (%1%)\n            ) AS col_super_1,\n            col_super_2\n          FROM\n            t_dp50000_target\n        ) AS T2\n        ON (\n          T1.col_super_1.nested.path = T2.col_super_1.nested.path\n        )\n      )SQL\")", "mimetype": "text/plain", "start_char_idx": 32637, "end_char_idx": 33464, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "64d5caab-d60b-4207-aecb-243768c05d4a": {"__data__": {"id_": "64d5caab-d60b-4207-aecb-243768c05d4a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cab1e94d-3577-45ac-bad8-d85d64cbd6eb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "58f8c4c95607fbf3dbb80a6190a4828015d618cb5da325eccebd520820b1d038", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cde0e4b2-ff52-4429-84e5-40695e3992b4", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 580, "end_char_idx": 581, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cde0e4b2-ff52-4429-84e5-40695e3992b4": {"__data__": {"id_": "cde0e4b2-ff52-4429-84e5-40695e3992b4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "64d5caab-d60b-4207-aecb-243768c05d4a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9e11705066bcf8eda5e5a0fe3cef419e038cb0871620bf05ba7a5955a2ccc35b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe10bf72-c9f1-4ecc-a410-3a838a83dbc7", "node_type": "1", "metadata": {}, "hash": "3149c305904876d47f00f48bb50638646e4d07e0e97f9ed1719e996cb5730fce", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 958, "end_char_idx": 959, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fe10bf72-c9f1-4ecc-a410-3a838a83dbc7": {"__data__": {"id_": "fe10bf72-c9f1-4ecc-a410-3a838a83dbc7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cde0e4b2-ff52-4429-84e5-40695e3992b4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b8859b5755e3934c4eadb67d56845dc40eec3bdba399571e7f159ae5b9448d27", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e678f78e-2e3a-4a38-806c-f09f5621c6ff", "node_type": "1", "metadata": {}, "hash": "8fdd4f460242fa34f824a4b6978ebb315a963302a2f29118cf861def4644e32d", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, NavPathOptimizationRewriteSubSelect) {\n  NavPathOptimizationRewrite(\n      /* user_query_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          t_dp50000_target\n        WHERE (\n          t_dp50000_target.%1%::INT8 IN (\n            SELECT t_dp50000_join.col_int FROM t_dp50000_join\n          )\n        )\n      )SQL\",\n      /* query_expected_complex_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              OBJECT_TRANSFORM(\n                col_super_1\n                SET\n                    '\"nested\".\"path\"', (%1%)\n              ) AS col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        WHERE (\n          t_dp50000_target.col_super_1.nested::INT8 IN (\n            SELECT t_dp50000_join.col_int FROM t_dp50000_join\n          )\n        )\n      )SQL\",\n      /* query_expected_optimized_str */\n      R\"SQL(\n        SELECT\n          1\n        FROM\n          (\n            SELECT\n              col_int,\n              col_text,\n              col_bool,\n              col_super_1,\n              col_super_2\n            FROM\n              t_dp50000_target\n          ) AS t_dp50000_target\n        WHERE (\n          (%1%)::SUPER::INT8 IN (\n            SELECT t_dp50000_join.col_int FROM t_dp50000_join\n          )\n        )\n      )SQL\");\n}", "mimetype": "text/plain", "start_char_idx": 33469, "end_char_idx": 34934, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e678f78e-2e3a-4a38-806c-f09f5621c6ff": {"__data__": {"id_": "e678f78e-2e3a-4a38-806c-f09f5621c6ff", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fe10bf72-c9f1-4ecc-a410-3a838a83dbc7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61940e8085570b00bb4d7c22e63e924b8a20b8df36b3585d46b55adbeebe567f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f937ac1b-a682-47e6-81f1-130bf9d76787", "node_type": "1", "metadata": {}, "hash": "bfeffaed50390f7366e182dd4bc4dca3a771f25ccfc14cd000a4601e8632ba2c", "class_name": "RelatedNodeInfo"}}, "text": "std::set<ddm::ParsedPolicyAttachment>\nTestDDMOverNested::GenerateParsedAttachments(\n    std::vector<std::pair<\n        int, std::vector<std::pair<std::string, std::optional<std::string>>>>>\n        input) {\n  std::set<ddm::ParsedPolicyAttachment> attachments;\n  for (auto&& [priority, attributes] : input) {\n    ddm::ParsedPolicyAttachment attachment = {};\n    attachment.attachment.polpriority = priority;\n    for (auto&& [column, path] : attributes) {\n      attachment.polattrs_out.push_back(ddm::AttachedAttribute{column, path});\n      // Can't do simple std::make_shared<ResTarget> since DDM assumes it was\n      // palloc'ed.\n      ResTarget* rtgt = makeNode(ResTarget);\n      attachment.pol.parsed_pol.push_back(\n          std::shared_ptr<ResTarget>(rtgt, PAlloc_deleter()));\n    }\n    attachments.insert(attachment);\n  }\n  return attachments;\n}\n\nddm::MaskMap TestDDMOverNested::GenerateExpectedMaskMap(\n    std::unordered_map<std::string,\n                       std::vector<std::pair<int, std::optional<std::string>>>>\n        input) {\n  ddm::MaskMap map;\n  for (auto&& [key, entries] : input) {\n    for (auto&& [priority, path] : entries) {\n      map[key].push_back(ddm::MergeEntry{\n          nullptr /* rtgt */,\n          priority,\n          nullptr /* attachment */,\n          {} /* lf_alp_column_name */,\n          path,\n      });\n    }\n  }\n\n  return map;\n}", "mimetype": "text/plain", "start_char_idx": 34936, "end_char_idx": 36304, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f937ac1b-a682-47e6-81f1-130bf9d76787": {"__data__": {"id_": "f937ac1b-a682-47e6-81f1-130bf9d76787", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e678f78e-2e3a-4a38-806c-f09f5621c6ff", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "993ed081a38de3ae53a5cd9e4a7a5d37476ec42d14c1311d92714dda44186816", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e3636c26-f55e-4a29-8c3a-734d38db6d7e", "node_type": "1", "metadata": {}, "hash": "5650ff608e95c353bb9995b9dda31ae72d3d5375e4d263aa7154ae5c089c7710", "class_name": "RelatedNodeInfo"}}, "text": "bool TestDDMOverNested::MaskMapEqual(const ddm::MaskMap& left,\n                                     const ddm::MaskMap& right) {\n  if (left.size() != right.size()) return false;\n\n  for (auto&& [l_key, l_value] : left) {\n    auto r_it = right.find(l_key);\n    if (r_it == right.end()) return false;\n\n    if (l_value.size() != r_it->second.size()) return false;\n\n    std::vector<ddm::MergeEntry> l_value_sorted;\n    std::vector<ddm::MergeEntry> r_value_sorted;\n\n    std::partial_sort_copy(l_value.begin(), l_value.end(),\n                           l_value_sorted.begin(), l_value_sorted.end());\n    std::partial_sort_copy(r_it->second.begin(), r_it->second.end(),\n                           r_value_sorted.begin(), r_value_sorted.end());\n\n    for (size_t i = 0; i < l_value_sorted.size(); i++) {\n      if (l_value_sorted[i].priority != r_value_sorted[i].priority ||\n          l_value_sorted[i].nested_path != r_value_sorted[i].nested_path) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}", "mimetype": "text/plain", "start_char_idx": 36306, "end_char_idx": 37303, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e3636c26-f55e-4a29-8c3a-734d38db6d7e": {"__data__": {"id_": "e3636c26-f55e-4a29-8c3a-734d38db6d7e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f937ac1b-a682-47e6-81f1-130bf9d76787", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "60892ebe0ccc55e5a3063a12bd5b4a1e3b9ccbb528f14eb30f126b6ed3706960", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "92945aed-d1b1-4e20-903f-959ed7223ff6", "node_type": "1", "metadata": {}, "hash": "9badc2429b4bec936a560eab6fe0a696ffad2aac4bae6397be5aa96963e2db58", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMOverNested, BuildMaskMapWithNested)", "mimetype": "text/plain", "start_char_idx": 37305, "end_char_idx": 37357, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "92945aed-d1b1-4e20-903f-959ed7223ff6": {"__data__": {"id_": "92945aed-d1b1-4e20-903f-959ed7223ff6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e3636c26-f55e-4a29-8c3a-734d38db6d7e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "324f470c556e6572d0c17269fd3e3c79536eb8a0a72ff570a2f67cc73849a669", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2039f1cc-503f-4ae6-8949-953567876a98", "node_type": "1", "metadata": {}, "hash": "1a9c23d0b969300c638cfef00785c0b2f47788b367ae54083ba176f6e75d4d56", "class_name": "RelatedNodeInfo"}}, "text": "{\n  {\n    // Simple non-conflicting nested different attachments.\n    auto attachments = GenerateParsedAttachments({\n        {10, {{\"col_1\", R\"(\"a\".\"b\".\"d\")\"}}},\n        {20, {{\"col_1\", R\"(\"a\".\"b\".\"c\")\"}}},\n    });\n\n    auto expected = GenerateExpectedMaskMap({\n        {\"col_1\",\n         {\n             {20, R\"(\"a\".\"b\".\"c\")\"},\n             {10, R\"(\"a\".\"b\".\"d\")\"},\n         }},\n    });\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }\n\n  {\n    // Simple non-conflicting nested same attachment.\n    auto attachments = GenerateParsedAttachments({\n        {10,\n         {\n             {\"col_1\", R\"(\"a\".\"b\".\"d\")\"},\n             {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n         }},\n    });\n\n    auto expected = GenerateExpectedMaskMap({{\n        \"col_1\",\n        {\n            {10, R\"(\"a\".\"b\".\"c\")\"},\n            {10, R\"(\"a\".\"b\".\"d\")\"},\n        },\n    }});\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }", "mimetype": "text/plain", "start_char_idx": 37358, "end_char_idx": 38455, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2039f1cc-503f-4ae6-8949-953567876a98": {"__data__": {"id_": "2039f1cc-503f-4ae6-8949-953567876a98", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "92945aed-d1b1-4e20-903f-959ed7223ff6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9cad65b37e94a7e1a1fbd22a5121180fc5e898e98a115224979a13fa3f69589b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f45842e-0d79-4254-8d34-98b1a8ee14a0", "node_type": "1", "metadata": {}, "hash": "bb691da365303517674a6cfa721f3fabe04387fbffdb86e16f6706a09ae5b06b", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // Simple conflicting nested.\n    auto attachments = GenerateParsedAttachments({\n        {10, {{\"col_1\", R\"(\"a\".\"b\")\"}}},\n        {20, {{\"col_1\", R\"(\"a\".\"b\".\"c\")\"}}},\n    });\n\n    auto expected = GenerateExpectedMaskMap({{\n        \"col_1\",\n        {\n            {20, R\"(\"a\".\"b\".\"c\")\"},\n        },\n    }});\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }\n\n  {\n    // Column-level override, nested wins.\n    auto attachments = GenerateParsedAttachments({\n        {10, {{\"col_1\", std::nullopt}}},\n        {20, {{\"col_1\", R\"(\"a\".\"b\".\"c\")\"}}},\n    });\n\n    auto expected =\n        GenerateExpectedMaskMap({{\"col_1\", {{20, R\"(\"a\".\"b\".\"c\")\"}}}});\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }\n\n  {\n    // Column-level override, column wins.\n    auto attachments = GenerateParsedAttachments({\n        {10, {{\"col_1\", R\"(\"a\".\"b\".\"c\")\"}}},\n        {20, {{\"col_1\", std::nullopt}}},\n    });\n\n    auto expected = GenerateExpectedMaskMap({{\"col_1\", {{20, std::nullopt}}}});\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }", "mimetype": "text/plain", "start_char_idx": 38459, "end_char_idx": 39789, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7f45842e-0d79-4254-8d34-98b1a8ee14a0": {"__data__": {"id_": "7f45842e-0d79-4254-8d34-98b1a8ee14a0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2039f1cc-503f-4ae6-8949-953567876a98", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e4f9c7a62364272b1b83c05a0cea6743dd72d8ca33156e73323b44dd6eb76c2f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "00821d85-3372-472f-b0b9-aa72dceec6ab", "node_type": "1", "metadata": {}, "hash": "8ffbaecac416087e0f6361d8a7711a871b8cfa0d350b5a14de3395b8fbe9f0b7", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // Nested override multiple.\n    auto attachments = GenerateParsedAttachments({\n        {\n            10,\n            {\n                {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n                {\"col_1\", R\"(\"a\".\"b\".\"d\")\"},\n            },\n        },\n        {\n            20,\n            {{\"col_1\", R\"(\"a\".\"b\")\"}},\n        },\n    });\n\n    auto expected = GenerateExpectedMaskMap({{\"col_1\", {{20, R\"(\"a\".\"b\")\"}}}});\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }\n\n  {\n    // Multiple entries for column.\n    auto attachments = GenerateParsedAttachments({\n        {10,\n         {\n             {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n             {\"col_1\", R\"(\"a\".\"b\".\"d\")\"},\n         }},\n        {5,\n         {\n             {\"col_1\", R\"(\"a\".\"b\")\"},\n         }},\n    });\n\n    auto expected = GenerateExpectedMaskMap({\n        {\"col_1\",\n         {\n             {10, R\"(\"a\".\"b\".\"c\")\"},\n             {10, R\"(\"a\".\"b\".\"d\")\"},\n         }},\n    });\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }", "mimetype": "text/plain", "start_char_idx": 39793, "end_char_idx": 40971, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "00821d85-3372-472f-b0b9-aa72dceec6ab": {"__data__": {"id_": "00821d85-3372-472f-b0b9-aa72dceec6ab", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7f45842e-0d79-4254-8d34-98b1a8ee14a0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1c3a4855dde2aa6d0969b4fd74dd181696a99b5e9ed806de44f126bbe2866642", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "606b7522-dbf5-4b0f-8894-8d0912e65f4b", "node_type": "1", "metadata": {}, "hash": "e0fa7965b79c23b0feea404607c8baf9b6218488bffd6a53a1d770b4a0b6bf4b", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // Complex example.\n    auto attachments = GenerateParsedAttachments({\n        {10,\n         {\n             {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n             {\"col_1\", R\"(\"a\".\"b\".\"d\")\"},\n         }},\n        {20, {{\"col_2\", R\"(\"a\".\"b\")\"}}},\n        {30, {{\"col_2\", std::nullopt}}},\n        {40, {{\"col_1\", R\"(\"a\".\"b\".\"d\".\"e\")\"}}},\n    });\n\n    auto expected = GenerateExpectedMaskMap({\n        {\"col_1\",\n         {\n             {10, R\"(\"a\".\"b\".\"c\")\"},\n             {40, R\"(\"a\".\"b\".\"d\".\"e\")\"},\n         }},\n        {\"col_2\", {{30, std::nullopt}}},\n    });\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }\n\n  {\n    // Example from review: case 1.\n    auto attachments = GenerateParsedAttachments({\n        {1,\n         {\n             {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n         }},\n        {2,\n         {\n             {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n         }},\n    });\n\n    auto expected = GenerateExpectedMaskMap({\n        {\"col_1\",\n         {\n             {2, R\"(\"a\".\"b\".\"c\")\"},\n         }},\n    });\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }", "mimetype": "text/plain", "start_char_idx": 40975, "end_char_idx": 42222, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "606b7522-dbf5-4b0f-8894-8d0912e65f4b": {"__data__": {"id_": "606b7522-dbf5-4b0f-8894-8d0912e65f4b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "00821d85-3372-472f-b0b9-aa72dceec6ab", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a81764dabb0fb4ff8e3dde960ac7e84a529b940c05919fee7e871a57f78f6eb9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73ed6578-15cf-4dd6-8731-ddc4431cba33", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "{\n    // Example from review: case 2.\n    auto attachments = GenerateParsedAttachments({\n        {1,\n         {\n             {\"col_1\", R\"(\"a\".\"b\".\"c\")\"},\n         }},\n        {2,\n         {\n             {\"col_1\", R\"(\"a\".\"b\")\"},\n         }},\n    });\n\n    auto expected = GenerateExpectedMaskMap({\n        {\"col_1\",\n         {\n             {2, R\"(\"a\".\"b\")\"},\n         }},\n    });\n\n    ddm::MaskMap actual =\n        ddm::BuildMaskMap(attachments, {} /* obj_transform_alp_ctx */);\n\n    ASSERT_TRUE(MaskMapEqual(expected, actual));\n  }\n}", "mimetype": "text/plain", "start_char_idx": 42226, "end_char_idx": 42758, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73ed6578-15cf-4dd6-8731-ddc4431cba33": {"__data__": {"id_": "73ed6578-15cf-4dd6-8731-ddc4431cba33", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "606b7522-dbf5-4b0f-8894-8d0912e65f4b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "abb53e975290ac4118c06a1818ad04cbc1850363bf1aeda8d2826adf0c59335a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26770ea6-8065-4bf9-a462-8978680fd074", "node_type": "1", "metadata": {}, "hash": "e216614096329ea09b29243f279e122071ff7882dcf6db9d5da28b4bb1899dae", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 958, "end_char_idx": 959, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "26770ea6-8065-4bf9-a462-8978680fd074": {"__data__": {"id_": "26770ea6-8065-4bf9-a462-8978680fd074", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "068e74de187b72447782b141e458d521afb8dec375f9de94197866b2484b8ac3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73ed6578-15cf-4dd6-8731-ddc4431cba33", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b8859b5755e3934c4eadb67d56845dc40eec3bdba399571e7f159ae5b9448d27", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 42763, "end_char_idx": 42784, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "79c64ee6-0ef5-4147-84f0-74cda9160f56": {"__data__": {"id_": "79c64ee6-0ef5-4147-84f0-74cda9160f56", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "28843f5c-027e-4640-8f71-c2cbaaecb790", "node_type": "1", "metadata": {}, "hash": "eacf1e70aca057b35433ff7e505baafb5413431bff8f13d75da95638a4cc3100", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"pg/ddm/test_policy.hpp\"\n\n#include \"access/heapam.h\"\n#include \"catalog/namespace.h\"\n#include \"catalog/pg_policy_mask.h\"\n#include \"catalog/pg_type.h\"\n#include \"ddm/constants.hpp\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/policy_access.h\"\n#include \"nodes/makefuncs.h\"\n#include \"rewrite/rewriteSupport.h\"\n#include \"storage/lmgr.h\"\n#include \"utils/builtins.h\"\n#include \"utils/lsyscache.h\"\n#include \"utils/memutils.h\"\n\n#include \"pg/ddm/ddm_test_helper.hpp\"\n#include \"pg/src/include/utils/elog.h\"\n\n#include <boost/algorithm/string/case_conv.hpp>\n#include <boost/algorithm/string/replace.hpp>\n#include <boost/format.hpp>\n\n#include <cstdio>\n#include <memory>\n#include <set>\n#include <string>\n#include <unordered_set>\n#include <utility>\n#include <vector>\n\nextern bool gconf_enable_ddm;\nextern bool g_pgtest_ddm;\nextern bool gconf_enable_qpc_for_session;\nextern bool gconf_enable_ddm_on_views;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 971, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "28843f5c-027e-4640-8f71-c2cbaaecb790": {"__data__": {"id_": "28843f5c-027e-4640-8f71-c2cbaaecb790", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "79c64ee6-0ef5-4147-84f0-74cda9160f56", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "91c98f4b9f66a9473caac54729a04f42d0eae3ffa80018c6a5e8cf944c84bbf2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e3b63e8d-2dc3-4002-95ef-30ecd17fd2bb", "node_type": "1", "metadata": {}, "hash": "ea2c3851a78a90c13d646e25315ea02fd846dbfebe9c81c4b30cba6845e68f0f", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest", "mimetype": "text/plain", "start_char_idx": 973, "end_char_idx": 989, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e3b63e8d-2dc3-4002-95ef-30ecd17fd2bb": {"__data__": {"id_": "e3b63e8d-2dc3-4002-95ef-30ecd17fd2bb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "28843f5c-027e-4640-8f71-c2cbaaecb790", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0f3d1cd73f91ce14beb3846e573623b3ae2a15d6bdb830104a1bb79867dac385", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "896e2f5f-22bb-4a76-a7b2-589ba75d9511", "node_type": "1", "metadata": {}, "hash": "e2432a7e3bd30b1e3c272408a5176e153d4810e525a8beaa8fd72c76579409d1", "class_name": "RelatedNodeInfo"}}, "text": "{\nOid test_relid, test_relid_2, test_view_relid, test_lbv_relid;\nRangeTblEntry *test_rte, *test_view_rte, *test_lbv_rte;", "mimetype": "text/plain", "start_char_idx": 990, "end_char_idx": 1110, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "896e2f5f-22bb-4a76-a7b2-589ba75d9511": {"__data__": {"id_": "896e2f5f-22bb-4a76-a7b2-589ba75d9511", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e3b63e8d-2dc3-4002-95ef-30ecd17fd2bb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "65df313d1094bf4e8fdd7decce3c01977d11bddf33bf46eff484bda5220e59ba", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af72b396-8261-4fed-ac63-e80882495d21", "node_type": "1", "metadata": {}, "hash": "426fbc311ec217e78bd45a9dff2342cfce2cec42a95025926c938db493730cf8", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMPolicy::SetUpTestCase()", "mimetype": "text/plain", "start_char_idx": 1112, "end_char_idx": 1147, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "af72b396-8261-4fed-ac63-e80882495d21": {"__data__": {"id_": "af72b396-8261-4fed-ac63-e80882495d21", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "896e2f5f-22bb-4a76-a7b2-589ba75d9511", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d0b91fdff8ad7af965299d53be5a8152a69e6117ecaf79cd50de944f5d3f3a01", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c3236c08-44a3-4b10-8ba7-97f2c9e9cf59", "node_type": "1", "metadata": {}, "hash": "3b1d4e35802f24c20db4862fb4edd3bb7dda76b04eea843035ad21205355c3e6", "class_name": "RelatedNodeInfo"}}, "text": "{\n  g_pgtest_ddm = true;\n  gconf_enable_ddm = true;\n  gconf_enable_ddm_on_views = true;\n  gconf_enable_qpc_for_session = false;\n  // Setting DDM policy commands to exist within a Transaction context.\n  TopTransactionContext = AllocSetContextCreate(\n      TopMemoryContext, \"TopTransactionContext\", ALLOCSET_DEFAULT_MINSIZE,\n      ALLOCSET_DEFAULT_INITSIZE, ALLOCSET_DEFAULT_MAXSIZE);\n\n  CurTransactionContext = TopTransactionContext;\n\n  pg::RunQuery(\n      \"CREATE TABLE test (foo_col int, bar_col int, car_col int, dar_col \"\n      \"int)\");\n  auto q = pgtest::ParseAnalyzeQuery(\"select * from test;\");\n  test_rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  test_relid = GetRelID(q);\n  pg::RunQuery(\"CREATE VIEW v1 AS SELECT * FROM TEST;\");\n  q = pgtest::ParseAnalyzeQuery(\"SELECT * FROM v1;\");\n  test_view_rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  test_view_relid = test_view_rte->relid;\n\n  pg::RunQuery(\n      \"CREATE VIEW pollbv1 AS SELECT * FROM pgtest_testcase_schema.TEST WITH \"\n      \"NO SCHEMA BINDING;\");\n  q = pgtest::ParseAnalyzeQuery(\"SELECT * FROM pollbv1;\");\n  test_lbv_rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  if (!OidIsValid(test_lbv_rte->relid)) {\n    RangeTblEntry* view_old = GetViewOldRte(test_lbv_rte);\n    if (view_old != nullptr) {\n      XCHECK(OidIsValid(view_old->relid));\n      test_lbv_rte->relid = view_old->relid;\n    }\n  }\n  test_lbv_relid = test_lbv_rte->relid;", "mimetype": "text/plain", "start_char_idx": 1148, "end_char_idx": 2597, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c3236c08-44a3-4b10-8ba7-97f2c9e9cf59": {"__data__": {"id_": "c3236c08-44a3-4b10-8ba7-97f2c9e9cf59", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "af72b396-8261-4fed-ac63-e80882495d21", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0b7767f17717a0c115b0d0b5859b26d6d64d8cfa4d321446292313c262fc1765", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02bd796a-eab9-464d-b396-8b24cf4d0a26", "node_type": "1", "metadata": {}, "hash": "57f623eb02cc612af142c8dd4f9b6ce356d09cb24c698e1250575753c55d9b48", "class_name": "RelatedNodeInfo"}}, "text": "pg::RunQuery(\n      \"CREATE TABLE target_table(a INT, b VARCHAR(12),\"\n      \"s super, \\\"a\\\"\\\"b\\\"\\\"\\\" INT, f FLOAT)\");\n  auto q_2 = pgtest::ParseAnalyzeQuery(\"select * from target_table\");\n  test_relid_2 = GetRelID(q_2);\n  pg::RunQuery(\"CREATE TABLE lookup (c int)\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp1pol with (a int, b int) USING (2 * a, 5 * b)\");\n  pg::RunQuery(\"CREATE USER u1 PASSWORD DISABLE\");\n  pg::RunQuery(\"CREATE USER u2 PASSWORD DISABLE\");\n  pg::RunQuery(\"CREATE USER u3 PASSWORD DISABLE\");\n  pg::RunQuery(\"CREATE ROLE r1\");\n  pg::RunQuery(\"GRANT ROLE r1 to u2\");\n  pg::RunQuery(\"ATTACH MASKING POLICY mp1pol ON test (foo_col, bar_col) TO u1\");\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp1pol ON test (foo_col, bar_col) TO ROLE\"\n      \" r1 priority 1;\");\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp1pol ON v1 (foo_col, bar_col) TO ROLE\"\n      \" r1 priority 1;\");\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp1pol ON pollbv1 (foo_col, bar_col) TO ROLE r1 \"\n      \"priority 1;\");\n}", "mimetype": "text/plain", "start_char_idx": 2601, "end_char_idx": 3615, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "02bd796a-eab9-464d-b396-8b24cf4d0a26": {"__data__": {"id_": "02bd796a-eab9-464d-b396-8b24cf4d0a26", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c3236c08-44a3-4b10-8ba7-97f2c9e9cf59", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "96c4a6404c6b4dea69d30c9a75d4585af2b649a3c9894d7f8ba3dd1affb9c5d6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "935a133d-2b7c-4a69-86c4-4d4314ae6500", "node_type": "1", "metadata": {}, "hash": "b0f710bcf3b685fd858e1fa49cc3a5ce7a2f8b4f488c90bf5a1c732fb7cea25e", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMPolicy::TearDownTestCase() {\n  g_pgtest_ddm = false;\n  pg::RunQuery(\"DROP VIEW v1;\");\n  pg::RunQuery(\"DROP VIEW pollbv1;\");\n  pg::RunQuery(\"DROP TABLE test;\");\n  pg::RunQuery(\"DROP TABLE lookup;\");\n  pg::RunQuery(\"DROP USER u1;\");\n  pg::RunQuery(\"DROP USER u2;\");\n  pg::RunQuery(\"DROP USER u3;\");\n  pg::RunQuery(\"DROP ROLE r1;\");\n}", "mimetype": "text/plain", "start_char_idx": 3617, "end_char_idx": 3960, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "935a133d-2b7c-4a69-86c4-4d4314ae6500": {"__data__": {"id_": "935a133d-2b7c-4a69-86c4-4d4314ae6500", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "02bd796a-eab9-464d-b396-8b24cf4d0a26", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f8a690bb4a4243e2b829ed75b1b32677b1f4b77826654414120db68040dd9525", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05c367ed-c232-4b94-af64-3868df296993", "node_type": "1", "metadata": {}, "hash": "be1d2fac44f2a3fccdd485be19b7c89448363d68b2435d55b9d1162da7e96219", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestParsePolicy) {\n  std::string expected =\n      \"{\\n\"\n      \"\\tRESTARGET :name <> :indirection <> :val {\\n\"\n      \"\\tAEXPR  :name (\\\"*\\\") :lexpr {\\n\"\n      \"\\tA_CONST2 :typname <>} :rexpr {\\n\"\n      \"\\tCOLUMNREF :fields (\\\"masked_table\\\" \\\"a\\\")}}}\";\n\n  const char* name = \"test_pol\";\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n  ddm::Policy pol = {\n      0 /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"foo_col\\\", \\\"typoid\\\": 0, \\\"typmod\\\": 2}]\",\n      \"[{\\\"expr\\\": \\\"2 * masked_table.a\\\",\\\"typoid\\\":0,\\\"typmod\\\":0}]\"};\n  ddm::ParsedPolicy res = ddm::ParsePolicy(pol);\n  EXPECT_TRUE(res.parsed_pol.size() == 1) << \"wrong number of parsed policies\";\n\n  char* query_str = nodeToString(res.parsed_pol[0].get());\n  EXPECT_TRUE(strcmp(expected.c_str(), nodeToString(res.parsed_pol[0].get())) ==\n              0)\n      << boost::format(\n             \"expected parse_tree %s did not match actual parse_tree %s\") %\n             expected.c_str() % query_str;\n\n  EXPECT_TRUE(res.parsed_attrs.size() == 1) << \"wrong number of attrs\";\n  EXPECT_TRUE(res.parsed_attrs[0]->colname != NULL);\n  EXPECT_TRUE(strcmp(res.parsed_attrs[0]->colname, \"foo_col\") == 0)\n      << boost::format(\"wrong col_name %s\") % res.parsed_attrs[0]->colname;\n  EXPECT_TRUE(res.parsed_attrs[0]->typname != NULL);\n};", "mimetype": "text/plain", "start_char_idx": 3962, "end_char_idx": 5410, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "05c367ed-c232-4b94-af64-3868df296993": {"__data__": {"id_": "05c367ed-c232-4b94-af64-3868df296993", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "935a133d-2b7c-4a69-86c4-4d4314ae6500", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f6552186510c5197b51fc5a0b25f5684400af18a40483d5a8ae0e0a828703e2b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c7e46b48-27c8-4cc6-b484-703254d91898", "node_type": "1", "metadata": {}, "hash": "0a93ab1fa5c3495d27f4bc6c4fd81c85ca09884d38923c172d5babc5f5aecada", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestParseLookupPolicy)", "mimetype": "text/plain", "start_char_idx": 5412, "end_char_idx": 5459, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c7e46b48-27c8-4cc6-b484-703254d91898": {"__data__": {"id_": "c7e46b48-27c8-4cc6-b484-703254d91898", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05c367ed-c232-4b94-af64-3868df296993", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "648809f2d0f2f16a4019d1d10aa2adfd89b3a2853c016a1de26707a69755ed9b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a76d628f-3138-4b7b-91ba-999ee465b00c", "node_type": "1", "metadata": {}, "hash": "a04993da5ae697f904582ff0940af81ec778aac21e9a5cad743684590d8c87c1", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::string expected =\n      \"{\\n\"\n      \"\\tRESTARGET :name <> :indirection <> :val {\\n\"\n      \"\\tSUBLINK :subLinkType 2 :useOr false :notIn false :lefthand ({\\n\"\n      \"\\tCOLUMNREF :fields (\\\"masked_table\\\" \\\"a\\\")}) :operName (\\\"=\\\") \"\n      \":operOids <> :subselect {\\n\"\n      \"\\tSELECT :distinctClause <> :into <> :intoColNames <> :intoHasOids 2 \"\n      \":targetList ({\\n\"\n      \"\\tRESTARGET :name <> :indirection <> :val {\\n\"\n      \"\\tCOLUMNREF :fields (\\\"c\\\")}}) :fromClause ({\\n\"\n      \"\\tRANGEVAR :schemaname <> :relname lookup_table :inhOpt 2 :istemp false \"\n      \":alias <> :physProps <> :unnest_type 0}) :whereClause <> :groupClause \"\n      \"<> :groupByAll false \"\n      \":havingClause <> :sortClause <> :limitOffset <> :limitCount {\\n\"\n      \"\\tTYPECAST :arg {\\n\"\n      \"\\tA_CONST1 :typname <>} :typname {\\n\"\n      \"\\tTYPENAME :names (\\\"int4\\\") :typid 0 :timezone false :setof false \"\n      \":pct_type false :typmod -1 :arrayBounds <>}} :forUpdate <> :with_clause \"\n      \"<> :op 0 :all false :larg <> :rarg <> :hintspec {\\n\"\n      \"\\tHINTSPEC :hintstring <> :hintlist <>} :isMaterializedView false \"\n      \":mvSelectStmtString <>}}}\";\n\n  const char* name = \"test_pol\";\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));", "mimetype": "text/plain", "start_char_idx": 5460, "end_char_idx": 6743, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a76d628f-3138-4b7b-91ba-999ee465b00c": {"__data__": {"id_": "a76d628f-3138-4b7b-91ba-999ee465b00c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c7e46b48-27c8-4cc6-b484-703254d91898", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8f858295fe1ac7384a9d828aa5c946549374413372575771d820522b221eecca", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7777206e-f6f5-4baa-bf21-acd646a0313a", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "ddm::Policy pol = {\n      0 /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"a\\\", \\\"typoid\\\": 23, \\\"typmod\\\": -1}]\" /* polattrs */,\n      \"[{\\\"expr\\\": \\\"ROW(\\\\\\\"masked_table\\\\\\\".\\\\\\\"a\\\\\\\") = ANY (SELECT \"\n      \"\\\\\\\"c\\\\\\\" FROM \\\\\\\"lookup_table\\\\\\\" LIMIT CAST(1 AS INT4))\\\", \"\n      \"\\\"typoid\\\": 16, \\\"typmod\\\": -1}]\" /* polexpr */\n  };\n  ddm::ParsedPolicy res = ddm::ParsePolicy(pol);\n  EXPECT_TRUE(res.parsed_pol.size() == 1) << \"wrong number of parsed policies\";\n\n  char* query_str = nodeToString(res.parsed_pol[0].get());\n  EXPECT_TRUE(strcmp(expected.c_str(), nodeToString(res.parsed_pol[0].get())) ==\n              0)\n      << boost::format(\n             \"expected parse_tree %s did not match actual parse_tree %s\") %\n             expected.c_str() % query_str;\n\n  EXPECT_TRUE(res.parsed_attrs.size() == 1) << \"wrong number of attrs\";\n  EXPECT_TRUE(res.parsed_attrs[0]->colname != NULL);\n  EXPECT_TRUE(strcmp(res.parsed_attrs[0]->colname, \"a\") == 0)\n      << boost::format(\"wrong col_name %s\") % res.parsed_attrs[0]->colname;\n  EXPECT_TRUE(res.parsed_attrs[0]->typname != NULL);\n}", "mimetype": "text/plain", "start_char_idx": 6746, "end_char_idx": 7918, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7777206e-f6f5-4baa-bf21-acd646a0313a": {"__data__": {"id_": "7777206e-f6f5-4baa-bf21-acd646a0313a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a76d628f-3138-4b7b-91ba-999ee465b00c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f448a882a72776594cfe82513689e57d9224ff06af8da4a05a5d619189f855f6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b98a182-429b-44ae-bb9c-b4fe0531a312", "node_type": "1", "metadata": {}, "hash": "57a546e133eea262114842596fdc68fcc1efd925249071cbe141b1fd95ab6c54", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b98a182-429b-44ae-bb9c-b4fe0531a312": {"__data__": {"id_": "2b98a182-429b-44ae-bb9c-b4fe0531a312", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7777206e-f6f5-4baa-bf21-acd646a0313a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "73fdaf56-0d2f-422b-95b1-7735bbb14443", "node_type": "1", "metadata": {}, "hash": "e66939e7cbb6f8a58335f114521ed9098419bcad7484ba11da139b46b98a6b2c", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestParseAttachment)", "mimetype": "text/plain", "start_char_idx": 7921, "end_char_idx": 7966, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "73fdaf56-0d2f-422b-95b1-7735bbb14443": {"__data__": {"id_": "73fdaf56-0d2f-422b-95b1-7735bbb14443", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2b98a182-429b-44ae-bb9c-b4fe0531a312", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c03cf1298b8d11d010874a58d65d726099ac02c627515e7fc996d07ce223cad1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aafb638f-3afc-45b7-97be-49b39bdf59dc", "node_type": "1", "metadata": {}, "hash": "827d9ac43dc1c61a9b0b1a09fe18e2011f633b1ba94b225f8550be631b38cbef", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const char* name = \"test_pol\";\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n  ddm::Policy pol = {\n      0 /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"a\\\", \\\"typoid\\\": 0, \\\"typmod\\\": 0},\"\n      \"{\\\"colname\\\": \\\"b\\\", \\\"typoid\\\": 1, \\\"typmod\\\": 1}]\",\n      \"[{\\\"expr\\\": \\\"2 * masked_table.a\\\", \\\"typoid\\\": 1, \\\"typmod\\\": \"\n      \"0},{\\\"expr\\\": \\\"5 * masked_table.b\\\", \\\"typoid\\\": 1, \"\n      \"\\\"typmod\\\": 0}]\" /* polexpr */\n  };\n  ddm::Attachment attach = {0 /* polid */, 0 /* permid */, test_relid,\n                            0 /* polpriority */, 0 /* polmodifiedby */,\n                            // foo_col, bar_col\n                            \"[1, 2]\" /* polattrsin */,\n                            // car_col, dar_col\n                            \"[3, 4]\" /* polattrsout */, pol};\n\n  auto parsed = ddm::ParseAttachment(attach, std::nullopt);\n\n  EXPECT_TRUE(parsed.pol.parsed_pol.size() == 2)\n      << boost::format(\"wrong number of targets %lu, expected 2\") %\n             parsed.pol.parsed_pol.size();\n\n  EXPECT_TRUE(parsed.polattrs_in.size() == 2)\n      << boost::format(\"wrong number of input attributes %lu expected 2\") %\n             parsed.polattrs_in.size();\n  EXPECT_TRUE(parsed.polattrs_out.size() == 2)\n      << boost::format(\"wrong number of output attributes %lu expected 2\") %\n             parsed.polattrs_out.size();", "mimetype": "text/plain", "start_char_idx": 7967, "end_char_idx": 9447, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aafb638f-3afc-45b7-97be-49b39bdf59dc": {"__data__": {"id_": "aafb638f-3afc-45b7-97be-49b39bdf59dc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "73fdaf56-0d2f-422b-95b1-7735bbb14443", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1bc246ac90c33d516cc81cbf9808066a60fafc489eb0041037591a7c59afc8b6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "84e59b79-6f51-4727-be87-b5ae94cd506f", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(strcmp((std::get<std::shared_ptr<ColumnDef>>(\n                          parsed.polattrs_in[0].attribute))\n                         ->colname,\n                     \"foo_col\") == 0)\n      << boost::format(\"wrong col expected foo_col was %s\") %\n             (std::get<std::shared_ptr<ColumnDef>>(\n                  parsed.polattrs_in[0].attribute))\n                 ->colname;\n  EXPECT_TRUE(strcmp((std::get<std::shared_ptr<ColumnDef>>(\n                          parsed.polattrs_out[1].attribute))\n                         ->colname,\n                     \"dar_col\") == 0)\n      << boost::format(\"wrong col expected dar_col was %s\") %\n             (std::get<std::shared_ptr<ColumnDef>>(\n                  parsed.polattrs_out[1].attribute))\n                 ->colname;\n}", "mimetype": "text/plain", "start_char_idx": 9450, "end_char_idx": 10227, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "84e59b79-6f51-4727-be87-b5ae94cd506f": {"__data__": {"id_": "84e59b79-6f51-4727-be87-b5ae94cd506f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aafb638f-3afc-45b7-97be-49b39bdf59dc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b59007b3037534f424fe62a69a94a428cda2afea85d6398d092e16895ef045d6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e9e619d-e677-40f8-a90d-3948ffd7dfac", "node_type": "1", "metadata": {}, "hash": "c1dc1a2d03e8bf2bfb75be1d8465506a3e63590179a51e7c0a4ac4f6b5864eef", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4e9e619d-e677-40f8-a90d-3948ffd7dfac": {"__data__": {"id_": "4e9e619d-e677-40f8-a90d-3948ffd7dfac", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "84e59b79-6f51-4727-be87-b5ae94cd506f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e15dc216-f92a-4262-b042-a03fc5f67bfa", "node_type": "1", "metadata": {}, "hash": "7697aebff11f4e784e2f8596d9f30d69f2950e96a469fcc0091552ee3d46317a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestParseLBVAttachment)", "mimetype": "text/plain", "start_char_idx": 10230, "end_char_idx": 10278, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e15dc216-f92a-4262-b042-a03fc5f67bfa": {"__data__": {"id_": "e15dc216-f92a-4262-b042-a03fc5f67bfa", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e9e619d-e677-40f8-a90d-3948ffd7dfac", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "78100d1c2f7492c00fe215420756cfb07df2b7f497c915760384aecb5ece7d3a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "94efb77b-835b-4911-ac48-51ee05997b65", "node_type": "1", "metadata": {}, "hash": "7759ccd8b5d409821737551e940e0257cd78d0e53a9ea272b7c84817017f5fdf", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const char* name = \"test_pol\";\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n  ddm::Policy pol = {\n      0 /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"a\\\", \\\"typoid\\\": 0, \\\"typmod\\\": 0},\"\n      \"{\\\"colname\\\": \\\"b\\\", \\\"typoid\\\": 1, \\\"typmod\\\": 1}]\",\n      \"[{\\\"expr\\\": \\\"2 * masked_table.a\\\", \\\"typoid\\\": 1, \\\"typmod\\\": \"\n      \"0},{\\\"expr\\\": \\\"5 * masked_table.b\\\", \\\"typoid\\\": 1, \"\n      \"\\\"typmod\\\": 0}]\" /* polexpr */\n  };\n  ddm::Attachment attach = {\n      0 /* polid */,\n      0 /* permid */,\n      test_lbv_relid,\n      0 /* polpriority */,\n      0 /* polmodifiedby */,\n      R\"([{\"t\":0,\"column\":\"a\"},{\"t\":0,\"column\":\"b\"}])\" /* polattrsin */,\n      R\"([{\"t\":0,\"column\":\"a\"},{\"t\":0,\"column\":\"b\"}])\" /* polattrsout */,\n      pol};\n\n  auto parsed = ddm::ParseAttachment(attach, std::nullopt);\n\n  EXPECT_TRUE(parsed.pol.parsed_pol.size() == 2)\n      << boost::format(\"wrong number of targets %lu, expected 2\") %\n             parsed.pol.parsed_pol.size();\n\n  EXPECT_TRUE(parsed.polattrs_in.size() == 2)\n      << boost::format(\"wrong number of input attributes %lu expected 2\") %\n             parsed.polattrs_in.size();\n  EXPECT_TRUE(parsed.polattrs_out.size() == 2)\n      << boost::format(\"wrong number of output attributes %lu expected 2\") %\n             parsed.polattrs_out.size();", "mimetype": "text/plain", "start_char_idx": 10279, "end_char_idx": 11712, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "94efb77b-835b-4911-ac48-51ee05997b65": {"__data__": {"id_": "94efb77b-835b-4911-ac48-51ee05997b65", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e15dc216-f92a-4262-b042-a03fc5f67bfa", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f3a46f0ed6fcd299afcfd16e6b14745c31cc0d3abdc1a43aefb55d3364a387a7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6714d67d-ea2d-40a7-b76d-b93353f963d6", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(\n      std::get<std::string>(parsed.polattrs_in[0].attribute).compare(\"a\") == 0)\n      << boost::format(\"wrong col expected a was %s\") %\n             (std::get<std::string>(parsed.polattrs_in[0].attribute));\n  EXPECT_TRUE(\n      std::get<std::string>(parsed.polattrs_out[1].attribute).compare(\"b\") == 0)\n      << boost::format(\"wrong col expected b was %s\") %\n             (std::get<std::string>(parsed.polattrs_out[1].attribute));\n}", "mimetype": "text/plain", "start_char_idx": 11715, "end_char_idx": 12160, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6714d67d-ea2d-40a7-b76d-b93353f963d6": {"__data__": {"id_": "6714d67d-ea2d-40a7-b76d-b93353f963d6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "94efb77b-835b-4911-ac48-51ee05997b65", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "08a9844e4e83036e230a777699ce85c2982bdb7f17e257deec747061f494f09e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7e403885-7ad3-458b-94d9-dd8f23e62c0c", "node_type": "1", "metadata": {}, "hash": "491bf0544496641e8d085f8f98459fcba6e9b287bf6aaef8f8d11a38c1eaa982", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7e403885-7ad3-458b-94d9-dd8f23e62c0c": {"__data__": {"id_": "7e403885-7ad3-458b-94d9-dd8f23e62c0c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6714d67d-ea2d-40a7-b76d-b93353f963d6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d7aae311-54c7-4edc-92e0-ac250bd81cc1", "node_type": "1", "metadata": {}, "hash": "7ff604daae00dab01cfed44770a1dd8777c6516c6bde7270eb94fc2c93dd5641", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestBuildMaskMap)", "mimetype": "text/plain", "start_char_idx": 12163, "end_char_idx": 12205, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d7aae311-54c7-4edc-92e0-ac250bd81cc1": {"__data__": {"id_": "d7aae311-54c7-4edc-92e0-ac250bd81cc1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7e403885-7ad3-458b-94d9-dd8f23e62c0c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f07051fef101088d5d238875064bdebdfa4f969a4f02ee042ee3493f09bc70a5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a361d5f5-40c7-4f69-a0ff-dd5ee33a777b", "node_type": "1", "metadata": {}, "hash": "665cb951bdd14718a32ff717c4b768223e857e8c195f76f7deeabca037b296fb", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const char* name = \"test_pol\";\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n\n  ddm::Policy pol = {\n      0 /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"a\\\", \\\"typoid\\\": 0, \\\"typmod\\\": 0},\"\n      \"{\\\"colname\\\": \\\"b\\\", \\\"typoid\\\": 1, \\\"typmod\\\": 1}]\"  // polattrs\n      ,\n      \"[{\\\"expr\\\": \\\"2 * masked_table.a\\\", \\\"typoid\\\": 1, \\\"typmod\\\": \"\n      \"0},{\\\"expr\\\": \\\"5 * masked_table.b\\\", \\\"typoid\\\": 1, \"\n      \"\\\"typmod\\\": 0}]\" /* polexpr */\n  };\n\n  auto attach_0 =\n      ddm::ParseAttachment({0 /* polid */, 0 /* permid */, test_relid,\n                            0 /* polpriority */, 0 /* polmodifiedby */,\n                            // foo_col, bar_col\n                            \"[1, 2]\" /* polattrsin */,\n                            // car_col, dar_col\n                            \"[3, 4]\" /* polattrsout */, pol},\n                           std::nullopt);\n\n  auto attach_1 =\n      ddm::ParseAttachment({0 /* polid */, 0 /* permid */, test_relid,\n                            1 /* polpriority */, 0 /* polmodifiedby */,\n                            // foo_col, bar_col\n                            \"[1, 2]\" /* polattrsin */,\n                            // car_col, bar_col\n                            \"[3, 2]\" /* polattrsout */, pol},\n                           std::nullopt);\n\n  std::set<ddm::ParsedPolicyAttachment> pols;\n  pols.insert(attach_0);", "mimetype": "text/plain", "start_char_idx": 12206, "end_char_idx": 13707, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a361d5f5-40c7-4f69-a0ff-dd5ee33a777b": {"__data__": {"id_": "a361d5f5-40c7-4f69-a0ff-dd5ee33a777b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d7aae311-54c7-4edc-92e0-ac250bd81cc1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "98551c07b9e524bc027df3ca505d493f1d64e5db30c7f873fb1bd94310316525", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "51ac282e-df36-4fa5-91d0-b001a5072967", "node_type": "1", "metadata": {}, "hash": "6b2f3aea764dbff3ffcb55a62dd01a64e3220e72790d151865a6c8c7e915cf39", "class_name": "RelatedNodeInfo"}}, "text": "pols.insert(attach_1);\n\n  std::unordered_set<std::string_view> obj_transform_columns;\n  auto masks = ddm::BuildMaskMap(pols, {} /* obj_transform_alp_ctx */);\n  EXPECT_TRUE(masks.size() == 3)\n      << boost::format(\"Wrong number of masks %lu\") % masks.size();\n  EXPECT_TRUE(masks.find(\"foo_col\") == masks.end())\n      << \"Did not find foo_col in masks.\";\n  EXPECT_TRUE(masks.find(\"bar_col\") != masks.end())\n      << \"Unexpectedly found bar_col in masks.\";\n  EXPECT_TRUE(masks.find(\"dar_col\") != masks.end())\n      << \"Unexpectedly found dar_col in masks.\";\n\n  auto result = masks.find(\"car_col\");\n  EXPECT_TRUE(result != masks.end()) << \"Did not find car_col in masks\";\n  ASSERT_EQ(1, result->second.size());\n  ASSERT_TRUE(result->second[0].attachment.get() != nullptr);\n  EXPECT_TRUE(result->second[0].attachment->attachment.polpriority == 1)\n      << boost::format(\"Wrong priority %d, expected 1\") %\n             result->second[0].attachment->attachment.polpriority;\n  EXPECT_TRUE(result->second[0].priority == 1)\n      << boost::format(\"Wrong priority %d, expected 1\") %\n             result->second[0].priority;\n  std::string expected_0 =\n      \"{\\n\\tRESTARGET :name <> :indirection <> :val {\\n\\tAEXPR  :name (\\\"*\\\") \"\n      \":lexpr {\\n\\tA_CONST2 :typname <>} :rexpr {\\n\\tCOLUMNREF :fields \"\n      \"(\\\"foo_col\\\")}}}\";", "mimetype": "text/plain", "start_char_idx": 13710, "end_char_idx": 15029, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "51ac282e-df36-4fa5-91d0-b001a5072967": {"__data__": {"id_": "51ac282e-df36-4fa5-91d0-b001a5072967", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a361d5f5-40c7-4f69-a0ff-dd5ee33a777b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2fd732c975c74bc551d64c49a76f02ba592e36964b6d5468dfaceab6a5e70040", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "16b8f179-a722-48ba-8664-490e943cd22b", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(strcmp(expected_0.c_str(),\n                     nodeToString(result->second[0].rtgt.get())) == 0)\n      << boost::format(\"Wrong restarget %s\") %\n             nodeToString(result->second[0].rtgt.get());\n\n  result = masks.find(\"dar_col\");\n  EXPECT_TRUE(result != masks.end()) << \"Did not find dar_col in masks\";\n  ASSERT_EQ(1, result->second.size());\n  EXPECT_TRUE(result->second[0].priority == 0)\n      << boost::format(\"Wrong priority %d, expected 0\") %\n             result->second[0].priority;\n  std::string expected_1 =\n      \"{\\n\\tRESTARGET :name <> :indirection <> :val {\\n\\tAEXPR  :name (\\\"*\\\") \"\n      \":lexpr {\\n\\tA_CONST5 :typname <>} :rexpr {\\n\\tCOLUMNREF :fields \"\n      \"(\\\"bar_col\\\")}}}\";\n  EXPECT_TRUE(strcmp(expected_1.c_str(),\n                     nodeToString(result->second[0].rtgt.get())) == 0)\n      << boost::format(\"wrong restarget %s\") %\n             nodeToString(result->second[0].rtgt.get());\n}", "mimetype": "text/plain", "start_char_idx": 15032, "end_char_idx": 15962, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "16b8f179-a722-48ba-8664-490e943cd22b": {"__data__": {"id_": "16b8f179-a722-48ba-8664-490e943cd22b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "51ac282e-df36-4fa5-91d0-b001a5072967", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2551df40381c581307909f3d4e8f10058b99a94cb22174542be5ad9c66efffaf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "93d3dedb-77c4-41a6-8708-2f880e51eb73", "node_type": "1", "metadata": {}, "hash": "f2ce75063a33b3fa513a97b2e395040ddc171c6b26b3184a0033dc434177686f", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "93d3dedb-77c4-41a6-8708-2f880e51eb73": {"__data__": {"id_": "93d3dedb-77c4-41a6-8708-2f880e51eb73", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "16b8f179-a722-48ba-8664-490e943cd22b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d6a3ee35-ec62-4b5b-8b5b-886d9d2a0d21", "node_type": "1", "metadata": {}, "hash": "59c0836956154b39f77d46678519977f0b0f8998bef9950ec5a7a427db31238b", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestMergePolicies)", "mimetype": "text/plain", "start_char_idx": 15965, "end_char_idx": 16008, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d6a3ee35-ec62-4b5b-8b5b-886d9d2a0d21": {"__data__": {"id_": "d6a3ee35-ec62-4b5b-8b5b-886d9d2a0d21", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "93d3dedb-77c4-41a6-8708-2f880e51eb73", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fedfd1f692eca0816dd97c07b9ca86017e804aa9c47876da9ab4c04d0a7d4605", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5174d3d2-a028-4db2-a302-fa32ec475634", "node_type": "1", "metadata": {}, "hash": "0c29b5f7f6ff00e868a9aecb9f4b37aecf3a560682a038b63f423c587334ec57", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const char* name = \"mp1pol\";\n  Oid pol_id = GetDDMPolicyId(name);\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n\n  ddm::Policy pol = {\n      pol_id /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"a\\\", \\\"typoid\\\": 0, \\\"typmod\\\": 0},\"\n      \"{\\\"colname\\\": \\\"b\\\", \\\"typoid\\\": 1, \\\"typmod\\\": 1}]\" /*polattrs */\n      ,\n      \"[{\\\"expr\\\": \\\"2 * masked_table.a\\\", \\\"typoid\\\": 1, \\\"typmod\\\": \"\n      \"0},{\\\"expr\\\": \\\"5 * masked_table.b\\\", \\\"typoid\\\": 1, \"\n      \"\\\"typmod\\\": 0}]\" /* polexpr */\n  };\n\n  auto attach_0 =\n      ddm::ParseAttachment({pol_id /* polid */, 0 /* permid */, test_relid,\n                            0 /* polpriority */, 0 /* polmodifiedby */,\n                            // foo_col, bar_col\n                            \"[1, 2]\" /* polattrsin */,\n                            // car_col, dar_col\n                            \"[3, 4]\" /* polattrsout */, pol},\n                           std::nullopt);\n\n  auto attach_1 =\n      ddm::ParseAttachment({pol_id /* polid */, 0 /* permid */, test_relid,\n                            1 /* polpriority */, 0 /* polmodifiedby */,\n                            // foo_col, bar_col\n                            \"[1, 2]\" /* polattrsin */,\n                            // car_col, bar_col\n                            \"[3, 2]\" /* polattrsout */, pol},\n                           std::nullopt);", "mimetype": "text/plain", "start_char_idx": 16009, "end_char_idx": 17489, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5174d3d2-a028-4db2-a302-fa32ec475634": {"__data__": {"id_": "5174d3d2-a028-4db2-a302-fa32ec475634", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d6a3ee35-ec62-4b5b-8b5b-886d9d2a0d21", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e111c2ed2300062f733a54d1476c70cae21a8db645f47a850bc524ee5e32e420", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6be90f90-c0f5-4fca-80c0-db4119d80fbd", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "std::set<ddm::ParsedPolicyAttachment> pols;\n  pols.insert(attach_0);\n  pols.insert(attach_1);\n\n  auto q = pgtest::ParseAnalyzeQuery(\"select * from test;\");\n  auto rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  auto res = ddm::MergePolsForRTE(rte, q, pols, {} /* ddm_obj_transform_vars */,\n                                  {} /* all_obj_transform_columns */);\n  auto targets = res->targetList;\n  EXPECT_TRUE(list_length(targets) == 4)\n      << boost::format(\"Wrong number of targets %d, expected 4\") %\n             list_length(targets);\n  EXPECT_TRUE(IsA(res, Query))\n      << boost::format(\"Expected query got %s\") % nodeToString(res);\n\n  auto expect_q = pgtest::ParseAnalyzeQuery(\n      \"select foo_col, 5*bar_col as bar_col, 2*foo_col as car_col, 5*bar_col \"\n      \"as dar_col from test;\");\n  auto expected_rte =\n      reinterpret_cast<RangeTblEntry*>(linitial(expect_q->rtable));\n  expected_rte->has_ddm_rewrite = false;\n\n  std::string expect_res = nodeToString(expect_q);\n  // Replace requiredPerms to 0, because Perm Checks are disabled via\n  // DisableRTEPermCheck on the unfolded DDM SubQuery.\n  boost::algorithm::replace_all(expect_res, \":requiredPerms 2\",\n                                \":requiredPerms 0\");\n\n  EXPECT_TRUE(strcmp(nodeToString(res), expect_res.c_str()) == 0)\n      << boost::format(\n             \"Did not receive expected results. expected %s \\ngot %s\") %\n             expect_res % nodeToString(res);\n}", "mimetype": "text/plain", "start_char_idx": 17492, "end_char_idx": 18937, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6be90f90-c0f5-4fca-80c0-db4119d80fbd": {"__data__": {"id_": "6be90f90-c0f5-4fca-80c0-db4119d80fbd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5174d3d2-a028-4db2-a302-fa32ec475634", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a7498404892c0c727a157f9f40886ab0d4da17dbb9f058fbe32b28136f24a193", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "027da57c-265c-4ec2-8ec6-d96f6ba7afce", "node_type": "1", "metadata": {}, "hash": "0dd6b92b454385fba02363347d1a99265a2efc3ea3eddc67bce6870176b162b1", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "027da57c-265c-4ec2-8ec6-d96f6ba7afce": {"__data__": {"id_": "027da57c-265c-4ec2-8ec6-d96f6ba7afce", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6be90f90-c0f5-4fca-80c0-db4119d80fbd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a790a73c-8a10-4505-9468-ec9a3184a2fe", "node_type": "1", "metadata": {}, "hash": "a29a3d3b851cd91a54ced7f698f00d63500662a7dfc14c9ccd48f9839b1f1ec7", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestColumnAlias)", "mimetype": "text/plain", "start_char_idx": 18940, "end_char_idx": 18981, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a790a73c-8a10-4505-9468-ec9a3184a2fe": {"__data__": {"id_": "a790a73c-8a10-4505-9468-ec9a3184a2fe", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "027da57c-265c-4ec2-8ec6-d96f6ba7afce", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ca14accf0593f3aadc6bac668f26c848c3416598af0b996c6bb6116d7a48442b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5ede0cf9-15fa-45bb-926f-e9d08c497325", "node_type": "1", "metadata": {}, "hash": "f16692f678147ebfae1d4370d3ff21be93a0a94495bf7d4590acded56334e1c4", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const char* name = \"mp1pol\";\n  Oid pol_id = GetDDMPolicyId(name);\n  Name polname = palloc(NAMEDATALEN);\n  namestrcpy(polname, reinterpret_cast<const char*>(name));\n\n  ddm::Policy pol = {\n      pol_id /* polid */,\n      0 /* poldbid */,\n      false /* maskoningest */,\n      *polname,\n      0 /* polmodifiedby */,\n      \"[{\\\"colname\\\": \\\"a\\\", \\\"typoid\\\": 0, \\\"typmod\\\": 0},\"\n      \"{\\\"colname\\\": \\\"b\\\", \\\"typoid\\\": 1, \\\"typmod\\\": 1}]\" /*polattrs */\n      ,\n      \"[{\\\"expr\\\": \\\"2 * masked_table.a\\\", \\\"typoid\\\": 1, \\\"typmod\\\": \"\n      \"0},{\\\"expr\\\": \\\"5 * masked_table.b\\\", \\\"typoid\\\": 1, \"\n      \"\\\"typmod\\\": 0}]\" /* polexpr */\n  };\n\n  auto attach =\n      ddm::ParseAttachment({pol_id /* polid */, 0 /* permid */, test_relid,\n                            0 /* polpriority */, 0 /* polmodifiedby */,\n                            // foo_col, bar_col\n                            \"[1, 2]\" /* polattrsin */,\n                            // car_col, dar_col\n                            \"[3, 4]\" /* polattrsout */, pol},\n                           std::nullopt);\n\n  std::set<ddm::ParsedPolicyAttachment> pols;\n  pols.insert(attach);\n\n  auto q = pgtest::ParseAnalyzeQuery(\"select * from test fake (a, b, c, d);\");\n  auto rte = reinterpret_cast<RangeTblEntry*>(linitial(q->rtable));\n  auto res = ddm::MergePolsForRTE(rte, q, pols, {} /* ddm_obj_transform_vars */,\n                                  {} /* alp_obj_transform_columns */);\n  auto targets = res->targetList;", "mimetype": "text/plain", "start_char_idx": 18982, "end_char_idx": 20442, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5ede0cf9-15fa-45bb-926f-e9d08c497325": {"__data__": {"id_": "5ede0cf9-15fa-45bb-926f-e9d08c497325", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a790a73c-8a10-4505-9468-ec9a3184a2fe", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8312d41b502d89e7f8a7bf17e6f956a0c74e85f6e2f7c8b1b3b6e088e845f069", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f66d06e3-26a0-44fe-94d0-52c119a99ffa", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(list_length(targets) == 4)\n      << boost::format(\"Wrong number of targets %d, expected 4\") %\n             list_length(targets);\n  EXPECT_TRUE(IsA(res, Query))\n      << boost::format(\"Expected query got %s\") % nodeToString(res);\n\n  auto expect_q = pgtest::ParseAnalyzeQuery(\n      \"select foo_col, bar_col, 2 * foo_col as car_col, 5 * bar_col as \"\n      \"dar_col from test\");\n  auto expected_rte =\n      reinterpret_cast<RangeTblEntry*>(linitial(expect_q->rtable));\n  expected_rte->has_ddm_rewrite = false;\n\n  std::string expect_res = nodeToString(expect_q);\n  // Replace requiredPerms to 0, because Perm Checks are disabled via\n  // DisableRTEPermCheck on the unfolded DDM SubQuery.\n  boost::algorithm::replace_all(expect_res, \":requiredPerms 2\",\n                                \":requiredPerms 0\");\n\n  EXPECT_TRUE(strcmp(nodeToString(res), expect_res.c_str()) == 0)\n      << boost::format(\n             \"Did not receive expected results. expected %s \\ngot %s\") %\n             expect_res % nodeToString(res);\n}", "mimetype": "text/plain", "start_char_idx": 20445, "end_char_idx": 21468, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f66d06e3-26a0-44fe-94d0-52c119a99ffa": {"__data__": {"id_": "f66d06e3-26a0-44fe-94d0-52c119a99ffa", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5ede0cf9-15fa-45bb-926f-e9d08c497325", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dfb9183800e34634f14d2c508f420a173a1fbcf54f3d7045d05fb4f2aef26980", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4aede4fb-03b1-4bae-83ae-2db1a097c2ac", "node_type": "1", "metadata": {}, "hash": "44140974e29544450f4f8487be0dc3d1ee4f9aa22d46c919e7997773d99e223a", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4aede4fb-03b1-4bae-83ae-2db1a097c2ac": {"__data__": {"id_": "4aede4fb-03b1-4bae-83ae-2db1a097c2ac", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f66d06e3-26a0-44fe-94d0-52c119a99ffa", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1343d2ef-acca-4fd2-84de-9e4311b4b378", "node_type": "1", "metadata": {}, "hash": "9aedb2a08b71169a2e6216cef362dd62f9d24341ee95a676e2eb9c5d5a5d006e", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestTraverseExpression)", "mimetype": "text/plain", "start_char_idx": 21471, "end_char_idx": 21519, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1343d2ef-acca-4fd2-84de-9e4311b4b378": {"__data__": {"id_": "1343d2ef-acca-4fd2-84de-9e4311b4b378", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4aede4fb-03b1-4bae-83ae-2db1a097c2ac", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8dab9dca46635b9f4774be2528d75c2fd9fb9240851760b27222042c91cdc123", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5949259c-5320-4ec1-9b1e-3a1e400f2f18", "node_type": "1", "metadata": {}, "hash": "a8a3081ecf58bbe0994bad260b256307038ec7be40b3222d906fa8cc739ee898", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // The mutator expects all column references in DDM expressions to have either\n  // ddm::MASK_PSEUDO_TBL alias, or a lookup table prefix.\n  auto prefix = [](std::string ref) {\n    return std::string(ddm::MASK_PSEUDO_TBL) + \".\" + ref;\n  };", "mimetype": "text/plain", "start_char_idx": 21520, "end_char_idx": 21762, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5949259c-5320-4ec1-9b1e-3a1e400f2f18": {"__data__": {"id_": "5949259c-5320-4ec1-9b1e-3a1e400f2f18", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1343d2ef-acca-4fd2-84de-9e4311b4b378", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "399d0593b8991853a7deb1cded8e0f65a10d920e88488378df9ae1e09f86e94e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b1f47d05-99dd-4176-96a8-f8fd9af97f5e", "node_type": "1", "metadata": {}, "hash": "eff49d547f10c4c7714fd6ffeb27d6b23ba91db3a2059635dfe1783b90814b3a", "class_name": "RelatedNodeInfo"}}, "text": "boost::format query_format =\n      boost::format(\n          \"SELECT                                                            \"\n          \"  %2% IS NULL,                                                    \"\n          \"  1 == %3%,                                                       \"\n          \"  %2% IS NOT NULL,                                                \"\n          \"  (%2% + 2) :: INT IS NULL,                                       \"\n          \"  CAST(%1% AS CHAR(4)),                                           \"\n          \"  SHA2(%2%),                                                      \"\n          \"  CASE SHA2(%1%) WHEN %3% THEN %2% WHEN %1% THEN %3% ELSE %1% END,\"\n          \"  %1% [5:%2%] [%1%:2] [3] [%3%],                                  \"\n          \"  TRY_CAST(%1% AS INT),                                           \"\n          \"  GREATEST(%1%, %2%, %3%),                                        \"\n          \"  GROUPING(%1%, %2%, %3%),                                        \"\n          \"  %1%.super.path,                                                 \"\n          \"  %1%[4].super.path,                                              \"\n          \"  %1%.super.b, -- \\\"b\\\" must not be rewritten \\n                  \"\n          \"  %1% IS TRUE,                                                    \"\n          \"  %2% == FALSE;                                                 \") %\n      prefix(\"a\") % prefix(\"b\") % prefix(\"c\");\n\n  auto q = pg::Parse(query_format.str().c_str());", "mimetype": "text/plain", "start_char_idx": 21766, "end_char_idx": 23257, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b1f47d05-99dd-4176-96a8-f8fd9af97f5e": {"__data__": {"id_": "b1f47d05-99dd-4176-96a8-f8fd9af97f5e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5949259c-5320-4ec1-9b1e-3a1e400f2f18", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "818257e7a3cdb32b4c265adf321ba1bf716b6ed4c6930227de8d40456017e070", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8fc6fa32-43b9-4233-ac11-f0d5ed115128", "node_type": "1", "metadata": {}, "hash": "5dbfa4dcd0608fe6f873199562bc546c03131262e98e8ad2d6400297d456cf5d", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(list_length(q) == 1) << \"Expected a single parse_tree.\";\n  SelectStmt* select = reinterpret_cast<SelectStmt*>(linitial(q));\n  ListCell* lc = NULL;\n  ddm::SwapColDefMutatorCtx ctx = {};\n  ctx.swap_map.insert({\"a\", {\"test_col1\", InvalidOid, 0, std::nullopt}});\n  ctx.swap_map.insert({\"b\", {\"test_col2\", InvalidOid, 0, std::nullopt}});\n  ctx.swap_map.insert({\"c\", {\"test_col3\", InvalidOid, 0, std::nullopt}});\n  foreach(lc, select->targetList) {\n    auto rtgt = reinterpret_cast<ResTarget*>(lfirst(lc));\n    rtgt->val =\n        ddm::parse_tree_mutator(rtgt->val, ddm::SwapColRefMutator, &ctx);\n    replace_pointer(lc, rtgt);\n  }", "mimetype": "text/plain", "start_char_idx": 23260, "end_char_idx": 23897, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8fc6fa32-43b9-4233-ac11-f0d5ed115128": {"__data__": {"id_": "8fc6fa32-43b9-4233-ac11-f0d5ed115128", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b1f47d05-99dd-4176-96a8-f8fd9af97f5e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3b43fbd4ec63bd6ec22ca48ccd792c17a486f2199ed953424ecbbfe11af144a0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d89dcf8-edd9-45b3-9a85-560b7a84ad1c", "node_type": "1", "metadata": {}, "hash": "44e838eb7d183c0740ddb7b3ebc42331a7e49fca2d68b78d62aa2f92411ca18c", "class_name": "RelatedNodeInfo"}}, "text": "SelectStmt", "mimetype": "text/plain", "start_char_idx": 6587, "end_char_idx": 6597, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9d89dcf8-edd9-45b3-9a85-560b7a84ad1c": {"__data__": {"id_": "9d89dcf8-edd9-45b3-9a85-560b7a84ad1c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8fc6fa32-43b9-4233-ac11-f0d5ed115128", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5eafbb2b82f1ac47da6796cc1f1fe4a267fa75b9f74e2fa2c6bdde4574fc67db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "efdd9b43-f484-4cbc-a0ff-d5f1182a9a8e", "node_type": "1", "metadata": {}, "hash": "a432b013ed959f6df1e1683d3070abad49340d4ba5d9d2852e59711f8ce739a9", "class_name": "RelatedNodeInfo"}}, "text": "* expected =", "mimetype": "text/plain", "start_char_idx": 23910, "end_char_idx": 23922, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "efdd9b43-f484-4cbc-a0ff-d5f1182a9a8e": {"__data__": {"id_": "efdd9b43-f484-4cbc-a0ff-d5f1182a9a8e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9d89dcf8-edd9-45b3-9a85-560b7a84ad1c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3a4fd9a905a389e2833b35595668e2bfc71230325a7607b139dbb6379a4ed004", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "149cc68c-af90-4ac1-a65b-61a8612f018b", "node_type": "1", "metadata": {}, "hash": "436a9b2e7c2aeaccc4bcb04d2c9c033a67cfcf5a8f3d0a0ab54d8b264e69b0b7", "class_name": "RelatedNodeInfo"}}, "text": "reinterpret_cast<SelectStmt*>", "mimetype": "text/plain", "start_char_idx": 23352, "end_char_idx": 23381, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "149cc68c-af90-4ac1-a65b-61a8612f018b": {"__data__": {"id_": "149cc68c-af90-4ac1-a65b-61a8612f018b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "efdd9b43-f484-4cbc-a0ff-d5f1182a9a8e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "44740265de5f3a85d3aead87ab1c956776da275277003bcecdbd9b2c62e23f3e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aaa03b22-3c7b-4ef9-b9a7-da0ea666d642", "node_type": "1", "metadata": {}, "hash": "6dc2f33c563a5694f99184353181ff4df7a8ffa3a16050f22b977bae278bdc71", "class_name": "RelatedNodeInfo"}}, "text": "(", "mimetype": "text/plain", "start_char_idx": 1145, "end_char_idx": 1146, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aaa03b22-3c7b-4ef9-b9a7-da0ea666d642": {"__data__": {"id_": "aaa03b22-3c7b-4ef9-b9a7-da0ea666d642", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "149cc68c-af90-4ac1-a65b-61a8612f018b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7516bc8be05d9c09a031819cc00495d6a659fb73fccde5ba69d5e47bbcc7d8f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a9cf7b6-4489-4d3c-8cbe-4f280beb85c6", "node_type": "1", "metadata": {}, "hash": "436a9b2e7c2aeaccc4bcb04d2c9c033a67cfcf5a8f3d0a0ab54d8b264e69b0b7", "class_name": "RelatedNodeInfo"}}, "text": "linitial", "mimetype": "text/plain", "start_char_idx": 1796, "end_char_idx": 1804, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9a9cf7b6-4489-4d3c-8cbe-4f280beb85c6": {"__data__": {"id_": "9a9cf7b6-4489-4d3c-8cbe-4f280beb85c6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aaa03b22-3c7b-4ef9-b9a7-da0ea666d642", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3cf9fbdb4dcf002f0fcebad9b9da52681b4d60113c086d39f09cbccdfdb2069d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "99e9b652-85ec-4b0e-9eaf-5e8a8449e0cc", "node_type": "1", "metadata": {}, "hash": "4fe705db653c6f4c6b7afd5f0ac942fd396fff494ddad998d2a908e4baabfc0c", "class_name": "RelatedNodeInfo"}}, "text": "(", "mimetype": "text/plain", "start_char_idx": 1145, "end_char_idx": 1146, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "99e9b652-85ec-4b0e-9eaf-5e8a8449e0cc": {"__data__": {"id_": "99e9b652-85ec-4b0e-9eaf-5e8a8449e0cc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9a9cf7b6-4489-4d3c-8cbe-4f280beb85c6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7516bc8be05d9c09a031819cc00495d6a659fb73fccde5ba69d5e47bbcc7d8f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "17097184-1bc2-4ebd-86f4-e9e827c33672", "node_type": "1", "metadata": {}, "hash": "436a9b2e7c2aeaccc4bcb04d2c9c033a67cfcf5a8f3d0a0ab54d8b264e69b0b7", "class_name": "RelatedNodeInfo"}}, "text": "pg::Parse", "mimetype": "text/plain", "start_char_idx": 23219, "end_char_idx": 23228, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "17097184-1bc2-4ebd-86f4-e9e827c33672": {"__data__": {"id_": "17097184-1bc2-4ebd-86f4-e9e827c33672", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "99e9b652-85ec-4b0e-9eaf-5e8a8449e0cc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "152e79490437c02288a4229db929e2e0f8d53863774ce2b7db888695472b17c4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5c3b255a-989d-47d9-9fb2-abadd5340d17", "node_type": "1", "metadata": {}, "hash": "511e9c10730749e53b6ad393831a681a70cc2d811e9632ae998cc6ff53eca68f", "class_name": "RelatedNodeInfo"}}, "text": "(", "mimetype": "text/plain", "start_char_idx": 1145, "end_char_idx": 1146, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5c3b255a-989d-47d9-9fb2-abadd5340d17": {"__data__": {"id_": "5c3b255a-989d-47d9-9fb2-abadd5340d17", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "17097184-1bc2-4ebd-86f4-e9e827c33672", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7516bc8be05d9c09a031819cc00495d6a659fb73fccde5ba69d5e47bbcc7d8f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ff7982f9-ce62-46f0-9258-b3b75a1682f2", "node_type": "1", "metadata": {}, "hash": "7a37041832b89262ddfb4eee33448834486dd54bb2798c791dac4221efd2c27f", "class_name": "RelatedNodeInfo"}}, "text": "\"SELECT                                                   \"\n                \"  test_col2 IS NULL,                                     \"\n                \"  1 == test_col3,                                        \"\n                \"  test_col2 IS NOT NULL,                                 \"\n                \"  (test_col2 + 2) :: INT IS NULL,                        \"\n                \"  CAST(test_col1 AS CHAR(4)),                            \"\n                \"  SHA2(test_col2),                                       \"\n                \"  CASE SHA2(test_col1)                                   \"\n                \"    WHEN test_col3 THEN test_col2                        \"\n                \"    WHEN test_col1 THEN test_col3                        \"\n                \"    ELSE test_col1 END,                                  \"\n                \"  test_col1 [5:test_col2] [test_col1:2] [3] [test_col3], \"\n                \"  TRY_CAST(test_col1 AS INT),                            \"\n                \"  GREATEST(test_col1, test_col2, test_col3),             \"\n                \"  GROUPING(test_col1, test_col2, test_col3),             \"\n                \"  test_col1.super.path,                                  \"\n                \"  test_col1[4].super.path,                               \"\n                \"  test_col1.super.b, -- b must not be rewritten \\n       \"\n                \"  test_col1 IS TRUE,                                     \"\n                \"  test_col2 == FALSE;                                    \"", "mimetype": "text/plain", "start_char_idx": 23979, "end_char_idx": 25482, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ff7982f9-ce62-46f0-9258-b3b75a1682f2": {"__data__": {"id_": "ff7982f9-ce62-46f0-9258-b3b75a1682f2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c3b255a-989d-47d9-9fb2-abadd5340d17", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1534120174fd1159b8319909e62b1747043907761a4ca5489524bc89152eabce", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e329e16b-4655-46eb-9d74-a34ba5939c05", "node_type": "1", "metadata": {}, "hash": "7a37041832b89262ddfb4eee33448834486dd54bb2798c791dac4221efd2c27f", "class_name": "RelatedNodeInfo"}}, "text": ")", "mimetype": "text/plain", "start_char_idx": 1146, "end_char_idx": 1147, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e329e16b-4655-46eb-9d74-a34ba5939c05": {"__data__": {"id_": "e329e16b-4655-46eb-9d74-a34ba5939c05", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff7982f9-ce62-46f0-9258-b3b75a1682f2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8fb450c24ae7bc6cc62dbf917d65b6df4d57160f360a04ac0576d34e7d1e0456", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a92618b8-71b8-4bd7-8f68-8a8f37304fc8", "node_type": "1", "metadata": {}, "hash": "7a37041832b89262ddfb4eee33448834486dd54bb2798c791dac4221efd2c27f", "class_name": "RelatedNodeInfo"}}, "text": ")", "mimetype": "text/plain", "start_char_idx": 1146, "end_char_idx": 1147, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a92618b8-71b8-4bd7-8f68-8a8f37304fc8": {"__data__": {"id_": "a92618b8-71b8-4bd7-8f68-8a8f37304fc8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e329e16b-4655-46eb-9d74-a34ba5939c05", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8fb450c24ae7bc6cc62dbf917d65b6df4d57160f360a04ac0576d34e7d1e0456", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d3858494-2609-4331-9c79-574a7ba5e9ce", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": ")", "mimetype": "text/plain", "start_char_idx": 1146, "end_char_idx": 1147, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d3858494-2609-4331-9c79-574a7ba5e9ce": {"__data__": {"id_": "d3858494-2609-4331-9c79-574a7ba5e9ce", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a92618b8-71b8-4bd7-8f68-8a8f37304fc8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8fb450c24ae7bc6cc62dbf917d65b6df4d57160f360a04ac0576d34e7d1e0456", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "77a1c36f-91a2-4f7d-8f8a-d9a118ec98b0", "node_type": "1", "metadata": {}, "hash": "f7c4a5cc2321d5f4fc97770fe6e0c0cdff3972d4ce405300c34eb92c3f6dbd2d", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 863, "end_char_idx": 864, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "77a1c36f-91a2-4f7d-8f8a-d9a118ec98b0": {"__data__": {"id_": "77a1c36f-91a2-4f7d-8f8a-d9a118ec98b0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d3858494-2609-4331-9c79-574a7ba5e9ce", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e3d0718b-b7c1-42e5-b3da-ff99015c6926", "node_type": "1", "metadata": {}, "hash": "e344151c3c4af5882e835c97ad8e0c903392b922086c34cdf7fd0433837e9fa7", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(strcmp(nodeToString(expected), nodeToString(select)) == 0)\n      << \"Actual and expected parse trees differ.\";\n}", "mimetype": "text/plain", "start_char_idx": 25489, "end_char_idx": 25613, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e3d0718b-b7c1-42e5-b3da-ff99015c6926": {"__data__": {"id_": "e3d0718b-b7c1-42e5-b3da-ff99015c6926", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "77a1c36f-91a2-4f7d-8f8a-d9a118ec98b0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "61f0a1442f6174c92d9c6e073d63f7c625f49d68f52901b21fa8c6d3cb648390", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aac590ab-994c-48fa-9877-6296d27b4fc8", "node_type": "1", "metadata": {}, "hash": "bd093c05f4fe6ce49fb032ef6cde67a3591dfe964431d41569580a8b4ca0ef19", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestHasPolicy) {\n  EXPECT_TRUE(HasDDMRewrite(test_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_view_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_lbv_rte));\n}", "mimetype": "text/plain", "start_char_idx": 25615, "end_char_idx": 25787, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "aac590ab-994c-48fa-9877-6296d27b4fc8": {"__data__": {"id_": "aac590ab-994c-48fa-9877-6296d27b4fc8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e3d0718b-b7c1-42e5-b3da-ff99015c6926", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "479931e238f15381bb19580041b8489a47d6672a0216768ff4fa2674465dbf3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d7a5f1ab-e922-40f8-94f2-1fd1e2a9d02e", "node_type": "1", "metadata": {}, "hash": "65b590ab6c42cc445425edd6b7a2376e0ca89af3d27b43bb2f0ee862649cbe7b", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestHasPolicyDDMDisable)", "mimetype": "text/plain", "start_char_idx": 25789, "end_char_idx": 25838, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d7a5f1ab-e922-40f8-94f2-1fd1e2a9d02e": {"__data__": {"id_": "d7a5f1ab-e922-40f8-94f2-1fd1e2a9d02e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aac590ab-994c-48fa-9877-6296d27b4fc8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "04be92bd488bca55b0862dae8d2cc0b7a41bdf9c4db201d449b6beef874d019b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c96edf54-0f17-4761-9f3c-0ae54610543b", "node_type": "1", "metadata": {}, "hash": "66e63769055826ccb486b8603e12467755c3f4ed0165670e3d2d2b523eca2a0a", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // change user to non-super user.\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1\");\n  SetUserId(u1_id);\n  gconf_enable_ddm = false;\n\n  PG_TRY();\n  {\n    HasDDMRewrite(test_rte);\n    FAIL() << \"Failed disabling DDM on Relation.\";\n  }\n  PG_CATCH();\n  { FlushErrorState(); }\n  PG_END_TRY();\n\n  PG_TRY();\n  {\n    HasDDMRewrite(test_view_rte);\n    FAIL() << \"Failed disabling DDM on Views.\";\n  }\n  PG_CATCH();\n  { FlushErrorState(); }\n  PG_END_TRY();\n\n  PG_TRY();\n  {\n    HasDDMRewrite(test_lbv_rte);\n    FAIL() << \"Failed disabling DDM on LBVs.\";\n  }\n  PG_CATCH();\n  { FlushErrorState(); }\n  PG_END_TRY();\n\n  gconf_enable_ddm = true;\n  EXPECT_TRUE(HasDDMRewrite(test_rte));\n\n  gconf_enable_ddm_on_views = false;\n\n  PG_TRY();\n  {\n    HasDDMRewrite(test_view_rte);\n    FAIL() << \"Failed disabling DDM on Views.\";\n  }\n  PG_CATCH();\n  { FlushErrorState(); }\n  PG_END_TRY();\n\n  PG_TRY();\n  {\n    HasDDMRewrite(test_lbv_rte);\n    FAIL() << \"Failed disabling DDM on LBVs.\";\n  }\n  PG_CATCH();\n  { FlushErrorState(); }\n  PG_END_TRY();\n\n  gconf_enable_ddm_on_views = true;\n  EXPECT_TRUE(HasDDMRewrite(test_view_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_lbv_rte));\n\n  // change user to original user (bootstrap).\n  SetUserId(current_id);\n  gconf_enable_ddm = false;\n  gconf_enable_ddm_on_views = false;\n  // Verify that super user doesn't throw and that we get HasDDMRewrite = True\n  // for all combinations of DDM on views gucs.\n  EXPECT_TRUE(HasDDMRewrite(test_rte));", "mimetype": "text/plain", "start_char_idx": 25839, "end_char_idx": 27320, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c96edf54-0f17-4761-9f3c-0ae54610543b": {"__data__": {"id_": "c96edf54-0f17-4761-9f3c-0ae54610543b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d7a5f1ab-e922-40f8-94f2-1fd1e2a9d02e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4c574e3b7b7ffd2ed97ad9e511029cfd1e020c44a1716c1040d4135e19454b51", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "763317e1-bd4a-433d-b6c9-328da150ed68", "node_type": "1", "metadata": {}, "hash": "3f6623d28ce5c999eb0ce7f0fa8228a64aa6af2c374e971cd52563600ae6f963", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(HasDDMRewrite(test_view_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_lbv_rte));\n\n  gconf_enable_ddm = true;\n  // Verify that we do not throw for superuser/bootstrap.\n  EXPECT_TRUE(HasDDMRewrite(test_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_view_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_lbv_rte));\n  gconf_enable_ddm_on_views = true;\n  EXPECT_TRUE(HasDDMRewrite(test_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_view_rte));\n  EXPECT_TRUE(HasDDMRewrite(test_lbv_rte));\n}", "mimetype": "text/plain", "start_char_idx": 27323, "end_char_idx": 27791, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "763317e1-bd4a-433d-b6c9-328da150ed68": {"__data__": {"id_": "763317e1-bd4a-433d-b6c9-328da150ed68", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c96edf54-0f17-4761-9f3c-0ae54610543b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e67bd2f5815768ab6a8a2c7b535164c6ec52054cba8395f40cf3b05dce98c1d9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a7ca584d-e949-4f4a-89cd-bb30140e29cf", "node_type": "1", "metadata": {}, "hash": "53503e6e5637a76fec0214317ed54a4c6088c9be59b24ae405c8587179241d85", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that after creating a masking policy and attaching it\n/// to public/user/role, the attached policy can be detached from\n/// public/user/role.", "mimetype": "text/plain", "start_char_idx": 27793, "end_char_idx": 27944, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a7ca584d-e949-4f4a-89cd-bb30140e29cf": {"__data__": {"id_": "a7ca584d-e949-4f4a-89cd-bb30140e29cf", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "763317e1-bd4a-433d-b6c9-328da150ed68", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "12df015be18139f40a89c4696c775add022c359ff181a20663e5277f3905c94b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "afcdc4ef-d055-4f8a-844d-63ad1984fc70", "node_type": "1", "metadata": {}, "hash": "224bbbda0b713391993853f185ed5d02e4d3b010931d250389c9859d21adc85a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestDetachPolicy) {\n  pg::RunQuery(\n      \"CREATE MASKING POLICY ddm_detach_policy WITH \"\n      \"(col1 INT) USING ( 1 )\");\n  const char* name = \"ddm_detach_policy\";\n  Oid pol_id = GetDDMPolicyId(name);\n  EXPECT_TRUE(pol_id != InvalidOid)\n      << boost::format(\"Expected to find '%s' policy\") % name;\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY ddm_detach_policy ON \"\n      \"target_table (a) USING (a) TO PUBLIC\");\n  EXPECT_TRUE(ddm::HasAttachmentsForPolicy(pol_id))\n      << boost::format(\n             \"Expected to find '%s' policy \"\n             \"with attachment\") %\n             name;\n  pg::RunQuery(\n      \"DETACH MASKING POLICY ddm_detach_policy ON \"\n      \"target_table (a) FROM PUBLIC\");\n  EXPECT_FALSE(ddm::HasAttachmentsForPolicy(pol_id))\n      << boost::format(\n             \"Expected to find '%s' policy \"\n             \"with no attachment\") %\n             name;\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY ddm_detach_policy ON \"\n      \"target_table (a) USING (a) TO ROLE r1\");\n  EXPECT_TRUE(ddm::HasAttachmentsForPolicy(pol_id))\n      << boost::format(\n             \"Expected to find '%s' policy \"\n             \"with attachment\") %\n             name;\n  pg::RunQuery(\n      \"DETACH MASKING POLICY ddm_detach_policy ON \"\n      \"target_table (a) FROM ROLE r1\");\n  EXPECT_FALSE(ddm::HasAttachmentsForPolicy(pol_id))\n      << boost::format(\n             \"Expected to find '%s' policy \"\n             \"with no attachment\") %\n             name;\n};", "mimetype": "text/plain", "start_char_idx": 27945, "end_char_idx": 29423, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "afcdc4ef-d055-4f8a-844d-63ad1984fc70": {"__data__": {"id_": "afcdc4ef-d055-4f8a-844d-63ad1984fc70", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a7ca584d-e949-4f4a-89cd-bb30140e29cf", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d446dab9f05ecbbad87c9460667c7d79dbad2a5f687a0678265dc90ce977aef1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71f385a7-0158-4c36-af20-f0db2a878ca6", "node_type": "1", "metadata": {}, "hash": "607877d357fb8353607801ac54bb2bbb5363e584736a0dc6405335a5128d9b3b", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that after creating a masking policy, that policy can be dropped.\nPG_TEST_F(TestDDMPolicy, TestDropPolicy) {\n  pg::RunQuery(\n      \"CREATE MASKING POLICY ddm_drop_policy WITH \"\n      \"(col1 INT) USING ( 1 )\");\n  const char* name = \"ddm_drop_policy\";\n  Oid pol_id = GetDDMPolicyId(name);\n  EXPECT_TRUE(pol_id != InvalidOid)\n      << boost::format(\"Expected to find '%s' policy\") % name;\n  pg::RunQuery(\"DROP MASKING POLICY ddm_drop_policy\");\n  pol_id = GetDDMPolicyId(name);\n  EXPECT_TRUE(pol_id == InvalidOid)\n      << boost::format(\"Expected not to find '%s' policy\") % name;\n};\n\n/// Tests that an attached policy can not be dropped unless the drop\n/// is CASCADE.", "mimetype": "text/plain", "start_char_idx": 29425, "end_char_idx": 30100, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "71f385a7-0158-4c36-af20-f0db2a878ca6": {"__data__": {"id_": "71f385a7-0158-4c36-af20-f0db2a878ca6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "afcdc4ef-d055-4f8a-844d-63ad1984fc70", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "717a38c695b87c5633015c70e4c88d9ec7c143edac777b4a7ffb3b15e6e81e35", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46d494a5-7e6b-4c9b-9f8f-35aa9483aa07", "node_type": "1", "metadata": {}, "hash": "0f414c70fa174b44f4c1ed365ae457a6f4254fcd8eebfb0d85b6c1dfdc8aa182", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestDropPolicyWithAttachment)", "mimetype": "text/plain", "start_char_idx": 30101, "end_char_idx": 30155, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46d494a5-7e6b-4c9b-9f8f-35aa9483aa07": {"__data__": {"id_": "46d494a5-7e6b-4c9b-9f8f-35aa9483aa07", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "71f385a7-0158-4c36-af20-f0db2a878ca6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bda93fd83f6cca663d6fb70334513011152993982cfb54feecfd80fdf25c7fd3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "da8ecf0c-9b4f-42a1-af25-4ddd738dad4c", "node_type": "1", "metadata": {}, "hash": "0d1cd968f23ae21dadbc55be6606a8f833ff766829cf46bc476e9d220f221ab3", "class_name": "RelatedNodeInfo"}}, "text": "{\n  pg::RunQuery(\n      \"CREATE MASKING POLICY ddm_drop_policy_with_attachment WITH \"\n      \"(col1 INT) USING ( 1 )\");\n  const char* name = \"ddm_drop_policy_with_attachment\";\n  Oid pol_id = GetDDMPolicyId(name);\n  EXPECT_TRUE(pol_id != InvalidOid)\n      << boost::format(\"Expected to find '%s' policy\") % name;\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY ddm_drop_policy_with_attachment ON \"\n      \"target_table (a) USING (a) TO PUBLIC\");\n  EXPECT_TRUE(ddm::HasAttachmentsForPolicy(pol_id))\n      << boost::format(\n             \"Expected to find '%s' policy \"\n             \"with attachment\") %\n             name;\n  try {\n    pg::RunQuery(\"DROP MASKING POLICY ddm_drop_policy_with_attachment\");\n    FAIL() << \"Expected policy with attachment cannot be dropped exception\";\n  } catch (std::exception& e) {\n    std::string error_message = e.what();\n    boost::algorithm::to_lower(error_message);\n    EXPECT_TRUE(error_message.find(\"ddm_drop_policy_with_attachment\") !=\n                    std::string::npos &&\n                error_message.find(\"depend\") != std::string::npos)\n        << boost::format(\n               \"Expected to find error message regarding \"\n               \"policy with attachment cannot be dropped \");\n  }\n  pol_id = GetDDMPolicyId(name);\n  EXPECT_TRUE(pol_id != InvalidOid)\n      << boost::format(\"Expected to find '%s' policy\") % name;\n  pg::RunQuery(\n      \"DROP MASKING POLICY ddm_drop_policy_with_attachment \"\n      \"CASCADE;\");\n  pol_id = GetDDMPolicyId(name);", "mimetype": "text/plain", "start_char_idx": 30156, "end_char_idx": 31640, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "da8ecf0c-9b4f-42a1-af25-4ddd738dad4c": {"__data__": {"id_": "da8ecf0c-9b4f-42a1-af25-4ddd738dad4c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46d494a5-7e6b-4c9b-9f8f-35aa9483aa07", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eee3ae4c076e180ae5ce09ea506bd3e794ae72a404e2c1bfcc923a7fb797477c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "caaedc24-2e2c-4963-b2ce-27380880a642", "node_type": "1", "metadata": {}, "hash": "22b8be19139737dfa3a437195684676b05f7eac12a5460dc1d4310d56702e4bd", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(pol_id == InvalidOid)\n      << boost::format(\"Expected not to find '%s' policy\") % name;\n}", "mimetype": "text/plain", "start_char_idx": 29911, "end_char_idx": 30013, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "caaedc24-2e2c-4963-b2ce-27380880a642": {"__data__": {"id_": "caaedc24-2e2c-4963-b2ce-27380880a642", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "da8ecf0c-9b4f-42a1-af25-4ddd738dad4c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c0c66af5647bdb15003fef97f0afbe6eeec0191f47706966bcb42c32c7e54ab5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0834a1c2-ce5f-4f29-9f65-8e8270275314", "node_type": "1", "metadata": {}, "hash": "0dcaf8dc14af28f3b655691f630fcdbf949e5f73879049b92a566f3716438f72", "class_name": "RelatedNodeInfo"}}, "text": ";\n\n/// Tests that an UDF attached to a masking policy can not be dropped\n/// unless that masking policy is dropped.\nPG_TEST_F(TestDDMPolicy, TestDropUDFAttachedToPolicy) {\n  pg::RunQuery(\n      \"CREATE FUNCTION b_mask (VARCHAR(12)) RETURNS VARCHAR(12) STABLE AS $$ \"\n      \"SELECT regexp_replace($1,'[a-z]', 'X') $$ LANGUAGE SQL\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp_udf_attachment WITH  (b VARCHAR(12)) USING ( \"\n      \"b_mask (b))\");\n  try {\n    pg::RunQuery(\"DROP FUNCTION b_mask(VARCHAR(12))\");\n    FAIL() << \"Expected UDF cannot be dropped exception\";\n  } catch (std::exception& e) {\n    std::string error_message = e.what();\n    boost::algorithm::to_lower(error_message);\n    EXPECT_TRUE(error_message.find(\"b_mask\") != std::string::npos &&\n                error_message.find(\"depend\") != std::string::npos)\n        << boost::format(\n               \"Expected to find error message regarding \"\n               \"UDF cannot be dropped\");\n  }\n  pg::RunQuery(\"DROP MASKING POLICY mp_udf_attachment\");\n  pg::RunQuery(\"DROP FUNCTION b_mask(VARCHAR(12))\");\n  SUCCEED();\n};\n\n/// Tests that a lookup table attached to a masking policy can not be dropped\n/// unless that masking policy is dropped.", "mimetype": "text/plain", "start_char_idx": 31745, "end_char_idx": 32949, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0834a1c2-ce5f-4f29-9f65-8e8270275314": {"__data__": {"id_": "0834a1c2-ce5f-4f29-9f65-8e8270275314", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "caaedc24-2e2c-4963-b2ce-27380880a642", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ed87fd9213d8a5810f7e823427124bfed3531b245c6ede9083b170b24bfebb59", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01dce63c-1d06-4e4b-b853-577d58c5b1c6", "node_type": "1", "metadata": {}, "hash": "4508def3f95b999afb216f82830941c10c3c948118894e98447891e342b86cf0", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMPolicy, TestDropLookupTableAttachedToPolicy) {\n  pg::RunQuery(\"CREATE TABLE lookup_ids (id INT)\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp_lookup_table_attached WITH (a INT) USING (CASE \"\n      \"WHEN (a in (select id from lookup_ids)) THEN a ELSE 0 END)\");\n  try {\n    pg::RunQuery(\"DROP TABLE lookup_ids\");\n    FAIL() << \"Expected lookup Table cannot be dropped exception\";\n  } catch (std::exception& e) {\n    std::string error_message = e.what();\n    boost::algorithm::to_lower(error_message);\n    EXPECT_TRUE(error_message.find(\"lookup_ids\") != std::string::npos &&\n                error_message.find(\"depend\") != std::string::npos)\n        << boost::format(\n               \"Expected to find error message regarding \"\n               \"lookup Table cannot be dropped\");\n  }\n  pg::RunQuery(\"DROP MASKING POLICY mp_lookup_table_attached\");\n  pg::RunQuery(\"DROP TABLE lookup_ids\");\n  SUCCEED();\n};\n\nenum RelationType { kTable = 't', kView = 'v', kLBV = 'l' };\nvoid testAttributesColumnDefConversion(RelationType type);\n\nPG_TEST_F(TestDDMPolicy, TestAttributesColumnDefConversionTable) {\n  testAttributesColumnDefConversion(kTable);\n}\nPG_TEST_F(TestDDMPolicy, TestAttributesColumnDefConversionView) {\n  testAttributesColumnDefConversion(kView);\n}\nPG_TEST_F(TestDDMPolicy, TestAttributesColumnDefConversionLBV) {\n  testAttributesColumnDefConversion(kLBV);\n}\n\n/// This test verifies correctness of converting\n/// 1. Column names to attribute numbers", "mimetype": "text/plain", "start_char_idx": 32950, "end_char_idx": 34419, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "01dce63c-1d06-4e4b-b853-577d58c5b1c6": {"__data__": {"id_": "01dce63c-1d06-4e4b-b853-577d58c5b1c6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0834a1c2-ce5f-4f29-9f65-8e8270275314", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "37b095291dabef4656df7ea77015d6fc472146d78fcb1cc0f9e9b87b6d595f16", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b282dd10-38f8-4085-a73e-e9bb9275052f", "node_type": "1", "metadata": {}, "hash": "dcdfde1bfb9fdff7c85ec33aba5a7856502caee7208d91501127b8d09c84baf1", "class_name": "RelatedNodeInfo"}}, "text": "/// 2. Attribute numbers to ColumnDef objects\n/// for relation types table, regular view and partially LBV. LBV is special\n/// since it does not have attributes in the catalog.\n/// ColumnNamesToAttributeNumbers would ereport (and we test it), but\n/// AttributeNumbersToColumnDefs would fail XPGCHECK.", "mimetype": "text/plain", "start_char_idx": 34420, "end_char_idx": 34720, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b282dd10-38f8-4085-a73e-e9bb9275052f": {"__data__": {"id_": "b282dd10-38f8-4085-a73e-e9bb9275052f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "01dce63c-1d06-4e4b-b853-577d58c5b1c6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4157cdf1f19c69f58c63ccda37aaa1acee53415fa46337b96e814c6fa374008e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1b39d0b0-c7c2-4438-96ab-c3e4ef0bedf5", "node_type": "1", "metadata": {}, "hash": "85564c29285f4ab70fc31244f2b54a085bfe54689259c0aee4ea6829716e0da9", "class_name": "RelatedNodeInfo"}}, "text": "void testAttributesColumnDefConversion(RelationType type)", "mimetype": "text/plain", "start_char_idx": 33933, "end_char_idx": 33990, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1b39d0b0-c7c2-4438-96ab-c3e4ef0bedf5": {"__data__": {"id_": "1b39d0b0-c7c2-4438-96ab-c3e4ef0bedf5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b282dd10-38f8-4085-a73e-e9bb9275052f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d3b910c03af56800fb92022fed7251f9f8fdd118809264ad193c581056600007", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b4ec2a6-6211-459c-b5c3-17f34e5f5cca", "node_type": "1", "metadata": {}, "hash": "59d8ab06b18ef0cb8bbdbc1dead6e7fd6e8cf0a37f78fd1f5149a0b87f5e77b4", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const std::string relation_suffix = \"test_serialization\";\n\n  auto relation_name = [&relation_suffix](RelationType type) -> std::string {\n    return (boost::format(\"%1%_%2%\") % static_cast<char>(type) %\n            relation_suffix)\n        .str();\n  };\n\n  pg::RunQuery(\"CREATE TABLE public.\", relation_name(kTable),\n               \"(                       \"\n               \"    column_int int,     \"\n               \"    column_text text,   \"\n               \"    column_super super, \"\n               \"    column_float float  \"\n               \")                       \");\n\n  pg::RunQuery(\"CREATE VIEW public.\", relation_name(kView),\n               \" AS SELECT * FROM public.\", relation_name(kTable));\n  pg::RunQuery(\"CREATE VIEW public.\", relation_name(kLBV),\n               \" AS SELECT * FROM public.\", relation_name(kTable),\n               \" WITH NO SCHEMA BINDING\");\n\n  const Oid relation_oid = RangeVarGetRelid(\n      makeRangeVar(\"public\", pstrdup(relation_name(type).c_str())),\n      false /* failOK */);\n\n  std::vector<ddm::AttachedAttribute> attributes = {\n      {1, \"nested.path\"},\n      {3, \"another.path\"},\n      {4, std::nullopt},\n  };\n\n  std::vector<std::shared_ptr<Value>> column_names = {\n      std::shared_ptr<Value>(makeString(\"column_int\"), PAlloc_deleter()),\n      // Skipping column_text for testing purposes.\n      std::shared_ptr<Value>(makeString(\"column_super\"), PAlloc_deleter()),\n      std::shared_ptr<Value>(makeString(\"column_float\"), PAlloc_deleter()),\n  };", "mimetype": "text/plain", "start_char_idx": 34779, "end_char_idx": 36266, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2b4ec2a6-6211-459c-b5c3-17f34e5f5cca": {"__data__": {"id_": "2b4ec2a6-6211-459c-b5c3-17f34e5f5cca", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b39d0b0-c7c2-4438-96ab-c3e4ef0bedf5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "16b2517fd36d98b16771453696b3604863c3a4f8d361f423f3fb1c9464b3a659", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "45601e58-bc2e-48e1-9743-21bb9228fc17", "node_type": "1", "metadata": {}, "hash": "204adee79cf903565441302e662b327f8b3f570da971b2121b0bea81cdb1947a", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<ddm::AttachedAttribute> column_definitions = {\n      {std::shared_ptr<ColumnDef>(makeColumnDef(\"column_int\", INT4OID, -1),\n                                  PAlloc_deleter()),\n       \"nested.path\"},\n      {std::shared_ptr<ColumnDef>(\n           makeColumnDef(\"column_super\", PARTIQLOID, MAX_PARTIQL_SIZE),\n           PAlloc_deleter()),\n       \"another.path\"},\n      {std::shared_ptr<ColumnDef>(makeColumnDef(\"column_float\", FLOAT8OID, -1),\n                                  PAlloc_deleter()),\n       std::nullopt},\n  };\n\n  std::vector<int> actual_attribute_numbers;\n\n  bool caught_error = false;\n  PG_TRY();\n  {\n    actual_attribute_numbers =\n        ddm::ColumnNamesToAttributeNumbers(relation_oid, column_names);\n  }\n  PG_CATCH();\n  { caught_error = true; }\n  PG_END_TRY();\n\n  ASSERT_EQ(type == kLBV, caught_error);\n\n  // The rest does not apply to LBVs, since AttributesToColumnDefs would fail\n  // XPGCHECK for LBV.", "mimetype": "text/plain", "start_char_idx": 36270, "end_char_idx": 37201, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "45601e58-bc2e-48e1-9743-21bb9228fc17": {"__data__": {"id_": "45601e58-bc2e-48e1-9743-21bb9228fc17", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2b4ec2a6-6211-459c-b5c3-17f34e5f5cca", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d5bc60f34afe2cc428fcd3d789366df6fa63f0a28430f43a466248d55dc64a65", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "218ed781-189e-4e12-a69b-c8e9bc74670e", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "if (type != kLBV) {\n    ASSERT_EQ(attributes.size(), actual_attribute_numbers.size());\n    for (size_t i = 0; i < attributes.size(); i++) {\n      ASSERT_EQ(std::get<int>(attributes[i].attribute),\n                actual_attribute_numbers[i]);\n    }\n\n    Relation table_as_relation = relation_open(relation_oid, AccessShareLock);\n\n    std::vector<ddm::AttachedAttribute> actual_column_definitions =\n        ddm::AttributesToColumnDefs(table_as_relation, attributes);\n\n    // Note that we cannot use SCOPE_EXIT_GUARD here since there is a RunQuery\n    // involving the relation before function terminates.\n    relation_close(table_as_relation, AccessShareLock);\n\n    ASSERT_TRUE(std::equal(column_definitions.begin(), column_definitions.end(),\n                           actual_column_definitions.begin(),\n                           pgtest::AttachedAttributeComparator));\n  }\n\n  pg::RunQuery(\"DROP VIEW public.\", relation_name(kView));\n  pg::RunQuery(\"DROP VIEW public.\", relation_name(kLBV));\n  pg::RunQuery(\"DROP TABLE public.\", relation_name(kTable));\n}", "mimetype": "text/plain", "start_char_idx": 37204, "end_char_idx": 38257, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "218ed781-189e-4e12-a69b-c8e9bc74670e": {"__data__": {"id_": "218ed781-189e-4e12-a69b-c8e9bc74670e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "45601e58-bc2e-48e1-9743-21bb9228fc17", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fb81c93bf1360b98ae79aa22fa5d22a93a9bcc57423ebd821536df74b4626bb2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4eb45b71-29e9-46a8-b784-8e7e3d118c8f", "node_type": "1", "metadata": {}, "hash": "3e343f2d6a7b017690a05ea007db18c7d4d86c26839889db4ecdc706ccfac0da", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 2552, "end_char_idx": 2553, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4eb45b71-29e9-46a8-b784-8e7e3d118c8f": {"__data__": {"id_": "4eb45b71-29e9-46a8-b784-8e7e3d118c8f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "10425f6ee183492bf1c49654386a37287a269252f2e4634448709de8927a9561", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "218ed781-189e-4e12-a69b-c8e9bc74670e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7d33f52c78a3fa80cb170e8c64f373b0e6f3439a93f054f8f527878a251082b6", "class_name": "RelatedNodeInfo"}}, "text": ";  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 38260, "end_char_idx": 38282, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "23e022ae-3d76-4b8d-a070-f6bbae19ed10": {"__data__": {"id_": "23e022ae-3d76-4b8d-a070-f6bbae19ed10", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.hpp", "file_name": "test_policy.hpp", "file_size": 487, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "0da60b9a-d766-46a6-8ab2-b867c2336373", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.hpp", "file_name": "test_policy.hpp", "file_size": 487, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "60be1ae4a080e9e77ec305606d54cc13e4198b3ae03497ddcca9e5c1911562d2", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#pragma once\n\n// These two includes must go first and in this order.\n// clang-format off\n#include <gtest/gtest.h>\n#include \"pg/test/pg_test.hpp\"\n// clang-format on\n\n#include \"ddm/ddm_policy.hpp\"\n\n#include \"pg/test/pg_test.hpp\"\n\n#include <string>\n\nnamespace pgtest {\n\nclass TestDDMPolicy : public pg::PgTest {\n public:\n  static void SetUpTestCase();\n  static void TearDownTestCase();\n};\n};  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 486, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c99faa6b-69ba-4d86-ad96-5dc357f636b0": {"__data__": {"id_": "c99faa6b-69ba-4d86-ad96-5dc357f636b0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e764e9e-7ca0-4ace-b90e-70c74ae29cd0", "node_type": "1", "metadata": {}, "hash": "eacf1e70aca057b35433ff7e505baafb5413431bff8f13d75da95638a4cc3100", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n#include \"pg/ddm/test_rewriter.hpp\"\n\n#include \"ddm/rewriter.h\"\n#include \"omnisql/omnisql_print_sql.hpp\"\n#include \"omnisql/omnisql_translate_query.hpp\"\n#include \"rewrite/rewriteHandler.h\"\n\n#include \"pg/src/include/utils/lsyscache.h\"\n#include \"pg/test/pg_test.hpp\"\n\n#include <boost/format.hpp>\n#include <gtest/gtest.h>\n\n#include <algorithm>\n#include <cstdio>\n#include <set>\n#include <string>\n\nextern bool g_pgtest_ddm;\nextern bool gconf_enable_ddm;\nextern bool gconf_enable_ddm_on_views;\nextern bool gconf_ddm_enable_over_super_paths;\nextern bool gconf_enable_qpc_for_session;\n\nauto TEST1_MASK =\n    \"(SELECT 2 * foo_col AS foo_col, 10 * bar_col AS bar_col, 2 * car_col \"\n    \"as car_col, 5 * dar_col AS dar_col, 15 * ear_col AS ear_col, \"\n    \"CASE WHEN far_col IN (SELECT b FROM lookup) THEN far_col + 5 \"\n    \"ELSE NULL END AS far_col FROM test1)\";\n\nauto VIEW1_MASK = R\"SQL(\n    foo_col, bar_col, car_col, dar_col, ear_col,\n    CASE WHEN far_col IN (SELECT b FROM lookup) THEN far_col + 5 ELSE NULL\n    END AS far_col\n    )SQL\";", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1106, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4e764e9e-7ca0-4ace-b90e-70c74ae29cd0": {"__data__": {"id_": "4e764e9e-7ca0-4ace-b90e-70c74ae29cd0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c99faa6b-69ba-4d86-ad96-5dc357f636b0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5f343fa6fa100d843c10caa272429b1659055abbc0bb72ae5387fed5fc706ada", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f563e927-986a-47b9-aae4-20cd98306159", "node_type": "1", "metadata": {}, "hash": "6049e27c00085d0e64be69fb4350afedd9179be72e8a0028fcdf16cde83f19e0", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest", "mimetype": "text/plain", "start_char_idx": 1107, "end_char_idx": 1123, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f563e927-986a-47b9-aae4-20cd98306159": {"__data__": {"id_": "f563e927-986a-47b9-aae4-20cd98306159", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e764e9e-7ca0-4ace-b90e-70c74ae29cd0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "208ee1d75847dc5888ad753b7ce6fd08fefb44460de8a6000907fea76fa6498c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4bb73009-b1e9-4e74-83b4-15a3894ea03c", "node_type": "1", "metadata": {}, "hash": "9d8367aa8c6c88c7644eb0e5c38e2e3e786fbf832d5a8bf4db83e0a9673dc34c", "class_name": "RelatedNodeInfo"}}, "text": "{", "mimetype": "text/plain", "start_char_idx": 1124, "end_char_idx": 1125, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4bb73009-b1e9-4e74-83b4-15a3894ea03c": {"__data__": {"id_": "4bb73009-b1e9-4e74-83b4-15a3894ea03c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f563e927-986a-47b9-aae4-20cd98306159", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "341f550189724cfd4ff8500452931d72d214d1cfa2b98d02deb8aac7aafdf684", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "795b3f44-1423-4f92-82e8-2ac48557dfa5", "node_type": "1", "metadata": {}, "hash": "71671c1c27ad5a8369e191fd0901feefb641c1e6a2fbfd49f4210f1e1ac5b4ec", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMRewriter::SetUpTestCase()", "mimetype": "text/plain", "start_char_idx": 1127, "end_char_idx": 1164, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "795b3f44-1423-4f92-82e8-2ac48557dfa5": {"__data__": {"id_": "795b3f44-1423-4f92-82e8-2ac48557dfa5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4bb73009-b1e9-4e74-83b4-15a3894ea03c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "587051f95435c638f903ba44e972f636a87e068f7f72be35a31c28c00c873e98", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e7505dd-cd34-40ca-806f-94f75b4c5400", "node_type": "1", "metadata": {}, "hash": "22ca2fe14f366add2712ed007d8ce46d345f9f0b2d06fb4e33ca6b8cd6977efb", "class_name": "RelatedNodeInfo"}}, "text": "{\n  g_pgtest_ddm = true;\n  gconf_enable_ddm = true;\n  gconf_enable_ddm_on_views = true;\n  gconf_enable_qpc_for_session = false;\n  pg::RunQuery(\"CREATE TABLE t (a int);\");\n  pg::RunQuery(\"CREATE TABLE lookup (b int);\");\n  pg::RunQuery(\n      \"CREATE TABLE test1 (foo_col int, bar_col int, car_col int, dar_col int, \"\n      \"ear_col int, far_col int);\");\n  pg::RunQuery(\n      \"CREATE TABLE test2 (foo_col int, bar_col int, car_col int, dar_col int, \"\n      \"ear_col int, far_col int);\");\n  pg::RunQuery(\"CREATE TABLE test4 (foo_col int, bar_col int);\");\n  pg::RunQuery(\"CREATE TABLE test5 (a int);\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp1re with (a int, b int) USING (2 * a, 5 * b);\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp2re with (a int, b int) USING (10 * a, 15 * \"\n      \"b);\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp3re with (a int, b int) USING (10 * a * b);\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp4re WITH (a int) USING \"\n      \"(CASE WHEN a IN (SELECT b FROM lookup) THEN a + 5 ELSE NULL END);\");\n  pg::RunQuery(\"CREATE MASKING POLICY mp5re WITH (a int) USING(a+10);\");\n  pg::RunQuery(\"CREATE USER u1re PASSWORD DISABLE;\");\n  pg::RunQuery(\"CREATE ROLE r1re;\");\n  pg::RunQuery(\"CREATE ROLE r2re;\");\n  pg::RunQuery(\"GRANT ROLE r1re TO u1re;\");\n  pg::RunQuery(\"GRANT ROLE r2re TO u1re;\");\n  pg::RunQuery(\"GRANT ALL ON TABLE test1 to u1re;\");\n  pg::RunQuery(\"GRANT ALL ON TABLE test2 to u1re;\");\n  pg::RunQuery(\"GRANT ALL ON TABLE lookup to u1re;\");", "mimetype": "text/plain", "start_char_idx": 1165, "end_char_idx": 2658, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4e7505dd-cd34-40ca-806f-94f75b4c5400": {"__data__": {"id_": "4e7505dd-cd34-40ca-806f-94f75b4c5400", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "795b3f44-1423-4f92-82e8-2ac48557dfa5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1fa443895b6e5d66d705ebe9d90292f79f4bb48b0540df6fb5f83d4bd97a2696", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "43c4e356-522f-4873-92af-b035ebfed379", "node_type": "1", "metadata": {}, "hash": "9d920a917227812ba787920a76f58b2b42ebb3a7694a27997cad72a731bcc0fc", "class_name": "RelatedNodeInfo"}}, "text": "pg::RunQuery(\"GRANT ALL ON SCHEMA public to u1re;\");\n\n  /// Attach mp1 to u1 with priority 0 on foo_col, bar_col\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp1re ON test1 (foo_col, bar_col) TO u1re;\");\n  /// Attach mp2 to u1 with priority 1 on bar_col, car_col <- mp2 wins bar\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp2re ON test1 (bar_col, car_col)\"\n      \" TO u1re PRIORITY 1;\");\n  /// Attach mp1 to r1 with priority 2 on car_col, dar_col <- mp1 wins dar, mp2\n  /// wins car\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp1re ON test1 (car_col, dar_col)\"\n      \" TO ROLE r1re PRIORITY 3;\");\n  /// Attach mp2 to r2 with priority 1 on dar_col, ear_col <- mp1 wins dar_col,\n  /// mp2 wins ear_col\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp2re ON test1 (dar_col, ear_col)\"\n      \" TO ROLE r2re PRIORITY 2;\");\n  /// Attach mp3 to u3re with priority 10 on foo_col, bar_col\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp3re ON test4 (foo_col) USING (foo_col, bar_col)\"\n      \" TO u1re PRIORITY 10;\");\n  /// Attach mp4 to u1re with priority 1 on far_col.\n  pg::RunQuery(\"ATTACH MASKING POLICY mp4re ON test1 (far_col) TO u1re;\");\n  /// Attach mp5 to u1re with priority on a\n  pg::RunQuery(\"ATTACH MASKING POLICY mp5re ON test5 (a) TO u1re;\");\n  pg::RunQuery(\"CREATE VIEW re_view AS (SELECT * FROM test1);\");\n  pg::RunQuery(\"CREATE VIEW view1 AS (SELECT * FROM test1);\");\n  pg::RunQuery(\"CREATE VIEW view2 AS (SELECT * FROM view1);\");", "mimetype": "text/plain", "start_char_idx": 2662, "end_char_idx": 4103, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "43c4e356-522f-4873-92af-b035ebfed379": {"__data__": {"id_": "43c4e356-522f-4873-92af-b035ebfed379", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e7505dd-cd34-40ca-806f-94f75b4c5400", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7b9fa45d2b3c7d0d6c2ca7800de817769b71d817223824588facc0d01ef857aa", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a0805fde-d5b9-467b-a676-5e1c258c9643", "node_type": "1", "metadata": {}, "hash": "d4a60433b736b60eb463c91fdc117f8c812499b0137ab608c55d39b5a18f2b5a", "class_name": "RelatedNodeInfo"}}, "text": "pg::RunQuery(\n      \"CREATE VIEW lbv1 AS (SELECT * FROM pgtest_testcase_schema.test5) WITH \"\n      \"NO SCHEMA BINDING;\");\n  pg::RunQuery(\n      \"CREATE VIEW lbv2 AS (SELECT * FROM pgtest_testcase_schema.lbv1) WITH NO \"\n      \"SCHEMA BINDING;\");\n\n  pg::RunQuery(\"ATTACH MASKING POLICY mp4re ON view1(far_col) TO PUBLIC;\");\n  pg::RunQuery(\"ATTACH MASKING POLICY mp4re ON view2(far_col) TO PUBLIC;\");\n  pg::RunQuery(\"ATTACH MASKING POLICY mp5re ON lbv1(a) TO PUBLIC;\");\n  pg::RunQuery(\"ATTACH MASKING POLICY mp5re ON lbv2(a) TO PUBLIC;\");\n  /// TODO(jamoorem) - This is required to make the test tables visible to the\n  ///                  user u1re. We should improve the pgtest infrastructure to\n  //                   avoid this requirement.\n  pg::RunQuery(\"ALTER USER u1re with CREATEUSER;\");\n\n  pg::RunQuery(\"CREATE TABLE target_table_dp53981 (id int, val varchar(256));\");\n  pg::RunQuery(\"CREATE TABLE source_table_dp53981 (id int);\");\n  pg::RunQuery(\"CREATE MASKING POLICY mp_dp53981 WITH (a int) USING (a+10);\");\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp_dp53981 ON target_table_dp53981(id) TO \"\n      \"PUBLIC;\");\n}", "mimetype": "text/plain", "start_char_idx": 4106, "end_char_idx": 5233, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a0805fde-d5b9-467b-a676-5e1c258c9643": {"__data__": {"id_": "a0805fde-d5b9-467b-a676-5e1c258c9643", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "43c4e356-522f-4873-92af-b035ebfed379", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "90a37c4d7a98ead47a25bf8c105b20973a08802456b4039d56a9cf0ec0a641d0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1bf6eef7-581c-40f1-bb07-f1f8fa9b6ea9", "node_type": "1", "metadata": {}, "hash": "ba2c43450d70e8f2740d36c9e24305816f7a39b70322a8af604883e658380f0d", "class_name": "RelatedNodeInfo"}}, "text": "void TestDDMRewriter::TearDownTestCase() {\n  g_pgtest_ddm = false;\n\n  pg::RunQuery(\"DROP TABLE t;\");\n  // Need to drop masking policy which references lookup table because the\n  // lookup table can not be dropped as the policy depends on it.\n  pg::RunQuery(\"DROP VIEW IF EXISTS view2;\");\n  pg::RunQuery(\"DROP VIEW IF EXISTS view1;\");\n  pg::RunQuery(\"DROP VIEW IF EXISTS lbv1;\");\n  pg::RunQuery(\"DROP VIEW IF EXISTS lbv2;\");\n  pg::RunQuery(\"DROP MASKING POLICY mp4re CASCADE;\");\n  pg::RunQuery(\"DROP MASKING POLICY mp5re CASCADE;\");\n  pg::RunQuery(\"DROP MASKING POLICY mp_dp53981 CASCADE;\");\n  pg::RunQuery(\"DROP TABLE lookup;\");\n  pg::RunQuery(\"DROP VIEW IF EXISTS re_view_u1;\");\n  pg::RunQuery(\"DROP VIEW re_view;\");\n  pg::RunQuery(\"DROP TABLE test1;\");\n  pg::RunQuery(\"DROP TABLE test2;\");\n  pg::RunQuery(\"DROP TABLE IF EXISTS test3;\");\n  pg::RunQuery(\"DROP TABLE test4;\");\n  pg::RunQuery(\"DROP TABLE test5;\");\n  pg::RunQuery(\"DROP TABLE IF EXISTS target_table_dp53981;\");\n  pg::RunQuery(\"DROP TABLE IF EXISTS source_table_dp53981;\");\n  pg::RunQuery(\"DROP ROLE r1re FORCE;\");\n  pg::RunQuery(\"DROP ROLE r2re FORCE;\");\n}", "mimetype": "text/plain", "start_char_idx": 5235, "end_char_idx": 6355, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1bf6eef7-581c-40f1-bb07-f1f8fa9b6ea9": {"__data__": {"id_": "1bf6eef7-581c-40f1-bb07-f1f8fa9b6ea9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a0805fde-d5b9-467b-a676-5e1c258c9643", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c6c83cd013d76cb19712802a505d852be553c11263497d86a42c7b516bf73f1f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1e171b8f-1bb9-42df-b4b2-752a06a41c7f", "node_type": "1", "metadata": {}, "hash": "dc12e174e76ae569544433815d8aaaf0f03ac5c210a1d9c830c5a23ac61ecd3c", "class_name": "RelatedNodeInfo"}}, "text": "void ValidateDDMPropagationForMaskedTable(std::string input_q_str,\n                                          ResultCacheState rcs)", "mimetype": "text/plain", "start_char_idx": 6357, "end_char_idx": 6487, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1e171b8f-1bb9-42df-b4b2-752a06a41c7f": {"__data__": {"id_": "1e171b8f-1bb9-42df-b4b2-752a06a41c7f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1bf6eef7-581c-40f1-bb07-f1f8fa9b6ea9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eb01844c7b9c89d813e0472ecb91f5f3fa1dd40063c4585b2da493734372ccdb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6a46673c-c630-4f9c-ac2a-93845ac24cdb", "node_type": "1", "metadata": {}, "hash": "2442dc0abe44282d52561150d19d5ca37c29167f44a9aba2acef3b44d8333d60", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto input_rte = reinterpret_cast<RangeTblEntry*>(linitial(input_q->rtable));\n  EXPECT_TRUE(input_rte->requiredPerms != 0)\n      << \"requiredPerms check not present pre-ddm\";\n  auto rewrite_result =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */);\n  EXPECT_TRUE(rewrite_result.ddm_applied) << \"DDM should have been applied.\";\n\n  ListCell* rewrite_rte_cell = NULL;\n  // validate that RTE perms are pushed down for the first level of RTEs.\n  EXPECT_TRUE(list_length(rewrite_result.rewrite->rtable) >= 1)\n      << \"DDM should have been applied.\";\n  foreach(rewrite_rte_cell, rewrite_result.rewrite->rtable)", "mimetype": "text/plain", "start_char_idx": 6488, "end_char_idx": 7220, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6a46673c-c630-4f9c-ac2a-93845ac24cdb": {"__data__": {"id_": "6a46673c-c630-4f9c-ac2a-93845ac24cdb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1e171b8f-1bb9-42df-b4b2-752a06a41c7f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0825e4f4e7054f6294a2f57c5f35aba9cb0c2c45995239e471f156c84bfec75e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "597bdb1e-c709-46f7-863b-0db38bafe0b3", "node_type": "1", "metadata": {}, "hash": "d24fd900563cb99c8d900527da7e1a84b13e439ea2fa93a59c7cb34f75ce8bb0", "class_name": "RelatedNodeInfo"}}, "text": "{\n    auto ddm_rte = reinterpret_cast<RangeTblEntry*>(\n        linitial(rewrite_result.rewrite->rtable));\n    // skip rtables which are not ddm protected and do not have a nested q.\n    // This test is not responsible for verifying that DDM policies are applied.\n    if (ddm_rte->has_ddm_rewrite) {\n      auto ddm_nested_q = reinterpret_cast<RangeTblEntry*>(ddm_rte)->subquery;\n      EXPECT_TRUE(ddm_nested_q != nullptr);\n      auto ddm_nested_rte =\n          reinterpret_cast<RangeTblEntry*>(linitial(ddm_nested_q->rtable));\n      EXPECT_TRUE(input_rte->requiredPerms == ddm_nested_rte->requiredPerms)\n          << \"DDM and input rte should have identical perms.\";\n      EXPECT_TRUE(\n          bms_equal(input_rte->selectedCols, ddm_nested_rte->selectedCols))\n          << \"DDM and input rte should have identical selectedCols.\";\n      EXPECT_TRUE(\n          bms_equal(input_rte->updatedCols, ddm_nested_rte->updatedCols))\n          << \"DDM and input rte should have identical updatedCols.\";\n      EXPECT_TRUE(input_rte->checkAsUser == ddm_nested_rte->checkAsUser)\n          << \"DDM and input rte should have identical checkAsUser.\";\n    }\n  }\n\n  auto qra_result = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n  auto qra_rte = reinterpret_cast<RangeTblEntry*>(linitial(qra_result->rtable));", "mimetype": "text/plain", "start_char_idx": 7221, "end_char_idx": 8554, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "597bdb1e-c709-46f7-863b-0db38bafe0b3": {"__data__": {"id_": "597bdb1e-c709-46f7-863b-0db38bafe0b3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6a46673c-c630-4f9c-ac2a-93845ac24cdb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7e5bc4768561218f910a8d7da64f6431b97de73723e58d8c5cb904a86d8b92c9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a3bf6c43-726e-400c-8ec1-788a4f7447ac", "node_type": "1", "metadata": {}, "hash": "2f60405cc8354fc5d41fb7f87a296f7b76c4f23a85a005cf088e6acbbfd32628", "class_name": "RelatedNodeInfo"}}, "text": "if (qra_rte->rtekind != RTE_SUBQUERY) {\n    EXPECT_TRUE(qra_rte->requiredPerms == 0)\n        << \"requiredPerms check not disabled for RTE\";\n  } else if (qra_rte->rtekind == RTE_SUBQUERY && qra_rte->has_ddm_rewrite) {\n    auto qra_rte_inner = reinterpret_cast<RangeTblEntry*>(\n        linitial(reinterpret_cast<RangeTblEntry*>(linitial(qra_result->rtable))\n                     ->subquery->rtable));\n    EXPECT_TRUE(qra_rte_inner->requiredPerms == 0)\n        << \"requiredPerms check not disabled for RTE\";\n  }\n}", "mimetype": "text/plain", "start_char_idx": 8557, "end_char_idx": 9067, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a3bf6c43-726e-400c-8ec1-788a4f7447ac": {"__data__": {"id_": "a3bf6c43-726e-400c-8ec1-788a4f7447ac", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "597bdb1e-c709-46f7-863b-0db38bafe0b3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fb486ad3d9b0af0d9896e4255a9f2a5f5ba00f693eaaf6fd0d2be984cf5b6384", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee451377-766f-43bf-a3fb-45df5191d51b", "node_type": "1", "metadata": {}, "hash": "2d24ed5280197acb69312ab508104eaf4d2079c25f8777a911246d16d073d062", "class_name": "RelatedNodeInfo"}}, "text": "boost::format GetQueryNotMatchedErrorMessage(\n    std::string const& expected_query, std::string const& rewritten_query) {\n  return boost::format(\n             \"\\n====\\nExpected and rewritten queries do not match, Expected\\n \"\n             \"%s\\nActual\\n====\\n%s\\n====\\n\") %\n         expected_query % rewritten_query;\n}\n\n/// Test's that a basic SQL SELECT statement will be rewritten correctly.\n/// Verifies\n/// - DDM Rewriter\n/// - QueryRewriteAll rewriter\n/// Query expectations are\n/// Input Query:\n///   \"SELECT * from test1;\"\n/// Rewritten Query:\n///   \"SELECT * FROM (test1_mask) AS test1;\"", "mimetype": "text/plain", "start_char_idx": 9069, "end_char_idx": 9664, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ee451377-766f-43bf-a3fb-45df5191d51b": {"__data__": {"id_": "ee451377-766f-43bf-a3fb-45df5191d51b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a3bf6c43-726e-400c-8ec1-788a4f7447ac", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9bdddcb3bef68fb1d9e15bdc69c0a80a816c7438ac7901ca5ffe935a02299ac7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2009849a-3ded-4b30-8204-5f3e8df16aa5", "node_type": "1", "metadata": {}, "hash": "ad73bb75e00c5b850288e3d8058e688a918e52d139afc02c1dbb20d03fc3ed5a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteSimpleSelect) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from test1;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_q_fmt =\n      boost::format(\"SELECT * FROM %s AS test1;\") % TEST1_MASK;\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n}\n\n/// Test's that a basic SQL SELECT statement on a masked view\n/// will be rewritten correctly.\n/// Verifies\n/// - DDM Rewriter\n/// - QueryRewriteAll rewriter\n/// Query expectations are", "mimetype": "text/plain", "start_char_idx": 9665, "end_char_idx": 11158, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2009849a-3ded-4b30-8204-5f3e8df16aa5": {"__data__": {"id_": "2009849a-3ded-4b30-8204-5f3e8df16aa5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee451377-766f-43bf-a3fb-45df5191d51b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f8bf9544b3015fc6b477325250be400dbd0cb28ba0e8451340cbf81d1eba62b2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0d4da37a-895d-4fd4-a1c6-4f3bcd8f2789", "node_type": "1", "metadata": {}, "hash": "f2efe1b4d244248d4d0610e039cceef00335b5a2d05a6b86da1aebd7077b37b4", "class_name": "RelatedNodeInfo"}}, "text": "/// Input Query:\n///   \"SELECT * from view1;\"\n/// Rewritten Query:\n///   \"SELECT * FROM (SELECT view_mask FROM (masked_t1) AS test1;\"", "mimetype": "text/plain", "start_char_idx": 11159, "end_char_idx": 11292, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0d4da37a-895d-4fd4-a1c6-4f3bcd8f2789": {"__data__": {"id_": "0d4da37a-895d-4fd4-a1c6-4f3bcd8f2789", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2009849a-3ded-4b30-8204-5f3e8df16aa5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7b0ac639438a3ec03214ebfcbe5f8c8b771e8bfcd0d2e37b5feeaf15b6d44404", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "99d2e2bd-4f86-4fdb-9099-c526e4cac27d", "node_type": "1", "metadata": {}, "hash": "db40f000f06547400c74ae93bb7760e56c6911d55e7d98d991c93dc1daafb00e", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteMaskedView)", "mimetype": "text/plain", "start_char_idx": 11293, "end_char_idx": 11342, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "99d2e2bd-4f86-4fdb-9099-c526e4cac27d": {"__data__": {"id_": "99d2e2bd-4f86-4fdb-9099-c526e4cac27d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0d4da37a-895d-4fd4-a1c6-4f3bcd8f2789", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2b8bc22fa9a0684fbb6c9d9807af50d742360a2d27489d150d080dce4ab59919", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c2cb6024-84f7-41c9-abc7-b416f5bcc4a8", "node_type": "1", "metadata": {}, "hash": "05eba2f508925c0320c19684f099f5af09487f7b6f218dd5b24cb3ad5ab0abe0", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * FROM view1;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_q_fmt =\n      boost::format(\"SELECT * FROM (SELECT %s FROM view1) AS view1;\") %\n      VIEW1_MASK;\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  // rewrite displays as\n  // SELECT * FROM\n  //  SELECT MASKED FROM (\n  // SELECT * FROM -- Original View definition\n  // SELECT test1MASK\n  expected_q_fmt = boost::format(\n                       \"SELECT * FROM (SELECT %s FROM (SELECT * FROM %s AS \"\n                       \"test1) as view1) AS view1;\") %\n                   VIEW1_MASK % TEST1_MASK;\n  expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));", "mimetype": "text/plain", "start_char_idx": 11343, "end_char_idx": 12814, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c2cb6024-84f7-41c9-abc7-b416f5bcc4a8": {"__data__": {"id_": "c2cb6024-84f7-41c9-abc7-b416f5bcc4a8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "99d2e2bd-4f86-4fdb-9099-c526e4cac27d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "eee7d28108b38bf8b1fcd01570975c49e327e160218ed35ca2770d940efb3207", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d41a49cd-e9ff-4ee0-979e-1ea7ccc7f78a", "node_type": "1", "metadata": {}, "hash": "3bfd9c707f9292520fcbb06900ef7717f2ca5c95ce234f8ef6800cd38e99b3f8", "class_name": "RelatedNodeInfo"}}, "text": "expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 12817, "end_char_idx": 13245, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d41a49cd-e9ff-4ee0-979e-1ea7ccc7f78a": {"__data__": {"id_": "d41a49cd-e9ff-4ee0-979e-1ea7ccc7f78a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c2cb6024-84f7-41c9-abc7-b416f5bcc4a8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "468e0a927d01247c17ec6c9c593b5e91d43fc3e782ee9379b188e4336bbc49bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf3d3307-fec9-4980-882b-c7f2f45ff62e", "node_type": "1", "metadata": {}, "hash": "6a519d5ff7ce5a1b605b0141d40bdd7da209268d8ee68cf48e92a584f70ffe03", "class_name": "RelatedNodeInfo"}}, "text": "/// Test's that a basic SQL SELECT statement on a nested masked view\n/// will be rewritten correctly. The view view2 is a select * statement on\n/// view1.\n/// Verifies\n/// - DDM Rewriter\n/// - QueryRewriteAll rewriter\n/// Query expectations are\n/// Input Query:\n///   \"SELECT * from view2;\"", "mimetype": "text/plain", "start_char_idx": 13247, "end_char_idx": 13537, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cf3d3307-fec9-4980-882b-c7f2f45ff62e": {"__data__": {"id_": "cf3d3307-fec9-4980-882b-c7f2f45ff62e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d41a49cd-e9ff-4ee0-979e-1ea7ccc7f78a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f5b441c23fb0e039d80cce9f44bc5945e85f99c515c585fa366e31b1f2ec64c3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e9e1cca-ec8f-4bb8-b8c8-6246dfc7eaca", "node_type": "1", "metadata": {}, "hash": "24f03922bff75721e746a49fe1ac46466b170d2b1c157ae7a3683204ba2e787b", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteMaskedNestedView)", "mimetype": "text/plain", "start_char_idx": 13538, "end_char_idx": 13593, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6e9e1cca-ec8f-4bb8-b8c8-6246dfc7eaca": {"__data__": {"id_": "6e9e1cca-ec8f-4bb8-b8c8-6246dfc7eaca", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf3d3307-fec9-4980-882b-c7f2f45ff62e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "06fe81ce6e69e5da52a5926f723e5534bb55dc15c31e192433e23deea12e24da", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ba951554-b3b4-4b0b-a49d-e61b219edd98", "node_type": "1", "metadata": {}, "hash": "cdf9347145610b9fb8b36ab846369cdd7ba81485abe25014e2ae1c2c9dee8e32", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * FROM view2;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_q_fmt =\n      boost::format(\"SELECT * FROM (SELECT %s FROM view2) AS view2;\") %\n      VIEW1_MASK;\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  // rewrite displays as\n  // SELECT * FROM\n  //  SELECT MASKED FROM (\n  // SELECT * FROM -- Original View definition\n  // SELECT test1MASK\n  expected_q_fmt = boost::format(\n                       \"SELECT * FROM (SELECT %s FROM (SELECT * FROM (SELECT \"\n                       \"%s FROM (SELECT * FROM %s AS test1) as view1) AS \"\n                       \"view1) AS view2) as view2;\") %\n                   VIEW1_MASK % VIEW1_MASK % TEST1_MASK;\n  expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));", "mimetype": "text/plain", "start_char_idx": 13594, "end_char_idx": 15065, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ba951554-b3b4-4b0b-a49d-e61b219edd98": {"__data__": {"id_": "ba951554-b3b4-4b0b-a49d-e61b219edd98", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e9e1cca-ec8f-4bb8-b8c8-6246dfc7eaca", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "106d6b006c723c7f41e50ff90b69e4554a1acd09f20659e06886938407b1d33d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "53550ede-f9dc-47ed-a1e9-ff9613e2525b", "node_type": "1", "metadata": {}, "hash": "14d06b98acb55be274d3b8c32a759509c8d84e2ef0307ae0ffedf0aca762861f", "class_name": "RelatedNodeInfo"}}, "text": "rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 12727, "end_char_idx": 13245, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "53550ede-f9dc-47ed-a1e9-ff9613e2525b": {"__data__": {"id_": "53550ede-f9dc-47ed-a1e9-ff9613e2525b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba951554-b3b4-4b0b-a49d-e61b219edd98", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0d04301430a49e3652d3e28f741be6591a3a6b964e0c317e7bf8b5e6e2de4f37", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cd43b54f-9044-4fa6-b097-2af21845164f", "node_type": "1", "metadata": {}, "hash": "10eb1475f2b04bc8046d93b33c1eb84e6b4c9fe357e71647b3b08ccd1a4f37db", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteMaskedLBV)", "mimetype": "text/plain", "start_char_idx": 15588, "end_char_idx": 15636, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cd43b54f-9044-4fa6-b097-2af21845164f": {"__data__": {"id_": "cd43b54f-9044-4fa6-b097-2af21845164f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "53550ede-f9dc-47ed-a1e9-ff9613e2525b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d408fec17393acb17820eac09c3a4713a53d021c1650a211323470a7f6e69121", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "85e56118-befe-4ec0-9ba3-b0f1c200ace8", "node_type": "1", "metadata": {}, "hash": "4c8246aed5cfab385e44587a9c03a58217d0d36d3ac5374315ad6737c63c970f", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * FROM lbv1;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_sql = R\"SQL(\n    SELECT * FROM \n        (SELECT a+10 AS a FROM\n            (SELECT * FROM\n                (SELECT a+10 AS a FROM test5)\n            AS test5)\n        AS lbv1\n        )\n    AS lbv1;\n  )SQL\";\n  auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << boost::format(\n             \"\\n====\\nExpected and rewritten queries do not match, Expected\\n \"\n             \"%s\\nActual\\n====\\n%s\\n====\\n\") %\n             expected_q_omni % rewritten_q_omni;\n\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));", "mimetype": "text/plain", "start_char_idx": 15637, "end_char_idx": 16987, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "85e56118-befe-4ec0-9ba3-b0f1c200ace8": {"__data__": {"id_": "85e56118-befe-4ec0-9ba3-b0f1c200ace8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cd43b54f-9044-4fa6-b097-2af21845164f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "627e114a6990d0fc2355ec8ddb5cc93faecb1f5bf56a39970c65b90e357d3929", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e6b1b332-883c-405f-b977-62c45456e7cb", "node_type": "1", "metadata": {}, "hash": "7df9187f8abf1da5eb5ca16a9559fa58540f95bb76f1574840353479429ecb6c", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << boost::format(\n             \"\\n====\\nExpected and rewritten queries do not match, Expected\\n \"\n             \"%s\\nActual\\n====\\n%s\\n====\\n\") %\n             expected_q_omni % rewritten_q_omni;\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 16990, "end_char_idx": 17265, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e6b1b332-883c-405f-b977-62c45456e7cb": {"__data__": {"id_": "e6b1b332-883c-405f-b977-62c45456e7cb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "85e56118-befe-4ec0-9ba3-b0f1c200ace8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c0a943bdb29c3181de04dccd79996a5172a591e4725d63628b4bfd266e919325", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f6125d88-3e0f-43f6-b092-420a2ae61705", "node_type": "1", "metadata": {}, "hash": "f279af7729ef639fc97d1300e3e0b5b77820c5a73671ca7b0d65ab4678504762", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteMaskedNestedLBV)", "mimetype": "text/plain", "start_char_idx": 17267, "end_char_idx": 17321, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f6125d88-3e0f-43f6-b092-420a2ae61705": {"__data__": {"id_": "f6125d88-3e0f-43f6-b092-420a2ae61705", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e6b1b332-883c-405f-b977-62c45456e7cb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b4f52c97e5f5ff81a218e9c20be595ec664e9644d2f82892b2edaa4a7e6145a4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b73d0cd7-ebdb-4ca4-b2d0-96d0a3c91cc6", "node_type": "1", "metadata": {}, "hash": "82cf26f2b02cab3f281c598d21992eda15e182d6947858667923bfd582546275", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * FROM lbv2;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_sql = R\"SQL(\n    SELECT * FROM \n        (SELECT a+10 AS a FROM\n            (SELECT * FROM\n                (SELECT a+10 AS a FROM\n                    (SELECT * FROM\n                        (SELECT a+10 AS a FROM test5)\n                    AS test5)\n                AS lbv1)\n            AS lbv1)\n        AS lbv2)\n    AS lbv2;\n  )SQL\";\n  auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));", "mimetype": "text/plain", "start_char_idx": 17322, "end_char_idx": 18737, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b73d0cd7-ebdb-4ca4-b2d0-96d0a3c91cc6": {"__data__": {"id_": "b73d0cd7-ebdb-4ca4-b2d0-96d0a3c91cc6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f6125d88-3e0f-43f6-b092-420a2ae61705", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "af9d21a65075f5dfd5906b0cc477e5ee8843093854d4a9534446614ff7890c79", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "84dfc870-bfc3-42a5-9496-659f29747995", "node_type": "1", "metadata": {}, "hash": "c296229fc6e4e3cbae497ce78f1539e03a6f01034f1d07e4178c24d980359d81", "class_name": "RelatedNodeInfo"}}, "text": "rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 10621, "end_char_idx": 10972, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "84dfc870-bfc3-42a5-9496-659f29747995": {"__data__": {"id_": "84dfc870-bfc3-42a5-9496-659f29747995", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b73d0cd7-ebdb-4ca4-b2d0-96d0a3c91cc6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "728fc40b2f129bbf3523dd7c0e4172509ced24ed7e485d234b0593a5ceeb542d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "66fa68c7-ecf6-4392-a27b-cdeb5e791687", "node_type": "1", "metadata": {}, "hash": "e2b949b2b99190863289e3a71d023397e51946aa1278b94c7f8f93b199215b00", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that Views are rewritten with Executor context.\n/// Verifies\n/// - DDM Rewriter\n/// - QueryRewriteAll rewriter\n/// Query expectations are\n/// For View:\n///   \"CREATE VIEW re_view_u1 AS (SELECT * FROM test1);\"\n///\n/// Input Query:\n///   \"SELECT * from re_view_u1;\"\n/// Rewritten Query:\n///   QueryRewriteAll:\n///     As u1re:\n///       \"SELECT * FROM (select * from %s as test1) AS re_view_u1;\"\n///     As bootstrap:\n///        \"SELECT * FROM (select * from test1) AS re_view_u1;\"\n///   DDM Rewriter:\n///     \"SELECT * from re_view_u1;\"", "mimetype": "text/plain", "start_char_idx": 19094, "end_char_idx": 19639, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "66fa68c7-ecf6-4392-a27b-cdeb5e791687": {"__data__": {"id_": "66fa68c7-ecf6-4392-a27b-cdeb5e791687", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "84dfc870-bfc3-42a5-9496-659f29747995", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0b489f736cc8b4a5b6e37470112161fc5683caf7f741b52e43c8fcd52a151d70", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "285de063-b0ca-48cf-807f-df574337b1be", "node_type": "1", "metadata": {}, "hash": "bab78d252b7ac19c0f4b22aad49eb724cd66dd18e0eba365614b9351814767e5", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteSimpleSelectFromView)", "mimetype": "text/plain", "start_char_idx": 19640, "end_char_idx": 19699, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "285de063-b0ca-48cf-807f-df574337b1be": {"__data__": {"id_": "285de063-b0ca-48cf-807f-df574337b1be", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "66fa68c7-ecf6-4392-a27b-cdeb5e791687", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "439facd51f8a7a3d21960a0a7330cc9166b2a35dc7ef0125f1a3f512ee5463a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b35d44a5-1ad3-4428-b557-40536c425b1c", "node_type": "1", "metadata": {}, "hash": "0ef3b3b82948733ad369df97bf0573516bd1296cf3704972a8fa0eda861ef501", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n\n  SetUserId(u1_id);\n  // define a view with u1re as owner\n  pg::RunQuery(\"CREATE VIEW re_view_u1 AS (SELECT * FROM test1);\");\n\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from re_view_u1;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(input_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n  auto expected_q_fmt =\n      boost::format(\n          \"SELECT * FROM (select * from %s as test1) AS re_view_u1;\") %\n      TEST1_MASK;\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(copyObject(input_q), NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);", "mimetype": "text/plain", "start_char_idx": 19700, "end_char_idx": 21201, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b35d44a5-1ad3-4428-b557-40536c425b1c": {"__data__": {"id_": "b35d44a5-1ad3-4428-b557-40536c425b1c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "285de063-b0ca-48cf-807f-df574337b1be", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e6852697c5b92b0295d8d93125cbce048d42a9572c6512ed5553b2cc667d84d7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc77a395-1ec6-49fe-b726-410f306c3cca", "node_type": "1", "metadata": {}, "hash": "99d0f7571f52ed35118aebf6c74f4cef35a99250eb22f32ede8956c3fc0d2984", "class_name": "RelatedNodeInfo"}}, "text": "input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from re_view;\"))));\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(copyObject(input_q), NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  std::string expected_q_str =\n      \"SELECT * FROM (select * from test1) AS re_view;\";\n  expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n\n  expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n}", "mimetype": "text/plain", "start_char_idx": 21204, "end_char_idx": 21912, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc77a395-1ec6-49fe-b726-410f306c3cca": {"__data__": {"id_": "bc77a395-1ec6-49fe-b726-410f306c3cca", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b35d44a5-1ad3-4428-b557-40536c425b1c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "bc50f149d00b545d4678aba53921da85d28244b2fe45a450c16b4a445e03845b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1a453ee-cd06-448b-928b-97ddf4ad3772", "node_type": "1", "metadata": {}, "hash": "2f43660d0fee73032f3643f5c6e371aa4aec79780c9d372c393aa2485bf318d7", "class_name": "RelatedNodeInfo"}}, "text": "/// Rewrites a simple select statement when DDM is disabled.\n/// Expects that the query \"SELECT * from test1;\" is not rewritten.\nPG_TEST_F(TestDDMRewriter, TestRewriteSimpleSelectDDMDisable) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  gconf_enable_ddm = false;\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from test1;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(input_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n  gconf_enable_ddm = true;\n}\n\n/// Tests that a complex query with joins, predicates, and unmasked tables is\n/// Is correctly rewritten.\n/// Verifies\n/// - DDM Rewriter\n/// - QueryRewriteAll rewriter\n/// Query expectations are", "mimetype": "text/plain", "start_char_idx": 21914, "end_char_idx": 23412, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d1a453ee-cd06-448b-928b-97ddf4ad3772": {"__data__": {"id_": "d1a453ee-cd06-448b-928b-97ddf4ad3772", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc77a395-1ec6-49fe-b726-410f306c3cca", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2f15473ca11db52819e67ed144abb83fb1a215a59ecadd1c45451db96c621977", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5856a581-a72d-4a7b-8315-74119218bf60", "node_type": "1", "metadata": {}, "hash": "62916280daae79dbfca11f4dd5c724923b369ff25f7865b336c8e0a9ec0a2059", "class_name": "RelatedNodeInfo"}}, "text": "///   Input Query:\n///     SELECT * FROM test1 AS a JOIN test1 AS b ON a.foo_col = b.foo_col\n///     JOIN test2 AS c ON a.foo_col = c.foo_col;\"\n///   Rewritten Query:\n///     SELECT * FROM (test1_mask) AS a JOIN (test1_mask) AS b on a.foo_col =\n///     b.foo_col JOIN\"\n//          \" test2 AS c ON a.foo_col = c.foo_col;", "mimetype": "text/plain", "start_char_idx": 23413, "end_char_idx": 23732, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5856a581-a72d-4a7b-8315-74119218bf60": {"__data__": {"id_": "5856a581-a72d-4a7b-8315-74119218bf60", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1a453ee-cd06-448b-928b-97ddf4ad3772", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "427150c281b916678c24e18e8f7227ff45f7962c36b6148b61e74c711d26d7e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee7b07ea-ac58-43d7-8ce2-5b976c511d13", "node_type": "1", "metadata": {}, "hash": "e388744169a4b6d11ee5aea7fb45123a342cefcc04ffc59527497be7625b255d", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteQuery)", "mimetype": "text/plain", "start_char_idx": 23733, "end_char_idx": 23777, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ee7b07ea-ac58-43d7-8ce2-5b976c511d13": {"__data__": {"id_": "ee7b07ea-ac58-43d7-8ce2-5b976c511d13", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5856a581-a72d-4a7b-8315-74119218bf60", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f477e6b1ff716bf9c2e8b045fb28be65fa8766432b1b98ad592bf455221362d8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2a25b82a-8067-4e09-bfa1-a56b655575b6", "node_type": "1", "metadata": {}, "hash": "a9e31e3ce3b3942bbabff24488b1698a4e29c0628d057ef8ba35cd0877ad1faf", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n\n  SetUserId(u1_id);\n\n  auto input_q = reinterpret_cast<Query*>(linitial(pg::Analyze(\n      pg::Parse(\"SELECT * FROM test1 AS a JOIN test1 AS b ON a.foo_col = \"\n                \"b.foo_col JOIN test2 AS c ON a.foo_col = c.foo_col;\"))));\n\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_q_str =\n      boost::format(\n          \"SELECT * FROM %s AS a JOIN %s AS b on a.foo_col = b.foo_col JOIN\"\n          \" test2 AS c ON a.foo_col = c.foo_col;\") %\n      TEST1_MASK % TEST1_MASK;\n\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str.str()))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 23778, "end_char_idx": 25261, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2a25b82a-8067-4e09-bfa1-a56b655575b6": {"__data__": {"id_": "2a25b82a-8067-4e09-bfa1-a56b655575b6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee7b07ea-ac58-43d7-8ce2-5b976c511d13", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4d947898609aaa5ae845a01877fb9942dd30a8fa36d664adbad483d780f3ba3a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "afbd1185-e1e7-4592-b931-36f87f28e7bd", "node_type": "1", "metadata": {}, "hash": "7475c1aa259eeaf58038898a1100559f3b69c6631bedda547793f5592dd2af32", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that a query with column alias is correctly rewritten.\nPG_TEST_F(TestDDMRewriter, TestRewriteColumnAlias) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n\n  SetUserId(u1_id);\n\n  auto input_q = reinterpret_cast<Query*>(linitial(\n      pg::Analyze(pg::Parse(\"SELECT * FROM test1 fake (a, b, c, d, e, f);\"))));\n\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_q_str =\n      boost::format(\"SELECT * FROM %s fake (a, b, c, d, e, f);\") % TEST1_MASK;\n\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str.str()))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n}\n\n/// Tests that an insert statement is not rewritten.", "mimetype": "text/plain", "start_char_idx": 25263, "end_char_idx": 26731, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "afbd1185-e1e7-4592-b931-36f87f28e7bd": {"__data__": {"id_": "afbd1185-e1e7-4592-b931-36f87f28e7bd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2a25b82a-8067-4e09-bfa1-a56b655575b6", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6cb7832094ef4c43b78f2c5c7624e84cfb97cb40ffa4e467ac341ce08ce7dc8f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b01abded-a851-48ca-b3fb-3b141897be44", "node_type": "1", "metadata": {}, "hash": "5d78f2b855eaae9887cfb2092298fc0e17364ebdfd35c404856c533cfcdfa535", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteInsert) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"insert into test1 values (1,1,1,1,1,1);\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n\n  auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  pg::RunQuery(input_q_str);\n  SetUserId(current_id);\n}\n\n/// Tests that a Delete statement is rewritten.\n/// Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll rewriter\n///  - Statement is runnable via PG::RunQuery\n/// Query expectations are\n///   Input Query:", "mimetype": "text/plain", "start_char_idx": 26732, "end_char_idx": 28223, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b01abded-a851-48ca-b3fb-3b141897be44": {"__data__": {"id_": "b01abded-a851-48ca-b3fb-3b141897be44", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "afbd1185-e1e7-4592-b931-36f87f28e7bd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4c282d95efc47410ab610b2f4aee44e5f93055bb692bfb5fc9ab01278152655b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "72a24c5d-0af2-46d2-8de4-2708f0a5c6d0", "node_type": "1", "metadata": {}, "hash": "0fcb29f358bae55b7a9631ed85431fb968572e56f4b77332611833bdfe683b2e", "class_name": "RelatedNodeInfo"}}, "text": "///     delete from test1 where foo_col = 1;\n///   Output Query:\n///     delete from test1 where (2 * foo_col) = 1;\nPG_TEST_F(TestDDMRewriter, TestRewriteDelete) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"delete from test1 where foo_col = 1;\";\n  auto expected_q_str = \"delete from test1 where (2 * foo_col) = 1;\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  pg::RunQuery(input_q_str);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 28224, "end_char_idx": 29695, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "72a24c5d-0af2-46d2-8de4-2708f0a5c6d0": {"__data__": {"id_": "72a24c5d-0af2-46d2-8de4-2708f0a5c6d0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b01abded-a851-48ca-b3fb-3b141897be44", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "85d14aa480f2f60cefb0355b0aaf9cf6efd007241175b5216429ac20e808160c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7eddc888-13f9-4af8-98f4-4575e10f18c2", "node_type": "1", "metadata": {}, "hash": "e72f3760053f30a2043620c2f2191adcf3a6a60906e171361b9473ac0a1aaf0b", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that a DELETE statement with a DDM protected column which includes\n/// lookup table is rewritten.\n/// Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll rewriter\n/// Query expectations are\n///   Input Query:\n///     DELETE FROM test1 where far_col = 1;\n///   Output Query:\n///     DELETE FROM test1 WHERE\n///            (CASE WHEN far_col \"IN (SELECT b FROM lookup) THEN far_col + 5\n///             ELSE NULL\n///             END) = 1;", "mimetype": "text/plain", "start_char_idx": 29697, "end_char_idx": 30142, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7eddc888-13f9-4af8-98f4-4575e10f18c2": {"__data__": {"id_": "7eddc888-13f9-4af8-98f4-4575e10f18c2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "72a24c5d-0af2-46d2-8de4-2708f0a5c6d0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "94f62f45f6ffd61f1ba7ecef7b9f950f9e679e142abca0472766c876ea7c7704", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a79f7328-7049-4159-adce-057f2ec9907b", "node_type": "1", "metadata": {}, "hash": "a3df4fd3efee338ac76d9d2e6f4abe30d177167392d862be015495668a5fb9f3", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteLookupDelete)", "mimetype": "text/plain", "start_char_idx": 30143, "end_char_idx": 30194, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a79f7328-7049-4159-adce-057f2ec9907b": {"__data__": {"id_": "a79f7328-7049-4159-adce-057f2ec9907b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7eddc888-13f9-4af8-98f4-4575e10f18c2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "24d628e066915a93483449bfb1670a026558e5ac9e01d76080f534a3ee672d8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5b3c450b-a9c7-45ad-8c04-54718075daf2", "node_type": "1", "metadata": {}, "hash": "e4d57a3a1e5be6d80c62cb41076570dfe655ba916b5d2ea1c485972030c97256", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"DELETE FROM test1 WHERE far_col = 1;\";\n  auto expected_q_str =\n      \"DELETE FROM test1 WHERE (CASE WHEN far_col IN \"\n      \"(SELECT b FROM lookup) THEN far_col + 5 ELSE NULL END) = 1;\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  /// Statement is not runnable via PG::RunQuery because it hits:\n  /// \"error:  cannot handle unplanned sub-select\"\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 30195, "end_char_idx": 31670, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5b3c450b-a9c7-45ad-8c04-54718075daf2": {"__data__": {"id_": "5b3c450b-a9c7-45ad-8c04-54718075daf2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a79f7328-7049-4159-adce-057f2ec9907b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8b7382a2d964fd15fcdce3c7ddc19d7a4d7af34d903da6599e547e0bb013af03", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23fdac87-ef32-4424-b96b-5389498e3144", "node_type": "1", "metadata": {}, "hash": "c46959a548cfcb00c282016b0e41eb427205de6b06b9aca009e4c63a300ad0fe", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that a UPDATE statement is rewritten.\n/// Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll rewriter\n/// Query expectations are\n///   Input Query:\n///     update test1 set foo_col=3 where foo_col = 1;\n///   Output Query:\n///     update test1 set foo_col = 3 where 2 * foo_col = 1;", "mimetype": "text/plain", "start_char_idx": 31672, "end_char_idx": 31964, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "23fdac87-ef32-4424-b96b-5389498e3144": {"__data__": {"id_": "23fdac87-ef32-4424-b96b-5389498e3144", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5b3c450b-a9c7-45ad-8c04-54718075daf2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "38b06ec5afaf58964a7455c1ba29353609060ba1e0d3473c4b91de65d266eb7c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b7aa1d8-1c1f-4882-9e2d-2d30972c8480", "node_type": "1", "metadata": {}, "hash": "0cf63ade675ea8e466bc07bb3baed7485926353d355bb124eeea1141ab6d0a8c", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdate) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"update test1 set foo_col=3 where foo_col = 1;\";\n  auto expected_q_str = \"update test1 set foo_col = 3 where 2 * foo_col = 1;\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);\n}\n\n/// Tests that an UPDATE statement with a DDM protected column which includes\n/// lookup table is rewritten.\n/// Verifies\n///  - DDM Rewriter", "mimetype": "text/plain", "start_char_idx": 31965, "end_char_idx": 33452, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b7aa1d8-1c1f-4882-9e2d-2d30972c8480": {"__data__": {"id_": "3b7aa1d8-1c1f-4882-9e2d-2d30972c8480", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "23fdac87-ef32-4424-b96b-5389498e3144", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "81cb4ba1076028049bd49dc8b6ace42957a31167320c58ce243fa0adad2137e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "71449a2c-c57a-41a3-95ba-f747ae9ab95f", "node_type": "1", "metadata": {}, "hash": "c7f313f51cf5a65a80043e490d576c3e1a8cfd8e3312b1d3ddd2a2b366636d28", "class_name": "RelatedNodeInfo"}}, "text": "///  - QueryRewriteAll rewriter\n/// Query expectations are\n///   Input Query:\n///     update test1 set far_col=3 where far_col = 1;\n///   Output Query:\n///     update test1 set far_col = 3 where\n///            (CASE WHEN far_col \"IN (SELECT b FROM lookup) THEN far_col + 5\n///             ELSE NULL\n///             END) = 1;", "mimetype": "text/plain", "start_char_idx": 33453, "end_char_idx": 33777, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "71449a2c-c57a-41a3-95ba-f747ae9ab95f": {"__data__": {"id_": "71449a2c-c57a-41a3-95ba-f747ae9ab95f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b7aa1d8-1c1f-4882-9e2d-2d30972c8480", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "688f4d180c5e6fe0cad596d2faf4518fa0ff4c7bfc67a9fae7a7341246385b87", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb0c773f-34d7-46f0-be12-d64c552589d7", "node_type": "1", "metadata": {}, "hash": "c0c36a24423784a1ad8ef8e822699b2e812f0c42c09148bdd5b439163e297670", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteLookupUpdate) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"update test1 set far_col=3 where far_col = 1;\";\n  auto expected_q_str =\n      \"update test1 set far_col = 3 where (CASE WHEN far_col \"\n      \"IN (SELECT b FROM lookup) THEN far_col + 5 ELSE NULL END) = 1;\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 33778, "end_char_idx": 35208, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bb0c773f-34d7-46f0-be12-d64c552589d7": {"__data__": {"id_": "bb0c773f-34d7-46f0-be12-d64c552589d7", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "71449a2c-c57a-41a3-95ba-f747ae9ab95f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "935227bb19c2c46daf4ad04e9f7ad53c67176271ff667df8b5dc0e1cd9efd987", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7d1f4297-074e-4a70-a81a-0534b9345e79", "node_type": "1", "metadata": {}, "hash": "b6e475b3535b7f8835c25374d8e37efd963c636c2fc8b5f4ca726a299314244f", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that a UPDATE statement with DDM relation in JOIN condition is\n/// rewritten Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll rewriter\n/// Query expectations are\n///   Input Query:\n///     update test1 set foo_col=3 where foo_col = 1;\n///   Output Query:\n///     update test1 set foo_col = 3 where 2 * foo_col = 1;", "mimetype": "text/plain", "start_char_idx": 35210, "end_char_idx": 35537, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7d1f4297-074e-4a70-a81a-0534b9345e79": {"__data__": {"id_": "7d1f4297-074e-4a70-a81a-0534b9345e79", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bb0c773f-34d7-46f0-be12-d64c552589d7", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b23068a285db65bac838bcd6508f0567df7fc7a9197fbafe9ee1f804eed3b81c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5dde757c-c8f1-4bb6-8144-d87e1b58791d", "node_type": "1", "metadata": {}, "hash": "e5bdd76eebc84b57dee6f560846ef31543a5f8144a1fddee03ee84e296e19150", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdateWithJOIN)", "mimetype": "text/plain", "start_char_idx": 35538, "end_char_idx": 35591, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5dde757c-c8f1-4bb6-8144-d87e1b58791d": {"__data__": {"id_": "5dde757c-c8f1-4bb6-8144-d87e1b58791d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7d1f4297-074e-4a70-a81a-0534b9345e79", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5f2766208e4176d7043cccfb2df09800416049a1f338f374153435cd6219d903", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6335eb88-0513-4c14-834a-2d9a16db3130", "node_type": "1", "metadata": {}, "hash": "323072868e9835a02d69a0b3449b36a6ec583977161fe9a0dfc56ba5f8ec8f89", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n\n  auto input_q_str = R\"SQL(\n    UPDATE target_table_dp53981 SET val = 'XXXX' FROM source_table_dp53981 s\n    JOIN target_table_dp53981 t ON s.id = t.id;\n    )SQL\";\n\n  auto expected_q_str = R\"SQL(\n    UPDATE target_table_dp53981 SET val = 'XXXX' FROM source_table_dp53981 s\n    JOIN target_table_dp53981 t ON s.id = t.id + 10;\n    )SQL\";\n\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 35592, "end_char_idx": 37082, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6335eb88-0513-4c14-834a-2d9a16db3130": {"__data__": {"id_": "6335eb88-0513-4c14-834a-2d9a16db3130", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5dde757c-c8f1-4bb6-8144-d87e1b58791d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9934b06e77a1f4f638452dd6dd73a3b55c2f5466a56357f70eaab5665b18bce4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bf296ad4-4b18-4638-b3a8-583b33f55ac8", "node_type": "1", "metadata": {}, "hash": "000138e15dd915424921cdfea68e593574bfbbc54ad524088c3625c3852170c9", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that a UPDATE statement is rewritten. When there are complex OpExpr\n/// In the target.\n/// Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll rewriter\n/// Query expectations are\n///   Input Query:\n///     update test1 set foo_col= bar_col where foo_col != bar_col;\n///   Output Query:\n///     update test1 set foo_col = 10 * bar_col\n///       where 2 * foo_col != 10 * bar_col;", "mimetype": "text/plain", "start_char_idx": 37084, "end_char_idx": 37472, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bf296ad4-4b18-4638-b3a8-583b33f55ac8": {"__data__": {"id_": "bf296ad4-4b18-4638-b3a8-583b33f55ac8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6335eb88-0513-4c14-834a-2d9a16db3130", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9240712c1400324de209f74a2a4b7e53a3536f77a69445b31f4b9d3510614c03", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6a7688e9-dc2a-4cfb-b1d3-35e449976aca", "node_type": "1", "metadata": {}, "hash": "b8c6e94571cd2e4ba638f5bce5cab32339c6812dd7476ca36e58a0275189b35c", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdateOpExprTarget) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str =\n      \"update test1 set foo_col= bar_col where foo_col != bar_col;\";\n  auto expected_q_str =\n      \"update test1 set foo_col = 10 * bar_col where 2 * foo_col != 10 * \"\n      \"bar_col;\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);\n}\n\n/// Tests that a UPDATE statement is rewritten. When there are nested", "mimetype": "text/plain", "start_char_idx": 37473, "end_char_idx": 38958, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6a7688e9-dc2a-4cfb-b1d3-35e449976aca": {"__data__": {"id_": "6a7688e9-dc2a-4cfb-b1d3-35e449976aca", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bf296ad4-4b18-4638-b3a8-583b33f55ac8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "81a01bba461d8f6081dc1acb4d02a6a50e563fe2ca2dbee694f99a05c2737d89", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc26d667-aad5-478c-a709-6ed6a565658e", "node_type": "1", "metadata": {}, "hash": "59bcec57b5e196fda968fbc50d1e158646b81c4c95e6a52ccb5f720a1b6d5d85", "class_name": "RelatedNodeInfo"}}, "text": "/// references.\n/// Verifies\n///  - DDM Rewriter\n/// Query expectations are\n///   Input Query:\n///     update test1 set foo_col=1 where foo_col = ( select max(foo_col) from\n///      test1);\n///   Output Query:\n///     update test1 set foo_col = 1 where 2 * foo_col = (select\n///                     max(foo_col) from (test1_mask) as test1);", "mimetype": "text/plain", "start_char_idx": 38959, "end_char_idx": 39299, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fc26d667-aad5-478c-a709-6ed6a565658e": {"__data__": {"id_": "fc26d667-aad5-478c-a709-6ed6a565658e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6a7688e9-dc2a-4cfb-b1d3-35e449976aca", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0be83f1e90b32850b22bb6edd7485cabbc1caf92c7a68507e2fcb2d2e94e1f5e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e39fa721-333d-4f1f-822e-7ab7a298bb12", "node_type": "1", "metadata": {}, "hash": "e66c0c1e8d2659d3627211db1e3e7e33ad6d02a662d193a9803d98dff319fc92", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdateNestedReference) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str =\n      \"update test1 set foo_col=1 where foo_col = ( select max(foo_col) from \"\n      \"test1);\";\n\n  auto expected_q_str =\n      (boost::format(\"update test1 set foo_col = 1 where 2 * foo_col = (select \"\n                     \"max(foo_col) from (%s) as test1);\") %\n       TEST1_MASK)\n          .str();\n\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  // create_entire_apg_pushdown_query_tree\n  // does not work with PG Test, resulting in errors not present\n  // with external RAFF testing.  Skip QueryRewriteAll for this case.\n\n  SetUserId(current_id);\n}\n\n/// Tests that a UPDATE statement is rewritten. When the mask is multi-input.\n/// Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll rewriter\n/// Query expectations are", "mimetype": "text/plain", "start_char_idx": 39300, "end_char_idx": 40784, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e39fa721-333d-4f1f-822e-7ab7a298bb12": {"__data__": {"id_": "e39fa721-333d-4f1f-822e-7ab7a298bb12", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc26d667-aad5-478c-a709-6ed6a565658e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f25e5c448502a98337490e5714c00c9783158b5d5b511b6c16cc98e6768ce6af", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ffd1ab51-27a9-447f-a887-dd3cf78e545b", "node_type": "1", "metadata": {}, "hash": "f838459dfeba4189112c1af57fa8b48d3ca840ff0c99fffcc811b2f799e34b9b", "class_name": "RelatedNodeInfo"}}, "text": "///   Input Query:\n///     update test4 set foo_col=3 where foo_col = 1;\n///   Output Query:\n///     update test4 set foo_col = 3 where 10 * foo_col * bar_col = 1;", "mimetype": "text/plain", "start_char_idx": 40785, "end_char_idx": 40948, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ffd1ab51-27a9-447f-a887-dd3cf78e545b": {"__data__": {"id_": "ffd1ab51-27a9-447f-a887-dd3cf78e545b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e39fa721-333d-4f1f-822e-7ab7a298bb12", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d5a59f4e4740f5c29c4cb61169b633410bcde49d39781aa54c72a1ebb6e200af", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "161a910d-7e78-477c-b2e4-a4acaea34df4", "node_type": "1", "metadata": {}, "hash": "6f690f00c23ab7234d0e8293e0c1d8cdc438503ca71fe712561b50e61d29f953", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdateMultiInputMask) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"update test4 set foo_col=3 where foo_col = 1;\";\n  auto expected_q_str =\n      \"update test4 set foo_col = 3 where 10 * foo_col * bar_col = 1;\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);\n}\n\n/// Tests that a UPDATE statement is rewritten. When the mask is Nested.\n/// Verifies\n///  - DDM Rewriter", "mimetype": "text/plain", "start_char_idx": 40949, "end_char_idx": 42431, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "161a910d-7e78-477c-b2e4-a4acaea34df4": {"__data__": {"id_": "161a910d-7e78-477c-b2e4-a4acaea34df4", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ffd1ab51-27a9-447f-a887-dd3cf78e545b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d871562db5e173a209804ca2c5ead5b6549cd8ad6d271d4f896a382c57fec91a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "25b43b5e-7201-4dc7-b2bf-f4858ecf5c89", "node_type": "1", "metadata": {}, "hash": "b7de6079025394998a35c0f6323d9772e361773fee1641fcc91436719083ef66", "class_name": "RelatedNodeInfo"}}, "text": "///  - QueryRewriteAll rewriter\n/// Query expectations are\n///   Input Query:\n///     update test1 set foo_col=3 where exists (select test2.foo_col from\n///      test2 where test2.bar_col = test1.foo_col limit 1);\n///   Output Query:\n///     update test1 set foo_col=3 where exists (select test2.foo_col from\n///      test2 where test2.bar_col = (2 * test1.foo_col) limit 1);", "mimetype": "text/plain", "start_char_idx": 42432, "end_char_idx": 42807, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "25b43b5e-7201-4dc7-b2bf-f4858ecf5c89": {"__data__": {"id_": "25b43b5e-7201-4dc7-b2bf-f4858ecf5c89", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "161a910d-7e78-477c-b2e4-a4acaea34df4", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0b3faa9ad37c42c99f406685d96e4b65ae2be90788d23b15084a93db27a59a85", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "112b7b3e-292c-43c1-9e02-063c705eb762", "node_type": "1", "metadata": {}, "hash": "3e4440c17f2cbd80edc0af1af8e02b0e953f62a0375fa313ecd5a0564dea85ee", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdateNestedMask) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str =\n      \"update test1 set foo_col=3 where exists (select test2.foo_col from \"\n      \"test2 where test2.bar_col = test1.foo_col limit 1);\";\n  auto expected_q_str =\n      \"update test1 set foo_col=3 where exists (select test2.foo_col from \"\n      \"test2 where test2.bar_col = (2 * test1.foo_col) limit 1);\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  // create_entire_apg_pushdown_query_tree\n  // does not work with PG Test, resulting in errors not present\n  // with external RAFF testing.  Skip QueryRewriteAll for this case.\n  SetUserId(current_id);\n}\n\n/// Tests that a UPDATE statement is rewritten. When the mask is Nested.\n/// Verifies\n///  - DDM Rewriter\n/// Query expectations are\n///   Input Query:", "mimetype": "text/plain", "start_char_idx": 42808, "end_char_idx": 44272, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "112b7b3e-292c-43c1-9e02-063c705eb762": {"__data__": {"id_": "112b7b3e-292c-43c1-9e02-063c705eb762", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "25b43b5e-7201-4dc7-b2bf-f4858ecf5c89", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1e969d4fe1565fb4b61e07be861b0519aae1c39abdae0c223b8e157dcca97a40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c0888e7b-ebc6-40e2-9dc2-e37f5a8f29d5", "node_type": "1", "metadata": {}, "hash": "2e6337be270cb56533ddc511bbeb9cea25445f4bbf0d1f30956bdaa96057621c", "class_name": "RelatedNodeInfo"}}, "text": "///     update test4 set foo_col=3 where exists (select test2.foo_col from\n///      test2 where test2.bar_col = test4.foo_col limit 1);\n///   Output Query:\n///     update test4 set foo_col=3 where exists (select test2.foo_col from\n///      test2 where test2.bar_col = (10 * test4.foo_col * test4.bar_col)\n///      limit 1);", "mimetype": "text/plain", "start_char_idx": 44273, "end_char_idx": 44596, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c0888e7b-ebc6-40e2-9dc2-e37f5a8f29d5": {"__data__": {"id_": "c0888e7b-ebc6-40e2-9dc2-e37f5a8f29d5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "112b7b3e-292c-43c1-9e02-063c705eb762", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a0bb3d96f3eaff44f947a11232f0d278cdf6664d64c32a5ba470d601891aa025", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "20a01cb8-dafe-4ab3-a9fe-17eb5e479c98", "node_type": "1", "metadata": {}, "hash": "203115746d4569fb2a272add01e94a169484679a46d067e85ba0018a58955fc2", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteUpdateNestedMultiMask) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str =\n      \"update test4 set foo_col=3 where exists (select test2.foo_col from \"\n      \"test2 where test2.bar_col = test4.foo_col limit 1);\";\n  auto expected_q_str =\n      \"update test4 set foo_col=3 where exists (select test2.foo_col from \"\n      \"test2 where test2.bar_col = (10 * test4.foo_col * test4.bar_col) limit \"\n      \"1);\";\n  auto input_q_list = pg::Analyze(pg::Parse(input_q_str));\n  auto input_q = reinterpret_cast<Query*>(linitial(input_q_list));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  // create_entire_apg_pushdown_query_tree\n  // does not work with PG Test, resulting in errors not present\n  // with external RAFF testing.  Skip QueryRewriteAll for this case.\n\n  SetUserId(current_id);\n}\n\n/// Tests that a CREATE Table AS statement is rewritten correctly.\n/// Verifies\n///  - DDM Rewriter", "mimetype": "text/plain", "start_char_idx": 44597, "end_char_idx": 46070, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "20a01cb8-dafe-4ab3-a9fe-17eb5e479c98": {"__data__": {"id_": "20a01cb8-dafe-4ab3-a9fe-17eb5e479c98", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c0888e7b-ebc6-40e2-9dc2-e37f5a8f29d5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3e334bb0b887dd5ebbd6ee44c6f85897b608e8a73d20ee96b545b8832841a790", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cfb21aae-26a7-4235-b96a-c9c5dc9a9c82", "node_type": "1", "metadata": {}, "hash": "20c8ee8851f9382d85cbaa8101e1263bac7d8175714dcee257edda9d56b672c9", "class_name": "RelatedNodeInfo"}}, "text": "///  - QueryRewriteAll Rewriter.\n/// Query expectations are\n///   Input Query:\n///     create table test3 as (select foo_col from test1);\n///   Output Query:\n///     create table test3 as (select foo_col from (test1_mask) as test1);", "mimetype": "text/plain", "start_char_idx": 46071, "end_char_idx": 46303, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cfb21aae-26a7-4235-b96a-c9c5dc9a9c82": {"__data__": {"id_": "cfb21aae-26a7-4235-b96a-c9c5dc9a9c82", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "20a01cb8-dafe-4ab3-a9fe-17eb5e479c98", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "00fad2b8b319157ba0d91c9607351914a8699bb8a4b847199aa2bd226a4d284f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "38604e18-3413-48ff-9e63-fad1b2cc1d80", "node_type": "1", "metadata": {}, "hash": "1e05cdfe97acf972cf4482314116a1af63b652e567cb74f5926066eac2e63eb5", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteCreateTableAs) {\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str = \"create table test3 as (select foo_col from test1);\";\n  auto expected_q_str =\n      boost::format(\n          \"create table test3 as (select foo_col from %s as test1);\") %\n      TEST1_MASK;\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str.str()))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  pg::RunQuery(input_q_str);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 46304, "end_char_idx": 47751, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "38604e18-3413-48ff-9e63-fad1b2cc1d80": {"__data__": {"id_": "38604e18-3413-48ff-9e63-fad1b2cc1d80", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cfb21aae-26a7-4235-b96a-c9c5dc9a9c82", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "15099cc7b97cac325bcd065d1564183d09890ec8cefcc3d20e13f1c0ccf172e1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c05f7c6a-bffd-4603-8740-ac4795dc2435", "node_type": "1", "metadata": {}, "hash": "9e1718c0280f5844dad8ecc6c7ae6a7cf6d514cf29c0643d3681bbb7faf96553", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that a  join *to* a table which has DDM policies attached is rewritten\n/// appropriately.\n/// Verifies\n///  - DDM Rewriter\n///  - QueryRewriteAll Rewriter.\n/// Query expectations are\n///   Input Query:\n///     select test1.foo_col from test2 join test1 on test1.foo_col =\n///      test2.foo_col;\n///   Output Query:\n///     select test1.foo_col from test2 join test1_mask\n///       as test1 on test1.foo_col = test2.foo_col;", "mimetype": "text/plain", "start_char_idx": 47753, "end_char_idx": 48187, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c05f7c6a-bffd-4603-8740-ac4795dc2435": {"__data__": {"id_": "c05f7c6a-bffd-4603-8740-ac4795dc2435", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "38604e18-3413-48ff-9e63-fad1b2cc1d80", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8b0f591208759009aa834e9b4c23d01afe600fdf445d86b016e432cc30fc6e49", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9db15c16-fa78-45cd-86d9-98f5a2492fbf", "node_type": "1", "metadata": {}, "hash": "7164f9261cc480540c114840e00750ceb79adb539ff134679c5efb0e5fb9560c", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteReverseJoin)", "mimetype": "text/plain", "start_char_idx": 48188, "end_char_idx": 48238, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9db15c16-fa78-45cd-86d9-98f5a2492fbf": {"__data__": {"id_": "9db15c16-fa78-45cd-86d9-98f5a2492fbf", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c05f7c6a-bffd-4603-8740-ac4795dc2435", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2f43ebe281a648b75facb9d40fcee8891e06fdc0acc7cc39bf5b711a46a1d9ca", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4721c6bd-039d-48df-a5d5-609a02668a8e", "node_type": "1", "metadata": {}, "hash": "d515c11e68647a5af3f885c74524b553e6410d1d2b2b59534960939e468b8445", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q_str =\n      \"select test1.foo_col from test2 join test1 on test1.foo_col = \"\n      \"test2.foo_col;\";\n  auto expected_q_str = boost::format(\n                            \"select test1.foo_col from test2 join %s as \"\n                            \"test1 on test1.foo_col = test2.foo_col;\") %\n                        TEST1_MASK;\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_str.str()))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 48239, "end_char_idx": 49733, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4721c6bd-039d-48df-a5d5-609a02668a8e": {"__data__": {"id_": "4721c6bd-039d-48df-a5d5-609a02668a8e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9db15c16-fa78-45cd-86d9-98f5a2492fbf", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a88f18d3d840a43bf670d47835656253aad898eff18bd52fcf6359b65dba38cd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fdd09bcf-b81a-4664-bc21-f9e1b151183b", "node_type": "1", "metadata": {}, "hash": "36b7c275ba8868a56c2d07eee5a42e41bdab7769127a9f835919fd976b678b1c", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that DDM Does not modify subquery expressions which are used by\n/// Omni. This test should be considered an invariant of DDM.\nPG_TEST_F(TestDDMRewriter, TestDDMDoesNotModifySubQueries) {\n  auto input_q_str =\n      \"SELECT * \"\n      \"FROM (\"\n      \"  SELECT * FROM (\"\n      \"    SELECT t2.a\"\n      \"    FROM t AS t2\"\n      \"    WHERE  (t2.a = 5)\"\n      \"  )\"\n      \");\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(input_q, false /* log_applied_policy */).rewrite;\n  EXPECT_TRUE(input_q == rewritten_input_q) << \"ddm rewriter replaced query\"\n                                               \"pointer.\";\n  auto old_rte = reinterpret_cast<RangeTblEntry*>(linitial(input_q->rtable));\n  auto new_rte =\n      reinterpret_cast<RangeTblEntry*>(linitial(rewritten_input_q->rtable));\n  EXPECT_TRUE(old_rte->rtekind == RTE_SUBQUERY) << \"expected a subquery.\";\n  EXPECT_TRUE(old_rte->subquery != nullptr) << \"expected non-null subquery\";\n  EXPECT_TRUE(old_rte->subquery == new_rte->subquery)\n      << \"expected subquery not to be modified.\";\n}\n\n/// Tests that a basic SQL SELECT statement with a mask over SUPER column will\n/// be rewritten correctly. Verifies\n/// - DDM Rewriter\n/// - QueryRewriteAll rewriter\n/// - SwapColRefMutator\n/// Query expectations are\n/// Input Query:\n///   \"SELECT * from table_super;\"\n/// Rewritten Query:\n///   \"SELECT * FROM (mask_super) AS table_super;\"", "mimetype": "text/plain", "start_char_idx": 49735, "end_char_idx": 51219, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "fdd09bcf-b81a-4664-bc21-f9e1b151183b": {"__data__": {"id_": "fdd09bcf-b81a-4664-bc21-f9e1b151183b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4721c6bd-039d-48df-a5d5-609a02668a8e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "43ce5a4db0e12ef978285a0263630e9107947f8003cb7c8eb957b2d93fe8ebb8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3227b8d4-6e5e-47b6-802d-5d894eecc858", "node_type": "1", "metadata": {}, "hash": "9b05b54c2be740182d78fd07579766a6cbfd5fa159ae6435f1d5248c0369dcbc", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestRewriteSimpleSelectSuper)", "mimetype": "text/plain", "start_char_idx": 51220, "end_char_idx": 51276, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3227b8d4-6e5e-47b6-802d-5d894eecc858": {"__data__": {"id_": "3227b8d4-6e5e-47b6-802d-5d894eecc858", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdd09bcf-b81a-4664-bc21-f9e1b151183b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e0d2e61d166502337624251cc427c28c220ba6073abf7eb9871cc4c3aece8687", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4eaf2d6f-f3fd-4023-b9ff-6c46d52bb7b2", "node_type": "1", "metadata": {}, "hash": "532db09fef504daa8595dbc76bce8500bc54cf146a324b59d9135d6f81df501c", "class_name": "RelatedNodeInfo"}}, "text": "{\n  // Expected rewritten super masked expression as subquery.\n  auto MASK_SUPER =\n      \"(SELECT s, (s.version + 1.0)::FLOAT AS out FROM table_super)\";\n  pg::RunQuery(\"CREATE TABLE table_super (s SUPER, out FLOAT);\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp_super WITH (s SUPER) \"\n      \"USING ( (s.version + 1.0)::FLOAT );\");\n  pg::RunQuery(\"GRANT ALL ON TABLE table_super to u1re;\");\n  // Attach mp_super to PUBLIC with default priority on out column using s\n  // column.\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp_super ON table_super (out) \"\n      \"USING (s) TO PUBLIC;\");\n\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from table_super;\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto expected_q_fmt =\n      boost::format(\"SELECT * FROM %s AS table_super;\") % MASK_SUPER;\n  auto expected_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(expected_q_fmt.str()))));\n  auto rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n  EXPECT_TRUE(rewritten_q_omni == expected_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);", "mimetype": "text/plain", "start_char_idx": 51277, "end_char_idx": 52779, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4eaf2d6f-f3fd-4023-b9ff-6c46d52bb7b2": {"__data__": {"id_": "4eaf2d6f-f3fd-4023-b9ff-6c46d52bb7b2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3227b8d4-6e5e-47b6-802d-5d894eecc858", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2151e0ee42054c09c3e4dd9ee510412b339edf4c4a8079605d4b9e8ec476cf26", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "562688c1-d9c0-4f51-abbb-d5abf00cb94e", "node_type": "1", "metadata": {}, "hash": "c9a276547671831bb01b764ea8e94f771bc0d2fa2322106b906811c64b8a992f", "class_name": "RelatedNodeInfo"}}, "text": "rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n\n  rewritten_q_omni =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  EXPECT_TRUE(expected_q_omni == rewritten_q_omni)\n      << GetQueryNotMatchedErrorMessage(expected_q_omni, rewritten_q_omni);\n  SetUserId(current_id);\n  pg::RunQuery(\"DROP TABLE table_super;\");\n  pg::RunQuery(\"DROP MASKING POLICY mp_super;\");\n}", "mimetype": "text/plain", "start_char_idx": 52783, "end_char_idx": 53226, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "562688c1-d9c0-4f51-abbb-d5abf00cb94e": {"__data__": {"id_": "562688c1-d9c0-4f51-abbb-d5abf00cb94e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4eaf2d6f-f3fd-4023-b9ff-6c46d52bb7b2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "38bc6ff1d2a5df64e64ab9c995cc0e20e6c82e75080e7ced4cd2e44967a6ab71", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b3710c6f-dbcd-49e4-94a9-4a684bbb16ea", "node_type": "1", "metadata": {}, "hash": "c32c49ab9b7b31455dcb1582c9e77556208b98a7e0411baacd0dbf22fd323d38", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestDDMPermissionsPropagation)", "mimetype": "text/plain", "start_char_idx": 53228, "end_char_idx": 53285, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b3710c6f-dbcd-49e4-94a9-4a684bbb16ea": {"__data__": {"id_": "b3710c6f-dbcd-49e4-94a9-4a684bbb16ea", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "562688c1-d9c0-4f51-abbb-d5abf00cb94e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7aa262c2d4481f567e8591a35b4207fd71ee7cfdd784c04b1b3bca1f75505af8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0537cbbf-af0a-4f2c-840c-4f5c332ab9b1", "node_type": "1", "metadata": {}, "hash": "620a613be2ea80aabef97f1668e1140cdef641ec5af934c00d2730db029d9b00", "class_name": "RelatedNodeInfo"}}, "text": "{\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n\n  //  Negative case: Validate that an unmasked table has\n  //  0. requiredPerms != 0\n  //  1. ddm was not applied.\n  //  2. that the query has requiredPerms != 0 post QueryRewriteAll\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from t;\"))));\n  auto rte = reinterpret_cast<RangeTblEntry*>(linitial(input_q->rtable));\n  EXPECT_TRUE(rte->requiredPerms != 0)\n      << \"requiredPerms check not present pre-ddm\";\n  auto rewrite_result =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */);\n  EXPECT_FALSE(rewrite_result.ddm_applied)\n      << \"DDM should not have been applied on unmasked table.\";\n  auto qra_result = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(input_q, NULL, rcs, false)));\n  rte = reinterpret_cast<RangeTblEntry*>(linitial(qra_result->rtable));\n  EXPECT_TRUE(rte->requiredPerms == ACL_SELECT)\n      << \"requiredPerms should contain select.\";\n\n  // Validate that a basic select from a masked table propagates permissions.\n  ValidateDDMPropagationForMaskedTable(\"SELECT * from test1;\", rcs);\n\n  // Validate propagation when both masked and unmasked tables are selected.\n  ValidateDDMPropagationForMaskedTable(\n      \"SELECT (SELECT count(1) FROM test1), a from t;\", rcs);\n\n  // Same validation for insert queries.", "mimetype": "text/plain", "start_char_idx": 53286, "end_char_idx": 54762, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0537cbbf-af0a-4f2c-840c-4f5c332ab9b1": {"__data__": {"id_": "0537cbbf-af0a-4f2c-840c-4f5c332ab9b1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b3710c6f-dbcd-49e4-94a9-4a684bbb16ea", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "66bf1144e502110764646c4bfea1b325dec8a40a4b02fda392fd3ffb86bafaad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3b97c9fc-480d-4928-b0b5-25f4f702dca0", "node_type": "1", "metadata": {}, "hash": "3fdebb66c85bc15ab18c52c8f60fe37ee37d53dd4af5ee61e38172acb45ab846", "class_name": "RelatedNodeInfo"}}, "text": "ValidateDDMPropagationForMaskedTable(\n      \"INSERT INTO test1 VALUES (1,2,3,4,5,6);\", rcs);\n\n  // Same for update Queries\n  ValidateDDMPropagationForMaskedTable(\"UPDATE test1 SET foo_col = bar_col\",\n                                       rcs);\n\n  // same for Delete Queries.\n  ValidateDDMPropagationForMaskedTable(\"DELETE test1 WHERE foo_col = bar_col\",\n                                       rcs);\n  SetUserId(current_id);\n}", "mimetype": "text/plain", "start_char_idx": 54765, "end_char_idx": 55191, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3b97c9fc-480d-4928-b0b5-25f4f702dca0": {"__data__": {"id_": "3b97c9fc-480d-4928-b0b5-25f4f702dca0", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0537cbbf-af0a-4f2c-840c-4f5c332ab9b1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "caf4feae37fff926fede062b032f2c2473c36ccc1e693f8bb9325e6156d433c3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6e1867b5-d4bf-430f-9fda-7e0830be3f8f", "node_type": "1", "metadata": {}, "hash": "089e27de4de5cc645f41822bced9663033892f4cae5419906790603454fb8c36", "class_name": "RelatedNodeInfo"}}, "text": "/// Tests that DDM Does not modify nodes which are not modified.\n/// This test should be considered an invariant of DDM.\nPG_TEST_F(TestDDMRewriter, TestDDMDoesNotModifyNodes) {\n  auto input_q_str =\n      \"SELECT * \"\n      \"FROM (\"\n      \"  SELECT * FROM (\"\n      \"    SELECT t2.a\"\n      \"    FROM t AS t2\"\n      \"    WHERE  (t2.a = 5)\"\n      \"  )\"\n      \");\";\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(input_q_str))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(input_q, true /* log_applied_policy */).rewrite;\n  EXPECT_TRUE(input_q->targetList == rewritten_input_q->targetList)\n      << \"ddm rewriter replaced targetList pointer.\";\n  EXPECT_TRUE(linitial(input_q->targetList) ==\n              linitial(rewritten_input_q->targetList))\n      << \"ddm rewriter replaced targetEntry pointer\";\n}\n\n// Simple test that checks that if an attachment to SUPER paths is read during\n// the query execution, then the query is aborted with an error. See more tests\n// cases in RAFF.", "mimetype": "text/plain", "start_char_idx": 55193, "end_char_idx": 56206, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6e1867b5-d4bf-430f-9fda-7e0830be3f8f": {"__data__": {"id_": "6e1867b5-d4bf-430f-9fda-7e0830be3f8f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3b97c9fc-480d-4928-b0b5-25f4f702dca0", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9782d39aa02d94a138a915ebe7aaf733d78518b548121169b95ee3fc7e1a5bf3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "58fa609a-766b-4394-9190-03fa4dd1ab86", "node_type": "1", "metadata": {}, "hash": "cb860c843135e8a9b00c2ded0df54c5b9134f3885070954f8bf479e4c8ecf65b", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMRewriter, TestSUPERPathsDowngradeProtection)", "mimetype": "text/plain", "start_char_idx": 56207, "end_char_idx": 56268, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "58fa609a-766b-4394-9190-03fa4dd1ab86": {"__data__": {"id_": "58fa609a-766b-4394-9190-03fa4dd1ab86", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6e1867b5-d4bf-430f-9fda-7e0830be3f8f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "39f96feecece173895947018577a8f5f1f97348a844d82c6c1a12d4eafdf0403", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "288f6a9a-a4a6-4fc1-8904-831cd3831cab", "node_type": "1", "metadata": {}, "hash": "4098fe6363f6550be5377983abc1332e3e81413c1165e8bf4e45098a2b2be958", "class_name": "RelatedNodeInfo"}}, "text": "{\n  bool guc_old = gconf_ddm_enable_over_super_paths;\n  gconf_ddm_enable_over_super_paths = false;\n\n  pg::RunQuery(\"CREATE TABLE table_dp49817 (a int, b float, c text)\");\n  pg::RunQuery(\n      \"CREATE MASKING POLICY mp_dp49817 \"\n      \"WITH(a int, b float, c text) USING (a, b, c);\");\n  pg::RunQuery(\"GRANT ALL ON TABLE table_dp49817 to u1re;\");\n  pg::RunQuery(\n      \"ATTACH MASKING POLICY mp_dp49817 \"\n      \"ON table_dp49817(a, b, c) TO PUBLIC;\");\n\n  pg::RunQuery(\n      R\"(UPDATE pg_permission_mask                                        )\"\n      R\"(SET                                                              )\"\n      R\"(  polattrsout =                                                  )\"\n      R\"(    '[                                                           )\"\n      R\"(      { \"t\": 0, \"column\": 1, \"path\": \"nested.path\" },            )\"\n      R\"(      { \"t\": 0, \"column\": 2, \"path\": \"another.nested.path\" },    )\"\n      R\"(      3                                                          )\"\n      R\"(    ]'                                                           )\"\n      R\"(WHERE relid = (                                                  )\"\n      R\"(  SELECT C.oid FROM pg_class C WHERE C.relname = 'table_dp49817' )\"\n      R\"()                                                                )\");\n\n  auto current_id = GetUserId();\n  auto u1_id = get_user_id_by_name(\"u1re\");\n  SetUserId(u1_id);\n  bool query_failed = false;\n\n  PG_TRY();", "mimetype": "text/plain", "start_char_idx": 56269, "end_char_idx": 57725, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "288f6a9a-a4a6-4fc1-8904-831cd3831cab": {"__data__": {"id_": "288f6a9a-a4a6-4fc1-8904-831cd3831cab", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "58fa609a-766b-4394-9190-03fa4dd1ab86", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "fb38708b383f4ddf9aa0580ad7b727d8b8ef21680e0b1917f83c147d6c97a7c8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d4b0b388-2c36-405b-a6f2-7102225319cb", "node_type": "1", "metadata": {}, "hash": "ffe8598133515839511bd3c79d5020e7833a42da810b6be161a09c49dc2a0cd7", "class_name": "RelatedNodeInfo"}}, "text": "{ pg::RunQuery(\"SELECT * from table_dp49817\"); }\n  PG_CATCH();\n  {\n    query_failed = true;\n    // Note, the framework seems to only copy first 256 characters of the error!\n    ErrorData* errData = CopyErrorData();\n    std::string error_message = std::string(errData->message);\n    std::transform(error_message.begin(), error_message.end(),\n                   error_message.begin(),\n                   [](unsigned char c) { return std::tolower(c); });\n\n    EXPECT_TRUE(error_message.find(\"super path\") != std::string::npos);\n    EXPECT_TRUE(error_message.find(\"unavailable\") != std::string::npos);\n    EXPECT_TRUE(error_message.find(\"upgrade\") != std::string::npos);\n\n    FreeErrorData(errData);\n    FlushErrorState();\n  }\n  PG_END_TRY();\n\n  EXPECT_TRUE(query_failed);\n\n  SetUserId(current_id);\n  pg::RunQuery(\"DROP TABLE table_dp49817\");\n  pg::RunQuery(\"DROP MASKING POLICY mp_dp49817 CASCADE\");\n\n  gconf_ddm_enable_over_super_paths = guc_old;\n}", "mimetype": "text/plain", "start_char_idx": 57728, "end_char_idx": 58674, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d4b0b388-2c36-405b-a6f2-7102225319cb": {"__data__": {"id_": "d4b0b388-2c36-405b-a6f2-7102225319cb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "288f6a9a-a4a6-4fc1-8904-831cd3831cab", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "cc26762e1e668a83ab2eb0a2a5cc8a799de4f70793a20af4a1906e34a830e154", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e72fd28b-09ee-4361-8e3b-eeeabb2d59ef", "node_type": "1", "metadata": {}, "hash": "3e343f2d6a7b017690a05ea007db18c7d4d86c26839889db4ecdc706ccfac0da", "class_name": "RelatedNodeInfo"}}, "text": "}", "mimetype": "text/plain", "start_char_idx": 5232, "end_char_idx": 5233, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e72fd28b-09ee-4361-8e3b-eeeabb2d59ef": {"__data__": {"id_": "e72fd28b-09ee-4361-8e3b-eeeabb2d59ef", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f27e9905-48cc-4a47-a226-48be04cff4e2", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f96cbeadf7bb34594bd7490dbe18223f11684706328054fc0884febc4ed43ffa", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d4b0b388-2c36-405b-a6f2-7102225319cb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f5985241c7c00a05b91f7f96d683140b29be672bb893f159c0da027a191201ee", "class_name": "RelatedNodeInfo"}}, "text": ";  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 58677, "end_char_idx": 58699, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "dc80f258-f281-45fd-839b-1efb1aeb7198": {"__data__": {"id_": "dc80f258-f281-45fd-839b-1efb1aeb7198", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.hpp", "file_name": "test_rewriter.hpp", "file_size": 1279, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f0535384-d287-44f7-b2cf-e70f4570c816", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.hpp", "file_name": "test_rewriter.hpp", "file_size": 1279, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "b8b3a44c7e22d1c1a996526a47c54dd637f8393482a65c447d553ca4dda0976e", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2022 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#pragma once\n\n// gtest must be included before pgtest\n#include \"ddm/ddm_policy.hpp\"\n#include \"sys/result_cache_api.h\"\n\n#include \"pg/test/pg_test.hpp\"\n\n#include <boost/format.hpp>\n#include <gtest/gtest.h>\n\n#include <string>\n\nnamespace pgtest {\nclass TestDDMRewriter : public pg::PgTest {\n public:\n  static void SetUpTestCase();\n  static void TearDownTestCase();\n};\n\n/// Utility method for validating that\n/// 1. The input query has non-Zero requiredPErms\n/// 2. DDM is applied on a query containing masks.\n/// 3. requiredPerms of the input query rte are the same as the ddm subquery.\n/// 4. requiredPerms of the output query from query rewrite all are 0.\nvoid ValidateDDMPropagationForMaskedTable(std::string input_q_str,\n                                          ResultCacheState rcs);\n\n/// Utility method to get formatted message for mismatch between expected\n/// rewritten query and actual rewritten query.\n/// @param expected_query the expected rewritten query.\n/// @param rewritten_query the actual rewritten query.\n/// @return formatted error message.\nboost::format GetQueryNotMatchedErrorMessage(\n    std::string const& expected_query, std::string const& rewritten_query);\n};  // namespace pgtest", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1278, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3831b82c-8f80-4119-8e2b-77b95bab4f1a": {"__data__": {"id_": "3831b82c-8f80-4119-8e2b-77b95bab4f1a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "100f1905-52d9-4fae-bb55-bce159895188", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fb94435cd7c4db69629ee01a6a93c032565a826e117c48d5e4ce788c3a99fa6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6f6670df-d728-4c87-92ba-d9282a8e14d3", "node_type": "1", "metadata": {}, "hash": "eacf1e70aca057b35433ff7e505baafb5413431bff8f13d75da95638a4cc3100", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2024 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n// These two includes must go first and in this order.\n// clang-format off\n#include <gtest/gtest.h>\n#include \"pg/test/pg_test.hpp\"\n// clang-format on\n\n#include \"seclog/seclog_access_control.h\"\n#include \"seclog/seclog_masking.hpp\"\n#include \"seclog/sensitive_objects_manager.hpp\"\n\n#include \"pg/src/include/catalog/namespace.h\"\n\n#include <sstream>\n#include <string>\n\nextern bool AmLeaderProcess;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 469, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6f6670df-d728-4c87-92ba-d9282a8e14d3": {"__data__": {"id_": "6f6670df-d728-4c87-92ba-d9282a8e14d3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "100f1905-52d9-4fae-bb55-bce159895188", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fb94435cd7c4db69629ee01a6a93c032565a826e117c48d5e4ce788c3a99fa6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3831b82c-8f80-4119-8e2b-77b95bab4f1a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "31de5266b4cc7888935c587f832fa44a1da2b3a5e6c9d2ac50afa138061ddf4f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1994c685-6413-4ca2-b226-b7d0566e9637", "node_type": "1", "metadata": {}, "hash": "0cd92531dae6646ba1bb3b627026edad5c88dc0d1f23fd236fbe835c4c801bb3", "class_name": "RelatedNodeInfo"}}, "text": "namespace pgtest", "mimetype": "text/plain", "start_char_idx": 471, "end_char_idx": 487, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1994c685-6413-4ca2-b226-b7d0566e9637": {"__data__": {"id_": "1994c685-6413-4ca2-b226-b7d0566e9637", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "100f1905-52d9-4fae-bb55-bce159895188", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fb94435cd7c4db69629ee01a6a93c032565a826e117c48d5e4ce788c3a99fa6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6f6670df-d728-4c87-92ba-d9282a8e14d3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "df3e6e3d4bada0c9022476a03a133df067eb6007ac7feeeb6219bd01d702240d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ce2c1f1f-bf08-450d-af80-beb1076b39eb", "node_type": "1", "metadata": {}, "hash": "b03a2922167ba6436d14acb022adc4c05da23dcd5988a69cb187f990951ee836", "class_name": "RelatedNodeInfo"}}, "text": "{\n\nclass TestSecLogLocalizationOidCleanup : public pg::PgTest {\n public:\n  static void SetUpTestCase() {\n    // By default, the AmLeaderProcess flag is not set on the PGtest process.\n    // SecLog asserts that SecLog functions are called on the LN - `EnforceLN`.\n    original_am_leader_ = AmLeaderProcess;\n    AmLeaderProcess = true;\n  }\n\n  static void TearDownTestCase() { AmLeaderProcess = original_am_leader_; }\n\n  void SetUp() override {\n    std::string create_table_sql =\n        \"create temp table \" + test_tablename_ + \" ( a int )\";\n    pg::RunQuery(create_table_sql);\n    XCHECK_NOTNULL(Xen);\n    Xen->sensitive_objects_manager = new SensitiveObjectsManager();\n  }\n\n  void TearDown() override {\n    std::string drop_table_sql = \"drop table \" + test_tablename_;\n    pg::RunQuery(drop_table_sql);\n    XCHECK_NOTNULL(Xen);\n    delete Xen->sensitive_objects_manager;\n    Xen->sensitive_objects_manager = nullptr;\n  }\n\n  std::string test_tablename_{\"seclog_localization_table\"};\n\n private:\n  static bool original_am_leader_;\n};\n\nbool TestSecLogLocalizationOidCleanup::original_am_leader_ = false;", "mimetype": "text/plain", "start_char_idx": 488, "end_char_idx": 1587, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ce2c1f1f-bf08-450d-af80-beb1076b39eb": {"__data__": {"id_": "ce2c1f1f-bf08-450d-af80-beb1076b39eb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "100f1905-52d9-4fae-bb55-bce159895188", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fb94435cd7c4db69629ee01a6a93c032565a826e117c48d5e4ce788c3a99fa6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1994c685-6413-4ca2-b226-b7d0566e9637", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7168df9e7d634a32e56ccad9ed7a380e0bd1a0390925fba75a16599f1a904490", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8a193c57-e9f9-41e4-b978-6e1745fc1490", "node_type": "1", "metadata": {}, "hash": "383c97e324bf0bf65dde08538d89278d4e2fcfa6f6630149abbc9f81724bd753", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestSecLogLocalizationOidCleanup, TestLocalizationOidCleanup) {\n  // Test cleanup when temps are dropped individually and their corresponding\n  // Oids are removed from SecLog tracking individually.\n  Oid oid = RelnameGetRelid(test_tablename_.c_str());\n  AddToSTVSensitiveLocalizationOIDs(oid);\n  EXPECT_EQ(true,\n            Xen->sensitive_objects_manager->IsSensitiveLocalizationOid(oid));\n  RemoveFromSTVSensitiveLocalizationOIDs(oid, true /* verify */);\n  EXPECT_EQ(false,\n            Xen->sensitive_objects_manager->IsSensitiveLocalizationOid(oid));\n}\n\nPG_TEST_F(TestSecLogLocalizationOidCleanup, TestTempNamespaceCleanup) {\n  // Test when the entire temp namespace is dropped and all Oids under the\n  // namespace must be removed from SecLog tracking.\n  Oid oid = RelnameGetRelid(test_tablename_.c_str());\n  AddToSTVSensitiveLocalizationOIDs(oid);\n  EXPECT_EQ(true,\n            Xen->sensitive_objects_manager->IsSensitiveLocalizationOid(oid));\n  seclog::RemoveCurrentSessionLocalizations();\n  EXPECT_EQ(false,\n            Xen->sensitive_objects_manager->IsSensitiveLocalizationOid(oid));\n}", "mimetype": "text/plain", "start_char_idx": 1589, "end_char_idx": 2693, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8a193c57-e9f9-41e4-b978-6e1745fc1490": {"__data__": {"id_": "8a193c57-e9f9-41e4-b978-6e1745fc1490", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "100f1905-52d9-4fae-bb55-bce159895188", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fb94435cd7c4db69629ee01a6a93c032565a826e117c48d5e4ce788c3a99fa6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ce2c1f1f-bf08-450d-af80-beb1076b39eb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "daabce2bbfcef9f8ed6de9a54ecc1fcceb443b550177ccf28f8523b8d359141a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "84ea2544-cc56-46a3-8e5d-3c21ac9eb4c6", "node_type": "1", "metadata": {}, "hash": "0bf106f3cf84fc2e2c8f6c7b32ba3ff24cab2ece11221d6fd75b8aa21b2722f9", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestSecLogLocalizationOidCleanup, TestMemoryConsumption) {\n  Oid oid = RelnameGetRelid(test_tablename_.c_str());\n  AddToSTVSensitiveLocalizationOIDs(oid);\n  size_t add_memory = xen::allocator::a_size_alloced();\n  RemoveFromSTVSensitiveLocalizationOIDs(oid, true /* verify */);\n  size_t remove_memory = xen::allocator::a_size_alloced();\n  // Memory consumed by the entry in shared memory.\n  EXPECT_EQ((add_memory - remove_memory), 16);\n}\n\nPG_TEST_F(TestSecLogLocalizationOidCleanup, TestLocalizationNamespace) {\n  // Test ensures that localization Oids of localized objects tracked by SecLog\n  // belong to the session's only temporary namespace.\n  EXPECT_EQ(SensitiveObjectsManager::GetCurrentSessionLocalizationNamespace(),\n            getTempNamespace());\n  EXPECT_TRUE(isTempNamespace(\n      SensitiveObjectsManager::GetCurrentSessionLocalizationNamespace()));\n}\n\n}", "mimetype": "text/plain", "start_char_idx": 2695, "end_char_idx": 3573, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "84ea2544-cc56-46a3-8e5d-3c21ac9eb4c6": {"__data__": {"id_": "84ea2544-cc56-46a3-8e5d-3c21ac9eb4c6", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "100f1905-52d9-4fae-bb55-bce159895188", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4fb94435cd7c4db69629ee01a6a93c032565a826e117c48d5e4ce788c3a99fa6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8a193c57-e9f9-41e4-b978-6e1745fc1490", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3345f206216723c103283585c067b157050948a518b88e04889bf45fa09e7a0b", "class_name": "RelatedNodeInfo"}}, "text": "// namespace pgtest", "mimetype": "text/plain", "start_char_idx": 3575, "end_char_idx": 3594, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "017da7a9-f7d5-4af6-bf0f-b7ac5a714b22": {"__data__": {"id_": "017da7a9-f7d5-4af6-bf0f-b7ac5a714b22", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d053bb7d-6879-4875-9887-c8476cd64bb5", "node_type": "1", "metadata": {}, "hash": "4f3c3198e4589f474fe1f420642cb6c2f5f0cee2aac24643c5168bae2968f849", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2024 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n// These two includes must go first and in this order.\n// clang-format off\n#include <gmock/gmock-matchers.h>\n#include <gtest/gtest.h>\n#include \"pg/test/pg_test.hpp\"\n#include <gmock/gmock.h>\n// clang-format on\n\n#include \"ddm/policy_access.h\"\n#include \"ddm/rewriter.h\"\n#include \"omnisql/omnisql_print_sql.hpp\"\n#include \"omnisql/omnisql_translate_query.hpp\"\n#include \"rewrite/rewriteHandler.h\"\n#include \"seclog/seclog_masking.hpp\"\n#include \"utils/lsyscache.h\"\n\n#include \"systables/systables_seclog.hpp\"\n\nextern bool g_pgtest_ddm;\nextern bool gconf_enable_secure_logging;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 644, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d053bb7d-6879-4875-9887-c8476cd64bb5": {"__data__": {"id_": "d053bb7d-6879-4875-9887-c8476cd64bb5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "017da7a9-f7d5-4af6-bf0f-b7ac5a714b22", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "90697ac58422235ffca768bb56b025448460338ed780666072d903da2edc1a72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a9dd6f88-9d42-47f9-8f9e-b5e54447f00d", "node_type": "1", "metadata": {}, "hash": "29f7b2ea11e5f684b07b3490a0a08ddb8ae4c5dc0b76e204a7d6df2ad9cc49cc", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 646, "end_char_idx": 664, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a9dd6f88-9d42-47f9-8f9e-b5e54447f00d": {"__data__": {"id_": "a9dd6f88-9d42-47f9-8f9e-b5e54447f00d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d053bb7d-6879-4875-9887-c8476cd64bb5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c0dcd7801ed6a863e49aa1160cb39f8acbacb917f00fdcb4ea9d7295209b3f78", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4ee626c6-bc9f-4198-998e-27cda34fd521", "node_type": "1", "metadata": {}, "hash": "5b2ab0ce40f6aaceeca7cd05bbe353ea99667839bd3d82a86d18984032052550", "class_name": "RelatedNodeInfo"}}, "text": "{\n\n// SecLoged Systable name and columns (name, type, typoid).\nusing TestParam = std::pair<const std::string, SecLogSystableEntry>;\n\nclass TestDDMSecLog : public pg::PgTest,\n                      public ::testing::WithParamInterface<TestParam> {\n public:\n  TestDDMSecLog() {}\n\n protected:\n  // Don't forget U suffix for unsigned!\n  const std::size_t SYSTABLES_HASH = 2777785633089982489U;\n\n  static void SetUpTestCase() {}\n  static void TearDownTestCase() {}\n\n private:\n  AutoValueRestorer<bool> gconf_enable_secure_logging_restorer =\n      AutoValueRestorer<bool>(gconf_enable_secure_logging, true);\n  AutoValueRestorer<bool> g_pgtest_ddm_restorer =\n      AutoValueRestorer<bool>(g_pgtest_ddm, true);\n};\n\n/// @brief This test is a litmus strip reacting to ANY change in seclog\n/// landscape. In particular any new systable / column marked / unmarked for\n/// sensitivity will trigger the failure of this test. If your CR *deliberately*\n/// updates the SecLog config (in .tdefs), please update the hash here.", "mimetype": "text/plain", "start_char_idx": 665, "end_char_idx": 1672, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4ee626c6-bc9f-4198-998e-27cda34fd521": {"__data__": {"id_": "4ee626c6-bc9f-4198-998e-27cda34fd521", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a9dd6f88-9d42-47f9-8f9e-b5e54447f00d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "895f835253fc85979e4b8ced48fc95d00b28d6cb9ed493a329545346e288e42a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b29bc0e7-9e63-4e17-aa49-d897c98ff044", "node_type": "1", "metadata": {}, "hash": "e5b1f35836c80133b7a8ccf95f02fb798333f0aa580df29b96284f389041c27a", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, SensitiveTablesSnapshot) {\n  std::size_t hash = 0;\n\n  using PairT = std::pair<std::string, SecLogSystableEntry>;\n\n  std::vector<PairT> entries(seclog_systables.begin(), seclog_systables.end());\n  std::sort(entries.begin(), entries.end(),\n            [](PairT a, PairT b) { return a.first < b.first; });\n\n  for (auto&& entry : entries) {\n    boost::hash_combine(hash, boost::hash_value(entry.first));\n\n    SecLogSystableEntry sorted(entry.second.begin(), entry.second.end());\n    std::sort(sorted.begin(), sorted.end(),\n              [](std::tuple<std::string, DefnType, int> a,\n                 std::tuple<std::string, DefnType, int> b) {\n                return std::get<0>(a) < std::get<0>(b);\n              });\n\n    for (auto&& column : sorted) {\n      boost::hash_combine(hash, boost::hash_value(std::get<0>(column)));\n      boost::hash_combine(hash, boost::hash_value(std::get<1>(column)));\n      boost::hash_combine(hash, boost::hash_value(std::get<2>(column)));\n    }\n  }\n\n  ASSERT_EQ(SYSTABLES_HASH, hash);\n}\n\n/// @brief Verifies that a known SecLoged stll table is reported as having DDM\n/// attachments and rewrite.", "mimetype": "text/plain", "start_char_idx": 1673, "end_char_idx": 2822, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b29bc0e7-9e63-4e17-aa49-d897c98ff044": {"__data__": {"id_": "b29bc0e7-9e63-4e17-aa49-d897c98ff044", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ee626c6-bc9f-4198-998e-27cda34fd521", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f0bf5fad74bcb7b4e69988d25b49dd8ca7ef1bedbf47d78e4907e5bcd4e82d49", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b08b9a97-1913-4205-a343-ed80ca455985", "node_type": "1", "metadata": {}, "hash": "63f999270fce731987795416d345c454ffc79936ef2f4ca844ce7832e1e221ba", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, HasDDMAttachments) {\n  Oid stll_oid = get_system_catalog_relid(\"stll_ddltext\");\n  ASSERT_NE(InvalidOid, stll_oid);\n\n  ASSERT_TRUE(HasDDMAttachmentForRel(stll_oid));\n\n  RangeTblEntry* main_table_rte = reinterpret_cast<RangeTblEntry*>(linitial(\n      reinterpret_cast<Query*>(\n          linitial(pg::Analyze(pg::Parse(\"SELECT * from stll_ddltext\"))))\n          ->rtable));\n\n  ASSERT_TRUE(HasDDMRewrite(main_table_rte));\n}\n\n/// @brief Verify explicit SQL rewrite of a known SecLoged stll table.", "mimetype": "text/plain", "start_char_idx": 2823, "end_char_idx": 3339, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b08b9a97-1913-4205-a343-ed80ca455985": {"__data__": {"id_": "b08b9a97-1913-4205-a343-ed80ca455985", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b29bc0e7-9e63-4e17-aa49-d897c98ff044", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4aca8a2f59d6331fa239b7708a16433aa19014891465809c135c5a909b660f31", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f6487df-985f-45b6-93f9-28e0cdede66e", "node_type": "1", "metadata": {}, "hash": "93cacf753d2a0abee81407efa3cedc9e58886bc49a6fdb9368da14cfcbbf1158", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, OneSTLRewrite)", "mimetype": "text/plain", "start_char_idx": 3340, "end_char_idx": 3379, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7f6487df-985f-45b6-93f9-28e0cdede66e": {"__data__": {"id_": "7f6487df-985f-45b6-93f9-28e0cdede66e", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b08b9a97-1913-4205-a343-ed80ca455985", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8cad07673dbf4894f7182d2683ff1255b936135eff2556c20979f146a3eceba5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b72c50be-bc92-41e3-ab34-b5d37cf5f345", "node_type": "1", "metadata": {}, "hash": "6a3134d53237eb5a0bdb234be16d2f9625cb3de468a00c3bce0b3cbe7fb53f54", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from stll_ddltext\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  auto expected_sql = R\"SQL(\n    SELECT * FROM (\n      SELECT\n        \"stll_ddltext\".\"userid\" AS \"userid\",\n        \"stll_ddltext\".\"xid\" AS \"xid\",\n        \"stll_ddltext\".\"pid\" AS \"pid\",\n        CASE\n          WHEN\n            (\n              GETBIT(\n                CAST(\"stll_ddltext\".\"access_control\" AS VARBYTE(4)),\n                CAST(1 AS INT4)\n              ) = CAST(1 AS INT4)\n            )\n          THEN CAST(CAST('******' AS BPCHAR) AS CHAR(320))\n          ELSE \"stll_ddltext\".\"label\"\n        END AS \"label\",\n        \"stll_ddltext\".\"starttime\" AS \"starttime\",\n        \"stll_ddltext\".\"endtime\" AS \"endtime\",\n        \"stll_ddltext\".\"sequence\" AS \"sequence\",\n        CASE\n          WHEN\n            (\n              GETBIT(\n                CAST(\"stll_ddltext\".\"access_control\" AS VARBYTE(4)),\n                CAST(1 AS INT4)\n              ) = CAST(1 AS INT4)\n            )\n          THEN CAST(CAST('******' AS BPCHAR) AS CHAR(200))\n          ELSE \"stll_ddltext\".\"text\"\n        END AS \"text\",\n        (-CAST(1 AS INT4)) AS \"access_control\"\n      FROM \"pg_catalog\".\"stll_ddltext\" AS \"stll_ddltext\"\n    ) AS \"stll_ddltext\"\n  )SQL\";", "mimetype": "text/plain", "start_char_idx": 3380, "end_char_idx": 4854, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b72c50be-bc92-41e3-ab34-b5d37cf5f345": {"__data__": {"id_": "b72c50be-bc92-41e3-ab34-b5d37cf5f345", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7f6487df-985f-45b6-93f9-28e0cdede66e", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "e86f82d6040b6433a9573f3736065ec853cdb6dbdd0dfa0441005e7bfea7e0d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9ce435a6-194e-45b1-b2e3-94ed28833b39", "node_type": "1", "metadata": {}, "hash": "57e51cb8aac9fbe75fed8d36e5ce510e5dcb706c7179e075872bca2a8f770d2c", "class_name": "RelatedNodeInfo"}}, "text": "auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  ASSERT_EQ(expected_q_omni, rewritten_input_sql);\n}", "mimetype": "text/plain", "start_char_idx": 4858, "end_char_idx": 5090, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9ce435a6-194e-45b1-b2e3-94ed28833b39": {"__data__": {"id_": "9ce435a6-194e-45b1-b2e3-94ed28833b39", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b72c50be-bc92-41e3-ab34-b5d37cf5f345", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "988dd9eb2a4e2f00406d07d67a87742ad511c6d77c26b8af7a40ea25623d4230", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bfb94d3d-d737-402f-a264-86be080f51c9", "node_type": "1", "metadata": {}, "hash": "f7f55af07f41a9e914f12ef6c7737038dbd38af7cc19c2915181585a5ae708b8", "class_name": "RelatedNodeInfo"}}, "text": "/// @brief Verify an example (known failure) where multiple SecLog-masked STLs\n/// are JOINed.", "mimetype": "text/plain", "start_char_idx": 5092, "end_char_idx": 5186, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bfb94d3d-d737-402f-a264-86be080f51c9": {"__data__": {"id_": "bfb94d3d-d737-402f-a264-86be080f51c9", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9ce435a6-194e-45b1-b2e3-94ed28833b39", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2466cc7566156584ad4b6a87ff36aa4af42bf40f19cc9abe22d17356c13e0d45", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7b637f37-97c7-426e-b60f-3e3913d9862a", "node_type": "1", "metadata": {}, "hash": "27b7eceef78ab9241e0cf6dd05fec3908f2ce919d70adc13cdb38c28c5ca3001", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, MultipleMasked)", "mimetype": "text/plain", "start_char_idx": 5187, "end_char_idx": 5227, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7b637f37-97c7-426e-b60f-3e3913d9862a": {"__data__": {"id_": "7b637f37-97c7-426e-b60f-3e3913d9862a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfb94d3d-d737-402f-a264-86be080f51c9", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4f8f36bf2065f8eccd6bbb3a10f333187aad55368b6b33f859852bfeeba8b356", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4d08bb69-c319-4f55-bc0a-168bfeeb41f2", "node_type": "1", "metadata": {}, "hash": "e1fc3645f8c89bbdcb16d99545c98cad953fe6c68dd91004cc0f95f2c8056cbb", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto input_q = reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(R\"SQL(\n      SELECT\n        rtf.segment,\n        rtf.step,\n        rtf.hash_segment,\n        rtf.hash_step,\n        h.runtime_filter_type,\n        h.runtime_filter_size,\n        sum(CASE WHEN rtf.was_disabled = 't' THEN 1 ELSE 0 END) AS was_disabled,\n        sum(CASE WHEN rtf.distributed = 't' THEN 1 ELSE 0 END) AS distributed,\n        sum(CASE WHEN rtf.prefetched = 't' THEN 1 ELSE 0 END) AS prefetched,\n        sum(rtf.checked) AS CHECKED,\n        sum(rtf.rejected) AS rejected,\n        CASE sum(rtf.checked)\n          WHEN 0 THEN 0\n          ELSE CAST((sum(rtf.checked) - sum(rtf.rejected))*100.0 / sum(rtf.checked) AS NUMERIC(5,2))\n        END AS pass_percent,\n        sum(rtf.checked) - sum(rtf.rejected) AS passed, -- should be equal to rows_pre_filter\n        sum(s.rows_pre_filter) AS rows_pre_filter\n      FROM stl_rtf_stats rtf\n      LEFT JOIN stl_scan s\n        ON rtf.query = s.query\n        AND rtf.segment = s.segment\n        AND rtf.step = s.step\n        AND rtf.slice = s.slice\n      LEFT JOIN stl_hash h\n        ON rtf.query = h.query\n        AND rtf.hash_segment = h.segment\n        AND rtf.hash_step = h.step\n        AND h.slice % 2 = 0\n        AND (rtf.slice = h.slice OR rtf.slice = h.slice + 1)\n      WHERE rtf.query = pg_last_query_id()\n      GROUP BY 1,2,3,4,5,6\n      ORDER BY 1,2,3,4,5,6\n    )SQL\"))));\n  ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */);", "mimetype": "text/plain", "start_char_idx": 5228, "end_char_idx": 6707, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4d08bb69-c319-4f55-bc0a-168bfeeb41f2": {"__data__": {"id_": "4d08bb69-c319-4f55-bc0a-168bfeeb41f2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7b637f37-97c7-426e-b60f-3e3913d9862a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "7faa59d3ca6acf9c528461805cf8999dbc530c1d7289712cd6b96cfcfd1a50b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c631e768-60a6-4760-9dcb-c4375eac9082", "node_type": "1", "metadata": {}, "hash": "67e9bf31d2b042c78589ea8269bd5361d6f15a0573b2e33083a26adfa8f78c04", "class_name": "RelatedNodeInfo"}}, "text": "// Expect no exception. This query was a know failure case.\n}", "mimetype": "text/plain", "start_char_idx": 6710, "end_char_idx": 6771, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c631e768-60a6-4760-9dcb-c4375eac9082": {"__data__": {"id_": "c631e768-60a6-4760-9dcb-c4375eac9082", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4d08bb69-c319-4f55-bc0a-168bfeeb41f2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2921661bd37e5ace2775724538972652df322d49e4e9351efc1ef8c1689ee6f2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a8df01f4-9858-415c-93dc-a86b0b65505b", "node_type": "1", "metadata": {}, "hash": "b4bfd91ee1d17af2020d77d94b9dce913701697004dda21f4ce766e697473995", "class_name": "RelatedNodeInfo"}}, "text": "/// @brief Verify explicit SQL rewrite of a known SecLoged STV table which is\n/// masked based on sensitive localizations set.", "mimetype": "text/plain", "start_char_idx": 6773, "end_char_idx": 6899, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a8df01f4-9858-415c-93dc-a86b0b65505b": {"__data__": {"id_": "a8df01f4-9858-415c-93dc-a86b0b65505b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c631e768-60a6-4760-9dcb-c4375eac9082", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "3790b2dd6bb4a11a44a72d64cfc9f1c2da71c607fadd1db6615d5008d6982377", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3472420a-6439-4736-a1ef-2f0d90b3ec45", "node_type": "1", "metadata": {}, "hash": "2c817c39ef8529bfc4d128580ddf3a811145f1ba7f2204a54a0806b543f04830", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, OneSTVTableRewrite)", "mimetype": "text/plain", "start_char_idx": 6900, "end_char_idx": 6944, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3472420a-6439-4736-a1ef-2f0d90b3ec45": {"__data__": {"id_": "3472420a-6439-4736-a1ef-2f0d90b3ec45", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a8df01f4-9858-415c-93dc-a86b0b65505b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "178e51396dcf9774e575f1f1deeb35601c372cd070943ac42c1043bc41e6320a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cec44a66-5d64-4b57-bdbb-9c29f6a00487", "node_type": "1", "metadata": {}, "hash": "e3ebf3025470d00061609f20e531ab78436da3f288999379c4fdead80d1835d4", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from stv_tbl_trans\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));", "mimetype": "text/plain", "start_char_idx": 6945, "end_char_idx": 7284, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cec44a66-5d64-4b57-bdbb-9c29f6a00487": {"__data__": {"id_": "cec44a66-5d64-4b57-bdbb-9c29f6a00487", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3472420a-6439-4736-a1ef-2f0d90b3ec45", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "a5c11197983414f7d5a60b9a3daa2f939b5d062545d1efdc37af5860e614a219", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "96868906-607f-43d7-a1cf-adc9236b333a", "node_type": "1", "metadata": {}, "hash": "818971190a8a897bfdad3584c819a80ac8f8935b5504933f224dc617add38341", "class_name": "RelatedNodeInfo"}}, "text": "auto expected_sql = R\"SQL(\nSELECT\n    *\nFROM (\n    SELECT \"stv_tbl_trans\".\"slice\" AS \"slice\",\n        CASE\n            WHEN IS_OBJECT_SENSITIVE_INTERNAL(\n                GET_SENSITIVE_LOCALIZATIONS_INTERNAL(),\n                \"stv_tbl_trans\".\"id\"\n            ) THEN (- CAST(1 AS INT4))\n            ELSE \"stv_tbl_trans\".\"id\"\n        END AS \"id\",\n        CASE\n            WHEN IS_OBJECT_SENSITIVE_INTERNAL(\n                GET_SENSITIVE_LOCALIZATIONS_INTERNAL(),\n                \"stv_tbl_trans\".\"id\"\n            ) THEN (- CAST(CAST(1 AS INT4) AS INT8))\n            ELSE \"stv_tbl_trans\".\"rows\"\n        END AS \"rows\",\n        CASE\n            WHEN IS_OBJECT_SENSITIVE_INTERNAL(\n                GET_SENSITIVE_LOCALIZATIONS_INTERNAL(),\n                \"stv_tbl_trans\".\"id\"\n            ) THEN (- CAST(CAST(1 AS INT4) AS INT8))\n            ELSE \"stv_tbl_trans\".\"size\"\n        END AS \"size\",\n        \"stv_tbl_trans\".\"query_id\" AS \"query_id\",\n        \"stv_tbl_trans\".\"ref_cnt\" AS \"ref_cnt\",\n        \"stv_tbl_trans\".\"from_suspended\" AS \"from_suspended\",\n        \"stv_tbl_trans\".\"prep_swap\" AS \"prep_swap\"\n    FROM \"pg_catalog\".\"stv_tbl_trans\" AS \"stv_tbl_trans\"\n) AS \"stv_tbl_trans\"\n  )SQL\";\n\n  auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  ASSERT_EQ(expected_q_omni, rewritten_input_sql);\n}", "mimetype": "text/plain", "start_char_idx": 7288, "end_char_idx": 8704, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "96868906-607f-43d7-a1cf-adc9236b333a": {"__data__": {"id_": "96868906-607f-43d7-a1cf-adc9236b333a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cec44a66-5d64-4b57-bdbb-9c29f6a00487", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5f48407ee49d334b0487d9004b27fe09eef657a470b6e393e67fc6894616f563", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ff871dd5-e47e-4134-82f4-116099458289", "node_type": "1", "metadata": {}, "hash": "8936832203f874fd0306e23bbf0a6db5e8f0bc1aba5c0129a767615ea65f7c19", "class_name": "RelatedNodeInfo"}}, "text": "/// @brief Verify explicit SQL rewrite of a known SecLoged STV table which is\n/// masked based on sensitive queries set.", "mimetype": "text/plain", "start_char_idx": 8706, "end_char_idx": 8826, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ff871dd5-e47e-4134-82f4-116099458289": {"__data__": {"id_": "ff871dd5-e47e-4134-82f4-116099458289", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96868906-607f-43d7-a1cf-adc9236b333a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "2cd8a69d48c5d9adf96664552d20b9f913d276e81f089bf3d9c16c1a6291178f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "143c74ae-cc9b-41fc-8752-36bf460bbed3", "node_type": "1", "metadata": {}, "hash": "49cea58e9b2e3f87f3d4a48f32d671026598d31f78ec0abc8fd4cc1d779a4ab0", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, OneSTVQueryRewrite)", "mimetype": "text/plain", "start_char_idx": 8827, "end_char_idx": 8871, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "143c74ae-cc9b-41fc-8752-36bf460bbed3": {"__data__": {"id_": "143c74ae-cc9b-41fc-8752-36bf460bbed3", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff871dd5-e47e-4134-82f4-116099458289", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "905cf80aa931674e3d8c773929eda290df5bdda9e29ba210f25249d34cb9f564", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c99c8289-c006-4ebe-80bb-6d5137173e22", "node_type": "1", "metadata": {}, "hash": "e3d7427e7594d01a1bc9243afe2d6fbe3adf595983f2b6588ff2ae16d82470ff", "class_name": "RelatedNodeInfo"}}, "text": "{\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from stv_query_metrics\"))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));", "mimetype": "text/plain", "start_char_idx": 8872, "end_char_idx": 9215, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c99c8289-c006-4ebe-80bb-6d5137173e22": {"__data__": {"id_": "c99c8289-c006-4ebe-80bb-6d5137173e22", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "143c74ae-cc9b-41fc-8752-36bf460bbed3", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "65044c0c1dfe7d599d96cca0df944141bda5c080ca02f2de7f6ed1c798cbe764", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7244b56e-1dbe-43da-8ce3-8dbff11ab013", "node_type": "1", "metadata": {}, "hash": "1e61a6d83a4a3978c37a5cb6bd67f56c2889c097970c68ea1040000e8c1667e2", "class_name": "RelatedNodeInfo"}}, "text": "auto", "mimetype": "text/plain", "start_char_idx": 2009, "end_char_idx": 2013, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "7244b56e-1dbe-43da-8ce3-8dbff11ab013": {"__data__": {"id_": "7244b56e-1dbe-43da-8ce3-8dbff11ab013", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c99c8289-c006-4ebe-80bb-6d5137173e22", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "daef02f37b9cbfbdfb218a10a2484ff51b05ecd1ae1e624ce160ac36a4c1570f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "74619776-bdbe-4da4-b08e-c699f0fb33b2", "node_type": "1", "metadata": {}, "hash": "c85038a4989794e7a05d66e5961b3602c4df108026036251360a2400f27b46e6", "class_name": "RelatedNodeInfo"}}, "text": "expected_sql =", "mimetype": "text/plain", "start_char_idx": 3727, "end_char_idx": 3741, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "74619776-bdbe-4da4-b08e-c699f0fb33b2": {"__data__": {"id_": "74619776-bdbe-4da4-b08e-c699f0fb33b2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7244b56e-1dbe-43da-8ce3-8dbff11ab013", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "ea87b9ff6409bad58d37a118730a9b4ede7c3cbbb8af339b1850e0dead9764f9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "61303a9b-cd6b-4ff4-91f5-aa9561feb2fd", "node_type": "1", "metadata": {}, "hash": "5c11c3a9098b1fbad48ff31d9a2892126ef96242283d2a8f9b4deeb060851f27", "class_name": "RelatedNodeInfo"}}, "text": "R\"SQL(", "mimetype": "text/plain", "start_char_idx": 3742, "end_char_idx": 3748, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "61303a9b-cd6b-4ff4-91f5-aa9561feb2fd": {"__data__": {"id_": "61303a9b-cd6b-4ff4-91f5-aa9561feb2fd", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "74619776-bdbe-4da4-b08e-c699f0fb33b2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "27c2d574ae23b54c7e61efb3dafc2e005a988d09867ea566b0ccfe19f4b9deef", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a39c795d-d616-4803-a4fd-e80cca02b420", "node_type": "1", "metadata": {}, "hash": "8a4d276f0273b229fe098e9063c83e7765f4ee71b7feb6e94f8cf68de6c1966f", "class_name": "RelatedNodeInfo"}}, "text": ")SQL\"", "mimetype": "text/plain", "start_char_idx": 4848, "end_char_idx": 4853, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a39c795d-d616-4803-a4fd-e80cca02b420": {"__data__": {"id_": "a39c795d-d616-4803-a4fd-e80cca02b420", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "61303a9b-cd6b-4ff4-91f5-aa9561feb2fd", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "4405ab4877187f9e46350de4cf4863d1b4ac59ecd8fb00a4eb7d13361734d8ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "da8f9ed0-75ff-46c5-8a53-7e18fe47154c", "node_type": "1", "metadata": {}, "hash": "6a3134d53237eb5a0bdb234be16d2f9625cb3de468a00c3bce0b3cbe7fb53f54", "class_name": "RelatedNodeInfo"}}, "text": ";", "mimetype": "text/plain", "start_char_idx": 602, "end_char_idx": 603, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "da8f9ed0-75ff-46c5-8a53-7e18fe47154c": {"__data__": {"id_": "da8f9ed0-75ff-46c5-8a53-7e18fe47154c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a39c795d-d616-4803-a4fd-e80cca02b420", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d80b84c3fb6825ac3bf146c38faebc83aa3a660157a5d1b4676fbf9465b23ea1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0cdba97e-f996-4472-8c4b-1fccaef9439f", "node_type": "1", "metadata": {}, "hash": "c27b85c64b07da7fb64a2d0c9b5a1033614f8b0c04a1604c1ab3e0cbe2f8afc3", "class_name": "RelatedNodeInfo"}}, "text": "auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));\n\n  ASSERT_EQ(expected_q_omni, rewritten_input_sql);\n}", "mimetype": "text/plain", "start_char_idx": 4858, "end_char_idx": 5090, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0cdba97e-f996-4472-8c4b-1fccaef9439f": {"__data__": {"id_": "0cdba97e-f996-4472-8c4b-1fccaef9439f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "da8f9ed0-75ff-46c5-8a53-7e18fe47154c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "988dd9eb2a4e2f00406d07d67a87742ad511c6d77c26b8af7a40ea25623d4230", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b06d7211-160e-46b8-a201-117f9547be2f", "node_type": "1", "metadata": {}, "hash": "2585f014de085d00ee0eb1ebccac519ee239e0e02bcce251e49a7be075338467", "class_name": "RelatedNodeInfo"}}, "text": "/// @brief Tests sanity of JOIN over a sample of three STVs and three STLLs.\n/// Sanity check includes the absence of exceptions and that resulting SQL\n/// contains rewritten parts relating to each of the relations.", "mimetype": "text/plain", "start_char_idx": 12598, "end_char_idx": 12813, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b06d7211-160e-46b8-a201-117f9547be2f": {"__data__": {"id_": "b06d7211-160e-46b8-a201-117f9547be2f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0cdba97e-f996-4472-8c4b-1fccaef9439f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "850011001c9edbc1e5ea4fc33d4037edddff2909e3e57ea7beab02626df4cfa1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d67a8402-cd90-4d9b-b3a0-d9c52aef257d", "node_type": "1", "metadata": {}, "hash": "d1822259b867e13b01b3495317abf00d05999cc8093207ea78f7ebc9be1e99c5", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSecLog, STLLsAndSTVsJoined)", "mimetype": "text/plain", "start_char_idx": 12814, "end_char_idx": 12858, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "d67a8402-cd90-4d9b-b3a0-d9c52aef257d": {"__data__": {"id_": "d67a8402-cd90-4d9b-b3a0-d9c52aef257d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b06d7211-160e-46b8-a201-117f9547be2f", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "006a512b91ab059f995300b79d23942fb966c9f728fc922e1d5703b8893de023", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "42da87ae-f857-4541-b997-a95ceaa76bc5", "node_type": "1", "metadata": {}, "hash": "25aa4241c2d59014a07c1a755082171d7cefa275120fe84de7a9a7a153dce043", "class_name": "RelatedNodeInfo"}}, "text": "{\n  const std::string query = R\"SQL(\n    SELECT *\n    FROM\n      -- 3 STVs\n           stv_query_metrics M\n      JOIN stv_exec_state E ON (M.query = E.query)\n      JOIN stv_user_query_state U ON (M.query = U.query_id)\n      -- 3 STLLs\n      JOIN stll_plan_explain P ON (M.query = P.query)\n      JOIN stll_s3client_error S ON (M.query = S.query)\n      JOIN stll_s3query Q ON (M.query = Q.query)\n  )SQL\";\n\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(query))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n  auto rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  // Here we check that for each of the 6 relations above all columns are masked\n  // in the rewritten SQL.\n  std::set<std::string> rels_in_query{\n      \"stv_query_metrics\", \"stv_exec_state\",      \"stv_user_query_state\",\n      \"stll_plan_explain\", \"stll_s3client_error\", \"stll_s3query\",\n  };\n  for (auto&& [table, columns] : seclog_systables) {\n    if (rels_in_query.find(table) == rels_in_query.end()) continue;\n    for (auto&& column : columns) {\n      if (std::get<0>(column) == systable::constants::kAccessControl) continue;\n      std::string substr = boost::str(boost::format(R\"(ELSE \"%1%\".\"%2%\")\") %\n                                      table % std::get<0>(column));\n      EXPECT_THAT(rewritten_input_sql, ::testing::HasSubstr(substr));\n    }\n  }\n}", "mimetype": "text/plain", "start_char_idx": 12859, "end_char_idx": 14330, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "42da87ae-f857-4541-b997-a95ceaa76bc5": {"__data__": {"id_": "42da87ae-f857-4541-b997-a95ceaa76bc5", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d67a8402-cd90-4d9b-b3a0-d9c52aef257d", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "50e241fbe79861ac57ac3d7c98518598885608c8130c5fef4c4312f8a7e26a39", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b7626bb-8669-4fd8-b852-8e8b8c18ce66", "node_type": "1", "metadata": {}, "hash": "d306e819885f272480bb8eb9ba0c7d14ca3ea00c0e187b631a1a9be8ccc6af5a", "class_name": "RelatedNodeInfo"}}, "text": "/// @brief Iterate over all SecLoged systabled and verify that SELECT * FROM\n/// them produces a valid rewrite (no errors). This would catch incompatibility\n/// errors with generated policies and attachments.", "mimetype": "text/plain", "start_char_idx": 14332, "end_char_idx": 14540, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8b7626bb-8669-4fd8-b852-8e8b8c18ce66": {"__data__": {"id_": "8b7626bb-8669-4fd8-b852-8e8b8c18ce66", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "42da87ae-f857-4541-b997-a95ceaa76bc5", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "d32b133e17694b0f1cc81f23469ac346c6bdd3e02d79bbf21e75c527691acefe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e7b818c1-eacb-43c9-b403-34867ccf84ce", "node_type": "1", "metadata": {}, "hash": "ebea1b300437c2a3e7027890b1fffba6c1447e113592057cc0855b7e9fa0ee82", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_P(TestDDMSecLog, CheckRewriteForSystable) {\n  std::string systable = GetParam().first;\n\n  auto input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(\"SELECT * from \" + systable))));\n  auto rewritten_input_q =\n      ddm::RewriteQuery(copyObject(input_q), false /* log_applied_policy */)\n          .rewrite;\n\n  auto rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n\n  // Due to backwards compatibility we have some STLs which only have\n  // access_control column and no other sensitive columns. For this set we check\n  // masking a bit differently.\n  bool orphan_access_control =\n      GetParam().second.size() == 1 &&\n      std::get<0>(GetParam().second[0]) == std::string(\"access_control\");\n  if (orphan_access_control) {\n    ASSERT_THAT(rewritten_input_sql,\n                ::testing::HasSubstr(\"(- CAST(1 AS INT4))\"));\n    return;\n  }\n\n  ASSERT_THAT(rewritten_input_sql, ::testing::HasSubstr(\"CASE\"));\n  ASSERT_THAT(rewritten_input_sql, ::testing::HasSubstr(\"WHEN\"));\n  ASSERT_THAT(rewritten_input_sql, ::testing::HasSubstr(\"THEN\"));\n  ASSERT_THAT(rewritten_input_sql, ::testing::HasSubstr(\"END\"));\n\n  if (systable.rfind(\"stv_\", 0) == 0) {\n    ASSERT_THAT(rewritten_input_sql,\n                ::testing::HasSubstr(\"IS_OBJECT_SENSITIVE_INTERNAL\"));\n  } else {\n    ASSERT_THAT(rewritten_input_sql, ::testing::HasSubstr(\"access_control\"));\n    ASSERT_THAT(rewritten_input_sql, ::testing::HasSubstr(\"GETBIT\"));\n  }\n}", "mimetype": "text/plain", "start_char_idx": 14541, "end_char_idx": 16024, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e7b818c1-eacb-43c9-b403-34867ccf84ce": {"__data__": {"id_": "e7b818c1-eacb-43c9-b403-34867ccf84ce", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8b7626bb-8669-4fd8-b852-8e8b8c18ce66", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "610044541e01c8a4923fda8f6d53f912be33500538955005bd55f61aa8a4e54f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ab7d108f-2b11-4be0-91d3-adc86c701fed", "node_type": "1", "metadata": {}, "hash": "53e11950f2b3fd4caec0bf5fab11ba02b77d90b69befa87c474c53d717d6e8a9", "class_name": "RelatedNodeInfo"}}, "text": "struct PrintSystable {\n  const char* operator()(const ::testing::TestParamInfo<TestParam> info) const {\n    return info.param.first.c_str();\n  }\n};\n\nINSTANTIATE_TEST_SUITE_P(TestDDMSecLogSystableTests, TestDDMSecLog,\n                         ::testing::ValuesIn(seclog_systables),\n                         PrintSystable());\n\nenum UserType { kRegular, kSuperuser, kBootstrap, kSecAdmin };\n\nclass TestDDMSecLogUserTypes : public pg::PgTest,\n                               public ::testing::WithParamInterface<UserType> {\n public:\n  TestDDMSecLogUserTypes() {}\n\n private:\n  AutoValueRestorer<bool> gconf_enable_secure_logging_restorer =\n      AutoValueRestorer<bool>(gconf_enable_secure_logging, true);\n  AutoValueRestorer<bool> g_pgtest_ddm_restorer =\n      AutoValueRestorer<bool>(g_pgtest_ddm, true);\n};\n\n/// @brief Check that SecLog rewrite works for all relevant user types: regular,\n/// super, bootstrap and secadmin.", "mimetype": "text/plain", "start_char_idx": 16026, "end_char_idx": 16946, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ab7d108f-2b11-4be0-91d3-adc86c701fed": {"__data__": {"id_": "ab7d108f-2b11-4be0-91d3-adc86c701fed", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e7b818c1-eacb-43c9-b403-34867ccf84ce", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "952d7b0d483298ac8212c52db01749e27c985d58739433482d3bbde79482dabb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5d148dbc-1ad9-4da4-8103-ed26f0bb8c33", "node_type": "1", "metadata": {}, "hash": "a827017d9842f739cd0d74efb44de07e2239f4e78458000d2a13b26915de67b5", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_P(TestDDMSecLogUserTypes, UserTypes)", "mimetype": "text/plain", "start_char_idx": 16947, "end_char_idx": 16991, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5d148dbc-1ad9-4da4-8103-ed26f0bb8c33": {"__data__": {"id_": "5d148dbc-1ad9-4da4-8103-ed26f0bb8c33", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ab7d108f-2b11-4be0-91d3-adc86c701fed", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "f86330f8a84bbae87d08f04727c5c73c00b751defd32981c0246ad003d62825f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ebf4a5fe-786f-4694-9213-d5dd83dcae69", "node_type": "1", "metadata": {}, "hash": "beb185e6e4465eaa2c2120cbfe58a9191d8423d0eb3c15ac7ed787c1255c265d", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::string nonce = boost::str(boost::format(\"%1%_%2%_%3%\") % std::rand() %\n                                 std::rand() % std::rand());\n  auto RunQueryNonce = [&nonce](const std::string& query) {\n    pg::RunQuery(boost::str(boost::format(query) % nonce));\n  };\n  auto GetUserIdNonce = [&nonce](const std::string& user) {\n    return get_user_id_by_name(boost::str(boost::format(user) % nonce).c_str());\n  };\n\n  auto current_id = GetUserId();\n  AclId user_id = GetUserId();\n\n  // In PG tests for some reason regular users don't have default access to\n  // pg_catalog schema and STLs in it. So we have to GRANT it manually.", "mimetype": "text/plain", "start_char_idx": 16992, "end_char_idx": 17617, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ebf4a5fe-786f-4694-9213-d5dd83dcae69": {"__data__": {"id_": "ebf4a5fe-786f-4694-9213-d5dd83dcae69", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5d148dbc-1ad9-4da4-8103-ed26f0bb8c33", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "79008c859929189fe7bcc1259e7fa17b213125b7df02a13446faef42d660c5ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "394303ca-c3da-47d9-bd4f-870875fd3e5b", "node_type": "1", "metadata": {}, "hash": "082b23751ee481d634bd97250dd4deade19e69244178263ce59a4a0a3c1110ba", "class_name": "RelatedNodeInfo"}}, "text": "switch (GetParam()) {\n    case kRegular:\n      RunQueryNonce(\"CREATE USER reg_%1% WITH PASSWORD 'Test123!'\");\n      RunQueryNonce(\"GRANT ALL ON SCHEMA pg_catalog TO reg_%1%\");\n      RunQueryNonce(\"GRANT ALL ON pg_catalog.stl_querytext TO reg_%1%\");\n      user_id = GetUserIdNonce(\"reg_%1%\");\n      break;\n    case kSuperuser:\n      RunQueryNonce(\n          \"CREATE USER super_%1% WITH CREATEUSER PASSWORD 'Test123!'\");\n      user_id = GetUserIdNonce(\"super_%1%\");\n      break;\n    case kSecAdmin:\n      RunQueryNonce(\"CREATE USER secadmin_%1% WITH PASSWORD 'Test123!'\");\n      RunQueryNonce(\"GRANT ROLE sys:secadmin TO secadmin_%1%\");\n      RunQueryNonce(\"GRANT ALL ON SCHEMA pg_catalog TO secadmin_%1%\");\n      RunQueryNonce(\"GRANT ALL ON pg_catalog.stl_querytext TO secadmin_%1%\");\n      user_id = GetUserIdNonce(\"secadmin_%1%\");\n      break;\n    case kBootstrap:\n      break;\n  }\n  SetUserId(user_id);\n\n  const std::string query = R\"SQL( SELECT text FROM stl_querytext )SQL\";\n\n  // Note, due to an OMNI SQL printing quirk, we have to pass the query through\n  // parse-analyze twice. The issue is that it inserts a useless extra pair of\n  // parenthesis around a predicate and thus the SQL string is different from\n  // the expected.\n  ResultCacheState rcs = makeResultCacheState(kResultCacheNoLookup);\n  auto input_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(query))));", "mimetype": "text/plain", "start_char_idx": 17620, "end_char_idx": 19014, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "394303ca-c3da-47d9-bd4f-870875fd3e5b": {"__data__": {"id_": "394303ca-c3da-47d9-bd4f-870875fd3e5b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ebf4a5fe-786f-4694-9213-d5dd83dcae69", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "93846324c497cc48a58c026fe052f6320dec09b88a2eb219efb60c8b8dc42175", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9dceb3a2-9f9a-4b74-a6fa-bbe7b3253d62", "node_type": "1", "metadata": {}, "hash": "bbc0ad511a49848e14589a00376679f32ba82e975142b5562fa1c416a0e010d1", "class_name": "RelatedNodeInfo"}}, "text": "auto rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(QueryRewriteAll(copyObject(input_q), NULL, rcs, false)));\n  auto rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));\n  rewritten_input_q = reinterpret_cast<Query*>(\n      linitial(pg::Analyze(pg::Parse(rewritten_input_sql))));\n  rewritten_input_sql =\n      omnisql::PrintSQL(omnisql::TranslateQuery(rewritten_input_q));", "mimetype": "text/plain", "start_char_idx": 19017, "end_char_idx": 19441, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9dceb3a2-9f9a-4b74-a6fa-bbe7b3253d62": {"__data__": {"id_": "9dceb3a2-9f9a-4b74-a6fa-bbe7b3253d62", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "394303ca-c3da-47d9-bd4f-870875fd3e5b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "6558075a44047e49942207ebaea47fb83b8b008da4239ce29969c76f4504c2d3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "736d7fde-07c0-4b83-a861-67a463e5d4ed", "node_type": "1", "metadata": {}, "hash": "573d6f48256bf73843c5f7bb1ee47190f06ab68836a66bb5bcf05a0b3e64a97f", "class_name": "RelatedNodeInfo"}}, "text": "auto expected_sql = R\"SQL(\nSELECT \"stl_querytext\".\"text\" AS \"text\"\nFROM (\n    SELECT\n      \"stll_querytext\".\"userid\" AS \"userid\",\n      \"stll_querytext\".\"xid\" AS \"xid\",\n      \"stll_querytext\".\"pid\" AS \"pid\",\n      \"stll_querytext\".\"query\" AS \"query\",\n      \"stll_querytext\".\"sequence\" AS \"sequence\",\n      \"stll_querytext\".\"text\" AS \"text\"\n    FROM (\n        SELECT\n          \"stll_querytext\".\"userid\" AS \"userid\",\n          \"stll_querytext\".\"xid\" AS \"xid\",\n          \"stll_querytext\".\"pid\" AS \"pid\",\n          \"stll_querytext\".\"query\" AS \"query\",\n          \"stll_querytext\".\"sequence\" AS \"sequence\",\n          CASE\n            WHEN (\n              GETBIT(\n                CAST(\"stll_querytext\".\"access_control\" AS VARBYTE(4)),\n                CAST(1 AS INT4)\n              ) = CAST(1 AS INT4)\n            ) THEN CAST(CAST('******' AS BPCHAR) AS CHAR(200))\n            ELSE \"stll_querytext\".\"text\"\n          END AS \"text\",\n          (- CAST(1 AS INT4)) AS \"access_control\"\n        FROM \"pg_catalog\".\"stll_querytext\" AS \"stll_querytext\"\n      ) AS \"stll_querytext\"\n    WHERE (\n        (\"stll_querytext\".\"access_control\" = CAST(0 AS INT4))\n        OR \"stll_querytext\".\"access_control\" IS NULL\n      )\n      OR (NOT IS_SECLOG_DOWNGRADE_ENABLED())\n  ) AS \"stl_querytext\"\n  )SQL\";\n  auto expected_q =\n      reinterpret_cast<Query*>(linitial(pg::Analyze(pg::Parse(expected_sql))));\n  auto expected_q_omni = omnisql::PrintSQL(omnisql::TranslateQuery(expected_q));", "mimetype": "text/plain", "start_char_idx": 19445, "end_char_idx": 20901, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "736d7fde-07c0-4b83-a861-67a463e5d4ed": {"__data__": {"id_": "736d7fde-07c0-4b83-a861-67a463e5d4ed", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9dceb3a2-9f9a-4b74-a6fa-bbe7b3253d62", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "08de7d4aa916d9fec97709267b305e48ab4fdae15739a894a7cd3a762a5a1749", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6045b67c-8e68-4b9b-ae8b-6b7d188911e1", "node_type": "1", "metadata": {}, "hash": "4ab1b271e67cd046855a9474bc6891895942208a7914e538682d65abaa5f51d9", "class_name": "RelatedNodeInfo"}}, "text": "EXPECT_EQ(expected_q_omni, rewritten_input_sql);\n\n  SetUserId(current_id);\n\n  RunQueryNonce(\"DROP USER IF EXISTS reg_%1%\");\n  RunQueryNonce(\"DROP USER IF EXISTS super_%1%\");\n  RunQueryNonce(\"DROP USER IF EXISTS secadmin_%1%\");\n}", "mimetype": "text/plain", "start_char_idx": 20905, "end_char_idx": 21133, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6045b67c-8e68-4b9b-ae8b-6b7d188911e1": {"__data__": {"id_": "6045b67c-8e68-4b9b-ae8b-6b7d188911e1", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "736d7fde-07c0-4b83-a861-67a463e5d4ed", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "0c987b36916e6c502e8e4add569d6561b570c565fd8b6048f405a3fc3995086a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b56b3a3-95ea-4860-9a3e-0d98c516e82d", "node_type": "1", "metadata": {}, "hash": "e216614096329ea09b29243f279e122071ff7882dcf6db9d5da28b4bb1899dae", "class_name": "RelatedNodeInfo"}}, "text": "struct PrintUserType {\n  const char* operator()(const ::testing::TestParamInfo<UserType> info) const {\n    switch (info.param) {\n      case kRegular:\n        return \"regular\";\n      case kSuperuser:\n        return \"superuser\";\n      case kBootstrap:\n        return \"bootstrap\";\n      case kSecAdmin:\n        return \"secadmin\";\n    }\n    XCHECK_UNREACHABLE(\"Invalid enum value\");\n  }\n};\n\nINSTANTIATE_TEST_SUITE_P(TestDDMSecLogUserTypesTests, TestDDMSecLogUserTypes,\n                         ::testing::ValuesIn({\n                             kRegular,\n                             kSuperuser,\n                             kBootstrap,\n                             kSecAdmin,\n                         }),\n                         PrintUserType());\n\n}", "mimetype": "text/plain", "start_char_idx": 21135, "end_char_idx": 21882, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "8b56b3a3-95ea-4860-9a3e-0d98c516e82d": {"__data__": {"id_": "8b56b3a3-95ea-4860-9a3e-0d98c516e82d", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "64d729b1a8a2d36bb7b4204e79788bcd688bb1804e523aa7b9216401bfd96d24", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6045b67c-8e68-4b9b-ae8b-6b7d188911e1", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "33d9c9f3499aef25e3196fffa9a0f76ba8d50da8d623d7f257064d40e3c62067", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 21884, "end_char_idx": 21905, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "faf7c440-96c3-4f69-b785-0a0aa9311b5a": {"__data__": {"id_": "faf7c440-96c3-4f69-b785-0a0aa9311b5a", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5d10bf67-33ea-4f6e-86c4-6c32146510a2", "node_type": "1", "metadata": {}, "hash": "4f3c3198e4589f474fe1f420642cb6c2f5f0cee2aac24643c5168bae2968f849", "class_name": "RelatedNodeInfo"}}, "text": "/// Copyright 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n\n// These two includes must go first and in this order.\n// clang-format off\n#include <gtest/gtest.h>\n#include \"pg/test/pg_test.hpp\"\n// clang-format on\n\n#include \"catalog/pg_type.h\"\n#include \"ddm/ddm_policy.hpp\"\n#include \"ddm/ddm_serialization.hpp\"\n#include \"nodes/makefuncs.h\"\n\n#include \"pg/ddm/ddm_test_helper.hpp\"\n\n#include <boost/format.hpp>\n\n#include <type_traits>\n#include <vector>", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 462, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "5d10bf67-33ea-4f6e-86c4-6c32146510a2": {"__data__": {"id_": "5d10bf67-33ea-4f6e-86c4-6c32146510a2", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "faf7c440-96c3-4f69-b785-0a0aa9311b5a", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "de36a512a8eaec6189689916e39f7c7d30a430ee6b50e5b0021556ca2e2afba4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "88e4d427-7dd3-4ae9-ab35-45fc9aaabe3c", "node_type": "1", "metadata": {}, "hash": "774106aac4df58dedf1b57636c22587fe5b8d22f2132e4bfbbcac7155ce3d9f7", "class_name": "RelatedNodeInfo"}}, "text": "namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 464, "end_char_idx": 482, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "88e4d427-7dd3-4ae9-ab35-45fc9aaabe3c": {"__data__": {"id_": "88e4d427-7dd3-4ae9-ab35-45fc9aaabe3c", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5d10bf67-33ea-4f6e-86c4-6c32146510a2", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9f9fa96ade9d721c05e9c16e9a692eae6f60598aada58398822189ddb42c059b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2f4e32c2-068f-47a2-9f5c-e6506f3284eb", "node_type": "1", "metadata": {}, "hash": "4e292aef1b82213731cf980309d817a99320edb0a1a533b190db8f807e233ea8", "class_name": "RelatedNodeInfo"}}, "text": "{\n\nclass TestDDMSerialization : public pg::PgTest {};\n\n/// Test serialization and deserialization of ParsedPolicyExpression objects.\n/// Verify that deserialized value matches the original.\nPG_TEST_F(TestDDMSerialization, ParsedPolicyExpressions) {\n  std::vector<ddm::ParsedPolicyExpression> input = {\n      {\"a + 5\", 10, 0},\n      {\"b * 10\", 20, 1},\n  };\n\n  std::string serialized = ddm::SerializeParsedPolicyExpressions(input);\n\n  ASSERT_FALSE(serialized.empty());\n\n  std::vector<ddm::ParsedPolicyExpression> deserialized =\n      ddm::DeserializeParsedPolicyExpressions(serialized);\n\n  ASSERT_EQ(deserialized, input);\n}\n\n/// Test serialization and deserialization of ColumnDef objects. Verify that\n/// deserialized value matches the original.\nPG_TEST_F(TestDDMSerialization, ColumnDefs) {\n  std::shared_ptr<ColumnDef> column_definition_1(\n      makeColumnDef(\"column_1\", INT4OID, 0), PAlloc_deleter());\n  std::shared_ptr<ColumnDef> column_definition_2(\n      makeColumnDef(\"column_2\", FLOAT8OID, 1), PAlloc_deleter());\n\n  std::vector<std::shared_ptr<ColumnDef>> input = {\n      column_definition_1,\n      column_definition_2,\n  };\n\n  std::string serialized = ddm::SerializeColumnDefs(input);\n\n  ASSERT_FALSE(serialized.empty());\n\n  std::vector<std::shared_ptr<ColumnDef>> deserialized =\n      ddm::DeserializeColumnDefs(serialized);\n\n  ASSERT_TRUE(std::equal(input.begin(), input.end(), deserialized.begin(),\n                         pgtest::ColumnDefComparator));\n}", "mimetype": "text/plain", "start_char_idx": 483, "end_char_idx": 1951, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2f4e32c2-068f-47a2-9f5c-e6506f3284eb": {"__data__": {"id_": "2f4e32c2-068f-47a2-9f5c-e6506f3284eb", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "88e4d427-7dd3-4ae9-ab35-45fc9aaabe3c", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "9d8ce89fd7bab8ea3ff849ce7af83ce41b204a8281385a386dc0a9b3d9825701", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f870af83-d3c2-4694-bde7-69503fa68bbc", "node_type": "1", "metadata": {}, "hash": "2db239cf74252fe54acd3e68586d5d133194f960b9607ff0c961043bfacdac6b", "class_name": "RelatedNodeInfo"}}, "text": "/// Test AttachedAttribute comparator varying attribute type and values and\n/// path values.", "mimetype": "text/plain", "start_char_idx": 1953, "end_char_idx": 2045, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f870af83-d3c2-4694-bde7-69503fa68bbc": {"__data__": {"id_": "f870af83-d3c2-4694-bde7-69503fa68bbc", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2f4e32c2-068f-47a2-9f5c-e6506f3284eb", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "8887a282e2136987ec79d415807d6624dee3ff2f1cd297aa153065989c0ef87f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bf102095-bcaf-40e1-b6d2-f9fb46072f0b", "node_type": "1", "metadata": {}, "hash": "181c053a4dc29a276bc3e2b880917c7b87d81d6d1627145b1458a293c569dec7", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSerialization, AttachedAttributeComparator)", "mimetype": "text/plain", "start_char_idx": 2046, "end_char_idx": 2106, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bf102095-bcaf-40e1-b6d2-f9fb46072f0b": {"__data__": {"id_": "bf102095-bcaf-40e1-b6d2-f9fb46072f0b", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f870af83-d3c2-4694-bde7-69503fa68bbc", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "031ed8ecc5c8ba071b71f7df377625cbe28a04c30b4cd3fc7022be0e29b4178c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "988626d6-e29d-4b8a-8a84-e5d2cc7ee134", "node_type": "1", "metadata": {}, "hash": "c1ff6147db188b4f4f245108277e2d95d4ae18caa6e4902620f200c4ad701b70", "class_name": "RelatedNodeInfo"}}, "text": "{\n  std::shared_ptr<ColumnDef> column_definition_1(\n      makeColumnDef(\"column_1\", INT4OID, 0), PAlloc_deleter());\n  std::shared_ptr<ColumnDef> column_definition_2(\n      makeColumnDef(\"column_2\", FLOAT8OID, 1), PAlloc_deleter());\n\n  ddm::AttachedAttribute aa_int_no_path = {1, std::nullopt};\n  ddm::AttachedAttribute aa_int_with_path = {1, R\"(\"some\".\"nested\".\"path\")\"};\n  ddm::AttachedAttribute aa_int_with_path_2 = {2,\n                                               R\"(\"another\".\"nested\".\"path\")\"};\n  ddm::AttachedAttribute aa_int_with_path_3 = {1,\n                                               R\"(\"another\".\"nested\".\"path\")\"};\n\n  ddm::AttachedAttribute aa_str_no_path = {\"col\", std::nullopt};\n  ddm::AttachedAttribute aa_str_with_path = {\"col\",\n                                             R\"(\"some\".\"nested\".\"path\")\"};\n  ddm::AttachedAttribute aa_str_with_path_2 = {\"col2\",\n                                               R\"(\"some\".\"nested\".\"path\")\"};\n  ddm::AttachedAttribute aa_str_with_path_3 = {\"col\",\n                                               R\"(\"another\".\"nested\".\"path\")\"};\n\n  ddm::AttachedAttribute aa_coldef_no_path = {column_definition_1,\n                                              std::nullopt};\n  ddm::AttachedAttribute aa_coldef_with_path = {column_definition_1,\n                                                R\"(\"some\".\"nested\".\"path\")\"};", "mimetype": "text/plain", "start_char_idx": 2107, "end_char_idx": 3473, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "988626d6-e29d-4b8a-8a84-e5d2cc7ee134": {"__data__": {"id_": "988626d6-e29d-4b8a-8a84-e5d2cc7ee134", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bf102095-bcaf-40e1-b6d2-f9fb46072f0b", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5450a0ae3884faedf829dffe85b97ad93cf4d34986504747110cbba1cb54e1cb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9bf7b273-05ea-4e92-a440-a5d4e5101e87", "node_type": "1", "metadata": {}, "hash": "2185bff14318b68c1e5e30528f1b9a678de2d1bc4bc59dd2727773a221667774", "class_name": "RelatedNodeInfo"}}, "text": "ddm::AttachedAttribute aa_coldef_with_path_2 = {column_definition_2,\n                                                  R\"(\"some\".\"nested\".\"path\")\"};\n  ddm::AttachedAttribute aa_coldef_with_path_3 = {\n      column_definition_1, R\"(\"another\".\"nested\".\"path\")\"};\n\n  ASSERT_TRUE(aa_int_no_path == aa_int_no_path);\n  ASSERT_TRUE(aa_int_with_path == aa_int_with_path);\n  ASSERT_FALSE(aa_int_with_path == aa_int_with_path_3);\n  ASSERT_FALSE(aa_int_with_path_2 == aa_int_with_path_3);\n\n  ASSERT_TRUE(aa_str_no_path == aa_str_no_path);\n  ASSERT_TRUE(aa_str_with_path == aa_str_with_path);\n  ASSERT_FALSE(aa_str_with_path == aa_str_with_path_3);\n  ASSERT_FALSE(aa_str_with_path_2 == aa_str_with_path_3);\n\n  ASSERT_TRUE(aa_coldef_no_path == aa_coldef_no_path);\n  ASSERT_TRUE(aa_coldef_with_path == aa_coldef_with_path);\n  ASSERT_FALSE(aa_coldef_with_path == aa_coldef_with_path_3);\n  ASSERT_FALSE(aa_coldef_with_path_2 == aa_coldef_with_path_3);\n\n  ASSERT_FALSE(aa_int_with_path == aa_str_with_path);\n  ASSERT_FALSE(aa_str_with_path == aa_coldef_with_path);\n  ASSERT_FALSE(aa_coldef_with_path == aa_int_with_path);\n}", "mimetype": "text/plain", "start_char_idx": 3476, "end_char_idx": 4581, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "9bf7b273-05ea-4e92-a440-a5d4e5101e87": {"__data__": {"id_": "9bf7b273-05ea-4e92-a440-a5d4e5101e87", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "988626d6-e29d-4b8a-8a84-e5d2cc7ee134", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "76cfff4cf76ea31d6d462d10cd87afc0b9c54472462634fd4e2139b0d85d65f0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc1f7601-3d82-4a79-a244-3a11b57b2d44", "node_type": "1", "metadata": {}, "hash": "196a6b40813cb3486fee768a42e0c2604d7b639cef68ef3c523f7034bbda566f", "class_name": "RelatedNodeInfo"}}, "text": "/// Test serialization and deserialization of attribute_info_t(std::vector of\n/// AttachedAttribute). Verify that deserialized value matches the original.\nPG_TEST_F(TestDDMSerialization, AttachedAttributes) {\n  ddm::attribute_info_t input = {{0, std::nullopt},\n                                 {1, R\"(\"some\".\"nested\".\"path\")\"},\n                                 {\"col1\", std::nullopt},\n                                 {\"col2\", R\"(\"another\".\"nested\".\"path\")\"}};\n  std::string expected_json_out =\n      R\"([)\"\n      R\"(0,)\"\n      R\"({\"t\":0,\"column\":1,\"path\":\"\\\"some\\\".\\\"nested\\\".\\\"path\\\"\"},)\"\n      R\"({\"t\":0,\"column\":\"col1\"},)\"\n      R\"({\"t\":0,\"column\":\"col2\",\"path\":\"\\\"another\\\".\\\"nested\\\".\\\"path\\\"\"})\"\n      R\"(])\";\n\n  std::string serialized_json_out = ddm::SerializeAttachedAttributes(input);\n  ASSERT_TRUE(serialized_json_out == expected_json_out);\n\n  ddm::attribute_info_t deserialized =\n      ddm::DeserializeAttachedAttributes(serialized_json_out);\n  ASSERT_TRUE(input == deserialized);\n}\n\n/// Test serialization and deserialization of ColumnDef objects via attribute\n/// numbers and a relation. Verify that deserialized value matches the original.", "mimetype": "text/plain", "start_char_idx": 4583, "end_char_idx": 5737, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bc1f7601-3d82-4a79-a244-3a11b57b2d44": {"__data__": {"id_": "bc1f7601-3d82-4a79-a244-3a11b57b2d44", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9bf7b273-05ea-4e92-a440-a5d4e5101e87", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "dbcd4bbd0b616a967b5b4c591f35e141e780d1aff7f93a828bab0459873e6a4e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "80bc24f8-cafd-481c-8481-840735b472f8", "node_type": "1", "metadata": {}, "hash": "590f6be742a446ffb5c2b6d2f6092469577cddc09722752ab36efbc38fce5221", "class_name": "RelatedNodeInfo"}}, "text": "PG_TEST_F(TestDDMSerialization, AttributesOldEncoding) {\n  std::vector<int> input = {3, 4, 6};\n\n  std::string serialized = ddm::SerializeAttributeNumbers(input);\n\n  ASSERT_FALSE(serialized.empty());\n\n  std::vector<ddm::AttachedAttribute> deserialized =\n      ddm::DeserializeAttachedAttributes(serialized);\n\n  ASSERT_EQ(deserialized.size(), input.size());\n  for (size_t i = 0; i < deserialized.size(); i++) {\n    ASSERT_TRUE(std::holds_alternative<int>(deserialized[i].attribute));\n    ASSERT_EQ(std::get<int>(deserialized[i].attribute), input[i]);\n    ASSERT_FALSE(deserialized[i].path.has_value());\n  }\n}\n\nenum AttachmentType { kTable = 't', kView = 'v', kLBV = 'l' };\n\ntemplate <typename C>\nvoid TypeCheck(AttachmentType type) {\n  switch (type) {\n    case kTable:\n    case kView:\n      if constexpr (!std::is_same<C, int>::value) {\n        FAIL();\n      }\n      break;\n    case kLBV:\n      if constexpr (!std::is_same<C, std::string>::value) {\n        FAIL();\n      }\n      break;\n  }\n}", "mimetype": "text/plain", "start_char_idx": 5738, "end_char_idx": 6727, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "80bc24f8-cafd-481c-8481-840735b472f8": {"__data__": {"id_": "80bc24f8-cafd-481c-8481-840735b472f8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc1f7601-3d82-4a79-a244-3a11b57b2d44", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "effb7a813e40f78f1955c8a04b08ecb9360dfdce871005f096b7f29c64ffe771", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3436957c-c2ee-4b48-b228-429efeaee721", "node_type": "1", "metadata": {}, "hash": "351cf779ddff0e3d36f3ca8da74cf8cf819494771bd843ce6e6128f701bb5082", "class_name": "RelatedNodeInfo"}}, "text": "template <typename C>", "mimetype": "text/plain", "start_char_idx": 6410, "end_char_idx": 6431, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "3436957c-c2ee-4b48-b228-429efeaee721": {"__data__": {"id_": "3436957c-c2ee-4b48-b228-429efeaee721", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80bc24f8-cafd-481c-8481-840735b472f8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "5805b34c7741e973027e59eb0ac0085f29d522e301b1658216852ba2976ab03e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1884e717-c247-4f02-a65b-05b238f316b8", "node_type": "1", "metadata": {}, "hash": "9121b0380032c7688cd7fcb7719e06e2bebf0bda4346d00c3a3e732b3b644354", "class_name": "RelatedNodeInfo"}}, "text": "void AttributesNewEncoding(AttachmentType type)", "mimetype": "text/plain", "start_char_idx": 6751, "end_char_idx": 6798, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1884e717-c247-4f02-a65b-05b238f316b8": {"__data__": {"id_": "1884e717-c247-4f02-a65b-05b238f316b8", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3436957c-c2ee-4b48-b228-429efeaee721", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "1da1e232d2f956e082e18d14c3a41211bf58de011cdbf8c66204f6a865596903", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6c9b34f7-f8f0-4583-a81a-bc47faa28aaf", "node_type": "1", "metadata": {}, "hash": "6040e077ae51c27af07ad1a1607facf960ce2aaef763d15898a9075448e19ebd", "class_name": "RelatedNodeInfo"}}, "text": "{\n  TypeCheck<C>(type);\n\n  std::string json_string;\n  std::vector<C> expected_attributes;\n  std::vector<std::optional<std::string>> expected_paths = {\n      \"nested.path\", \"another.nested.path\", std::nullopt};\n  if (type == kLBV) {\n    json_string =\n        R\"( [                                                             )\"\n        R\"(   { \"t\": %1%, \"column\": \"a\", \"path\": \"nested.path\" },         )\"\n        R\"(   { \"t\": %1%, \"column\": \"b\", \"path\": \"another.nested.path\" }, )\"\n        R\"(   { \"t\": %1%, \"column\": \"c\" }                                 )\"\n        R\"( ]                                                             )\";\n    if constexpr (std::is_same<C, std::string>::value) {\n      expected_attributes = {\"a\", \"b\", \"c\"};\n    }\n  } else {\n    json_string =\n        R\"( [                                                           )\"\n        R\"(   { \"t\": %1%, \"column\": 1, \"path\": \"nested.path\" },         )\"\n        R\"(   { \"t\": %1%, \"column\": 2, \"path\": \"another.nested.path\" }, )\"\n        R\"(   3                                                         )\"\n        R\"( ]                                                           )\";\n    if constexpr (std::is_same<C, int>::value) {\n      expected_attributes = {1, 2, 3};\n    }\n  }\n  json_string = (boost::format(json_string) %\n                 static_cast<int>(ddm::AttachedAttributeType::kLBVsPaths))\n                    .str();", "mimetype": "text/plain", "start_char_idx": 6799, "end_char_idx": 8194, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6c9b34f7-f8f0-4583-a81a-bc47faa28aaf": {"__data__": {"id_": "6c9b34f7-f8f0-4583-a81a-bc47faa28aaf", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1884e717-c247-4f02-a65b-05b238f316b8", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "94fbe08e7815f5fc2e0dc0cfe5784da2e316982db28de7930b0774e1a270bb40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e0148740-d1b8-49ba-9f00-7cd08fef2476", "node_type": "1", "metadata": {}, "hash": "471f92e60dc3fe0325e12de5b240ffbc752ad690c7aaf8e865fad26d0722651b", "class_name": "RelatedNodeInfo"}}, "text": "std::vector<ddm::AttachedAttribute> deserialized_attributes =\n      ddm::DeserializeAttachedAttributes(json_string);\n\n  ASSERT_EQ(deserialized_attributes.size(), expected_attributes.size());\n  for (size_t i = 0; i < deserialized_attributes.size(); i++) {\n    ASSERT_TRUE(\n        std::holds_alternative<C>(deserialized_attributes[i].attribute));\n    ASSERT_EQ(std::get<C>(deserialized_attributes[i].attribute),\n              expected_attributes[i]);\n    ASSERT_EQ(deserialized_attributes[i].path, expected_paths[i]);\n  }\n}", "mimetype": "text/plain", "start_char_idx": 8198, "end_char_idx": 8720, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "e0148740-d1b8-49ba-9f00-7cd08fef2476": {"__data__": {"id_": "e0148740-d1b8-49ba-9f00-7cd08fef2476", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c9b34f7-f8f0-4583-a81a-bc47faa28aaf", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "04ed41942e79c9b2b6e5915027f89cee2e54813b86fe5b5f0da2b8368feaa8e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0d9699a0-b53c-4c81-be26-c57ebc3dc83f", "node_type": "1", "metadata": {}, "hash": "e216614096329ea09b29243f279e122071ff7882dcf6db9d5da28b4bb1899dae", "class_name": "RelatedNodeInfo"}}, "text": "/// Test deserialization of ColumnDef objects with paths. Verify that\n/// found_paths flag is set correctly, and that the paths are read correctly.\nPG_TEST_F(TestDDMSerialization, AttributesNewEncodingTable) {\n  AttributesNewEncoding<int>(AttachmentType::kTable);\n}\nPG_TEST_F(TestDDMSerialization, AttributesNewEncodingView) {\n  AttributesNewEncoding<int>(AttachmentType::kView);\n}\nPG_TEST_F(TestDDMSerialization, AttributesNewEncodingLBV) {\n  AttributesNewEncoding<std::string>(AttachmentType::kLBV);\n}\n\n}", "mimetype": "text/plain", "start_char_idx": 8722, "end_char_idx": 9228, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0d9699a0-b53c-4c81-be26-c57ebc3dc83f": {"__data__": {"id_": "0d9699a0-b53c-4c81-be26-c57ebc3dc83f", "embedding": null, "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5", "node_type": "4", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "c1ea53c039fa1b97856a6b46874e5d0215b84c2918d350e6b7b02bf1f331b332", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e0148740-d1b8-49ba-9f00-7cd08fef2476", "node_type": "1", "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}, "hash": "55033a806e46f652a3e4155e8b271834f4381da66107627a73e10ae1b2cffb8d", "class_name": "RelatedNodeInfo"}}, "text": "// namespace ddm_test", "mimetype": "text/plain", "start_char_idx": 9230, "end_char_idx": 9251, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"9245bb40-0800-49bd-a1f5-4215a359c6c4": {"doc_hash": "e2b44288153e5cc9f53041beb64533217356fa877f06546f64950e41d054f3ed", "ref_doc_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032"}, "cf078808-784c-4859-b8d3-8376c578590a": {"doc_hash": "4ac55c703b3dd11c494c74ddd621e1690b4f6024fe3ff9228538b28e4e11789f", "ref_doc_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032"}, "d9690d15-167a-4172-89a2-037689e769ff": {"doc_hash": "6736d3448d5dc34458c9f2c91cd18ec3ce56a93411c7cb3bae193a20e20d9e72", "ref_doc_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032"}, "52f49ca0-7cb7-4444-a1f4-1823b84ebcdb": {"doc_hash": "6bdc3f580827e8df97d175a622d1b689ea9f99c6bea973a584c1c79f64763319", "ref_doc_id": "2622ac34-fa12-421d-9ab9-4a33c9e6e032"}, "5c927a18-2ffb-47e0-a4b6-db0edc2bc979": {"doc_hash": "1f9615e6df23ecb0133279855801a701b5b58b347b2262504d5d0c0fac0693a0", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "68a46f5a-4b58-4621-b10f-653010848c31": {"doc_hash": "476920cef60cfa8fb7ef3a73ec3193eab1b445a5e035927e539f08a97af53f61", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "42233464-548a-4e90-b88e-f988dbb6b852": {"doc_hash": "d500e51a098972c18750b4b2cd12cea0d1b899710d58284721906301dce5ee95", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "3c9fec90-f031-4b0c-8fc8-0339bcc0c7c9": {"doc_hash": "96f6ada999bd68ac22a2d6d2580e1b9e6df8699e7ba709cabf8976635e129d24", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "e3df1c42-4f08-4cfc-addb-e806ceb8f7aa": {"doc_hash": "ea5c87fa488baa314046a0bbeeeac557a58b8d0673c077c2e6e79239d4ebc85f", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "f61a2cff-604d-49d5-ad21-e959f78d27ae": {"doc_hash": "3fb7a9e28ad6a440edaee3db6eed1a6add0951d7953233db4c3898bf82758f24", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "a09e8da6-d20c-4b21-bf74-0091b505402f": {"doc_hash": "23ed51be599f317fa39f488a1a113f7b712957c2d60abc5bfa2c0acd8675e74d", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "475b7cad-0a4a-43c1-ab54-e134f78451b4": {"doc_hash": "9a0069fcdd67c5beb8368b0bd7b30f93171cb772753c637309edb26b34f537d3", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "270edb30-914b-4449-bd65-98bacfc6d402": {"doc_hash": "27d999d0247649bfdecb027ceeffd6e1ebb2bb13cdaf3ff23d2212b3b39e7f52", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "ae047793-00fa-4b93-9b3d-0b7421b13c8b": {"doc_hash": "d6d83bec222a749f3704610d69a03efafa5c25c7059f3979941027c06f18b877", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "b3528d51-2ad4-4015-8b6f-5b33adfdb788": {"doc_hash": "410fa6162c23f148478ef3ff29be73eb86dfd7fa1e1e2c9bf4588d58cb2c92d6", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "67cb593d-2584-4af7-94e9-abf744423f71": {"doc_hash": "0c788d3e653245b521cbcfc440b06b0b9eb6bff0c12ab66217366133d7d01c57", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "c28d7e86-efe3-4f21-bc24-430f855dba55": {"doc_hash": "ace237a38491e3a2df1dfd2010cc674d54ed394b2464310a226d89d6dc752774", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "e652b2f3-43a7-410e-a620-edcefef834ca": {"doc_hash": "3adfe9459c7a6b8f551d5a7e6da63017e73ec6398a679ddd98da34927b245a57", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "dfb3623f-7293-4f31-95a9-9fce2466e46c": {"doc_hash": "5c5ee9945bd5105f777865f97e3b36f0ba17dd927ed08e9a745f71ec964ab226", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "73edc49a-a90a-4b6f-80fb-ee14b4b1d42e": {"doc_hash": "cb0dc12a2629a64deef7a4f1d0d6e19fcc33bf5a9528be32d3e5fbdbd4a49df0", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "a3de67d6-528b-4ed2-8170-0aac0c1c7e53": {"doc_hash": "95cc5cfd28cc1e00584e86b7c5258f81922093b7428c01823d43b75bba07dab6", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "332d62c6-3118-45a1-b8a7-b34cbe7b160c": {"doc_hash": "9e8519a644be96cf9b3eba6723413ca17d6211008328007cbbacd7466cb0459a", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "821689d6-9a72-4ee6-a289-a699df207061": {"doc_hash": "a289f250430510e64bc7f5178b6b2d30f731e018e8474fe360bf0723a4ebf4e3", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "41917d8a-aab7-4a09-a0ae-3bc5bc865e78": {"doc_hash": "d82dbc3f33aa6a4ae9d30cdc8b963e4eaaf6a572605c84991ba0406dc376d29e", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "269e7645-0ed9-4648-9840-f6fb08990d19": {"doc_hash": "d918bb0fd477a4e8f47621806722f4029d779a705daa5807c5d940cbe9e2db2a", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "dc64592d-fee2-484e-a6fd-9f59e8662fc9": {"doc_hash": "a81dfb310468f15fa6edfa908939f544ce4c30e7ce5dd2d02a36973a59ccf771", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "0c8d7b23-252f-4342-a740-46c77be2531f": {"doc_hash": "09e2dd381232708030e87ba799203cd83bf0ae42eb5b5a77e2eae10ac3605e22", "ref_doc_id": "4333a828-4e33-4f01-b126-6ae6c52c135c"}, "a5a35155-e0b0-457c-ad59-0ff23020bd07": {"doc_hash": "75a7874725d1ab76e09c85ecfa7b4b8a121c5578ad2d33575d6510f44839bc2b", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "ac695dc9-118e-469a-9ca6-52c473b773a0": {"doc_hash": "9386b6b8c2d58e340a79a42307f59fb6ae18ab0330b8c0c802cb4a0259858348", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "b58d641c-e492-456f-8da5-2811ddba2e21": {"doc_hash": "fe4fa5215c2a6fbeca0c0fedd02afb3dbb030d746ad77278060fd4c19789271c", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "d5d727f2-dbcd-4625-926e-3fc9a484ad87": {"doc_hash": "c144cb0dbd9a4d4571e20c99b5de5ca9cadc66b460881598b7e9d30eda1632b2", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "202658c2-1fa9-43ce-9c07-897999932c28": {"doc_hash": "a4170211aee1fb6bae25970863f8bcb7fc068f220fab14b2d8a13b327e0707a1", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "eb275589-2fa9-41a1-9ab3-5cfc6e5bcf26": {"doc_hash": "07347243f372638deff4aae35c30972810b38478e7312cbf320a6e5f618bc81b", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "55c8ed58-499f-4091-bf39-0a901f356611": {"doc_hash": "814eb172f10301bec5aa2b26f5908b8a6873c661fbcbfa7290c1914d500fc967", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "476eb489-3916-46eb-ae47-d4e9fbede8ff": {"doc_hash": "9bbd3ce0d69c92bf223a61a2b5ee039be4b7b848cb4d561c11ebd649b2dadc5d", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "c5ab945d-41fd-488f-b8a1-0846add98aa0": {"doc_hash": "c9d97f749614287fa51c5f3b87c54bd8d2ef27003855f84b146e13c9e857c9bc", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "884497b2-26ef-41ba-bb23-b2f1275d6ea1": {"doc_hash": "bc56bcb29fe6cef9c3d98cd04957127e21afce3d2653bc533497768b304a68a8", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "77f2ce6b-a0d4-4dcf-84a7-694cd55f53a1": {"doc_hash": "0571324518c282589bbcade48a26bb31d906ac514c920b6c07cb16ea8b4678c6", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "2cc97256-518d-4efa-8662-79cee4ff03ee": {"doc_hash": "7d780a9b495ddb2acc7b6ea52d6ba89bf300f63b478d21413175e5bab20c20d5", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "175e13d4-bf93-428f-85e6-e43d5c78ba6c": {"doc_hash": "122d5032b447a0ace297e25b7b4f00bc52651df730562bedc86523f50e64994b", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "15cdd690-17f2-4598-a8f4-6d8adee1fa67": {"doc_hash": "35ae1e42a342de22bf89eb3925c859ce83477d8162a0a67fa8bb42edc91a63fe", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "914cf16d-a45c-46f9-be6b-7fed0cb9091b": {"doc_hash": "93e91fdc02dcbf2e6685a61d80adf078f8a3a7bbfc7f6e7b8a828ba5802d6673", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "0ae1176f-cbdc-42df-a78f-4baf2616881a": {"doc_hash": "03c8e9bcd1c17dccaff87295410e223369d32a642f6330ba960a1fca5e23f3ae", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "e211eb53-c789-445b-9714-e35baab33ba5": {"doc_hash": "bc69b813c5a424e008d18baa4ae71ecbf3a12f071ba2b925c03482d44b06ffce", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "4a0bf643-958c-4b34-81a6-ded2860f3df2": {"doc_hash": "96496cf353b4c34732fac1c47b15f42b41d362a95e08ca4ced70e1fd0ececf14", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "23c1764f-f356-497d-bea6-7ad1da0c455f": {"doc_hash": "9dbfad42ca56210804493ee47d79f3e9ef9dbf8abdf525d439ae081edb5aaaf0", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "3b7fb880-a1df-4ab5-81cf-b90eb535d8d0": {"doc_hash": "69a54a2b1ecace05e921cb41b7d08e90649fd4a7d5be02fe7b82b4cf86acaeb6", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "06154d55-e5de-4fb7-8dd8-d76b60c8ef26": {"doc_hash": "845cea9eb0551b18071723c5e03027073641d733fa81da2696e2da6413918d5b", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "092921ec-61f1-40bc-a476-9d4977896123": {"doc_hash": "667d185b89f9a922943a3ef0f885cc14e43fb375e70d8e158898d9b82f04642b", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "4ee50a76-fc23-4cb0-8db8-29dba372854c": {"doc_hash": "4d5b14ff6c190b688de1cbd3538ea4122d05d2c90bd68cd2c5e688b4c65ec6d3", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "21d586a4-cf75-4a9a-9a0e-77fe7b9096f7": {"doc_hash": "f833b5109c091d2e292e079253c19f75e18fab79ffd3db7b77796bd5e4b398f6", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "a6d903dc-d190-4610-a122-e997a6fdb0c9": {"doc_hash": "f70bc0f7461424342a69d0f2dd1ab735a30524237fca0c82bbc466f1f5da9871", "ref_doc_id": "00a8c872-0f52-402b-9472-cc3122a11f16"}, "16f9e732-6277-4ad8-b345-3068d200afb7": {"doc_hash": "ba2ff28ed11919d7dcd42d0f56b82034ed759faac16eec0216ccdc101cfb1e53", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "3d9e8e82-0eb2-4d4d-9997-67bcff4cfecb": {"doc_hash": "961942fc5c638e7857de032e6b41f30e4a92b4d8c26609b84f95519ffda773fb", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "1a1bb7e0-0c35-444a-be28-8a8be05f7a0f": {"doc_hash": "38f9dd8ef44a33eae7f5932dd52e5668702f6355b8d6b60effac74599db239d9", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "0c2118e2-b9d8-4b8b-9462-d5f6ef0f166f": {"doc_hash": "560eee50b24a35e0e5ec6a8134fa80cca9db6333f6039657c3614bbd191f164d", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "74bd82a6-44b4-4d20-af08-f536081ad8be": {"doc_hash": "891a92e3b2cc75766fc4d4ed0c4ca2bbe1d96d1dbf255dc98fe92435e2e468bd", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "7e76b154-5b2c-4970-a140-508651ca9389": {"doc_hash": "b83fbe1c36a2a5ae030759dc311ab924071c518f5b7be0208c6c3ecbf505b40e", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "bfae1073-1d00-483f-9661-a642bec61159": {"doc_hash": "06414c3c44823ecb398f37e9000bd30a124fbac0beea2e5e14a0b059113631fd", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "a4e7e759-3cb9-488d-bf75-2222b36130a0": {"doc_hash": "02fb24950c8e19a89ffc786d815fc56734b7031fae13994705749ff8c3132d8c", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "e2fb8fbc-8e78-40d5-953a-caadd75862dd": {"doc_hash": "2d7c94ddb1991b82c716172f619cfd708462b79d71a486d9df86e1b7f9522800", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "1edbdabe-eb97-4ce7-bd39-cb5c5a0fb8b5": {"doc_hash": "69b2710080f81f2132d60f328620da902d9fa59cecbc9b2334f3102fa4476c21", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "9778ef46-3a65-47e4-a5be-3f3c4c8dc77e": {"doc_hash": "ff82dbc455bcbd285509900d83221e20847ea8a7108c91a01603be4ad204fc82", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "68cc52ce-1c57-4f01-8ec6-2af7c301361a": {"doc_hash": "aa20d5fbf0ed452d1e6114a0da28b3297637b7a75ac7d500505facbe73137d23", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "b15b35e8-ae13-4e86-bf09-df585fee304d": {"doc_hash": "5c5bbc34dbc2336b3cf3ac0e0e953552585ed3e2cbff18c63a943319ab32e432", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "3c257bb0-ccf4-4a4c-8fbc-f51d7e3e802b": {"doc_hash": "5d6b75ab7ce56b23503be81dd1af5e75ae29149f4b6d09a5540972bf55a2f31a", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "8a938b1c-945a-4c65-8e85-dcb6dab5bdc4": {"doc_hash": "f621e7d2029ce09e5901a450436b137abd7bad2e3dd5ffe5286f5a252e072c22", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "1d5e0812-0e70-413b-98ae-b18c8204cf08": {"doc_hash": "5c8d705efccea4a6e425ec08b59065643293701f6fdb002dc5687432d0d2a233", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "ffe79e30-422b-4b87-a35a-03d08267c8d6": {"doc_hash": "40ac2300acb3f943a3c055211a6b03269a8e9cfdf8a169125289efeccecb58a2", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "81720a34-d609-44ea-8efe-4a3c43b89ef4": {"doc_hash": "b963f5c76de2b44fe5df442109f068091944047d334492955110fb7188a22676", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "f5a8e7e7-d57c-459e-8374-88977e31a036": {"doc_hash": "d22eef73cf05a45976701fc774625104c0a062eaf77b48a14d1284a433d12445", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "4583ad66-eb65-4025-8073-126a432f1b43": {"doc_hash": "aa20d5fbf0ed452d1e6114a0da28b3297637b7a75ac7d500505facbe73137d23", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "d07af689-29a5-444d-aae5-f18379e39480": {"doc_hash": "9311c0980654c6029ffadab053d20fc408f91289ef79d263050aa83c7f34aedf", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "59ebc952-9c88-484e-b535-6c42158d0b08": {"doc_hash": "0c467080c013dddb341987fc2aa36ff03788e1a0622aaa5a3ef86b9106a8bd8f", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "f843c3e2-4291-4e57-847d-c72d15b89076": {"doc_hash": "273f4f3ef66275cee4037bb44e956705dcf152d809034da9cf6af0cb1d483c4d", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "3089e355-b561-4ab8-a9a5-6027645d7c14": {"doc_hash": "2e76ca7a6336dbd4c8f478a161c730b0a927a0eee2cfdb8d824fced780cef0ab", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "a0560093-c007-4d8a-b9f8-969797afb101": {"doc_hash": "39238f8bef768eef80f4e3062f2bb13d5ec9cb4a25e108db1bb32cba7b4dcd2d", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "8dbc4447-4d87-4b28-828d-58462ad34a3d": {"doc_hash": "f2c265dc7b22a923e8b9af4d5379ee0908bec722a2a431b8af4b45c58760a9d4", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "79210568-ff53-437c-a917-f18a83c9a7e6": {"doc_hash": "52675d511d1c35f94e1643002e24f402641f14ad3fa2962f62dab0dc74156815", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "5b1c3568-6ad8-4133-a6d9-cc7bf2c9ac05": {"doc_hash": "2b27eb4d15a562a8c2cb6be00a7318f1a42739c0eab2855d424b976d76ff7b34", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "e2555441-7829-479e-832b-0352b2371b1f": {"doc_hash": "a5ad74aa060c77f3a18d2ac0ea8f336046ee3d67aec3808b61d79b2f038ff774", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "7bce2934-66b6-4917-8c91-1edb9e2f789c": {"doc_hash": "ad9cb8198c80bac802809c77c97e7338c745fe3eb2bd8b05f559580a5eb14ea6", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "1c4ed300-34ae-4a9d-b03f-1ecb06ccdcd3": {"doc_hash": "46ed3fe5bedb2a056b13d7d97b2f94fed1b4c2bbe641c051b356347a221e241f", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "79dab1f9-612f-4f28-84f9-17a73ff0d6d3": {"doc_hash": "d8adac0b5fa64043efd4ed7037df586bd376249edb597d016c1822723b4d2d5b", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "226aebd8-31dd-4751-8404-2fba2cf9748b": {"doc_hash": "c42dfe68701aa46f67fd08f423eb2d6b4db854c0041fc287455eb87bd483fc98", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "5a4503d4-3184-4127-920c-e684eb1464d8": {"doc_hash": "ba7c8dc8a63351f72218205a4cdd6fa8b4919408493ba46464015df286e2eaf9", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "a5cb2300-7fc4-43b0-ae76-bac4aea81aeb": {"doc_hash": "6e0f0480c4e5ab22b918c3efc7b10f8ea07cde1d0e0c6b54ce22343ccedd2dd5", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "6c3a6f79-f180-4106-898b-989c3886502a": {"doc_hash": "9cbf2f4dae050db559237cee2abfa8fdc027b8df0ed82e4e44994598eb36d0fd", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "eeee25ef-9b10-4112-a4af-3af5c5c15144": {"doc_hash": "eba82929cbca63a30af4805291e87a9ca7a10ca2ed02e001c843660044da38fb", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "4b32f9a0-b9e0-4c2c-b96f-243280c1f289": {"doc_hash": "1fd646c4992244fe8375e153a7d46190c5d608f2c0685eee3959036736735de1", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "98426c07-1374-4f47-aee7-967d2b84cac3": {"doc_hash": "f9d6986aa16720bdb7daab95167e075e1d0a6655c0211a13b26c94332b724e64", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "2b8ad4d8-e167-40a3-bc14-18e18ddd6831": {"doc_hash": "407a5474708f43e73603c706882c583aefc13dde3229a69fdf2998749340f9e3", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "32a9d49f-08f9-47e4-b7fa-69e92ffe7adb": {"doc_hash": "32c35517ee7f247fce9aaeb95522fd51ddc90301abd95b46bbf733069e37f5ab", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "02bf4e34-eac2-491a-8053-df957155aa07": {"doc_hash": "d30981ae57bbc8c528db8f9e80cfad8f6be16402fc82c3318653e406a1804719", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "43613727-dc5d-4995-b53e-8e8a1a338eea": {"doc_hash": "8c9c3133d9d77450f4f44728bbd754acfae9fb68ab76fcf9cef6833adb381308", "ref_doc_id": "73cdc8af-0384-4b22-98b3-fe9c225bfbd4"}, "73703f54-526d-4829-b166-2c90874b7dc6": {"doc_hash": "28fbbc7f2646a9c99926e17d7b519a34d98f5289e07551992846b5442409cd8b", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "b9bff384-ca88-4e90-8d5b-d30a89ebda1c": {"doc_hash": "4e211748f1f3b3c4f5fd5909f17a4ec34c31e176cadfdec24e5afd0a6ab60922", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "b28c06e5-42f3-46fe-8a05-e34180249556": {"doc_hash": "84a0ca2f4a4543069ec451b322204eeaa2324fb630e61c43bb42f22e305b8cc2", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "e31416f6-d191-4d9e-b180-6e416b7cca33": {"doc_hash": "28a5fe4f5fbcd94f3c142b670a3cd914075f42b6e3b0d56e8e63edd6c1f78ae5", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "8975368a-7008-4e60-9f04-fbe124cbb417": {"doc_hash": "4b0ad831a36754037ea15e81778b1a082a5f003031e762b82580d9d62b457755", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "fb9fd3ac-725d-477e-bc20-0983fe9de6d8": {"doc_hash": "84cbf4562b7b37e044718b045620a79dbfc0377bd0c80828ee5147d17e93fbae", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "cae8229a-e2de-4102-8d43-7ed34de986b7": {"doc_hash": "4fde08443c57f3735ce38f8e3f2827c2a670720a1e9c3021b9fbd3b8b225bd1b", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "32a90ff7-6500-4ae5-b85a-6bfd87668b61": {"doc_hash": "bb1bf7a460420cb547cab2eb04767e561ea148b32af3a82ed7dedd2994d05109", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "3b2fc977-c44b-46fd-9f0f-682ae78c96fa": {"doc_hash": "084c3d9f55012a19d6511ab7451ae06722cb315191ea0c2b09570310d423882a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "0c5584b8-8e06-4892-b1aa-f58d47e05d4e": {"doc_hash": "50489759c144cc47f7bfed1379664797f390906146b34c9e8d5ef09204094b36", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "d9e60313-8e55-49c6-b1ce-9610646496ee": {"doc_hash": "576f3672b27be36a7742dd051c5fdb176af471f29e9f0c9b0ca7557070bb829b", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "adc53d4f-bd2b-450f-beac-388317022328": {"doc_hash": "6036c7e5ca75185f0f2ab54d2076ecaac909e89854a4a6da20bdebb535383f6d", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "61ff32d4-be67-47cf-9069-f97f002c4734": {"doc_hash": "ab6327e28f09410417358956721deac69116e012d6e568c9a2e5b1c07228e045", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "98f81877-acb7-4c69-9c94-bfd1453bcd00": {"doc_hash": "d7000438bfb65e835cf40c0661efb0a41a871ee1b1eacedf69643e027c3f3e50", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "311e9acb-7952-4ba0-b00f-58773cf8be35": {"doc_hash": "0ae715230c0acdf6bf2c5d21afe251efc6dc254d157e9f5c5588748dc52d60d4", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "05825c97-ea11-48e4-9d27-559072bb8020": {"doc_hash": "80f3ee2179492d8024055e9972b7337002262a5cc98cf3297eff5584e3d07863", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "8dfbd71c-c16f-4642-bb38-55a9609a8bb5": {"doc_hash": "bb49f3774c68ca2ce68c135789b9e489efdf73e1307ce61df2b86e6f16ac83a6", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "77712060-501f-496b-8bc5-80755238d20d": {"doc_hash": "e828e3ec974d945ac695a6a48393cfed658fb8e80a6bd32488c3bbaff4d0502f", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "3717998c-13b0-4dbb-adb8-116c062e657a": {"doc_hash": "c89ee771e32e46cb91294f4650006538faa3b9894b7d0bee4253bdc8a34a89ec", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "89adac70-d645-4814-85c8-b2c312dc0210": {"doc_hash": "28330e2c1e4166c4ae9c8f248e8f770005b1c681f40d79e227d281da3ac89216", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "ae4122df-6b4d-43d3-b6ee-415f9a0dd3cc": {"doc_hash": "f619d1e95bc9a978ab32439bdeb06cfc6b9e5f1228f8decd25d4682d7be7dd48", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "7d4c0607-13d4-4e17-bac5-aba809318886": {"doc_hash": "095978eed0ea041ea4318dae28371160340f170b852baa6c82b2ac6b2bb51d6d", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "3f73ea23-0eac-4500-9b9d-b8ca1d11ff00": {"doc_hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "7874fc48-48bd-48f8-91f0-9cb89dcf8393": {"doc_hash": "fa794f2515d08207e47eb1f96f2b5c95cb67d4312ced34e55d85759f6ee3eb65", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "ff1a325f-f2dc-4d9d-bad2-f4d846c565f4": {"doc_hash": "88f90326bbf0f696229dc913e053f7e59841cb051cc39bfa7db7a9d8af035199", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "7e2db37d-c9be-451c-929f-63010759cb1f": {"doc_hash": "fef54be59ec900621f764d6b2269db49f69d7dd690b053d7ff82b3ed8d671c2f", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "4acd5b89-0107-4f1b-a1d4-7894fd16d65f": {"doc_hash": "9f68a7cefa3bcb1fd588b08722a48387ab83e568599207a9467184da5f751437", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "70af5576-f74c-403a-bc8b-ac86c9240a76": {"doc_hash": "e193e7b5e568a31a2dad6efe5cb24b4d0eabbfe9c8bd7110ffee72a0dd7db15e", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "2a440a9a-33b3-4bf2-a5a1-a4f6975bcd83": {"doc_hash": "9f68a7cefa3bcb1fd588b08722a48387ab83e568599207a9467184da5f751437", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "ba285a70-0aaa-42bb-9ab5-83fe031914fb": {"doc_hash": "bdb0b2163a53e6e01026671119f28e7a72de9e87924c31f423d9d67c81968b4c", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "8607276f-b4ef-4137-972b-a19d410b3a28": {"doc_hash": "47518e9c78fde9d7f25a660647edd3017f28c254aedcd09c5f1a59ce6d489420", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "b0288329-5735-47d8-ab44-3d706882e947": {"doc_hash": "9092a0454b3dfdbeb8b45ee41b017d45e272495116eb3941ff6cd79302305601", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "3dc75ed4-d97e-4e76-94d9-24d2a140c976": {"doc_hash": "c3351f8dda54ea49c57f5baa71c4535daa9b052e55dd6f462b996e5d1c0868c0", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "fe277f1e-225c-4d51-a6aa-66e7c4241dbc": {"doc_hash": "d36ac6c0d5d0d7ebd65c86d419411cac4688557b92b318a1c4d4031248e55a22", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "10ccda00-9cfb-4276-8b1f-5d5abae00252": {"doc_hash": "46a9070b6702ebae308447802281cfebd0df2eb38a38aee5794d762762cf029c", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "dc060e34-549b-4c5b-b102-cac09e582df5": {"doc_hash": "acb71001d2f63ec95171bb791ad7ee675b32410265414ae7bc8ff410cf2a537c", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "11145d74-d3bb-417a-beee-4a824379e617": {"doc_hash": "65d737cefc99479fd13a9e994cf2e82bf35b377640fe6b1482a6c9bb321d7545", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "120f28e1-f5db-43b5-8ecf-839408a12667": {"doc_hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9d77badd-5185-447f-8a4b-e5fd35933e72": {"doc_hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "90f5db5c-4004-4050-b11b-f99f3bb8c2b2": {"doc_hash": "2e655bc8c944291f52a30887c740b50b04bf9b70a886ad037ab7a151081b69a9", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "5d6f612e-437e-44f6-977f-63f778c27430": {"doc_hash": "d22669a086be8b3d4729921ba9cfe55cb7256cd790388f7ae3668a7c73f42db1", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "00e45e97-41eb-490d-bffb-d31cc3f5a0f0": {"doc_hash": "37ae1d98312f0ba074d51b472a6a96c8722c16b45b008a766ccb0843a8f7ed59", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "3defbf99-4c99-46bc-89da-0ccd39cef4a8": {"doc_hash": "554c2e58f2cbd614758ee79af4bf6d0b3e159d92ef146b57399c67053cb6f720", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "4385e2aa-f655-4391-a4c4-31640e31549a": {"doc_hash": "dcfaa8e9e9ab4c7d22fca1c56dfaee72c42cd47f471c7c39a57a2e58b709e71b", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "d2eef248-94e4-48d7-8792-42e4daa36060": {"doc_hash": "a5a45f53d0835b6413337cdc2e46fb7ee840ec5e7ec30178fd92127bed025c7b", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "12bdaf6c-0dac-49c7-96ef-b610e5f040c0": {"doc_hash": "574ca1bfc2b6216f259a37eaba1bdddd7777488bcbb9e3aa0c11c63c77d09e09", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "209db6ad-cb24-442d-8aab-7c8732dd8fab": {"doc_hash": "6168539ad9decc33d311f10b94f1998c94947ec7cbc8ce61969bea69a54332d8", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9c1066bb-d663-4c01-be0c-879d2e316c39": {"doc_hash": "dea0c754fa4b3d6271cfd3df32e537e557abb5a3ac16c8d7a201c802b01a0d41", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "69a0f08f-dc33-4391-bdac-de7b0abc1c90": {"doc_hash": "dcd8a2a6a6b9dab6f359882c28ba3b3d01dbd4de8294d1da73a08341d9899b3d", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "d4602de0-8008-422a-9142-193e89789c35": {"doc_hash": "d23bddc57c72470ea2dddb51bf7826297ade2bfe78c0218485912a0c5f577845", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9fd7969c-0722-4040-9a36-914c0cb5b5c0": {"doc_hash": "854e618077bc720e3e641bde8268bd19f1b7ef136e8399702e97cfa701b60d1c", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "73c47799-4888-4078-84ff-dc65a35af0cc": {"doc_hash": "04eb1e7d9a753be5a585c6b2ace7813320de3abc4a79be961b4fd0e2323814d3", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "5b36e4e3-84de-4052-9d89-a45b9cec9ad9": {"doc_hash": "e8ce622e3c6e028a673343325516bd68bf02bd51366dc9aa7aeb4f1bb5c1ecbe", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "1d090e23-ae25-4a9d-8bdc-46428e201f9e": {"doc_hash": "a0eb60ca0015fa6d74c1e55713a485c509ead82885af9908030738c6508c1a40", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "e76be2bd-1d3b-4c30-811e-8a96dd09c369": {"doc_hash": "73c859583695bccba177504396781bdad40d508107c170a64dd50b2d0b336418", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "553067b0-471f-44d8-b587-0f547ad3bc97": {"doc_hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "c747aeff-f03f-4b03-89e1-ce9fefc06d0e": {"doc_hash": "67b519d417843c4639c3ddde886c325b928468da35dc97ec3cb1bf8535647d06", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "96be9a9f-5687-4d04-9461-1411512d6fb5": {"doc_hash": "4e3192a3d287cd311c3864b6fe4bc121fdc629a92d9788af217c945adbe0d199", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "28b8a9b7-9527-47d4-ac64-3ffc85e66648": {"doc_hash": "112cd598f5fe9ccd79fbafc401ee0b0b0b981fd80126c04c400d37c22cf10306", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "33c90687-5db2-4af2-88d2-38adf23c5041": {"doc_hash": "1b18ac3f575fd8b60d8ed01fe196f66194dd35985d2b4d5d0888d70310b08c27", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9c7f4139-670c-4f4a-928a-58d6f9f161d2": {"doc_hash": "b76b291dab64defefd8c14047c4e7e6dc8b65c2047906feafa222dccf4337270", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "e64cd54d-fd5c-4efa-adb3-59bb33e72b51": {"doc_hash": "30b07e94da15369e9cd86ff477ab9eeef21ca006b032103814707b16eb1d5f77", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "c085e418-6a0e-4c48-8333-7998aa306a84": {"doc_hash": "0226e5159cff59959ff46f9ddfa98001d8efa491771a73442cb7e83fc3e21261", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "46fa03e8-7f58-4b07-8258-9672c3b459a7": {"doc_hash": "a577be31a688b4ec9e1fec72c67f855fd6454d18eadd09b11624f3dcd538ea00", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "08f2066c-5bbf-451d-8879-831ed99a68ba": {"doc_hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "c2c9b0d0-93e2-4cb3-8493-bfee1f43d4ab": {"doc_hash": "a05de503a9e80d08665dc0a58499f3934ebd170bf6416fa6257d132286d7d97d", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "456aa230-4add-4ed7-b066-eed356014ce2": {"doc_hash": "a879a49fac61b9c7b2481d2fe69958b2ceffd4e94a9d066a8321c8f28150faac", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "431a8b92-7462-4852-a885-964042e72910": {"doc_hash": "546b6f899a3f4692c7f8b0f0f261a1285b2e470f2f79a61ec76514954251650e", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "4e6c8263-3f61-4620-904e-a46ddbbe1c16": {"doc_hash": "5ec35a9437377407053ccbaab4f931f96e92572ac909526f14c9aa4842d5abbd", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "a1bdc427-f56c-476f-887b-48cc55a8d300": {"doc_hash": "5b8af71e2ffea5e5c0ed40a8ec38667e8559aa281089a9c80fc4ebecd414d1a6", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "eab28f0d-39b3-461d-b2af-31a9f54d8920": {"doc_hash": "6439113c1a7d9e6dfd84d87a819c091822e84203feb64f2672d836bb0ca47755", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "880558fb-7666-4b8d-b6fa-a739199af742": {"doc_hash": "060442d12dcf6375d17b5dfa13e28c234c4fa5814f4efe30ad70633fe6ace00f", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "13d49da9-dc94-4b0c-add4-4bdcfd7c5c07": {"doc_hash": "763e048ae4ab481b1dd3d1b31537e5f7361f375fe7ff087e7d21fa3866691861", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "56335313-d079-4f31-be25-4142b4f8da23": {"doc_hash": "88cb33d5f2de6930b4eda45ddb9e8986ce0385d0915c97200a7ee047a3e87ef3", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "977ef768-78f3-42a9-9891-538067e64ef1": {"doc_hash": "eb65dfbb9d8f7e74f11faa1c95ddd3636c30454fd91a6bfd21cae5321be3ac00", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "a0ca6248-36db-4a87-8b33-857292adefe8": {"doc_hash": "74eab9b97d405bd7ac26b2c98521b408350bde7fed858bf3d4caefd13f50c84f", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "a666ce49-cf6c-4618-bde6-9ba4c99ea6af": {"doc_hash": "c2ce7312551e92d6768698f1c2e8f421a2be9ad20259649b83e607b20753b6c9", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "32e240a6-0233-463c-98f1-cc4975a216d8": {"doc_hash": "f83dbd744abc3b98e8d3448c576fa43b571af896ec71e1d261cfb84f23c19a38", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "0ff55359-12dc-4f0f-88b5-6a17dc325073": {"doc_hash": "d576f5488c3c52f23672385b5da3e02951b169ecef54041eced1847080d9700b", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "cf676f75-0796-4eda-8e19-5e0f9b5fe47f": {"doc_hash": "d8807e59cb8b967f4498e0219393e4c2648959344ab6d21b363db2c6111c57d2", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "938d8957-203c-4219-b745-f222422dae1d": {"doc_hash": "f14d0a4a87a877e99c21f95c3a6854029f2f34f40acdffe4286b18307e848229", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9e4980c6-a7e5-4622-856d-11751027ee2a": {"doc_hash": "0b2fc99f82e4eb00a2e0101d5e6aecfcccb351cd92bbec3e4c74a2ce51867128", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "91eef65c-e249-4e66-b4fc-c25ddab60581": {"doc_hash": "363d39d5348e64ab648c8c85dc5fe3b644a54faebe88357b7f82c2240a6253b0", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9f90d599-f0bc-4651-950b-2b1263e4de4e": {"doc_hash": "98f86c40be514590d34dd24802d6b6802a821adc08db41960049648b079dea8d", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "a0a9fad8-5e40-45fa-a8ac-deb67419b3c1": {"doc_hash": "69275efb49518c2ff7ac39f8136f992c1560498fd52e794ed85744e72d4de0ad", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "381b9548-d148-40b9-b7d7-99fd7d6cdd4e": {"doc_hash": "9ece184119e4950cacbaaa45274a6d1ab5756c4aeaf6bc18473bbd9405a6e8da", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "4c4e0798-15f8-4aa6-aa8a-392dec300240": {"doc_hash": "e5a0f3af7b73736aa4df391bda343b94b388310e3d57301d39b81a4d6eb0d30c", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "fef8aa2a-42ac-4b51-b754-a69339015d8f": {"doc_hash": "a08eb6d7c4a487a3959b7c041deee55e69ce3aa6a396d4d608713a2b6db550bc", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "e2bf02f9-634a-49e5-b5be-8e8c995c1011": {"doc_hash": "1990c3cc1d6ef3f1d4ac3429b080f2917c3cbd06c939c5c43363a6e042bdae08", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "9a46643f-13be-4e77-8107-9adedd7b905d": {"doc_hash": "bdeffc51707f43e32c0c07c7d1e1002cb2a0116bf84a9a69762ba95fd2704a61", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "07c6e72a-31fa-4248-b75e-b7c8a652e072": {"doc_hash": "a955ec8946ac9f29c0fee942c89735678b610310ec3781ead188e3d7b2c991de", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "2e607898-c92f-44fe-b309-79eb4caad0a7": {"doc_hash": "c505ccc31186a79e1a7a14e3be497ad314468c87a683d0415222a74c48e4368a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "c45824e2-30d0-4334-ba08-82414504b82a": {"doc_hash": "ef8c74556b46088815c67a9a12a2059f6db75742d8a73703d2f160856c9e3d7a", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "3e037e14-f19b-4386-8421-2e75e23a5dd7": {"doc_hash": "c5e39ca5d14fc62e4ea054e9c0a362dc6db7cd36dcfb3dbe5789ac06336ea820", "ref_doc_id": "9557e0c2-0024-42ed-919d-7c2142097152"}, "1f80863c-4bba-4245-91cb-68dd019b635e": {"doc_hash": "71d524d24af33cc43e2ad08940ec92f27c90cbfc73e8d34d9b0535489042dafe", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "f7be40b5-29b7-4cf9-aff8-ee744a17a757": {"doc_hash": "2271317e3e14c1e2f14cb445aac8fc658a5890eedcc5649413a71f3ea80ad3b0", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "cdd425e6-0794-42f4-84cc-f10981bbd03c": {"doc_hash": "3e8ec5a2a874c19ed14b29c4d4c58bdf72186ed2a5e78aa336d4ab8cf759c8d3", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "1947f71f-9d22-4bf3-af47-0024c2ad7bbf": {"doc_hash": "9c6e5310a4bc357004c4e9232c33cfdb894fedaf9cbcd0dc2da2a0b9eba4d162", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "3c864dca-9227-48d7-a587-b95871f8518d": {"doc_hash": "0090c0f972b12b13a45a9613312954a548f00dcaf82bc21c82cdefae0d7b04db", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "84eeb0c6-277a-4139-b6e0-4d056324bb7f": {"doc_hash": "5964fae1e23d743532a059d597664e7c393331cff95d3eb799c17711702eb92c", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "bc1d0b4c-5482-4e23-aa73-98391de9b45b": {"doc_hash": "2c0f75a14560aa3c7351af60738d0cac48b8cd481a7b3c9d6d260c18cafa400e", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "d5aa9896-72ef-457a-87f7-683fd49a76b8": {"doc_hash": "00c20336216e00f02bf23b0523cc22cc6f638ec724592b8ef688e197cdfa999b", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "1e25c674-d287-48e4-868c-1c400dd010d8": {"doc_hash": "14ea5b386cf81b1fd6a188cca67af2307a5ce93ec029fbeea1d74c085251870e", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "d6444b14-f3f4-47c7-b2ec-895e61c5cf44": {"doc_hash": "fff18c365d35af45c63a94102d438d6e08bba68ae1d7c2f3b2cc3c75dafefe45", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "06883569-112a-4bd1-bbdb-308d8429ff03": {"doc_hash": "9cf9a61de719b88a0ed05889dbf1fb97ae3052a1dd4ee184abc1157da894b9b4", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "a1cbc7da-a1ca-4ae6-881e-50af3a8e2f1f": {"doc_hash": "0619f19b16a807fdcefc7e1b024ebfed4611d9813af98754e2df04a427be6c9b", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "f6a49e54-dd20-47e2-b2cc-3dd71cc69652": {"doc_hash": "f7fb722e81c6bf84042ea1e66e77694aca655869d78bf39756eadbe1d6e4ae56", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "c3f95d28-839b-4c48-9915-ec42651875cd": {"doc_hash": "faba2e0e8881132041c3e81769a3be132a7aa88a8f9ba40c88857037649b7739", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "4c516b04-5953-4e60-acc8-ce2a265c663a": {"doc_hash": "50a643d6eb0574e770269f304889388a9cf50108658f761ae184d9c5faf770b1", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "6bfba5d4-1a3d-40cb-bbc2-d59c67591f62": {"doc_hash": "8a8bca1b8ef9ed592b4566c4c02562c4b0875c782bb36aa9f4d18d4efb2a7e6c", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "05f7911d-78b6-49bb-8903-2437f4d41fa2": {"doc_hash": "b1f3f5f7080a2e2963efaecca585b0b249412cc945115af6afc92105972b1d6a", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "e09c99a8-ea03-4b55-a9a5-1dc79bffe1a1": {"doc_hash": "70230fecc43c51b3c9815a9aedb680f59d70e58a8807a3899be80693e9849cce", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "4541285f-3bdc-4fdf-83ae-96e8bdc86182": {"doc_hash": "11be68f75b299c01735158aade396d6672938a26c9af5ec0f75f7de2311c3182", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "aa7f2ab7-c768-496a-86c1-92ce0dde780d": {"doc_hash": "a4328ab8f2fd029fdd9306c4a10f86abe2df4decd9189eba89ebfd9f49db97e8", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "e33ab236-5dad-40b4-ba52-ba092b3c1438": {"doc_hash": "a36cebf0f939009261f96d5a41cc7fc2b09a59c8fb14a38764efe0cebac50421", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "8c578503-12b1-45c2-a1f3-648f9293416b": {"doc_hash": "d2598132f1a4b0666ed117cc7effad47d3cd9af02c625dca6252f0be4f60ab36", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "279b04c9-2709-4415-b674-2531b047da69": {"doc_hash": "35fe05a5d8b9fd74934c7c786916a58196c0f034012c664ac157ab12586215b5", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "513a9f4a-bbb1-44df-ae9a-ca42a940c1b7": {"doc_hash": "8eaaea3c3a173a2460b08ae2a78999e4a105d277cfb49d4597a412dd6a1426a0", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "ea89b927-1f68-4925-abf6-3ec6af4f2e74": {"doc_hash": "d0411789e3274a4a0ef33ca8b428b8386f3ce9ec1d9d61977e92a70b677622cd", "ref_doc_id": "483b1216-d605-466b-9396-eb456ab30373"}, "dbabf449-4d6f-485e-8f66-f9bc4207a0c2": {"doc_hash": "f8c9affe08810af7d608e0d82ea96b94263b1a8413198ebf2ddb5cbab4a256a5", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "ada30b76-3964-490e-8a21-19dc166af2dd": {"doc_hash": "dbcf899ef5d099f1452f8c9b0c66ebc80dfed7d333866fb6c3d7d406f1abf46c", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "8ea89b30-3f99-47d7-8846-cac3158716b0": {"doc_hash": "c265d1129f9258b0295d273a92069cbd6dbce09afc9d572e0dbaee970f5952e9", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "6be9a876-0abe-4bd6-87aa-9bef977c0dcd": {"doc_hash": "183726fb79aa20b072fd30aee57028d079789676213a13ace0d29f2c29569d2a", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "02ae218d-1086-42dc-b573-c55c92b63da7": {"doc_hash": "32328beb8173ce7c63f165944b9c4208d6e546c331dc0d0d2c16809c738ad4ba", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "d131883d-2542-4de6-800f-c18bde4e5ac1": {"doc_hash": "067731d67d233cdbf32434588f50afee4044a24aef649a5739d591896a9b4096", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "ece30c98-5d0f-43e5-8432-311c11bda130": {"doc_hash": "a68e814ea0b537de2b284b1f5ad31fe23d96b4a222ebd2152e8af8e849fa7c90", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "b8b249e0-c4bd-4514-9387-fba3f62770f0": {"doc_hash": "d818d743036a0bc4f4c974d574ae6c38b26fd1d12f934cbd64b718d1b55c8d7b", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "edc2ad8c-0736-4acc-9a9d-d601416b2003": {"doc_hash": "3fb3270d7b6c75ae13c4092248449791154f7f76fec861059daf3c36f4012515", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "bdca9d61-5da7-464c-879b-27189a93a351": {"doc_hash": "632ce0719fe4c91a578781983291c47122f023e679e015f1762e06ea64ad78ad", "ref_doc_id": "459394fe-7545-4a18-9265-b95a9d2f85fb"}, "21f48525-0308-41f6-b5ff-cd057acbc03b": {"doc_hash": "c58b8017d7b06207aeb5a4839c0193088ec6fa7032bd605503c61fb12c9e80e0", "ref_doc_id": "d65219ad-8eff-42be-b8cc-9bb261b067a3"}, "dc84a66e-e739-41c4-8e7f-134dad2e1423": {"doc_hash": "6c8f6410fe388a11baa7c0fdbfa84fb3eef8d2cfe45fec147975d7f2a27b3d80", "ref_doc_id": "49e9e25e-25f1-40dd-bf87-3f0c87db5499"}, "6d2cd576-5c01-46d0-b65c-1fff8dcbd19f": {"doc_hash": "095a7199f79d63488c61388e988596f40dd614782e8bf6b7e617827b9b8aa790", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "14c0c5b4-c9e1-4689-b8a2-559d99736e00": {"doc_hash": "15dd5bba1877a9b1645aada4a17080556ad39951dedd54a54ea94515bbc6b98a", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "64580b5d-0145-49fd-85b8-83295e5cfcff": {"doc_hash": "761ced7e19fd0cdc3019406a648be8674d465c681c0d0cdccd753826cb2a010d", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "aed59d84-7ccf-420c-9623-478b074cb392": {"doc_hash": "518b660fdcbf6cb3f23f429c760f3d3fd8806557232a5d4feb4d0344f80b9c76", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "c937bb04-057e-4fde-a71b-24a1463d8ed8": {"doc_hash": "c4f65abfa6e1e7653344dc56e371d13ab5b82fd3530c79e0ea050dfb83b9c54c", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "496a6edd-e885-47b9-8984-317f2b80058b": {"doc_hash": "eb1c8cdb5b73b389821eac2c53def892b217191b193f123343133b8b4d064273", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "4cae9c97-861f-4fa3-a03b-8ac546436f19": {"doc_hash": "a8ff5c64c67db12408eee2b7ab07f952c378bb876b3e18258c200f61d01d8eaf", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "97bc7d84-e480-4dcb-b3eb-042e39b36cdc": {"doc_hash": "fe7380bba9b3787c8a2d2e03ef844a6a63c2d2adef4ab338747154eca7e81266", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "10246811-e001-43e6-8561-9521408ba0b0": {"doc_hash": "a1a6cf8b680b7e8fe952ce4f9b69ba8c62e9fa7ebfcbb138c7974c6ab2cd9315", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "8f41ee34-cf48-44da-9017-ef8b1301bbf5": {"doc_hash": "e731387fe0d316d6c8773efc5518193aa79b6cba5c1ee2a405d0cea62adef6a7", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "98dce371-a0c0-4a04-9a83-2f43653a5b80": {"doc_hash": "aa400ce78c4e193082b616ae609e1562807fb935f62fcd4f6d4d7d03eb938b6e", "ref_doc_id": "312dc36c-de6e-4b1a-b1c5-559d89cdac48"}, "c0b9e8b6-51ad-4dc4-b871-d92e99f782d5": {"doc_hash": "45791e6ce1dfa422cac0d4f139a3d7b1d0db4e5b67e8b1cc576325f9e41da5ea", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "4cbf960c-2947-4057-b24d-3670bcd117ea": {"doc_hash": "7fb22a7c8f3aabb30eb7a8688f9a98af17fc32ad3e47a3452bcee44b73eb3013", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "3bd14241-8a7d-4320-8c9a-810826853061": {"doc_hash": "332b592b18030e13437faa5f98e731e71d98f153cbaab7df4295e7e297b14cc3", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "70c773d4-0954-4918-809a-194f0cddd4e3": {"doc_hash": "b244f66b25c25555251b64ab18252d28010c6da6d4e3542246643a5c175443d6", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "4250423c-35f8-4352-89b6-a2aa9f0ed03a": {"doc_hash": "062004f6c0a6c5e0fe2a39f1c838697ff3cd90b131fd73695198a6c5c007f43a", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "1193f819-983f-44a6-8d4c-439afee4cd40": {"doc_hash": "c3f1a149b5ce81ecf76a17dd9d4a0dfce9b3aa2ed567df7a7a1c9fa19c3ee86e", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "24dab265-8a49-46c8-8e1f-34c5b1b1f9b3": {"doc_hash": "5888b316871777b7296cb68008ee03c169ac99a21af90bf8957f2a535036e7b8", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "3c8daac1-7b83-4809-a17f-9183586d3b0b": {"doc_hash": "d73941430505a95ab8912728bec0269c31df9a55cd80892216d475368f697f55", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "6529f9db-5104-4ce1-8083-92655ba0c03f": {"doc_hash": "06d5c3b4f1a11551287e85e7f123a4668f961a6b2722f535971ae2bae99b2f98", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "bfcc8e4a-9cbe-4850-abd8-6f4c041a9634": {"doc_hash": "db1d867826b71fe623c224771d5100027a9cc9b4f24a741cb27e5f75f939bf63", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "d32cb29f-79c1-4662-ab19-f684b7aa87db": {"doc_hash": "bbcf018753c966032adef8d042803da7274fc08705541a2dd5711ad92e6134ad", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "683ebad7-fb86-4a9d-aa3e-c564199ff7f6": {"doc_hash": "145dab49c6c78b1e4ecbef252dba254979e0c8aeb548fada4b451429cc51a3af", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "3dda847f-2316-4d13-a4aa-c7c231edc5cd": {"doc_hash": "4715025611d2ae696b84919c7664128e391e2fed7d97d38bbcfbfa3e5c2027a5", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "bbf2b8b1-7513-4d75-af0f-940abd51b2bf": {"doc_hash": "b39558241cdfb9750418e04a11747364321988ebaa464e2556b6d06832dcf6ab", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "13c1b00c-9b11-4a66-b885-765a07dc9a0e": {"doc_hash": "0c81ecd35b55410ad7a8c25a8d50fcce39ac112da642f6de3ce80c01b60b8f19", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "f80d767d-1bf0-464e-be51-167d0c323a26": {"doc_hash": "0e24a793d9745ed4c6b17839e2991ceeaf3403f7010ee0cf83dc70c725e9090b", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "609459a5-793c-4796-ac0a-2eef3dacefbe": {"doc_hash": "0ef80c2f4ca9a2cc8aed490f5acc108902120c929047edfe9e3d9c5b3d99f727", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "f78aeac8-4453-4b8d-9e98-9a439570ff14": {"doc_hash": "db6603c4c5f598e18af79c0124f1d414975d0f78d0203e713edb9deb7839603c", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "aa1a4e08-836b-4aa7-a32b-5df73689e70d": {"doc_hash": "1c97410f011b2098d6aacf4cc280400cd8ad0fefd6465c258ea92981b2947a41", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "09d52dd5-7643-4bef-9a2c-b575f375b18f": {"doc_hash": "71f56b2500e155217e2ca54fa497faa63ed3e88632e49a249ca87bbfebd19a3b", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "03808316-69c8-4d7e-849c-92283279942e": {"doc_hash": "d0baa39231043d5c17c19205ad614df534d4b856dccfbc9410a2591f124d0d5e", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "02d4987d-8c31-46bb-bf58-87223a735b3c": {"doc_hash": "b552fb9d24f2efc752fa12f4b1eab86284d28e45d61d54959e3dd54b1f314ac2", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "b5780323-d8dd-433b-8ef8-881ed7ffca66": {"doc_hash": "6e90a64e1d8260cda5adbe9d067b0fe075e41d5f7c01e725c8577040b5eccc1e", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "04133bbc-2b6e-47b3-93ca-08f4775c5b80": {"doc_hash": "daf41a0258f4b60fd4a01226530f0a999d9e79f0ff2f1d31e3bf17b4b1311665", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "a391d3c2-7219-48f3-ae4c-6cd7188eafc3": {"doc_hash": "e405c3348cc22cd5b4bf70c48e51d5cb9c3e44abcac754aa2433e4834345e266", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "286ea94b-c40a-4618-acfd-4a9b924aa11e": {"doc_hash": "ff677ea0610c6882bcde0d5c2bea51921c870906366ded0c110174c4e600eb2b", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "67ccef92-7afc-466c-b54a-ccd75a2c7c0b": {"doc_hash": "ef26ff1bd0a8abdcb3ca41b9de759b98d6c54ef172a4c55743b4d3d2cc3c866b", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "81b273de-bb09-4aed-896c-12c4d518f515": {"doc_hash": "8770c6e8112254984e3b4b0d758ee0f24dc952ab9c6fd5dda51fd13c6a0bb132", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "6ff73723-467c-4337-be84-9280c5b744a7": {"doc_hash": "1e67a620a18fbab6ad79dfabc1c12f2d3a036a90d1ddbf5a37bd0d18cf652d73", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "540cac75-5225-4aca-8f1b-34cba9800cb8": {"doc_hash": "5f6d0bb2934fc7d39d1aecf620a369ce930ef720a66a37257dcedf03b60683dc", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "74005b6a-051d-46af-a9b0-0c192cc07c4e": {"doc_hash": "9a95c62c8b5305afd2a2bf93e088a99c55a3a318b0756484c7da1137d3a43024", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "879fc715-3760-4c87-a625-5f2d5191f6d3": {"doc_hash": "c66329dea7370f352b5e8f564085cf46a44b3bcca154d54da82dca574bc18556", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "8544d516-e35e-4195-971d-e776a92232fd": {"doc_hash": "6a4c62c247e45bcc41a8459e9f38ba35ce19ec199492fdc87af05fdb5d52a560", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "42a806be-e7a2-4f98-9f7e-6baae6172b0c": {"doc_hash": "4dec39b221333c3d05fee695ca557c611d6d09d4a0eccf699f1d670a50bc4e2e", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "309049f6-139b-4230-a1be-58de154a5769": {"doc_hash": "5069ba0b4e87b73463d6457ad27ffaaefec3ef5e53a39cc7db5b87250c1496af", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "8496a818-c52a-4309-8493-8662fd650d97": {"doc_hash": "135ce179098c020dd41fb83544067208ae99ca01b18bfcaf01975de844fb4c70", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "26dd57fd-c9bd-4166-a3ad-828d3d40f7cb": {"doc_hash": "71f56b2500e155217e2ca54fa497faa63ed3e88632e49a249ca87bbfebd19a3b", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "2ae86419-2ace-41ba-8018-5e8cf7cd7adf": {"doc_hash": "98fc2a97fc5a3cf4fce92726a080061b3e0eceac7c6ba6d9b9961c470faa95f1", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "7f8833b8-37d0-4a00-b9da-bb6e5f589a63": {"doc_hash": "ffffba86d9a94b665d6c492b2da7e8bc0ad844e2d7fde59996c5c0288598a10b", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "6c794b34-0307-41aa-9fbb-0689391fb537": {"doc_hash": "c4a1503596d070a49bff722c999fe1d2c1a3836e8d2ded6c6b9e51e02e7c79f0", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "86def108-ed27-4437-bdb0-5d3d2bdb49f8": {"doc_hash": "6936e89715be20692a6f219c8f38bcbda0ac2e953d2fc780f6aae93c70e50cfd", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "013b45f2-5236-4328-b5ff-c25189b821e4": {"doc_hash": "c8ad702de30831a85db3c0a1a82b2af9f1827370b07ca35bb6e0a769f8604d39", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "2d7971eb-ca16-4ee7-be9a-0eee8e6e7c08": {"doc_hash": "4adb288447b13c696ab998c1f2298adf84f6aa5276fa1a060c0aacd4f54eb6b6", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "7954adf0-aad6-4670-b13d-e1b04fa8d64d": {"doc_hash": "e481e21fad94ea3d957fa289d4fb06ac2f3074da27fc4af19ef7c77b72114db1", "ref_doc_id": "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c"}, "9a406d80-1ac6-4f93-84a5-1f896fa8e5df": {"doc_hash": "cbe0701daa2ec1d2feefcaa4938749d85af4d9be3fb909d821d1d66b623d7b4c", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "40b47f40-9bb4-4d01-a950-e4593328b61d": {"doc_hash": "cd7b0bfbca585fc850669d05772896bf1feca66945c2351adf99f2adcfdaee5a", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "f3d85fea-f834-4b0c-83ac-0b2a610fe0e6": {"doc_hash": "61e0caa5fa49743a8da91a6ceea418fdd8e18cf90cbb554e0a2412c4f8b7ff2a", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "1942fa39-5eb0-480a-ab67-230101ff7a5d": {"doc_hash": "f9f29ceca8bbd4d6b9a04dd667b4b2684f19ccf1f54df483b58e96c7ea0017e3", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "c8085bab-6007-427c-9083-12a6b52faa05": {"doc_hash": "ffc459ba34a23c031f28d842568ba191a7db6dbf5989097eea1a124ea88a3a8c", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "5cfb40b3-bcbc-4c2f-b644-99b744b87418": {"doc_hash": "0e81cbf0e8d4e44b4575a540097ea965bfe9f63d486cd18239e0fe735db29e1e", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "11431ef2-bace-42b3-b838-a11662bfe899": {"doc_hash": "5d32d372bc035229ad21a468d4f53505a208d8ba3e0933d16cbe2ffb7da01a98", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "ea66f83b-c70d-42ef-aab6-7f85be11b3ed": {"doc_hash": "7aab0c123640ca88f9d1108c8fea36509864e9e59754bc93d565bbc5c40ec79a", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "b66d1bbc-9b94-4809-a699-503c9c5707b5": {"doc_hash": "cad26bb2440dfa6603edd119caeafc2487de65dc8928d786b22e5980670d2902", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "02f8b631-b959-42f3-b35b-47205e34c0c2": {"doc_hash": "47bb22adb12f4b9432538b8937d1c78511e30d8138e2985c352e9899cb92ac93", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "b4a0f891-29f1-4cfa-a85b-3ed1dce192c6": {"doc_hash": "dd9e5b5aa74e340028a9160dcae8c4ffc122b2ae0257bea326c4441496299d4f", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "a73e2050-59d1-4410-a077-5a452ef7efbe": {"doc_hash": "793fa3a40ceda1937e247cf1258f27f9c15ddd39376b4d206f74310d83a93340", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "0a7e6901-7ebb-4ed5-8adb-15f2d0bf20d4": {"doc_hash": "6061c95102a9360d58770b6ef468ebc1707c597b51950aff5429aa59eb96b8a6", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "9d66b1e9-85e4-492c-bf6b-f1a3ca8ee4e4": {"doc_hash": "56495bdce8efcc08d7c97ed7c29436d6edfeb07b8ad9816859e638a9fbdbd8aa", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "468c65b0-14e5-42e4-bdef-2fa0d42d51d9": {"doc_hash": "7f28facbe5e654027c8fceb41d3c4a5ff2bd27bbe56fd17cdac9560e6208c03c", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "a8734f3f-92b3-4f5c-8b3f-ab57b74d12ba": {"doc_hash": "2876af68e9a91d0330a2377f08ef46f7824ee0e02ec9d5f97553b6d1b0dca469", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "96da04e1-22c4-46b6-8200-aaaa2bef2794": {"doc_hash": "2e490354046d242fdaabdb9c4fd04ab7e0d3fcc5a6c28e5983337468544984a6", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "cbef0c8e-828d-42f7-bd76-adfb732ac9a8": {"doc_hash": "f7a61965f5b4005d8792f1962502150ccd871082218ad32fb0fb176c6b85d951", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "e540ab8e-f3b4-49a5-ad77-2e2b8b95fb9f": {"doc_hash": "6dbb9830702106314f1d8a2331e5fe8dd3203a1801e59df3416d4242a2041671", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "d3a65d2f-5592-418c-a96b-0e32aca1465a": {"doc_hash": "01015738199f31745756fde6650e3724a227500ffe19c6922821504906da0b3a", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "17a1ed8e-93c2-4dad-a6d7-33ca3fb78128": {"doc_hash": "443bd7dad0abdd5a24d3dc0f1b6fede56c968faccf10c0565973ad4943b8cf60", "ref_doc_id": "f292351d-6a62-41ed-a296-c6bca6cb05c8"}, "62a7fcb9-0e64-4961-82d7-732bc8843205": {"doc_hash": "7d5030d5fe2c873fac11966ad40958e5a8e9c00b7ea1b904fbca0f1b5ee81bd6", "ref_doc_id": "462a0ba7-096e-4d04-bbe0-8802231ed273"}, "2ebf2c82-087b-4fb5-adda-d174999379be": {"doc_hash": "f1d9a6b0361ea4aac8d15fe469baaa34dd09274145472b164dc894c08045ba4a", "ref_doc_id": "462a0ba7-096e-4d04-bbe0-8802231ed273"}, "2c75431d-a252-4457-97ca-dae822a6fcd7": {"doc_hash": "fbf30eb7c522538f8df41b27880bc28fc401a8235d2ab70e11925f7cfa428b0d", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "203fa30f-889a-4b20-8ea4-f9b0dcaad359": {"doc_hash": "e84dfa21f8cc54c7bd0ccd68bd39d9fad5336522d03fc0df0dbc7d2799c820ae", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "c6b730e0-adec-4a91-b73e-d2606d354c9b": {"doc_hash": "5eb47206a236224d8f25da21b23144a0c1832ca3162f76780ba478371589e748", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "6230ecf9-37fa-4e88-b791-25c43fe5c675": {"doc_hash": "d834f3358dbe5c870717e8146f66a9be670bca0ffde40b95bc3630a76aa85935", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "03931d7a-d1f0-4171-8615-9ab145781669": {"doc_hash": "ff7d2e6acc675c77a7990f5283dcf4c5f635804300a4575b9c35d4812f39ee1d", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "46799270-95c7-48c9-85d7-446648eb7089": {"doc_hash": "84d71439ffd130c16320e550fae66fd247f5398506cd6a2186bb859f76b5c7c6", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "4868997a-370f-4997-9833-bacabc4a032e": {"doc_hash": "74e2d4ac922c07835f5bcfd4fb456670fd5f223084170d587c704837c924ddac", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "4f2a3a46-b1ef-4cd9-8cad-e46aad4d8ea9": {"doc_hash": "b02d66c9c9ae7bb8cfacf69eff0515dc1bd4a50d40016b6508bc62a2440adef9", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "4bfa466a-677e-4951-8143-eb2a73b330e0": {"doc_hash": "197d17a86be9529abd355665f865a2941e650928b3bbacf5735a2ffbef36e366", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "b10d1b0c-5e23-4c50-9589-ccc3e9fa6567": {"doc_hash": "aa258f9a4f7c9278f085c02c0b0e1d6e62e9eec2f724a951c65407978e3a2be7", "ref_doc_id": "3b1fdba2-5ffc-4238-988e-c963c8f8a973"}, "062f71ed-56da-4ee5-9ce5-429a38f6321f": {"doc_hash": "1cec9608e4d6106d34cddde1827d343361bfc5132e609dd59e786fd41ffc0839", "ref_doc_id": "40be1f8c-df6b-42e1-9966-53651c2ea9c8"}, "1fc1e9cb-3921-4784-8faf-0e4178189d20": {"doc_hash": "c710f1453ff7896290b4b83140b0776ba3b4eab04cff0b41991980a3f91d9204", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "004cca88-e3b9-40f6-8684-dbf6ab133614": {"doc_hash": "15db151a193d629d820c571f44c00e8f8469a46e23a27604dbecf655f7e10607", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "90aa1a71-3d45-4200-81c8-78b3d96639e6": {"doc_hash": "01a6340cdb78ea1c7b17ec785e71e3f3a96b3a2c04de3bbe49f2806e1dec9814", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "b05c1cf8-96d8-4e2c-a82d-a3aee836a1df": {"doc_hash": "69793101845ba652647fa743efef8e11bdebc4b7a4c065132fc35c5bb1dbb13e", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "ceda3b80-659c-4786-a7d8-ccd6c7fbb9a4": {"doc_hash": "17d7ef3f8a80c6280479d71da53f85ea435997b58e66914062704d1587af2258", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "23edbdcd-462f-40a1-917c-3f5277250517": {"doc_hash": "bdb8e03764e2c52b4c9c4259911a61cabac920826977a0a74063211a25859a1e", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "3996553f-2995-44e5-b897-ec49c7d72ca6": {"doc_hash": "d3cdb669f0f373f7b7c564297e1387825d8ea238923d207787e6e0dae3c5ecf3", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "58a3e985-a318-4229-a968-d04216d1e94b": {"doc_hash": "6356be94aa198303945e77fcbf208b14326a3f7c9fcacb25ae9e3f0ff6af328d", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "4d3cebae-82a3-4dc7-80ca-39cfae154dff": {"doc_hash": "ace3ce2c6eb96d2381faccb6e2f4328ef690663baa0732939fe31dba2796bfd1", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "1263e12a-2103-4eac-a6c3-e6b904c677f2": {"doc_hash": "7bfcea7d11e8008a9420a60f1b80b62bb55e6d2df13b1280b8f6e7c513e9a423", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "00e17bd2-b9f4-457b-97ef-a672448aa226": {"doc_hash": "89d2f33fc1d4e93e74c671daf38de9b998feb803e5d5981317d024e38465138e", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "52b6ffa1-37c5-41bf-abd8-46a42c486475": {"doc_hash": "e6cce428b188c5ae9c0e26a7dbbd9b47126cf0084cdc5d6112cc2eebd532518a", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "5084214d-07b9-45cf-9be6-f358e7dce523": {"doc_hash": "aedd4c3908ef87247ca6e8b30438e22bddf25b5289d54d52b0b3b666172ac327", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "4ab7598c-ca0b-462e-8d82-769aa7f721a6": {"doc_hash": "87f2a3dd8650a84970ee44522e980efdf3321adb40542c425680c9b4644c398d", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "5a9cfd7a-b232-43ef-abb7-4dc60a956913": {"doc_hash": "b369db850a5722f41a9dbaaa197c08bec0fbacd873d884ae6004ad83b3cbc4a1", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "953aed7e-9d2d-4b00-9e54-cfd69203165c": {"doc_hash": "6761836ac489f006e9c5fbb22cb51470cecd8743983545c1d07e0dd7edd14f6a", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "0924744a-fbf8-4eb9-b895-029cde6d6b33": {"doc_hash": "1f56ff1f2ceb00a1557d9dddfe1b6bb24c95c34b7eff1f00b24e523aacff8fac", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "8d780237-530b-4a3d-a54e-1ccb741e48f8": {"doc_hash": "217f546b5d2f7b4aee09f5a1aedb3f84f1a726f8a3f6f9bfdf32bd98252d711f", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "6ea5cc5c-955f-49bb-a98f-dca6c3745ed5": {"doc_hash": "925bb45ea9a8a456e1f70ce35627e471bb1a4d07fd99f15d046a5b09894f9b65", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "d3e5d622-5ec0-4f96-9d04-9250dcc6218e": {"doc_hash": "3bcf2d9ffbc6cc6a67fdc209e69d585b9ff7bf1253b886df04a3ce31419c1679", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "5ea222bc-52f1-4e9e-9ff2-aa0381438541": {"doc_hash": "f3e7547fd3ea2e51c1a5aac7aa04d48cd12036135f8c853fcd8438b15f68bd5b", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "2eb6cac7-f6ff-4902-aa8e-f65f32aa1428": {"doc_hash": "d672c5a10d69e4ec7c7a63b61ad351bcbf8b0b570e1236f543727bb9fb010111", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "64897206-76b6-485d-a2de-f53cadddf9f3": {"doc_hash": "0c6bb089537b28ac2f80f3f15bff2569779298e3e4975fc3d37c3828fe9f0a7d", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "6bf8eb0a-ca99-4d8e-83c8-439dd4c96cc7": {"doc_hash": "824774d5df89c43baa3fb2b7fd117558ac75e3f083c75df1341a4f745c1d2923", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "37b8e2be-52ab-45d9-a28b-f30eef92d25b": {"doc_hash": "6ff67482adef033422790eeccf004c220418e0abf51b16fd9dc12f5606eb4fc9", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "8419a9f3-e49c-4943-9f1e-9c6a933b2cd8": {"doc_hash": "b033066f1d20f45ae933070c28dc5b43c02be3b8d016b5d38046c68c81bac9ac", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "dbd9cbcf-9309-4efb-ad09-f6c5e5490654": {"doc_hash": "f0993cdd648cbbba3ec0f1677f52d18d5874a2e872276807a641771301a35b8b", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "4bf2a061-8289-4dbd-9d1d-c51e125a54d5": {"doc_hash": "b0a40f08a1ff9ff4f82ae1317967013c76b7521eb92db75dbe656563faaa2ac6", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "30970f96-f200-4af1-9a0f-39909c2857b4": {"doc_hash": "565ea41c591548b92b093a3d400e15f225155d5cba66a354d0b8c8e9fe4cd215", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "957ec85c-1fc5-44e7-ab5b-388a42f5dd3e": {"doc_hash": "befaef5d93bb1a318edb58943fd28921f002b7f156830d70103b50cb324345ce", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "c5e1b723-74d8-4d4e-ba2e-af24b39aae9b": {"doc_hash": "aa0f16368810dfef20a96499125d715356f1fe9746ab077b7118363925351d9e", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "80c8cd8f-3209-4cc2-bd81-1a53cb02b33b": {"doc_hash": "a37b6cac0987e32e37979fab96a328c99c6f6f442205993af57f71b0fb60aa72", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "c63f4606-8ac6-4910-bf23-afc0c0ce2c80": {"doc_hash": "eeca0538cd507cd38eb90123ba86e21e4c023ad294ef456483100e7d1c477cb8", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "857ce279-dc5e-40c7-af2e-1dfa653ff203": {"doc_hash": "64221205babf501f7e384e55cb39b930bb411ab40963f9a68ebaeb7748ff18a9", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "ad348ea1-9d02-4d7b-8642-5199b6f3c6a6": {"doc_hash": "d3cdb669f0f373f7b7c564297e1387825d8ea238923d207787e6e0dae3c5ecf3", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "5845e4ee-b434-49b7-a7b0-38a640f70eea": {"doc_hash": "83e5bdfeab8889b674fabe6cbd3693f051f23933cb598c0ed19d6fb8d0e5724b", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "c81027a8-5f19-44ed-9eed-d1e376ffa4fa": {"doc_hash": "e16deda3c5945cd3f85740a36b20dab94026f7473b2426b08b22ffa64d8f02a5", "ref_doc_id": "4dba8f87-12db-44be-9f2d-f6772f2d8052"}, "ce6b7b37-49df-4b92-8e29-62bbc2d47060": {"doc_hash": "ae058550f8bb2c234597be7c88a42d6b67bd5d15a2df9a1c10656c959b19fed3", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "4a083e25-2bd2-4037-b881-d91ceca6a126": {"doc_hash": "99330bcd16e96c2c0011e3efe2b9fd1e5b0a89497c1a739b8e59e60bfc345b45", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "df8e1476-7b73-4846-9314-92076a5eb819": {"doc_hash": "17cb5a5e403d6cde0bf6a5a5258055200a07165a643bed3471953fe3bfa73b18", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "3e21be2d-06b4-47a3-8311-f1ecce5054f2": {"doc_hash": "aeb5ab47e34c783f1ec81b6d82595e8690d3559841a898ef2afa52ebe30010d4", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "2e3a0fc4-b2e4-4656-b37f-1a12bda53867": {"doc_hash": "65645cc5436f0d8a5fe464e8fa75a87a39b56f26f0dc924faf991188702cb0a4", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "dd65e54f-66b6-4357-a266-24e028863a55": {"doc_hash": "784434ad98ea7d4d803e89573a1cdddf4c61997dc02aa3f9e7fa30abb61323b3", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "1672be59-d030-483d-b735-706ec59bb012": {"doc_hash": "7e202d466481a0a3364fa24c6ac15a3f78e9ccc277f1e6412bfc216b810b8eb2", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "deeeb361-0690-42c6-9124-fbc1e6bb3bbb": {"doc_hash": "e5a66d59f8984439b3677f0c117f3b71c893e5333499f1c1efc7091c184419bb", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "9e32e683-e58f-496d-bbcd-ae7f2d599ab8": {"doc_hash": "1155920aa49b3d9e67838af6521e9406be2076af80c295068449ec28707976bd", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "120a67e2-a03e-4d47-8dc8-edd3b1958968": {"doc_hash": "dd9e73e455786521dd46777887d5d48ac52965c8dd986b166237e3a14fbd92f3", "ref_doc_id": "73ea37d7-22ea-48bb-b6be-79e320eddbc3"}, "08df2dfc-4492-4d2c-813c-68e6914454c1": {"doc_hash": "8de6b0919b540b610d72bc4c97540a8eda73ec8c729c35e967a75c25ce3b4b20", "ref_doc_id": "d3a80a31-b92c-48ba-9c6f-a45e6e2dd55d"}, "d81d7bf4-bf6d-4859-8c6d-0cae30590c95": {"doc_hash": "ce51665fc500fecae21a6ffebaea7c5c24d8c505f2116d7c524e1759f0fdb0fa", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "94225b7e-ca4c-4890-868a-0f6d96688850": {"doc_hash": "433cf805c62970ee8a28378dc2190bd4865d58560dc921dec02b530495d0e1df", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "867d55db-d653-4933-911b-cf61bd4e4c27": {"doc_hash": "ddf388d27fbc2fe3bbc7ef1663e9f6c76c4ce1d820b1a1fe5537c17048b16a1c", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "a9c1c199-a899-4a21-9093-bad09101f9f2": {"doc_hash": "d5c5d1cf2cb490d0e2f37c90763255cb650e2a1f425b257dfcc6ffa5b82a5b20", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "a090ba91-8f4c-431b-b618-37dcbd4ba423": {"doc_hash": "653f106f5fb010aac43ad26a813cbceecd04efe42c46afdfd624710e497e08fa", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "d744c305-9a8e-480f-820a-d5f61ef8522c": {"doc_hash": "ca72f8531978159c8df1aa6609cc5ec01af0d6212fc2da7f062221102574c14a", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "38cba851-bee2-49bc-938e-76c431dffbf8": {"doc_hash": "84b3af805c09cc22475ffa6e07221c954b73a12a4e5f1de5ec95af597d3fa7bf", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "36ad888c-2f39-48de-9f3a-469b3919637c": {"doc_hash": "99f0e24a0b3efa8a8c45806fe6cda80788e5a7f560e95fa87546f4dc8afb19ee", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "af3aaadf-dc33-4cad-bc09-3ce4a736518b": {"doc_hash": "2d5f7e33f9bd69126b7ce72557ed95baa70696d42de4633c03561ff4eec3aa6d", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "0362cf76-d4ec-42ca-ace3-0c412f276cec": {"doc_hash": "d2fb7f0ab5a6fd64fe0db99ef4c727bf9249fa00304ff303d0e61c5d63e2b0be", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "86cf368d-4c8a-4dbf-9ba2-1055559d1309": {"doc_hash": "9e11705066bcf8eda5e5a0fe3cef419e038cb0871620bf05ba7a5955a2ccc35b", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "b99a035e-f880-4bad-80a5-289c17744165": {"doc_hash": "1c5c16b89a163d772c4b8c17350ca8651c58408b8f1adefad43deb3b50b0dd1d", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "c59c540d-171f-494e-8208-669fc4406992": {"doc_hash": "18ca67cbe65e49c5d87f245253f50f8c2a390276b7585a83e9e659d89d07ff8a", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "022a3e53-c605-4f2f-909f-b06fb14a9102": {"doc_hash": "c95b23212a2f562213c0e842acb8f738da6a925f0ced9888e9fd51052a9e82af", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "efc048e1-c027-4a32-b855-ec905ee8e0e6": {"doc_hash": "7c9b94c5ff11ed1f4a354a22f9c93e841e961567ae38a85f563ef3e6afb565b8", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "f375dba6-335e-4f3e-89f3-87e245b3c970": {"doc_hash": "be586e304ad308b0e77d68ed4264f5d0c4e9992c2a13fd13c340c296d70fe5de", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "576903e8-da15-40ce-af4b-3b96efd61bd7": {"doc_hash": "0afea95d9dfcdc90e02163b493064c6790e96ba48923f530a56c92313104ea71", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "c0245ee8-3171-4c14-bf97-ca3f2e04a17a": {"doc_hash": "22864fa49b5e54277990703691b590c6efcbc25ea4a71538ba4d1b1c84696cd6", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "b1b220eb-f194-46a4-85da-9432d566b1fb": {"doc_hash": "972cbb4365e638b7038c71f3f57adf62ff6448adeaa0ac1867efd5c61f7ed3bc", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "dbfb9ca3-8299-4dc5-b9f1-706497dbe998": {"doc_hash": "01f30327ac1270702986932a8cf0999ee8f901550fa55ecc16b7efeeed8e7864", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "78091935-38aa-4591-9d1e-a41a917c239a": {"doc_hash": "f266a8bce6b5166f5b2f3c656ab6332fcc5f692e7fcba5518b52eea42ac8529e", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "3cb85877-0e34-4303-89b6-bad0576eaf29": {"doc_hash": "ffbab57a2f3b6c0718b17c3a6cb4fbdeeff0b6f8e1e79957ad7537f077c3ed8c", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "35fb228d-54d8-4c3b-a3e6-18b3d942b50a": {"doc_hash": "c184c98241c0b7fcf74fbe6fb3348aa5773fc982586e9fdad207b61f2696cde5", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "bb27c8a9-1290-4e4b-8d39-56ffcdcf4002": {"doc_hash": "ae7f889a33bb090383e3accf9439b30cc6e71b2f75cc54ca8c0340f71400e4a7", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "9dec8f1e-3c36-4a48-8e01-12fca62094b8": {"doc_hash": "25580aff0d6beda848116af479e76fec2e6c9c798f81b273f834908b9328018e", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "16a14e4e-3b9c-4eb9-b3c3-ed2b24293a5e": {"doc_hash": "9b8b6298fcdb84be838119254358e40e71b82344a8a6e57c7d5d464321506c93", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "a14ec67b-0b3b-447a-81b4-24ebb3c8b1e1": {"doc_hash": "15e92a1cad5b96dd89768c10e8617a4f8420c130e9f712285cf490f64e4a3340", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "d027643c-07a6-4fd9-aa04-2c68045a0fd6": {"doc_hash": "f0b6d36fa3492e6601892d1a7cb0ff21b27ee4bc2b7fe3e67e9307d83fdf336d", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "511309a5-be2d-42af-89af-b09a7bd45815": {"doc_hash": "ed10869d9f6d1c5a211098a8a62025079ce1223dbfd1d7f8c17314d43997596b", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "db9b87cd-3f93-46b1-958a-d98bd11819da": {"doc_hash": "3949566d075f02a356360ca071fc0075733ffff8f2dfd6314caecf1105ee83a2", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "8b55e477-35db-4451-812e-3a9b9aa5a749": {"doc_hash": "406f32317223e39bb7f1e86ab503825779e8f12366370f8cf68a4b66c4b7bb5c", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "8a7e6157-1b93-4ec1-80e7-53da96169e19": {"doc_hash": "78b36e6463584565682453f365f368db8f84fb933478e2dc575cdd34d7b28bbf", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "12887210-c57f-4327-aac5-93a677061aeb": {"doc_hash": "4d9d3bb83fb85801611cd0285cacc88b64b6ac61d5cf08a3e7d96b4acbc3a26a", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "3b269556-8ca6-47c6-a425-9fff1351e6ef": {"doc_hash": "1c5e39e1956a1a4df4dc95dd99b43d2506a413563db08c110ba3c140ec942e74", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "9aaf39db-98a7-4ea6-9644-5787335a2469": {"doc_hash": "9e11705066bcf8eda5e5a0fe3cef419e038cb0871620bf05ba7a5955a2ccc35b", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "4ac02080-979c-465d-b31a-06cf40653acc": {"doc_hash": "482f2d6af2ab803c9fdefc1dbd07416203be4480fd2123d3ee21b3a47c9db90d", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "9279856f-6f84-4293-8c08-a120b3e12a70": {"doc_hash": "be75249dc625da21799242c88dc0d24a1fe6a2920b0b07437ee2b4b853ef48fa", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "e64f5fd7-68a8-424c-9e4d-1054cfbff1ba": {"doc_hash": "84ad2a2e103329bcac580b5ae682982087c59095cbed6399424ad807b6148616", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "b6d2ed40-9e6c-4581-b219-004cf1106ebd": {"doc_hash": "b8859b5755e3934c4eadb67d56845dc40eec3bdba399571e7f159ae5b9448d27", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "36b77334-1c05-49be-a4cf-e1a2906a7974": {"doc_hash": "2e6628c423615eee5fc46e2ef3953a006294f358264334f3a5ba1b8c1dbf0ec8", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "2f9aef30-7cac-42aa-a274-1994bc0d9310": {"doc_hash": "2173336ff4d5ba3efb5c1625bb728ad3989cfb52558275aedd64aebae9899233", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "8297c51b-c444-4be5-b20d-c82414aaf824": {"doc_hash": "51e28b48de7aad25ada277a2b11d1438c2c24ef1dd2c552ff85b8f4cfa4a393f", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "4be32de4-c008-4d1f-be8c-4c0c10c718dc": {"doc_hash": "eee91c2b962ec92f09d0a2f687ee3d0b6c2ed8f82d98d2d206d0f76085b7e0c3", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "6e6c8bf5-bc6d-4e74-a23f-b0d41081ebb9": {"doc_hash": "c0374b3117de4912c33238d6be1b73f2f5dc0648285a4b6c1ab6f4a001572c90", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "b5e7609c-02eb-401b-846f-2adcca074e51": {"doc_hash": "d205c850abada843442d25ab17fc883fd1d61c5f23e2acb2a40c1d2909ae7e64", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "bc9efc4f-fa95-4ca5-a1fd-6b659bcb671e": {"doc_hash": "e7d152fcb3f7608aa50cd93eccb9529b9dfce1d47a55f3601e6017a9dce128c7", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "fcf77ec5-83ee-4a40-a52b-1d8c2514d23c": {"doc_hash": "84ff1bd5bb9b452f7fe66fd353691e00d63d30f76bea1952316b61e6e9a5f348", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "8bd37d18-7575-4228-8f71-13c262bc5e69": {"doc_hash": "ddf388d27fbc2fe3bbc7ef1663e9f6c76c4ce1d820b1a1fe5537c17048b16a1c", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "f10c2952-74d9-43fb-a205-ad81f41bbb2d": {"doc_hash": "167f3fad93f25bc99a423780d5e55a86b25a3784cfd596d48f50a2fb971a5092", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "87220ecf-619c-40a2-b4b0-f11fdcbcef01": {"doc_hash": "a4baafca305cab5d7bbb86dc75188ca906c171a51238094f31ffce3f5c347d73", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "cab1e94d-3577-45ac-bad8-d85d64cbd6eb": {"doc_hash": "58f8c4c95607fbf3dbb80a6190a4828015d618cb5da325eccebd520820b1d038", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "64d5caab-d60b-4207-aecb-243768c05d4a": {"doc_hash": "9e11705066bcf8eda5e5a0fe3cef419e038cb0871620bf05ba7a5955a2ccc35b", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "cde0e4b2-ff52-4429-84e5-40695e3992b4": {"doc_hash": "b8859b5755e3934c4eadb67d56845dc40eec3bdba399571e7f159ae5b9448d27", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "fe10bf72-c9f1-4ecc-a410-3a838a83dbc7": {"doc_hash": "61940e8085570b00bb4d7c22e63e924b8a20b8df36b3585d46b55adbeebe567f", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "e678f78e-2e3a-4a38-806c-f09f5621c6ff": {"doc_hash": "993ed081a38de3ae53a5cd9e4a7a5d37476ec42d14c1311d92714dda44186816", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "f937ac1b-a682-47e6-81f1-130bf9d76787": {"doc_hash": "60892ebe0ccc55e5a3063a12bd5b4a1e3b9ccbb528f14eb30f126b6ed3706960", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "e3636c26-f55e-4a29-8c3a-734d38db6d7e": {"doc_hash": "324f470c556e6572d0c17269fd3e3c79536eb8a0a72ff570a2f67cc73849a669", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "92945aed-d1b1-4e20-903f-959ed7223ff6": {"doc_hash": "9cad65b37e94a7e1a1fbd22a5121180fc5e898e98a115224979a13fa3f69589b", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "2039f1cc-503f-4ae6-8949-953567876a98": {"doc_hash": "e4f9c7a62364272b1b83c05a0cea6743dd72d8ca33156e73323b44dd6eb76c2f", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "7f45842e-0d79-4254-8d34-98b1a8ee14a0": {"doc_hash": "1c3a4855dde2aa6d0969b4fd74dd181696a99b5e9ed806de44f126bbe2866642", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "00821d85-3372-472f-b0b9-aa72dceec6ab": {"doc_hash": "a81764dabb0fb4ff8e3dde960ac7e84a529b940c05919fee7e871a57f78f6eb9", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "606b7522-dbf5-4b0f-8894-8d0912e65f4b": {"doc_hash": "abb53e975290ac4118c06a1818ad04cbc1850363bf1aeda8d2826adf0c59335a", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "73ed6578-15cf-4dd6-8731-ddc4431cba33": {"doc_hash": "b8859b5755e3934c4eadb67d56845dc40eec3bdba399571e7f159ae5b9448d27", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "26770ea6-8065-4bf9-a462-8978680fd074": {"doc_hash": "590aac230f112626aec5ba3d01c95b84b2083dab63251b997bcdd30fc4c539a3", "ref_doc_id": "bce33c78-0d98-4b73-9014-a56d30b4ee33"}, "79c64ee6-0ef5-4147-84f0-74cda9160f56": {"doc_hash": "91c98f4b9f66a9473caac54729a04f42d0eae3ffa80018c6a5e8cf944c84bbf2", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "28843f5c-027e-4640-8f71-c2cbaaecb790": {"doc_hash": "0f3d1cd73f91ce14beb3846e573623b3ae2a15d6bdb830104a1bb79867dac385", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "e3b63e8d-2dc3-4002-95ef-30ecd17fd2bb": {"doc_hash": "65df313d1094bf4e8fdd7decce3c01977d11bddf33bf46eff484bda5220e59ba", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "896e2f5f-22bb-4a76-a7b2-589ba75d9511": {"doc_hash": "d0b91fdff8ad7af965299d53be5a8152a69e6117ecaf79cd50de944f5d3f3a01", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "af72b396-8261-4fed-ac63-e80882495d21": {"doc_hash": "0b7767f17717a0c115b0d0b5859b26d6d64d8cfa4d321446292313c262fc1765", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "c3236c08-44a3-4b10-8ba7-97f2c9e9cf59": {"doc_hash": "96c4a6404c6b4dea69d30c9a75d4585af2b649a3c9894d7f8ba3dd1affb9c5d6", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "02bd796a-eab9-464d-b396-8b24cf4d0a26": {"doc_hash": "f8a690bb4a4243e2b829ed75b1b32677b1f4b77826654414120db68040dd9525", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "935a133d-2b7c-4a69-86c4-4d4314ae6500": {"doc_hash": "f6552186510c5197b51fc5a0b25f5684400af18a40483d5a8ae0e0a828703e2b", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "05c367ed-c232-4b94-af64-3868df296993": {"doc_hash": "648809f2d0f2f16a4019d1d10aa2adfd89b3a2853c016a1de26707a69755ed9b", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "c7e46b48-27c8-4cc6-b484-703254d91898": {"doc_hash": "8f858295fe1ac7384a9d828aa5c946549374413372575771d820522b221eecca", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "a76d628f-3138-4b7b-91ba-999ee465b00c": {"doc_hash": "f448a882a72776594cfe82513689e57d9224ff06af8da4a05a5d619189f855f6", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "7777206e-f6f5-4baa-bf21-acd646a0313a": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "2b98a182-429b-44ae-bb9c-b4fe0531a312": {"doc_hash": "c03cf1298b8d11d010874a58d65d726099ac02c627515e7fc996d07ce223cad1", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "73fdaf56-0d2f-422b-95b1-7735bbb14443": {"doc_hash": "1bc246ac90c33d516cc81cbf9808066a60fafc489eb0041037591a7c59afc8b6", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "aafb638f-3afc-45b7-97be-49b39bdf59dc": {"doc_hash": "b59007b3037534f424fe62a69a94a428cda2afea85d6398d092e16895ef045d6", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "84e59b79-6f51-4727-be87-b5ae94cd506f": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "4e9e619d-e677-40f8-a90d-3948ffd7dfac": {"doc_hash": "78100d1c2f7492c00fe215420756cfb07df2b7f497c915760384aecb5ece7d3a", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "e15dc216-f92a-4262-b042-a03fc5f67bfa": {"doc_hash": "f3a46f0ed6fcd299afcfd16e6b14745c31cc0d3abdc1a43aefb55d3364a387a7", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "94efb77b-835b-4911-ac48-51ee05997b65": {"doc_hash": "08a9844e4e83036e230a777699ce85c2982bdb7f17e257deec747061f494f09e", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "6714d67d-ea2d-40a7-b76d-b93353f963d6": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "7e403885-7ad3-458b-94d9-dd8f23e62c0c": {"doc_hash": "f07051fef101088d5d238875064bdebdfa4f969a4f02ee042ee3493f09bc70a5", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "d7aae311-54c7-4edc-92e0-ac250bd81cc1": {"doc_hash": "98551c07b9e524bc027df3ca505d493f1d64e5db30c7f873fb1bd94310316525", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "a361d5f5-40c7-4f69-a0ff-dd5ee33a777b": {"doc_hash": "2fd732c975c74bc551d64c49a76f02ba592e36964b6d5468dfaceab6a5e70040", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "51ac282e-df36-4fa5-91d0-b001a5072967": {"doc_hash": "2551df40381c581307909f3d4e8f10058b99a94cb22174542be5ad9c66efffaf", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "16b8f179-a722-48ba-8664-490e943cd22b": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "93d3dedb-77c4-41a6-8708-2f880e51eb73": {"doc_hash": "fedfd1f692eca0816dd97c07b9ca86017e804aa9c47876da9ab4c04d0a7d4605", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "d6a3ee35-ec62-4b5b-8b5b-886d9d2a0d21": {"doc_hash": "e111c2ed2300062f733a54d1476c70cae21a8db645f47a850bc524ee5e32e420", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "5174d3d2-a028-4db2-a302-fa32ec475634": {"doc_hash": "a7498404892c0c727a157f9f40886ab0d4da17dbb9f058fbe32b28136f24a193", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "6be90f90-c0f5-4fca-80c0-db4119d80fbd": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "027da57c-265c-4ec2-8ec6-d96f6ba7afce": {"doc_hash": "ca14accf0593f3aadc6bac668f26c848c3416598af0b996c6bb6116d7a48442b", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "a790a73c-8a10-4505-9468-ec9a3184a2fe": {"doc_hash": "8312d41b502d89e7f8a7bf17e6f956a0c74e85f6e2f7c8b1b3b6e088e845f069", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "5ede0cf9-15fa-45bb-926f-e9d08c497325": {"doc_hash": "dfb9183800e34634f14d2c508f420a173a1fbcf54f3d7045d05fb4f2aef26980", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "f66d06e3-26a0-44fe-94d0-52c119a99ffa": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "4aede4fb-03b1-4bae-83ae-2db1a097c2ac": {"doc_hash": "8dab9dca46635b9f4774be2528d75c2fd9fb9240851760b27222042c91cdc123", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "1343d2ef-acca-4fd2-84de-9e4311b4b378": {"doc_hash": "399d0593b8991853a7deb1cded8e0f65a10d920e88488378df9ae1e09f86e94e", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "5949259c-5320-4ec1-9b1e-3a1e400f2f18": {"doc_hash": "818257e7a3cdb32b4c265adf321ba1bf716b6ed4c6930227de8d40456017e070", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "b1f47d05-99dd-4176-96a8-f8fd9af97f5e": {"doc_hash": "3b43fbd4ec63bd6ec22ca48ccd792c17a486f2199ed953424ecbbfe11af144a0", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "8fc6fa32-43b9-4233-ac11-f0d5ed115128": {"doc_hash": "5eafbb2b82f1ac47da6796cc1f1fe4a267fa75b9f74e2fa2c6bdde4574fc67db", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "9d89dcf8-edd9-45b3-9a85-560b7a84ad1c": {"doc_hash": "3a4fd9a905a389e2833b35595668e2bfc71230325a7607b139dbb6379a4ed004", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "efdd9b43-f484-4cbc-a0ff-d5f1182a9a8e": {"doc_hash": "44740265de5f3a85d3aead87ab1c956776da275277003bcecdbd9b2c62e23f3e", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "149cc68c-af90-4ac1-a65b-61a8612f018b": {"doc_hash": "7516bc8be05d9c09a031819cc00495d6a659fb73fccde5ba69d5e47bbcc7d8f8", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "aaa03b22-3c7b-4ef9-b9a7-da0ea666d642": {"doc_hash": "3cf9fbdb4dcf002f0fcebad9b9da52681b4d60113c086d39f09cbccdfdb2069d", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "9a9cf7b6-4489-4d3c-8cbe-4f280beb85c6": {"doc_hash": "7516bc8be05d9c09a031819cc00495d6a659fb73fccde5ba69d5e47bbcc7d8f8", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "99e9b652-85ec-4b0e-9eaf-5e8a8449e0cc": {"doc_hash": "152e79490437c02288a4229db929e2e0f8d53863774ce2b7db888695472b17c4", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "17097184-1bc2-4ebd-86f4-e9e827c33672": {"doc_hash": "7516bc8be05d9c09a031819cc00495d6a659fb73fccde5ba69d5e47bbcc7d8f8", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "5c3b255a-989d-47d9-9fb2-abadd5340d17": {"doc_hash": "1534120174fd1159b8319909e62b1747043907761a4ca5489524bc89152eabce", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "ff7982f9-ce62-46f0-9258-b3b75a1682f2": {"doc_hash": "8fb450c24ae7bc6cc62dbf917d65b6df4d57160f360a04ac0576d34e7d1e0456", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "e329e16b-4655-46eb-9d74-a34ba5939c05": {"doc_hash": "8fb450c24ae7bc6cc62dbf917d65b6df4d57160f360a04ac0576d34e7d1e0456", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "a92618b8-71b8-4bd7-8f68-8a8f37304fc8": {"doc_hash": "8fb450c24ae7bc6cc62dbf917d65b6df4d57160f360a04ac0576d34e7d1e0456", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "d3858494-2609-4331-9c79-574a7ba5e9ce": {"doc_hash": "5cc51963c67983daff9bc0189a7a4c47c3730b756ac0468b90f203fc6416ce20", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "77a1c36f-91a2-4f7d-8f8a-d9a118ec98b0": {"doc_hash": "61f0a1442f6174c92d9c6e073d63f7c625f49d68f52901b21fa8c6d3cb648390", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "e3d0718b-b7c1-42e5-b3da-ff99015c6926": {"doc_hash": "479931e238f15381bb19580041b8489a47d6672a0216768ff4fa2674465dbf3d", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "aac590ab-994c-48fa-9877-6296d27b4fc8": {"doc_hash": "04be92bd488bca55b0862dae8d2cc0b7a41bdf9c4db201d449b6beef874d019b", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "d7a5f1ab-e922-40f8-94f2-1fd1e2a9d02e": {"doc_hash": "4c574e3b7b7ffd2ed97ad9e511029cfd1e020c44a1716c1040d4135e19454b51", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "c96edf54-0f17-4761-9f3c-0ae54610543b": {"doc_hash": "e67bd2f5815768ab6a8a2c7b535164c6ec52054cba8395f40cf3b05dce98c1d9", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "763317e1-bd4a-433d-b6c9-328da150ed68": {"doc_hash": "12df015be18139f40a89c4696c775add022c359ff181a20663e5277f3905c94b", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "a7ca584d-e949-4f4a-89cd-bb30140e29cf": {"doc_hash": "d446dab9f05ecbbad87c9460667c7d79dbad2a5f687a0678265dc90ce977aef1", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "afcdc4ef-d055-4f8a-844d-63ad1984fc70": {"doc_hash": "717a38c695b87c5633015c70e4c88d9ec7c143edac777b4a7ffb3b15e6e81e35", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "71f385a7-0158-4c36-af20-f0db2a878ca6": {"doc_hash": "bda93fd83f6cca663d6fb70334513011152993982cfb54feecfd80fdf25c7fd3", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "46d494a5-7e6b-4c9b-9f8f-35aa9483aa07": {"doc_hash": "eee3ae4c076e180ae5ce09ea506bd3e794ae72a404e2c1bfcc923a7fb797477c", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "da8ecf0c-9b4f-42a1-af25-4ddd738dad4c": {"doc_hash": "c0c66af5647bdb15003fef97f0afbe6eeec0191f47706966bcb42c32c7e54ab5", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "caaedc24-2e2c-4963-b2ce-27380880a642": {"doc_hash": "ed87fd9213d8a5810f7e823427124bfed3531b245c6ede9083b170b24bfebb59", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "0834a1c2-ce5f-4f29-9f65-8e8270275314": {"doc_hash": "37b095291dabef4656df7ea77015d6fc472146d78fcb1cc0f9e9b87b6d595f16", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "01dce63c-1d06-4e4b-b853-577d58c5b1c6": {"doc_hash": "4157cdf1f19c69f58c63ccda37aaa1acee53415fa46337b96e814c6fa374008e", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "b282dd10-38f8-4085-a73e-e9bb9275052f": {"doc_hash": "d3b910c03af56800fb92022fed7251f9f8fdd118809264ad193c581056600007", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "1b39d0b0-c7c2-4438-96ab-c3e4ef0bedf5": {"doc_hash": "16b2517fd36d98b16771453696b3604863c3a4f8d361f423f3fb1c9464b3a659", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "2b4ec2a6-6211-459c-b5c3-17f34e5f5cca": {"doc_hash": "d5bc60f34afe2cc428fcd3d789366df6fa63f0a28430f43a466248d55dc64a65", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "45601e58-bc2e-48e1-9743-21bb9228fc17": {"doc_hash": "fb81c93bf1360b98ae79aa22fa5d22a93a9bcc57423ebd821536df74b4626bb2", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "218ed781-189e-4e12-a69b-c8e9bc74670e": {"doc_hash": "7d33f52c78a3fa80cb170e8c64f373b0e6f3439a93f054f8f527878a251082b6", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "4eb45b71-29e9-46a8-b784-8e7e3d118c8f": {"doc_hash": "49e880e7d34611c5db670696c1dee88bd30e50cbe8a1540ed1ac3d88b4f86f09", "ref_doc_id": "4f01e23e-6795-4d05-b42e-88a2a7422ec5"}, "23e022ae-3d76-4b8d-a070-f6bbae19ed10": {"doc_hash": "dfe7d585f71aab53a226bb6834701aa97d27fdcebad0cc2b2ea192b9ee65b637", "ref_doc_id": "0da60b9a-d766-46a6-8ab2-b867c2336373"}, "c99faa6b-69ba-4d86-ad96-5dc357f636b0": {"doc_hash": "5f343fa6fa100d843c10caa272429b1659055abbc0bb72ae5387fed5fc706ada", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "4e764e9e-7ca0-4ace-b90e-70c74ae29cd0": {"doc_hash": "208ee1d75847dc5888ad753b7ce6fd08fefb44460de8a6000907fea76fa6498c", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "f563e927-986a-47b9-aae4-20cd98306159": {"doc_hash": "341f550189724cfd4ff8500452931d72d214d1cfa2b98d02deb8aac7aafdf684", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "4bb73009-b1e9-4e74-83b4-15a3894ea03c": {"doc_hash": "587051f95435c638f903ba44e972f636a87e068f7f72be35a31c28c00c873e98", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "795b3f44-1423-4f92-82e8-2ac48557dfa5": {"doc_hash": "1fa443895b6e5d66d705ebe9d90292f79f4bb48b0540df6fb5f83d4bd97a2696", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "4e7505dd-cd34-40ca-806f-94f75b4c5400": {"doc_hash": "7b9fa45d2b3c7d0d6c2ca7800de817769b71d817223824588facc0d01ef857aa", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "43c4e356-522f-4873-92af-b035ebfed379": {"doc_hash": "90a37c4d7a98ead47a25bf8c105b20973a08802456b4039d56a9cf0ec0a641d0", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "a0805fde-d5b9-467b-a676-5e1c258c9643": {"doc_hash": "c6c83cd013d76cb19712802a505d852be553c11263497d86a42c7b516bf73f1f", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "1bf6eef7-581c-40f1-bb07-f1f8fa9b6ea9": {"doc_hash": "eb01844c7b9c89d813e0472ecb91f5f3fa1dd40063c4585b2da493734372ccdb", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "1e171b8f-1bb9-42df-b4b2-752a06a41c7f": {"doc_hash": "0825e4f4e7054f6294a2f57c5f35aba9cb0c2c45995239e471f156c84bfec75e", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "6a46673c-c630-4f9c-ac2a-93845ac24cdb": {"doc_hash": "7e5bc4768561218f910a8d7da64f6431b97de73723e58d8c5cb904a86d8b92c9", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "597bdb1e-c709-46f7-863b-0db38bafe0b3": {"doc_hash": "fb486ad3d9b0af0d9896e4255a9f2a5f5ba00f693eaaf6fd0d2be984cf5b6384", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "a3bf6c43-726e-400c-8ec1-788a4f7447ac": {"doc_hash": "9bdddcb3bef68fb1d9e15bdc69c0a80a816c7438ac7901ca5ffe935a02299ac7", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "ee451377-766f-43bf-a3fb-45df5191d51b": {"doc_hash": "f8bf9544b3015fc6b477325250be400dbd0cb28ba0e8451340cbf81d1eba62b2", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "2009849a-3ded-4b30-8204-5f3e8df16aa5": {"doc_hash": "7b0ac639438a3ec03214ebfcbe5f8c8b771e8bfcd0d2e37b5feeaf15b6d44404", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "0d4da37a-895d-4fd4-a1c6-4f3bcd8f2789": {"doc_hash": "2b8bc22fa9a0684fbb6c9d9807af50d742360a2d27489d150d080dce4ab59919", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "99d2e2bd-4f86-4fdb-9099-c526e4cac27d": {"doc_hash": "eee7d28108b38bf8b1fcd01570975c49e327e160218ed35ca2770d940efb3207", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "c2cb6024-84f7-41c9-abc7-b416f5bcc4a8": {"doc_hash": "468e0a927d01247c17ec6c9c593b5e91d43fc3e782ee9379b188e4336bbc49bc", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "d41a49cd-e9ff-4ee0-979e-1ea7ccc7f78a": {"doc_hash": "f5b441c23fb0e039d80cce9f44bc5945e85f99c515c585fa366e31b1f2ec64c3", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "cf3d3307-fec9-4980-882b-c7f2f45ff62e": {"doc_hash": "06fe81ce6e69e5da52a5926f723e5534bb55dc15c31e192433e23deea12e24da", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "6e9e1cca-ec8f-4bb8-b8c8-6246dfc7eaca": {"doc_hash": "106d6b006c723c7f41e50ff90b69e4554a1acd09f20659e06886938407b1d33d", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "ba951554-b3b4-4b0b-a49d-e61b219edd98": {"doc_hash": "0d04301430a49e3652d3e28f741be6591a3a6b964e0c317e7bf8b5e6e2de4f37", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "53550ede-f9dc-47ed-a1e9-ff9613e2525b": {"doc_hash": "d408fec17393acb17820eac09c3a4713a53d021c1650a211323470a7f6e69121", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "cd43b54f-9044-4fa6-b097-2af21845164f": {"doc_hash": "627e114a6990d0fc2355ec8ddb5cc93faecb1f5bf56a39970c65b90e357d3929", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "85e56118-befe-4ec0-9ba3-b0f1c200ace8": {"doc_hash": "c0a943bdb29c3181de04dccd79996a5172a591e4725d63628b4bfd266e919325", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "e6b1b332-883c-405f-b977-62c45456e7cb": {"doc_hash": "b4f52c97e5f5ff81a218e9c20be595ec664e9644d2f82892b2edaa4a7e6145a4", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "f6125d88-3e0f-43f6-b092-420a2ae61705": {"doc_hash": "af9d21a65075f5dfd5906b0cc477e5ee8843093854d4a9534446614ff7890c79", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "b73d0cd7-ebdb-4ca4-b2d0-96d0a3c91cc6": {"doc_hash": "728fc40b2f129bbf3523dd7c0e4172509ced24ed7e485d234b0593a5ceeb542d", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "84dfc870-bfc3-42a5-9496-659f29747995": {"doc_hash": "0b489f736cc8b4a5b6e37470112161fc5683caf7f741b52e43c8fcd52a151d70", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "66fa68c7-ecf6-4392-a27b-cdeb5e791687": {"doc_hash": "439facd51f8a7a3d21960a0a7330cc9166b2a35dc7ef0125f1a3f512ee5463a3", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "285de063-b0ca-48cf-807f-df574337b1be": {"doc_hash": "e6852697c5b92b0295d8d93125cbce048d42a9572c6512ed5553b2cc667d84d7", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "b35d44a5-1ad3-4428-b557-40536c425b1c": {"doc_hash": "bc50f149d00b545d4678aba53921da85d28244b2fe45a450c16b4a445e03845b", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "bc77a395-1ec6-49fe-b726-410f306c3cca": {"doc_hash": "2f15473ca11db52819e67ed144abb83fb1a215a59ecadd1c45451db96c621977", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "d1a453ee-cd06-448b-928b-97ddf4ad3772": {"doc_hash": "427150c281b916678c24e18e8f7227ff45f7962c36b6148b61e74c711d26d7e4", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "5856a581-a72d-4a7b-8315-74119218bf60": {"doc_hash": "f477e6b1ff716bf9c2e8b045fb28be65fa8766432b1b98ad592bf455221362d8", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "ee7b07ea-ac58-43d7-8ce2-5b976c511d13": {"doc_hash": "4d947898609aaa5ae845a01877fb9942dd30a8fa36d664adbad483d780f3ba3a", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "2a25b82a-8067-4e09-bfa1-a56b655575b6": {"doc_hash": "6cb7832094ef4c43b78f2c5c7624e84cfb97cb40ffa4e467ac341ce08ce7dc8f", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "afbd1185-e1e7-4592-b931-36f87f28e7bd": {"doc_hash": "4c282d95efc47410ab610b2f4aee44e5f93055bb692bfb5fc9ab01278152655b", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "b01abded-a851-48ca-b3fb-3b141897be44": {"doc_hash": "85d14aa480f2f60cefb0355b0aaf9cf6efd007241175b5216429ac20e808160c", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "72a24c5d-0af2-46d2-8de4-2708f0a5c6d0": {"doc_hash": "94f62f45f6ffd61f1ba7ecef7b9f950f9e679e142abca0472766c876ea7c7704", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "7eddc888-13f9-4af8-98f4-4575e10f18c2": {"doc_hash": "24d628e066915a93483449bfb1670a026558e5ac9e01d76080f534a3ee672d8c", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "a79f7328-7049-4159-adce-057f2ec9907b": {"doc_hash": "8b7382a2d964fd15fcdce3c7ddc19d7a4d7af34d903da6599e547e0bb013af03", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "5b3c450b-a9c7-45ad-8c04-54718075daf2": {"doc_hash": "38b06ec5afaf58964a7455c1ba29353609060ba1e0d3473c4b91de65d266eb7c", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "23fdac87-ef32-4424-b96b-5389498e3144": {"doc_hash": "81cb4ba1076028049bd49dc8b6ace42957a31167320c58ce243fa0adad2137e6", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "3b7aa1d8-1c1f-4882-9e2d-2d30972c8480": {"doc_hash": "688f4d180c5e6fe0cad596d2faf4518fa0ff4c7bfc67a9fae7a7341246385b87", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "71449a2c-c57a-41a3-95ba-f747ae9ab95f": {"doc_hash": "935227bb19c2c46daf4ad04e9f7ad53c67176271ff667df8b5dc0e1cd9efd987", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "bb0c773f-34d7-46f0-be12-d64c552589d7": {"doc_hash": "b23068a285db65bac838bcd6508f0567df7fc7a9197fbafe9ee1f804eed3b81c", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "7d1f4297-074e-4a70-a81a-0534b9345e79": {"doc_hash": "5f2766208e4176d7043cccfb2df09800416049a1f338f374153435cd6219d903", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "5dde757c-c8f1-4bb6-8144-d87e1b58791d": {"doc_hash": "9934b06e77a1f4f638452dd6dd73a3b55c2f5466a56357f70eaab5665b18bce4", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "6335eb88-0513-4c14-834a-2d9a16db3130": {"doc_hash": "9240712c1400324de209f74a2a4b7e53a3536f77a69445b31f4b9d3510614c03", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "bf296ad4-4b18-4638-b3a8-583b33f55ac8": {"doc_hash": "81a01bba461d8f6081dc1acb4d02a6a50e563fe2ca2dbee694f99a05c2737d89", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "6a7688e9-dc2a-4cfb-b1d3-35e449976aca": {"doc_hash": "0be83f1e90b32850b22bb6edd7485cabbc1caf92c7a68507e2fcb2d2e94e1f5e", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "fc26d667-aad5-478c-a709-6ed6a565658e": {"doc_hash": "f25e5c448502a98337490e5714c00c9783158b5d5b511b6c16cc98e6768ce6af", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "e39fa721-333d-4f1f-822e-7ab7a298bb12": {"doc_hash": "d5a59f4e4740f5c29c4cb61169b633410bcde49d39781aa54c72a1ebb6e200af", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "ffd1ab51-27a9-447f-a887-dd3cf78e545b": {"doc_hash": "d871562db5e173a209804ca2c5ead5b6549cd8ad6d271d4f896a382c57fec91a", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "161a910d-7e78-477c-b2e4-a4acaea34df4": {"doc_hash": "0b3faa9ad37c42c99f406685d96e4b65ae2be90788d23b15084a93db27a59a85", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "25b43b5e-7201-4dc7-b2bf-f4858ecf5c89": {"doc_hash": "1e969d4fe1565fb4b61e07be861b0519aae1c39abdae0c223b8e157dcca97a40", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "112b7b3e-292c-43c1-9e02-063c705eb762": {"doc_hash": "a0bb3d96f3eaff44f947a11232f0d278cdf6664d64c32a5ba470d601891aa025", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "c0888e7b-ebc6-40e2-9dc2-e37f5a8f29d5": {"doc_hash": "3e334bb0b887dd5ebbd6ee44c6f85897b608e8a73d20ee96b545b8832841a790", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "20a01cb8-dafe-4ab3-a9fe-17eb5e479c98": {"doc_hash": "00fad2b8b319157ba0d91c9607351914a8699bb8a4b847199aa2bd226a4d284f", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "cfb21aae-26a7-4235-b96a-c9c5dc9a9c82": {"doc_hash": "15099cc7b97cac325bcd065d1564183d09890ec8cefcc3d20e13f1c0ccf172e1", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "38604e18-3413-48ff-9e63-fad1b2cc1d80": {"doc_hash": "8b0f591208759009aa834e9b4c23d01afe600fdf445d86b016e432cc30fc6e49", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "c05f7c6a-bffd-4603-8740-ac4795dc2435": {"doc_hash": "2f43ebe281a648b75facb9d40fcee8891e06fdc0acc7cc39bf5b711a46a1d9ca", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "9db15c16-fa78-45cd-86d9-98f5a2492fbf": {"doc_hash": "a88f18d3d840a43bf670d47835656253aad898eff18bd52fcf6359b65dba38cd", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "4721c6bd-039d-48df-a5d5-609a02668a8e": {"doc_hash": "43ce5a4db0e12ef978285a0263630e9107947f8003cb7c8eb957b2d93fe8ebb8", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "fdd09bcf-b81a-4664-bc21-f9e1b151183b": {"doc_hash": "e0d2e61d166502337624251cc427c28c220ba6073abf7eb9871cc4c3aece8687", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "3227b8d4-6e5e-47b6-802d-5d894eecc858": {"doc_hash": "2151e0ee42054c09c3e4dd9ee510412b339edf4c4a8079605d4b9e8ec476cf26", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "4eaf2d6f-f3fd-4023-b9ff-6c46d52bb7b2": {"doc_hash": "38bc6ff1d2a5df64e64ab9c995cc0e20e6c82e75080e7ced4cd2e44967a6ab71", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "562688c1-d9c0-4f51-abbb-d5abf00cb94e": {"doc_hash": "7aa262c2d4481f567e8591a35b4207fd71ee7cfdd784c04b1b3bca1f75505af8", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "b3710c6f-dbcd-49e4-94a9-4a684bbb16ea": {"doc_hash": "66bf1144e502110764646c4bfea1b325dec8a40a4b02fda392fd3ffb86bafaad", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "0537cbbf-af0a-4f2c-840c-4f5c332ab9b1": {"doc_hash": "caf4feae37fff926fede062b032f2c2473c36ccc1e693f8bb9325e6156d433c3", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "3b97c9fc-480d-4928-b0b5-25f4f702dca0": {"doc_hash": "9782d39aa02d94a138a915ebe7aaf733d78518b548121169b95ee3fc7e1a5bf3", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "6e1867b5-d4bf-430f-9fda-7e0830be3f8f": {"doc_hash": "39f96feecece173895947018577a8f5f1f97348a844d82c6c1a12d4eafdf0403", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "58fa609a-766b-4394-9190-03fa4dd1ab86": {"doc_hash": "fb38708b383f4ddf9aa0580ad7b727d8b8ef21680e0b1917f83c147d6c97a7c8", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "288f6a9a-a4a6-4fc1-8904-831cd3831cab": {"doc_hash": "cc26762e1e668a83ab2eb0a2a5cc8a799de4f70793a20af4a1906e34a830e154", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "d4b0b388-2c36-405b-a6f2-7102225319cb": {"doc_hash": "f5985241c7c00a05b91f7f96d683140b29be672bb893f159c0da027a191201ee", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "e72fd28b-09ee-4361-8e3b-eeeabb2d59ef": {"doc_hash": "58f5993de2c95b1facada65ec7e769271e40084a29d87c8eb0e0acc207b5af9b", "ref_doc_id": "f27e9905-48cc-4a47-a226-48be04cff4e2"}, "dc80f258-f281-45fd-839b-1efb1aeb7198": {"doc_hash": "888322674441f4764f8b66775457391ba575717320b0bf2927adca28340b5b95", "ref_doc_id": "f0535384-d287-44f7-b2cf-e70f4570c816"}, "3831b82c-8f80-4119-8e2b-77b95bab4f1a": {"doc_hash": "31de5266b4cc7888935c587f832fa44a1da2b3a5e6c9d2ac50afa138061ddf4f", "ref_doc_id": "100f1905-52d9-4fae-bb55-bce159895188"}, "6f6670df-d728-4c87-92ba-d9282a8e14d3": {"doc_hash": "df3e6e3d4bada0c9022476a03a133df067eb6007ac7feeeb6219bd01d702240d", "ref_doc_id": "100f1905-52d9-4fae-bb55-bce159895188"}, "1994c685-6413-4ca2-b226-b7d0566e9637": {"doc_hash": "7168df9e7d634a32e56ccad9ed7a380e0bd1a0390925fba75a16599f1a904490", "ref_doc_id": "100f1905-52d9-4fae-bb55-bce159895188"}, "ce2c1f1f-bf08-450d-af80-beb1076b39eb": {"doc_hash": "daabce2bbfcef9f8ed6de9a54ecc1fcceb443b550177ccf28f8523b8d359141a", "ref_doc_id": "100f1905-52d9-4fae-bb55-bce159895188"}, "8a193c57-e9f9-41e4-b978-6e1745fc1490": {"doc_hash": "3345f206216723c103283585c067b157050948a518b88e04889bf45fa09e7a0b", "ref_doc_id": "100f1905-52d9-4fae-bb55-bce159895188"}, "84ea2544-cc56-46a3-8e5d-3c21ac9eb4c6": {"doc_hash": "d65bf486fb6ba16c4395dbb2c0895e532232c6a070312e7c5538c1ace768c02e", "ref_doc_id": "100f1905-52d9-4fae-bb55-bce159895188"}, "017da7a9-f7d5-4af6-bf0f-b7ac5a714b22": {"doc_hash": "90697ac58422235ffca768bb56b025448460338ed780666072d903da2edc1a72", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "d053bb7d-6879-4875-9887-c8476cd64bb5": {"doc_hash": "c0dcd7801ed6a863e49aa1160cb39f8acbacb917f00fdcb4ea9d7295209b3f78", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "a9dd6f88-9d42-47f9-8f9e-b5e54447f00d": {"doc_hash": "895f835253fc85979e4b8ced48fc95d00b28d6cb9ed493a329545346e288e42a", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "4ee626c6-bc9f-4198-998e-27cda34fd521": {"doc_hash": "f0bf5fad74bcb7b4e69988d25b49dd8ca7ef1bedbf47d78e4907e5bcd4e82d49", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "b29bc0e7-9e63-4e17-aa49-d897c98ff044": {"doc_hash": "4aca8a2f59d6331fa239b7708a16433aa19014891465809c135c5a909b660f31", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "b08b9a97-1913-4205-a343-ed80ca455985": {"doc_hash": "8cad07673dbf4894f7182d2683ff1255b936135eff2556c20979f146a3eceba5", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "7f6487df-985f-45b6-93f9-28e0cdede66e": {"doc_hash": "e86f82d6040b6433a9573f3736065ec853cdb6dbdd0dfa0441005e7bfea7e0d5", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "b72c50be-bc92-41e3-ab34-b5d37cf5f345": {"doc_hash": "988dd9eb2a4e2f00406d07d67a87742ad511c6d77c26b8af7a40ea25623d4230", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "9ce435a6-194e-45b1-b2e3-94ed28833b39": {"doc_hash": "2466cc7566156584ad4b6a87ff36aa4af42bf40f19cc9abe22d17356c13e0d45", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "bfb94d3d-d737-402f-a264-86be080f51c9": {"doc_hash": "4f8f36bf2065f8eccd6bbb3a10f333187aad55368b6b33f859852bfeeba8b356", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "7b637f37-97c7-426e-b60f-3e3913d9862a": {"doc_hash": "7faa59d3ca6acf9c528461805cf8999dbc530c1d7289712cd6b96cfcfd1a50b0", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "4d08bb69-c319-4f55-bc0a-168bfeeb41f2": {"doc_hash": "2921661bd37e5ace2775724538972652df322d49e4e9351efc1ef8c1689ee6f2", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "c631e768-60a6-4760-9dcb-c4375eac9082": {"doc_hash": "3790b2dd6bb4a11a44a72d64cfc9f1c2da71c607fadd1db6615d5008d6982377", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "a8df01f4-9858-415c-93dc-a86b0b65505b": {"doc_hash": "178e51396dcf9774e575f1f1deeb35601c372cd070943ac42c1043bc41e6320a", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "3472420a-6439-4736-a1ef-2f0d90b3ec45": {"doc_hash": "a5c11197983414f7d5a60b9a3daa2f939b5d062545d1efdc37af5860e614a219", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "cec44a66-5d64-4b57-bdbb-9c29f6a00487": {"doc_hash": "5f48407ee49d334b0487d9004b27fe09eef657a470b6e393e67fc6894616f563", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "96868906-607f-43d7-a1cf-adc9236b333a": {"doc_hash": "2cd8a69d48c5d9adf96664552d20b9f913d276e81f089bf3d9c16c1a6291178f", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "ff871dd5-e47e-4134-82f4-116099458289": {"doc_hash": "905cf80aa931674e3d8c773929eda290df5bdda9e29ba210f25249d34cb9f564", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "143c74ae-cc9b-41fc-8752-36bf460bbed3": {"doc_hash": "65044c0c1dfe7d599d96cca0df944141bda5c080ca02f2de7f6ed1c798cbe764", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "c99c8289-c006-4ebe-80bb-6d5137173e22": {"doc_hash": "daef02f37b9cbfbdfb218a10a2484ff51b05ecd1ae1e624ce160ac36a4c1570f", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "7244b56e-1dbe-43da-8ce3-8dbff11ab013": {"doc_hash": "ea87b9ff6409bad58d37a118730a9b4ede7c3cbbb8af339b1850e0dead9764f9", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "74619776-bdbe-4da4-b08e-c699f0fb33b2": {"doc_hash": "27c2d574ae23b54c7e61efb3dafc2e005a988d09867ea566b0ccfe19f4b9deef", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "61303a9b-cd6b-4ff4-91f5-aa9561feb2fd": {"doc_hash": "4405ab4877187f9e46350de4cf4863d1b4ac59ecd8fb00a4eb7d13361734d8ad", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "a39c795d-d616-4803-a4fd-e80cca02b420": {"doc_hash": "d80b84c3fb6825ac3bf146c38faebc83aa3a660157a5d1b4676fbf9465b23ea1", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "da8f9ed0-75ff-46c5-8a53-7e18fe47154c": {"doc_hash": "988dd9eb2a4e2f00406d07d67a87742ad511c6d77c26b8af7a40ea25623d4230", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "0cdba97e-f996-4472-8c4b-1fccaef9439f": {"doc_hash": "850011001c9edbc1e5ea4fc33d4037edddff2909e3e57ea7beab02626df4cfa1", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "b06d7211-160e-46b8-a201-117f9547be2f": {"doc_hash": "006a512b91ab059f995300b79d23942fb966c9f728fc922e1d5703b8893de023", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "d67a8402-cd90-4d9b-b3a0-d9c52aef257d": {"doc_hash": "50e241fbe79861ac57ac3d7c98518598885608c8130c5fef4c4312f8a7e26a39", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "42da87ae-f857-4541-b997-a95ceaa76bc5": {"doc_hash": "d32b133e17694b0f1cc81f23469ac346c6bdd3e02d79bbf21e75c527691acefe", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "8b7626bb-8669-4fd8-b852-8e8b8c18ce66": {"doc_hash": "610044541e01c8a4923fda8f6d53f912be33500538955005bd55f61aa8a4e54f", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "e7b818c1-eacb-43c9-b403-34867ccf84ce": {"doc_hash": "952d7b0d483298ac8212c52db01749e27c985d58739433482d3bbde79482dabb", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "ab7d108f-2b11-4be0-91d3-adc86c701fed": {"doc_hash": "f86330f8a84bbae87d08f04727c5c73c00b751defd32981c0246ad003d62825f", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "5d148dbc-1ad9-4da4-8103-ed26f0bb8c33": {"doc_hash": "79008c859929189fe7bcc1259e7fa17b213125b7df02a13446faef42d660c5ad", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "ebf4a5fe-786f-4694-9213-d5dd83dcae69": {"doc_hash": "93846324c497cc48a58c026fe052f6320dec09b88a2eb219efb60c8b8dc42175", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "394303ca-c3da-47d9-bd4f-870875fd3e5b": {"doc_hash": "6558075a44047e49942207ebaea47fb83b8b008da4239ce29969c76f4504c2d3", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "9dceb3a2-9f9a-4b74-a6fa-bbe7b3253d62": {"doc_hash": "08de7d4aa916d9fec97709267b305e48ab4fdae15739a894a7cd3a762a5a1749", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "736d7fde-07c0-4b83-a861-67a463e5d4ed": {"doc_hash": "0c987b36916e6c502e8e4add569d6561b570c565fd8b6048f405a3fc3995086a", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "6045b67c-8e68-4b9b-ae8b-6b7d188911e1": {"doc_hash": "33d9c9f3499aef25e3196fffa9a0f76ba8d50da8d623d7f257064d40e3c62067", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "8b56b3a3-95ea-4860-9a3e-0d98c516e82d": {"doc_hash": "67fe6e5555965933f9ac9f0f84c0126baf9a5df3104aee4073de550cfb0c387d", "ref_doc_id": "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b"}, "faf7c440-96c3-4f69-b785-0a0aa9311b5a": {"doc_hash": "de36a512a8eaec6189689916e39f7c7d30a430ee6b50e5b0021556ca2e2afba4", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "5d10bf67-33ea-4f6e-86c4-6c32146510a2": {"doc_hash": "9f9fa96ade9d721c05e9c16e9a692eae6f60598aada58398822189ddb42c059b", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "88e4d427-7dd3-4ae9-ab35-45fc9aaabe3c": {"doc_hash": "9d8ce89fd7bab8ea3ff849ce7af83ce41b204a8281385a386dc0a9b3d9825701", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "2f4e32c2-068f-47a2-9f5c-e6506f3284eb": {"doc_hash": "8887a282e2136987ec79d415807d6624dee3ff2f1cd297aa153065989c0ef87f", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "f870af83-d3c2-4694-bde7-69503fa68bbc": {"doc_hash": "031ed8ecc5c8ba071b71f7df377625cbe28a04c30b4cd3fc7022be0e29b4178c", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "bf102095-bcaf-40e1-b6d2-f9fb46072f0b": {"doc_hash": "5450a0ae3884faedf829dffe85b97ad93cf4d34986504747110cbba1cb54e1cb", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "988626d6-e29d-4b8a-8a84-e5d2cc7ee134": {"doc_hash": "76cfff4cf76ea31d6d462d10cd87afc0b9c54472462634fd4e2139b0d85d65f0", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "9bf7b273-05ea-4e92-a440-a5d4e5101e87": {"doc_hash": "dbcd4bbd0b616a967b5b4c591f35e141e780d1aff7f93a828bab0459873e6a4e", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "bc1f7601-3d82-4a79-a244-3a11b57b2d44": {"doc_hash": "effb7a813e40f78f1955c8a04b08ecb9360dfdce871005f096b7f29c64ffe771", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "80bc24f8-cafd-481c-8481-840735b472f8": {"doc_hash": "5805b34c7741e973027e59eb0ac0085f29d522e301b1658216852ba2976ab03e", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "3436957c-c2ee-4b48-b228-429efeaee721": {"doc_hash": "1da1e232d2f956e082e18d14c3a41211bf58de011cdbf8c66204f6a865596903", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "1884e717-c247-4f02-a65b-05b238f316b8": {"doc_hash": "94fbe08e7815f5fc2e0dc0cfe5784da2e316982db28de7930b0774e1a270bb40", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "6c9b34f7-f8f0-4583-a81a-bc47faa28aaf": {"doc_hash": "04ed41942e79c9b2b6e5915027f89cee2e54813b86fe5b5f0da2b8368feaa8e7", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "e0148740-d1b8-49ba-9f00-7cd08fef2476": {"doc_hash": "55033a806e46f652a3e4155e8b271834f4381da66107627a73e10ae1b2cffb8d", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}, "0d9699a0-b53c-4c81-be26-c57ebc3dc83f": {"doc_hash": "044efe76462c3863e2fc1c169b4d16c2a3e84a7be0244ac2ee70cae5b62dc410", "ref_doc_id": "6ec02064-2ad7-4e88-b341-70be8233c7d5"}}, "docstore/ref_doc_info": {"2622ac34-fa12-421d-9ab9-4a33c9e6e032": {"node_ids": ["9245bb40-0800-49bd-a1f5-4215a359c6c4", "cf078808-784c-4859-b8d3-8376c578590a", "d9690d15-167a-4172-89a2-037689e769ff", "52f49ca0-7cb7-4444-a1f4-1823b84ebcdb"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_dependency.cpp", "file_name": "ddm_dependency.cpp", "file_size": 3648, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "4333a828-4e33-4f01-b126-6ae6c52c135c": {"node_ids": ["5c927a18-2ffb-47e0-a4b6-db0edc2bc979", "68a46f5a-4b58-4621-b10f-653010848c31", "42233464-548a-4e90-b88e-f988dbb6b852", "3c9fec90-f031-4b0c-8fc8-0339bcc0c7c9", "e3df1c42-4f08-4cfc-addb-e806ceb8f7aa", "f61a2cff-604d-49d5-ad21-e959f78d27ae", "a09e8da6-d20c-4b21-bf74-0091b505402f", "475b7cad-0a4a-43c1-ab54-e134f78451b4", "270edb30-914b-4449-bd65-98bacfc6d402", "ae047793-00fa-4b93-9b3d-0b7421b13c8b", "b3528d51-2ad4-4015-8b6f-5b33adfdb788", "67cb593d-2584-4af7-94e9-abf744423f71", "c28d7e86-efe3-4f21-bc24-430f855dba55", "e652b2f3-43a7-410e-a620-edcefef834ca", "dfb3623f-7293-4f31-95a9-9fce2466e46c", "73edc49a-a90a-4b6f-80fb-ee14b4b1d42e", "a3de67d6-528b-4ed2-8170-0aac0c1c7e53", "332d62c6-3118-45a1-b8a7-b34cbe7b160c", "821689d6-9a72-4ee6-a289-a699df207061", "41917d8a-aab7-4a09-a0ae-3bc5bc865e78", "269e7645-0ed9-4648-9840-f6fb08990d19", "dc64592d-fee2-484e-a6fd-9f59e8662fc9", "0c8d7b23-252f-4342-a740-46c77be2531f"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_lf_alp.cpp", "file_name": "ddm_lf_alp.cpp", "file_size": 13373, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "00a8c872-0f52-402b-9472-cc3122a11f16": {"node_ids": ["a5a35155-e0b0-457c-ad59-0ff23020bd07", "ac695dc9-118e-469a-9ca6-52c473b773a0", "b58d641c-e492-456f-8da5-2811ddba2e21", "d5d727f2-dbcd-4625-926e-3fc9a484ad87", "202658c2-1fa9-43ce-9c07-897999932c28", "eb275589-2fa9-41a1-9ab3-5cfc6e5bcf26", "55c8ed58-499f-4091-bf39-0a901f356611", "476eb489-3916-46eb-ae47-d4e9fbede8ff", "c5ab945d-41fd-488f-b8a1-0846add98aa0", "884497b2-26ef-41ba-bb23-b2f1275d6ea1", "77f2ce6b-a0d4-4dcf-84a7-694cd55f53a1", "2cc97256-518d-4efa-8662-79cee4ff03ee", "175e13d4-bf93-428f-85e6-e43d5c78ba6c", "15cdd690-17f2-4598-a8f4-6d8adee1fa67", "914cf16d-a45c-46f9-be6b-7fed0cb9091b", "0ae1176f-cbdc-42df-a78f-4baf2616881a", "e211eb53-c789-445b-9714-e35baab33ba5", "4a0bf643-958c-4b34-81a6-ded2860f3df2", "23c1764f-f356-497d-bea6-7ad1da0c455f", "3b7fb880-a1df-4ab5-81cf-b90eb535d8d0", "06154d55-e5de-4fb7-8dd8-d76b60c8ef26", "092921ec-61f1-40bc-a476-9d4977896123", "4ee50a76-fc23-4cb0-8db8-29dba372854c", "21d586a4-cf75-4a9a-9a0e-77fe7b9096f7", "a6d903dc-d190-4610-a122-e997a6fdb0c9"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_over_nested.cpp", "file_name": "ddm_over_nested.cpp", "file_size": 19005, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "73cdc8af-0384-4b22-98b3-fe9c225bfbd4": {"node_ids": ["16f9e732-6277-4ad8-b345-3068d200afb7", "3d9e8e82-0eb2-4d4d-9997-67bcff4cfecb", "1a1bb7e0-0c35-444a-be28-8a8be05f7a0f", "0c2118e2-b9d8-4b8b-9462-d5f6ef0f166f", "74bd82a6-44b4-4d20-af08-f536081ad8be", "7e76b154-5b2c-4970-a140-508651ca9389", "bfae1073-1d00-483f-9661-a642bec61159", "a4e7e759-3cb9-488d-bf75-2222b36130a0", "e2fb8fbc-8e78-40d5-953a-caadd75862dd", "1edbdabe-eb97-4ce7-bd39-cb5c5a0fb8b5", "9778ef46-3a65-47e4-a5be-3f3c4c8dc77e", "68cc52ce-1c57-4f01-8ec6-2af7c301361a", "b15b35e8-ae13-4e86-bf09-df585fee304d", "3c257bb0-ccf4-4a4c-8fbc-f51d7e3e802b", "8a938b1c-945a-4c65-8e85-dcb6dab5bdc4", "1d5e0812-0e70-413b-98ae-b18c8204cf08", "ffe79e30-422b-4b87-a35a-03d08267c8d6", "81720a34-d609-44ea-8efe-4a3c43b89ef4", "f5a8e7e7-d57c-459e-8374-88977e31a036", "4583ad66-eb65-4025-8073-126a432f1b43", "d07af689-29a5-444d-aae5-f18379e39480", "59ebc952-9c88-484e-b535-6c42158d0b08", "f843c3e2-4291-4e57-847d-c72d15b89076", "3089e355-b561-4ab8-a9a5-6027645d7c14", "a0560093-c007-4d8a-b9f8-969797afb101", "8dbc4447-4d87-4b28-828d-58462ad34a3d", "79210568-ff53-437c-a917-f18a83c9a7e6", "5b1c3568-6ad8-4133-a6d9-cc7bf2c9ac05", "e2555441-7829-479e-832b-0352b2371b1f", "7bce2934-66b6-4917-8c91-1edb9e2f789c", "1c4ed300-34ae-4a9d-b03f-1ecb06ccdcd3", "79dab1f9-612f-4f28-84f9-17a73ff0d6d3", "226aebd8-31dd-4751-8404-2fba2cf9748b", "5a4503d4-3184-4127-920c-e684eb1464d8", "a5cb2300-7fc4-43b0-ae76-bac4aea81aeb", "6c3a6f79-f180-4106-898b-989c3886502a", "eeee25ef-9b10-4112-a4af-3af5c5c15144", "4b32f9a0-b9e0-4c2c-b96f-243280c1f289", "98426c07-1374-4f47-aee7-967d2b84cac3", "2b8ad4d8-e167-40a3-bc14-18e18ddd6831", "32a9d49f-08f9-47e4-b7fa-69e92ffe7adb", "02bf4e34-eac2-491a-8053-df957155aa07", "43613727-dc5d-4995-b53e-8e8a1a338eea"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_permission.cpp", "file_name": "ddm_permission.cpp", "file_size": 30902, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "9557e0c2-0024-42ed-919d-7c2142097152": {"node_ids": ["73703f54-526d-4829-b166-2c90874b7dc6", "b9bff384-ca88-4e90-8d5b-d30a89ebda1c", "b28c06e5-42f3-46fe-8a05-e34180249556", "e31416f6-d191-4d9e-b180-6e416b7cca33", "8975368a-7008-4e60-9f04-fbe124cbb417", "fb9fd3ac-725d-477e-bc20-0983fe9de6d8", "cae8229a-e2de-4102-8d43-7ed34de986b7", "32a90ff7-6500-4ae5-b85a-6bfd87668b61", "3b2fc977-c44b-46fd-9f0f-682ae78c96fa", "0c5584b8-8e06-4892-b1aa-f58d47e05d4e", "d9e60313-8e55-49c6-b1ce-9610646496ee", "adc53d4f-bd2b-450f-beac-388317022328", "61ff32d4-be67-47cf-9069-f97f002c4734", "98f81877-acb7-4c69-9c94-bfd1453bcd00", "311e9acb-7952-4ba0-b00f-58773cf8be35", "05825c97-ea11-48e4-9d27-559072bb8020", "8dfbd71c-c16f-4642-bb38-55a9609a8bb5", "77712060-501f-496b-8bc5-80755238d20d", "3717998c-13b0-4dbb-adb8-116c062e657a", "89adac70-d645-4814-85c8-b2c312dc0210", "ae4122df-6b4d-43d3-b6ee-415f9a0dd3cc", "7d4c0607-13d4-4e17-bac5-aba809318886", "3f73ea23-0eac-4500-9b9d-b8ca1d11ff00", "7874fc48-48bd-48f8-91f0-9cb89dcf8393", "ff1a325f-f2dc-4d9d-bad2-f4d846c565f4", "7e2db37d-c9be-451c-929f-63010759cb1f", "4acd5b89-0107-4f1b-a1d4-7894fd16d65f", "70af5576-f74c-403a-bc8b-ac86c9240a76", "2a440a9a-33b3-4bf2-a5a1-a4f6975bcd83", "ba285a70-0aaa-42bb-9ab5-83fe031914fb", "8607276f-b4ef-4137-972b-a19d410b3a28", "b0288329-5735-47d8-ab44-3d706882e947", "3dc75ed4-d97e-4e76-94d9-24d2a140c976", "fe277f1e-225c-4d51-a6aa-66e7c4241dbc", "10ccda00-9cfb-4276-8b1f-5d5abae00252", "dc060e34-549b-4c5b-b102-cac09e582df5", "11145d74-d3bb-417a-beee-4a824379e617", "120f28e1-f5db-43b5-8ecf-839408a12667", "9d77badd-5185-447f-8a4b-e5fd35933e72", "90f5db5c-4004-4050-b11b-f99f3bb8c2b2", "5d6f612e-437e-44f6-977f-63f778c27430", "00e45e97-41eb-490d-bffb-d31cc3f5a0f0", "3defbf99-4c99-46bc-89da-0ccd39cef4a8", "4385e2aa-f655-4391-a4c4-31640e31549a", "d2eef248-94e4-48d7-8792-42e4daa36060", "12bdaf6c-0dac-49c7-96ef-b610e5f040c0", "209db6ad-cb24-442d-8aab-7c8732dd8fab", "9c1066bb-d663-4c01-be0c-879d2e316c39", "69a0f08f-dc33-4391-bdac-de7b0abc1c90", "d4602de0-8008-422a-9142-193e89789c35", "9fd7969c-0722-4040-9a36-914c0cb5b5c0", "73c47799-4888-4078-84ff-dc65a35af0cc", "5b36e4e3-84de-4052-9d89-a45b9cec9ad9", "1d090e23-ae25-4a9d-8bdc-46428e201f9e", "e76be2bd-1d3b-4c30-811e-8a96dd09c369", "553067b0-471f-44d8-b587-0f547ad3bc97", "c747aeff-f03f-4b03-89e1-ce9fefc06d0e", "96be9a9f-5687-4d04-9461-1411512d6fb5", "28b8a9b7-9527-47d4-ac64-3ffc85e66648", "33c90687-5db2-4af2-88d2-38adf23c5041", "9c7f4139-670c-4f4a-928a-58d6f9f161d2", "e64cd54d-fd5c-4efa-adb3-59bb33e72b51", "c085e418-6a0e-4c48-8333-7998aa306a84", "46fa03e8-7f58-4b07-8258-9672c3b459a7", "08f2066c-5bbf-451d-8879-831ed99a68ba", "c2c9b0d0-93e2-4cb3-8493-bfee1f43d4ab", "456aa230-4add-4ed7-b066-eed356014ce2", "431a8b92-7462-4852-a885-964042e72910", "4e6c8263-3f61-4620-904e-a46ddbbe1c16", "a1bdc427-f56c-476f-887b-48cc55a8d300", "eab28f0d-39b3-461d-b2af-31a9f54d8920", "880558fb-7666-4b8d-b6fa-a739199af742", "13d49da9-dc94-4b0c-add4-4bdcfd7c5c07", "56335313-d079-4f31-be25-4142b4f8da23", "977ef768-78f3-42a9-9891-538067e64ef1", "a0ca6248-36db-4a87-8b33-857292adefe8", "a666ce49-cf6c-4618-bde6-9ba4c99ea6af", "32e240a6-0233-463c-98f1-cc4975a216d8", "0ff55359-12dc-4f0f-88b5-6a17dc325073", "cf676f75-0796-4eda-8e19-5e0f9b5fe47f", "938d8957-203c-4219-b745-f222422dae1d", "9e4980c6-a7e5-4622-856d-11751027ee2a", "91eef65c-e249-4e66-b4fc-c25ddab60581", "9f90d599-f0bc-4651-950b-2b1263e4de4e", "a0a9fad8-5e40-45fa-a8ac-deb67419b3c1", "381b9548-d148-40b9-b7d7-99fd7d6cdd4e", "4c4e0798-15f8-4aa6-aa8a-392dec300240", "fef8aa2a-42ac-4b51-b754-a69339015d8f", "e2bf02f9-634a-49e5-b5be-8e8c995c1011", "9a46643f-13be-4e77-8107-9adedd7b905d", "07c6e72a-31fa-4248-b75e-b7c8a652e072", "2e607898-c92f-44fe-b309-79eb4caad0a7", "c45824e2-30d0-4334-ba08-82414504b82a", "3e037e14-f19b-4386-8421-2e75e23a5dd7"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_policy.cpp", "file_name": "ddm_policy.cpp", "file_size": 61297, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "483b1216-d605-466b-9396-eb456ab30373": {"node_ids": ["1f80863c-4bba-4245-91cb-68dd019b635e", "f7be40b5-29b7-4cf9-aff8-ee744a17a757", "cdd425e6-0794-42f4-84cc-f10981bbd03c", "1947f71f-9d22-4bf3-af47-0024c2ad7bbf", "3c864dca-9227-48d7-a587-b95871f8518d", "84eeb0c6-277a-4139-b6e0-4d056324bb7f", "bc1d0b4c-5482-4e23-aa73-98391de9b45b", "d5aa9896-72ef-457a-87f7-683fd49a76b8", "1e25c674-d287-48e4-868c-1c400dd010d8", "d6444b14-f3f4-47c7-b2ec-895e61c5cf44", "06883569-112a-4bd1-bbdb-308d8429ff03", "a1cbc7da-a1ca-4ae6-881e-50af3a8e2f1f", "f6a49e54-dd20-47e2-b2cc-3dd71cc69652", "c3f95d28-839b-4c48-9915-ec42651875cd", "4c516b04-5953-4e60-acc8-ce2a265c663a", "6bfba5d4-1a3d-40cb-bbc2-d59c67591f62", "05f7911d-78b6-49bb-8903-2437f4d41fa2", "e09c99a8-ea03-4b55-a9a5-1dc79bffe1a1", "4541285f-3bdc-4fdf-83ae-96e8bdc86182", "aa7f2ab7-c768-496a-86c1-92ce0dde780d", "e33ab236-5dad-40b4-ba52-ba092b3c1438", "8c578503-12b1-45c2-a1f3-648f9293416b", "279b04c9-2709-4415-b674-2531b047da69", "513a9f4a-bbb1-44df-ae9a-ca42a940c1b7", "ea89b927-1f68-4925-abf6-3ec6af4f2e74"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_serialization.cpp", "file_name": "ddm_serialization.cpp", "file_size": 12027, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "459394fe-7545-4a18-9265-b95a9d2f85fb": {"node_ids": ["dbabf449-4d6f-485e-8f66-f9bc4207a0c2", "ada30b76-3964-490e-8a21-19dc166af2dd", "8ea89b30-3f99-47d7-8846-cac3158716b0", "6be9a876-0abe-4bd6-87aa-9bef977c0dcd", "02ae218d-1086-42dc-b573-c55c92b63da7", "d131883d-2542-4de6-800f-c18bde4e5ac1", "ece30c98-5d0f-43e5-8432-311c11bda130", "b8b249e0-c4bd-4514-9387-fba3f62770f0", "edc2ad8c-0736-4acc-9a9d-d601416b2003", "bdca9d61-5da7-464c-879b-27189a93a351"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_system_views.cpp", "file_name": "ddm_system_views.cpp", "file_size": 7552, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "d65219ad-8eff-42be-b8cc-9bb261b067a3": {"node_ids": ["21f48525-0308-41f6-b5ff-cd057acbc03b"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_test_helper.cpp", "file_name": "ddm_test_helper.cpp", "file_size": 1482, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "49e9e25e-25f1-40dd-bf87-3f0c87db5499": {"node_ids": ["dc84a66e-e739-41c4-8e7f-134dad2e1423"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/ddm_test_helper.hpp", "file_name": "ddm_test_helper.hpp", "file_size": 1019, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "312dc36c-de6e-4b1a-b1c5-559d89cdac48": {"node_ids": ["6d2cd576-5c01-46d0-b65c-1fff8dcbd19f", "14c0c5b4-c9e1-4689-b8a2-559d99736e00", "64580b5d-0145-49fd-85b8-83295e5cfcff", "aed59d84-7ccf-420c-9623-478b074cb392", "c937bb04-057e-4fde-a71b-24a1463d8ed8", "496a6edd-e885-47b9-8984-317f2b80058b", "4cae9c97-861f-4fa3-a03b-8ac546436f19", "97bc7d84-e480-4dcb-b3eb-042e39b36cdc", "10246811-e001-43e6-8561-9521408ba0b0", "8f41ee34-cf48-44da-9017-ef8b1301bbf5", "98dce371-a0c0-4a04-9a83-2f43653a5b80"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/policy_access.cpp", "file_name": "policy_access.cpp", "file_size": 4823, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "e3d622d1-2122-4da1-96cd-3a6e71bd9d2c": {"node_ids": ["c0b9e8b6-51ad-4dc4-b871-d92e99f782d5", "4cbf960c-2947-4057-b24d-3670bcd117ea", "3bd14241-8a7d-4320-8c9a-810826853061", "70c773d4-0954-4918-809a-194f0cddd4e3", "4250423c-35f8-4352-89b6-a2aa9f0ed03a", "1193f819-983f-44a6-8d4c-439afee4cd40", "24dab265-8a49-46c8-8e1f-34c5b1b1f9b3", "3c8daac1-7b83-4809-a17f-9183586d3b0b", "6529f9db-5104-4ce1-8083-92655ba0c03f", "bfcc8e4a-9cbe-4850-abd8-6f4c041a9634", "d32cb29f-79c1-4662-ab19-f684b7aa87db", "683ebad7-fb86-4a9d-aa3e-c564199ff7f6", "3dda847f-2316-4d13-a4aa-c7c231edc5cd", "bbf2b8b1-7513-4d75-af0f-940abd51b2bf", "13c1b00c-9b11-4a66-b885-765a07dc9a0e", "f80d767d-1bf0-464e-be51-167d0c323a26", "609459a5-793c-4796-ac0a-2eef3dacefbe", "f78aeac8-4453-4b8d-9e98-9a439570ff14", "aa1a4e08-836b-4aa7-a32b-5df73689e70d", "09d52dd5-7643-4bef-9a2c-b575f375b18f", "03808316-69c8-4d7e-849c-92283279942e", "02d4987d-8c31-46bb-bf58-87223a735b3c", "b5780323-d8dd-433b-8ef8-881ed7ffca66", "04133bbc-2b6e-47b3-93ca-08f4775c5b80", "a391d3c2-7219-48f3-ae4c-6cd7188eafc3", "286ea94b-c40a-4618-acfd-4a9b924aa11e", "67ccef92-7afc-466c-b54a-ccd75a2c7c0b", "81b273de-bb09-4aed-896c-12c4d518f515", "6ff73723-467c-4337-be84-9280c5b744a7", "540cac75-5225-4aca-8f1b-34cba9800cb8", "74005b6a-051d-46af-a9b0-0c192cc07c4e", "879fc715-3760-4c87-a625-5f2d5191f6d3", "8544d516-e35e-4195-971d-e776a92232fd", "42a806be-e7a2-4f98-9f7e-6baae6172b0c", "309049f6-139b-4230-a1be-58de154a5769", "8496a818-c52a-4309-8493-8662fd650d97", "26dd57fd-c9bd-4166-a3ad-828d3d40f7cb", "2ae86419-2ace-41ba-8018-5e8cf7cd7adf", "7f8833b8-37d0-4a00-b9da-bb6e5f589a63", "6c794b34-0307-41aa-9fbb-0689391fb537", "86def108-ed27-4437-bdb0-5d3d2bdb49f8", "013b45f2-5236-4328-b5ff-c25189b821e4", "2d7971eb-ca16-4ee7-be9a-0eee8e6e7c08", "7954adf0-aad6-4670-b13d-e1b04fa8d64d"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/rewriter.cpp", "file_name": "rewriter.cpp", "file_size": 31394, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "f292351d-6a62-41ed-a296-c6bca6cb05c8": {"node_ids": ["9a406d80-1ac6-4f93-84a5-1f896fa8e5df", "40b47f40-9bb4-4d01-a950-e4593328b61d", "f3d85fea-f834-4b0c-83ac-0b2a610fe0e6", "1942fa39-5eb0-480a-ab67-230101ff7a5d", "c8085bab-6007-427c-9083-12a6b52faa05", "5cfb40b3-bcbc-4c2f-b644-99b744b87418", "11431ef2-bace-42b3-b838-a11662bfe899", "ea66f83b-c70d-42ef-aab6-7f85be11b3ed", "b66d1bbc-9b94-4809-a699-503c9c5707b5", "02f8b631-b959-42f3-b35b-47205e34c0c2", "b4a0f891-29f1-4cfa-a85b-3ed1dce192c6", "a73e2050-59d1-4410-a077-5a452ef7efbe", "0a7e6901-7ebb-4ed5-8adb-15f2d0bf20d4", "9d66b1e9-85e4-492c-bf6b-f1a3ca8ee4e4", "468c65b0-14e5-42e4-bdef-2fa0d42d51d9", "a8734f3f-92b3-4f5c-8b3f-ab57b74d12ba", "96da04e1-22c4-46b6-8200-aaaa2bef2794", "cbef0c8e-828d-42f7-bd76-adfb732ac9a8", "e540ab8e-f3b4-49a5-ad77-2e2b8b95fb9f", "d3a65d2f-5592-418c-a96b-0e32aca1465a", "17a1ed8e-93c2-4dad-a6d7-33ca3fb78128"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.cpp", "file_name": "test_attach_policy.cpp", "file_size": 13400, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "462a0ba7-096e-4d04-bbe0-8802231ed273": {"node_ids": ["62a7fcb9-0e64-4961-82d7-732bc8843205", "2ebf2c82-087b-4fb5-adda-d174999379be"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_attach_policy.hpp", "file_name": "test_attach_policy.hpp", "file_size": 1530, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "3b1fdba2-5ffc-4238-988e-c963c8f8a973": {"node_ids": ["2c75431d-a252-4457-97ca-dae822a6fcd7", "203fa30f-889a-4b20-8ea4-f9b0dcaad359", "c6b730e0-adec-4a91-b73e-d2606d354c9b", "6230ecf9-37fa-4e88-b791-25c43fe5c675", "03931d7a-d1f0-4171-8615-9ab145781669", "46799270-95c7-48c9-85d7-446648eb7089", "4868997a-370f-4997-9833-bacabc4a032e", "4f2a3a46-b1ef-4cd9-8cad-e46aad4d8ea9", "4bfa466a-677e-4951-8143-eb2a73b330e0", "b10d1b0c-5e23-4c50-9589-ccc3e9fa6567"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.cpp", "file_name": "test_create_policy.cpp", "file_size": 4266, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "40be1f8c-df6b-42e1-9966-53651c2ea9c8": {"node_ids": ["062f71ed-56da-4ee5-9ce5-429a38f6321f"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_create_policy.hpp", "file_name": "test_create_policy.hpp", "file_size": 681, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "4dba8f87-12db-44be-9f2d-f6772f2d8052": {"node_ids": ["1fc1e9cb-3921-4784-8faf-0e4178189d20", "004cca88-e3b9-40f6-8684-dbf6ab133614", "90aa1a71-3d45-4200-81c8-78b3d96639e6", "b05c1cf8-96d8-4e2c-a82d-a3aee836a1df", "ceda3b80-659c-4786-a7d8-ccd6c7fbb9a4", "23edbdcd-462f-40a1-917c-3f5277250517", "3996553f-2995-44e5-b897-ec49c7d72ca6", "58a3e985-a318-4229-a968-d04216d1e94b", "4d3cebae-82a3-4dc7-80ca-39cfae154dff", "1263e12a-2103-4eac-a6c3-e6b904c677f2", "00e17bd2-b9f4-457b-97ef-a672448aa226", "52b6ffa1-37c5-41bf-abd8-46a42c486475", "5084214d-07b9-45cf-9be6-f358e7dce523", "4ab7598c-ca0b-462e-8d82-769aa7f721a6", "5a9cfd7a-b232-43ef-abb7-4dc60a956913", "953aed7e-9d2d-4b00-9e54-cfd69203165c", "0924744a-fbf8-4eb9-b895-029cde6d6b33", "8d780237-530b-4a3d-a54e-1ccb741e48f8", "6ea5cc5c-955f-49bb-a98f-dca6c3745ed5", "d3e5d622-5ec0-4f96-9d04-9250dcc6218e", "5ea222bc-52f1-4e9e-9ff2-aa0381438541", "2eb6cac7-f6ff-4902-aa8e-f65f32aa1428", "64897206-76b6-485d-a2de-f53cadddf9f3", "6bf8eb0a-ca99-4d8e-83c8-439dd4c96cc7", "37b8e2be-52ab-45d9-a28b-f30eef92d25b", "8419a9f3-e49c-4943-9f1e-9c6a933b2cd8", "dbd9cbcf-9309-4efb-ad09-f6c5e5490654", "4bf2a061-8289-4dbd-9d1d-c51e125a54d5", "30970f96-f200-4af1-9a0f-39909c2857b4", "957ec85c-1fc5-44e7-ab5b-388a42f5dd3e", "c5e1b723-74d8-4d4e-ba2e-af24b39aae9b", "80c8cd8f-3209-4cc2-bd81-1a53cb02b33b", "c63f4606-8ac6-4910-bf23-afc0c0ce2c80", "857ce279-dc5e-40c7-af2e-1dfa653ff203", "ad348ea1-9d02-4d7b-8642-5199b6f3c6a6", "5845e4ee-b434-49b7-a7b0-38a640f70eea", "c81027a8-5f19-44ed-9eed-d1e376ffa4fa"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_lf_alp.cpp", "file_name": "test_lf_alp.cpp", "file_size": 28376, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "73ea37d7-22ea-48bb-b6be-79e320eddbc3": {"node_ids": ["ce6b7b37-49df-4b92-8e29-62bbc2d47060", "4a083e25-2bd2-4037-b881-d91ceca6a126", "df8e1476-7b73-4846-9314-92076a5eb819", "3e21be2d-06b4-47a3-8311-f1ecce5054f2", "2e3a0fc4-b2e4-4656-b37f-1a12bda53867", "dd65e54f-66b6-4357-a266-24e028863a55", "1672be59-d030-483d-b735-706ec59bb012", "deeeb361-0690-42c6-9124-fbc1e6bb3bbb", "9e32e683-e58f-496d-bbcd-ae7f2d599ab8", "120a67e2-a03e-4d47-8dc8-edd3b1958968"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.cpp", "file_name": "test_mutator.cpp", "file_size": 6460, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "d3a80a31-b92c-48ba-9c6f-a45e6e2dd55d": {"node_ids": ["08df2dfc-4492-4d2c-813c-68e6914454c1"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_mutator.hpp", "file_name": "test_mutator.hpp", "file_size": 860, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "bce33c78-0d98-4b73-9014-a56d30b4ee33": {"node_ids": ["d81d7bf4-bf6d-4859-8c6d-0cae30590c95", "94225b7e-ca4c-4890-868a-0f6d96688850", "867d55db-d653-4933-911b-cf61bd4e4c27", "a9c1c199-a899-4a21-9093-bad09101f9f2", "a090ba91-8f4c-431b-b618-37dcbd4ba423", "d744c305-9a8e-480f-820a-d5f61ef8522c", "38cba851-bee2-49bc-938e-76c431dffbf8", "36ad888c-2f39-48de-9f3a-469b3919637c", "af3aaadf-dc33-4cad-bc09-3ce4a736518b", "0362cf76-d4ec-42ca-ace3-0c412f276cec", "86cf368d-4c8a-4dbf-9ba2-1055559d1309", "b99a035e-f880-4bad-80a5-289c17744165", "c59c540d-171f-494e-8208-669fc4406992", "022a3e53-c605-4f2f-909f-b06fb14a9102", "efc048e1-c027-4a32-b855-ec905ee8e0e6", "f375dba6-335e-4f3e-89f3-87e245b3c970", "576903e8-da15-40ce-af4b-3b96efd61bd7", "c0245ee8-3171-4c14-bf97-ca3f2e04a17a", "b1b220eb-f194-46a4-85da-9432d566b1fb", "dbfb9ca3-8299-4dc5-b9f1-706497dbe998", "78091935-38aa-4591-9d1e-a41a917c239a", "3cb85877-0e34-4303-89b6-bad0576eaf29", "35fb228d-54d8-4c3b-a3e6-18b3d942b50a", "bb27c8a9-1290-4e4b-8d39-56ffcdcf4002", "9dec8f1e-3c36-4a48-8e01-12fca62094b8", "16a14e4e-3b9c-4eb9-b3c3-ed2b24293a5e", "a14ec67b-0b3b-447a-81b4-24ebb3c8b1e1", "d027643c-07a6-4fd9-aa04-2c68045a0fd6", "511309a5-be2d-42af-89af-b09a7bd45815", "db9b87cd-3f93-46b1-958a-d98bd11819da", "8b55e477-35db-4451-812e-3a9b9aa5a749", "8a7e6157-1b93-4ec1-80e7-53da96169e19", "12887210-c57f-4327-aac5-93a677061aeb", "3b269556-8ca6-47c6-a425-9fff1351e6ef", "9aaf39db-98a7-4ea6-9644-5787335a2469", "4ac02080-979c-465d-b31a-06cf40653acc", "9279856f-6f84-4293-8c08-a120b3e12a70", "e64f5fd7-68a8-424c-9e4d-1054cfbff1ba", "b6d2ed40-9e6c-4581-b219-004cf1106ebd", "36b77334-1c05-49be-a4cf-e1a2906a7974", "2f9aef30-7cac-42aa-a274-1994bc0d9310", "8297c51b-c444-4be5-b20d-c82414aaf824", "4be32de4-c008-4d1f-be8c-4c0c10c718dc", "6e6c8bf5-bc6d-4e74-a23f-b0d41081ebb9", "b5e7609c-02eb-401b-846f-2adcca074e51", "bc9efc4f-fa95-4ca5-a1fd-6b659bcb671e", "fcf77ec5-83ee-4a40-a52b-1d8c2514d23c", "8bd37d18-7575-4228-8f71-13c262bc5e69", "f10c2952-74d9-43fb-a205-ad81f41bbb2d", "87220ecf-619c-40a2-b4b0-f11fdcbcef01", "cab1e94d-3577-45ac-bad8-d85d64cbd6eb", "64d5caab-d60b-4207-aecb-243768c05d4a", "cde0e4b2-ff52-4429-84e5-40695e3992b4", "fe10bf72-c9f1-4ecc-a410-3a838a83dbc7", "e678f78e-2e3a-4a38-806c-f09f5621c6ff", "f937ac1b-a682-47e6-81f1-130bf9d76787", "e3636c26-f55e-4a29-8c3a-734d38db6d7e", "92945aed-d1b1-4e20-903f-959ed7223ff6", "2039f1cc-503f-4ae6-8949-953567876a98", "7f45842e-0d79-4254-8d34-98b1a8ee14a0", "00821d85-3372-472f-b0b9-aa72dceec6ab", "606b7522-dbf5-4b0f-8894-8d0912e65f4b", "73ed6578-15cf-4dd6-8731-ddc4431cba33", "26770ea6-8065-4bf9-a462-8978680fd074"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_over_nested.cpp", "file_name": "test_over_nested.cpp", "file_size": 42785, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "4f01e23e-6795-4d05-b42e-88a2a7422ec5": {"node_ids": ["79c64ee6-0ef5-4147-84f0-74cda9160f56", "28843f5c-027e-4640-8f71-c2cbaaecb790", "e3b63e8d-2dc3-4002-95ef-30ecd17fd2bb", "896e2f5f-22bb-4a76-a7b2-589ba75d9511", "af72b396-8261-4fed-ac63-e80882495d21", "c3236c08-44a3-4b10-8ba7-97f2c9e9cf59", "02bd796a-eab9-464d-b396-8b24cf4d0a26", "935a133d-2b7c-4a69-86c4-4d4314ae6500", "05c367ed-c232-4b94-af64-3868df296993", "c7e46b48-27c8-4cc6-b484-703254d91898", "a76d628f-3138-4b7b-91ba-999ee465b00c", "7777206e-f6f5-4baa-bf21-acd646a0313a", "2b98a182-429b-44ae-bb9c-b4fe0531a312", "73fdaf56-0d2f-422b-95b1-7735bbb14443", "aafb638f-3afc-45b7-97be-49b39bdf59dc", "84e59b79-6f51-4727-be87-b5ae94cd506f", "4e9e619d-e677-40f8-a90d-3948ffd7dfac", "e15dc216-f92a-4262-b042-a03fc5f67bfa", "94efb77b-835b-4911-ac48-51ee05997b65", "6714d67d-ea2d-40a7-b76d-b93353f963d6", "7e403885-7ad3-458b-94d9-dd8f23e62c0c", "d7aae311-54c7-4edc-92e0-ac250bd81cc1", "a361d5f5-40c7-4f69-a0ff-dd5ee33a777b", "51ac282e-df36-4fa5-91d0-b001a5072967", "16b8f179-a722-48ba-8664-490e943cd22b", "93d3dedb-77c4-41a6-8708-2f880e51eb73", "d6a3ee35-ec62-4b5b-8b5b-886d9d2a0d21", "5174d3d2-a028-4db2-a302-fa32ec475634", "6be90f90-c0f5-4fca-80c0-db4119d80fbd", "027da57c-265c-4ec2-8ec6-d96f6ba7afce", "a790a73c-8a10-4505-9468-ec9a3184a2fe", "5ede0cf9-15fa-45bb-926f-e9d08c497325", "f66d06e3-26a0-44fe-94d0-52c119a99ffa", "4aede4fb-03b1-4bae-83ae-2db1a097c2ac", "1343d2ef-acca-4fd2-84de-9e4311b4b378", "5949259c-5320-4ec1-9b1e-3a1e400f2f18", "b1f47d05-99dd-4176-96a8-f8fd9af97f5e", "8fc6fa32-43b9-4233-ac11-f0d5ed115128", "9d89dcf8-edd9-45b3-9a85-560b7a84ad1c", "efdd9b43-f484-4cbc-a0ff-d5f1182a9a8e", "149cc68c-af90-4ac1-a65b-61a8612f018b", "aaa03b22-3c7b-4ef9-b9a7-da0ea666d642", "9a9cf7b6-4489-4d3c-8cbe-4f280beb85c6", "99e9b652-85ec-4b0e-9eaf-5e8a8449e0cc", "17097184-1bc2-4ebd-86f4-e9e827c33672", "5c3b255a-989d-47d9-9fb2-abadd5340d17", "ff7982f9-ce62-46f0-9258-b3b75a1682f2", "e329e16b-4655-46eb-9d74-a34ba5939c05", "a92618b8-71b8-4bd7-8f68-8a8f37304fc8", "d3858494-2609-4331-9c79-574a7ba5e9ce", "77a1c36f-91a2-4f7d-8f8a-d9a118ec98b0", "e3d0718b-b7c1-42e5-b3da-ff99015c6926", "aac590ab-994c-48fa-9877-6296d27b4fc8", "d7a5f1ab-e922-40f8-94f2-1fd1e2a9d02e", "c96edf54-0f17-4761-9f3c-0ae54610543b", "763317e1-bd4a-433d-b6c9-328da150ed68", "a7ca584d-e949-4f4a-89cd-bb30140e29cf", "afcdc4ef-d055-4f8a-844d-63ad1984fc70", "71f385a7-0158-4c36-af20-f0db2a878ca6", "46d494a5-7e6b-4c9b-9f8f-35aa9483aa07", "da8ecf0c-9b4f-42a1-af25-4ddd738dad4c", "caaedc24-2e2c-4963-b2ce-27380880a642", "0834a1c2-ce5f-4f29-9f65-8e8270275314", "01dce63c-1d06-4e4b-b853-577d58c5b1c6", "b282dd10-38f8-4085-a73e-e9bb9275052f", "1b39d0b0-c7c2-4438-96ab-c3e4ef0bedf5", "2b4ec2a6-6211-459c-b5c3-17f34e5f5cca", "45601e58-bc2e-48e1-9743-21bb9228fc17", "218ed781-189e-4e12-a69b-c8e9bc74670e", "4eb45b71-29e9-46a8-b784-8e7e3d118c8f"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.cpp", "file_name": "test_policy.cpp", "file_size": 38283, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "0da60b9a-d766-46a6-8ab2-b867c2336373": {"node_ids": ["23e022ae-3d76-4b8d-a070-f6bbae19ed10"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_policy.hpp", "file_name": "test_policy.hpp", "file_size": 487, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "f27e9905-48cc-4a47-a226-48be04cff4e2": {"node_ids": ["c99faa6b-69ba-4d86-ad96-5dc357f636b0", "4e764e9e-7ca0-4ace-b90e-70c74ae29cd0", "f563e927-986a-47b9-aae4-20cd98306159", "4bb73009-b1e9-4e74-83b4-15a3894ea03c", "795b3f44-1423-4f92-82e8-2ac48557dfa5", "4e7505dd-cd34-40ca-806f-94f75b4c5400", "43c4e356-522f-4873-92af-b035ebfed379", "a0805fde-d5b9-467b-a676-5e1c258c9643", "1bf6eef7-581c-40f1-bb07-f1f8fa9b6ea9", "1e171b8f-1bb9-42df-b4b2-752a06a41c7f", "6a46673c-c630-4f9c-ac2a-93845ac24cdb", "597bdb1e-c709-46f7-863b-0db38bafe0b3", "a3bf6c43-726e-400c-8ec1-788a4f7447ac", "ee451377-766f-43bf-a3fb-45df5191d51b", "2009849a-3ded-4b30-8204-5f3e8df16aa5", "0d4da37a-895d-4fd4-a1c6-4f3bcd8f2789", "99d2e2bd-4f86-4fdb-9099-c526e4cac27d", "c2cb6024-84f7-41c9-abc7-b416f5bcc4a8", "d41a49cd-e9ff-4ee0-979e-1ea7ccc7f78a", "cf3d3307-fec9-4980-882b-c7f2f45ff62e", "6e9e1cca-ec8f-4bb8-b8c8-6246dfc7eaca", "ba951554-b3b4-4b0b-a49d-e61b219edd98", "53550ede-f9dc-47ed-a1e9-ff9613e2525b", "cd43b54f-9044-4fa6-b097-2af21845164f", "85e56118-befe-4ec0-9ba3-b0f1c200ace8", "e6b1b332-883c-405f-b977-62c45456e7cb", "f6125d88-3e0f-43f6-b092-420a2ae61705", "b73d0cd7-ebdb-4ca4-b2d0-96d0a3c91cc6", "84dfc870-bfc3-42a5-9496-659f29747995", "66fa68c7-ecf6-4392-a27b-cdeb5e791687", "285de063-b0ca-48cf-807f-df574337b1be", "b35d44a5-1ad3-4428-b557-40536c425b1c", "bc77a395-1ec6-49fe-b726-410f306c3cca", "d1a453ee-cd06-448b-928b-97ddf4ad3772", "5856a581-a72d-4a7b-8315-74119218bf60", "ee7b07ea-ac58-43d7-8ce2-5b976c511d13", "2a25b82a-8067-4e09-bfa1-a56b655575b6", "afbd1185-e1e7-4592-b931-36f87f28e7bd", "b01abded-a851-48ca-b3fb-3b141897be44", "72a24c5d-0af2-46d2-8de4-2708f0a5c6d0", "7eddc888-13f9-4af8-98f4-4575e10f18c2", "a79f7328-7049-4159-adce-057f2ec9907b", "5b3c450b-a9c7-45ad-8c04-54718075daf2", "23fdac87-ef32-4424-b96b-5389498e3144", "3b7aa1d8-1c1f-4882-9e2d-2d30972c8480", "71449a2c-c57a-41a3-95ba-f747ae9ab95f", "bb0c773f-34d7-46f0-be12-d64c552589d7", "7d1f4297-074e-4a70-a81a-0534b9345e79", "5dde757c-c8f1-4bb6-8144-d87e1b58791d", "6335eb88-0513-4c14-834a-2d9a16db3130", "bf296ad4-4b18-4638-b3a8-583b33f55ac8", "6a7688e9-dc2a-4cfb-b1d3-35e449976aca", "fc26d667-aad5-478c-a709-6ed6a565658e", "e39fa721-333d-4f1f-822e-7ab7a298bb12", "ffd1ab51-27a9-447f-a887-dd3cf78e545b", "161a910d-7e78-477c-b2e4-a4acaea34df4", "25b43b5e-7201-4dc7-b2bf-f4858ecf5c89", "112b7b3e-292c-43c1-9e02-063c705eb762", "c0888e7b-ebc6-40e2-9dc2-e37f5a8f29d5", "20a01cb8-dafe-4ab3-a9fe-17eb5e479c98", "cfb21aae-26a7-4235-b96a-c9c5dc9a9c82", "38604e18-3413-48ff-9e63-fad1b2cc1d80", "c05f7c6a-bffd-4603-8740-ac4795dc2435", "9db15c16-fa78-45cd-86d9-98f5a2492fbf", "4721c6bd-039d-48df-a5d5-609a02668a8e", "fdd09bcf-b81a-4664-bc21-f9e1b151183b", "3227b8d4-6e5e-47b6-802d-5d894eecc858", "4eaf2d6f-f3fd-4023-b9ff-6c46d52bb7b2", "562688c1-d9c0-4f51-abbb-d5abf00cb94e", "b3710c6f-dbcd-49e4-94a9-4a684bbb16ea", "0537cbbf-af0a-4f2c-840c-4f5c332ab9b1", "3b97c9fc-480d-4928-b0b5-25f4f702dca0", "6e1867b5-d4bf-430f-9fda-7e0830be3f8f", "58fa609a-766b-4394-9190-03fa4dd1ab86", "288f6a9a-a4a6-4fc1-8904-831cd3831cab", "d4b0b388-2c36-405b-a6f2-7102225319cb", "e72fd28b-09ee-4361-8e3b-eeeabb2d59ef"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.cpp", "file_name": "test_rewriter.cpp", "file_size": 58700, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "f0535384-d287-44f7-b2cf-e70f4570c816": {"node_ids": ["dc80f258-f281-45fd-839b-1efb1aeb7198"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_rewriter.hpp", "file_name": "test_rewriter.hpp", "file_size": 1279, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "100f1905-52d9-4fae-bb55-bce159895188": {"node_ids": ["3831b82c-8f80-4119-8e2b-77b95bab4f1a", "6f6670df-d728-4c87-92ba-d9282a8e14d3", "1994c685-6413-4ca2-b226-b7d0566e9637", "ce2c1f1f-bf08-450d-af80-beb1076b39eb", "8a193c57-e9f9-41e4-b978-6e1745fc1490", "84ea2544-cc56-46a3-8e5d-3c21ac9eb4c6"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_localization_oid_cleanup.cpp", "file_name": "test_seclog_localization_oid_cleanup.cpp", "file_size": 3595, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "55e0ea16-cf98-4ff8-95fa-d2de907ffa6b": {"node_ids": ["017da7a9-f7d5-4af6-bf0f-b7ac5a714b22", "d053bb7d-6879-4875-9887-c8476cd64bb5", "a9dd6f88-9d42-47f9-8f9e-b5e54447f00d", "4ee626c6-bc9f-4198-998e-27cda34fd521", "b29bc0e7-9e63-4e17-aa49-d897c98ff044", "b08b9a97-1913-4205-a343-ed80ca455985", "7f6487df-985f-45b6-93f9-28e0cdede66e", "b72c50be-bc92-41e3-ab34-b5d37cf5f345", "9ce435a6-194e-45b1-b2e3-94ed28833b39", "bfb94d3d-d737-402f-a264-86be080f51c9", "7b637f37-97c7-426e-b60f-3e3913d9862a", "4d08bb69-c319-4f55-bc0a-168bfeeb41f2", "c631e768-60a6-4760-9dcb-c4375eac9082", "a8df01f4-9858-415c-93dc-a86b0b65505b", "3472420a-6439-4736-a1ef-2f0d90b3ec45", "cec44a66-5d64-4b57-bdbb-9c29f6a00487", "96868906-607f-43d7-a1cf-adc9236b333a", "ff871dd5-e47e-4134-82f4-116099458289", "143c74ae-cc9b-41fc-8752-36bf460bbed3", "c99c8289-c006-4ebe-80bb-6d5137173e22", "7244b56e-1dbe-43da-8ce3-8dbff11ab013", "74619776-bdbe-4da4-b08e-c699f0fb33b2", "61303a9b-cd6b-4ff4-91f5-aa9561feb2fd", "a39c795d-d616-4803-a4fd-e80cca02b420", "da8f9ed0-75ff-46c5-8a53-7e18fe47154c", "0cdba97e-f996-4472-8c4b-1fccaef9439f", "b06d7211-160e-46b8-a201-117f9547be2f", "d67a8402-cd90-4d9b-b3a0-d9c52aef257d", "42da87ae-f857-4541-b997-a95ceaa76bc5", "8b7626bb-8669-4fd8-b852-8e8b8c18ce66", "e7b818c1-eacb-43c9-b403-34867ccf84ce", "ab7d108f-2b11-4be0-91d3-adc86c701fed", "5d148dbc-1ad9-4da4-8103-ed26f0bb8c33", "ebf4a5fe-786f-4694-9213-d5dd83dcae69", "394303ca-c3da-47d9-bd4f-870875fd3e5b", "9dceb3a2-9f9a-4b74-a6fa-bbe7b3253d62", "736d7fde-07c0-4b83-a861-67a463e5d4ed", "6045b67c-8e68-4b9b-ae8b-6b7d188911e1", "8b56b3a3-95ea-4860-9a3e-0d98c516e82d"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_seclog_masking.cpp", "file_name": "test_seclog_masking.cpp", "file_size": 21906, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}, "6ec02064-2ad7-4e88-b341-70be8233c7d5": {"node_ids": ["faf7c440-96c3-4f69-b785-0a0aa9311b5a", "5d10bf67-33ea-4f6e-86c4-6c32146510a2", "88e4d427-7dd3-4ae9-ab35-45fc9aaabe3c", "2f4e32c2-068f-47a2-9f5c-e6506f3284eb", "f870af83-d3c2-4694-bde7-69503fa68bbc", "bf102095-bcaf-40e1-b6d2-f9fb46072f0b", "988626d6-e29d-4b8a-8a84-e5d2cc7ee134", "9bf7b273-05ea-4e92-a440-a5d4e5101e87", "bc1f7601-3d82-4a79-a244-3a11b57b2d44", "80bc24f8-cafd-481c-8481-840735b472f8", "3436957c-c2ee-4b48-b228-429efeaee721", "1884e717-c247-4f02-a65b-05b238f316b8", "6c9b34f7-f8f0-4583-a81a-bc47faa28aaf", "e0148740-d1b8-49ba-9f00-7cd08fef2476", "0d9699a0-b53c-4c81-be26-c57ebc3dc83f"], "metadata": {"file_path": "/local/home/deeepakb/Projects/bedrockTest/cpp_Files/test_serialization.cpp", "file_name": "test_serialization.cpp", "file_size": 9252, "creation_date": "2024-10-25", "last_modified_date": "2024-10-25"}}}}